            shamus.lst						Sourcer	v8.01  20-Dec-2023  2:31 am   Page 1


				PAGE  59,132

				;лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл
				;лл					                                 лл
				;лл				SHAMUS	                                 лл
				;лл					                                 лл
				;лл      Created:   25-Dec-96		                                 лл
				;лл      Passes:    5          Analysis	Options on: QRS                  лл
				;лл					                                 лл
				;лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл

				target		EQU   'T5'                      ; Target assembler: TASM-5.0

				include  srmacros.inc

				.286c


				; The following equates show data references outside the range of the program.

     = 0020			data_1e		equ	20h			; (0000:0020=0FEA5h)
     = 0022			data_2e		equ	22h			; (0000:0022=0F000h)
     = 0024			data_3e		equ	24h			; (0000:0024=87h)
     = 0010			data_4e		equ	10h			; (0040:0010=67h)
     = 003F			data_5e		equ	3Fh			; (0040:003F=0)
     = 0000			data_6e		equ	0			; (0050:0000=0)
     = 0000			data_7e		equ	0			; (2F94:0000=0)
     = 0005			data_8e		equ	5			; (2F94:0005=0)
     = 0007			data_9e		equ	7			; (2F94:0007=0)
     = 000C			data_10e	equ	0Ch			; (2F94:000C=0)
     = 0017			data_11e	equ	17h			; (2F94:0017=0)
     = 0018			data_12e	equ	18h			; (2F94:0018=0)
     = 001A			data_13e	equ	1Ah			; (2F94:001A=0)
     = 001C			data_14e	equ	1Ch			; (2F94:001C=0)
     = 0020			data_15e	equ	20h			; (2F94:0020=0)
     = 0024			data_16e	equ	24h			; (2F94:0024=0)
     = 002B			data_17e	equ	2Bh			; (2F94:002B=0)
     = 003A			data_18e	equ	3Ah			; (2F94:003A=0)
     = 0080			PSP_cmd_size	equ	80h			; (2F94:0080=0)
     = 0082			PSP_cmd_tail+1	equ	82h			; (2F94:0082=0)
     = 0088			data_19e	equ	88h			; (2F94:0088=0)
     = 00A0			data_20e	equ	0A0h			; (2F94:00A0=0)
     = 00EC			data_21e	equ	0ECh			; (2F94:00EC=0)
     = 00EE			data_23e	equ	0EEh			; (2F94:00EE=0)
     = 00F0			data_24e	equ	0F0h			; (2F94:00F0=0)
     = 00F3			data_25e	equ	0F3h			; (2F94:00F3=0)
     = 00F5			data_27e	equ	0F5h			; (2F94:00F5=0)
     = 0000			data_319e	equ	0			; (B800:0000=0DAh)
     = FFFE			data_320e	equ	0FFFEh			; (F000:FFFE=0FCh)

				seg_a		segment	byte public
						assume	cs:seg_a, ds:seg_a


						org	100h

           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 2

				shamus		proc	far

2F94:0100			start:
2F94:0100  EB 67				jmp	short real_start	; (0169)
2F94:0102  90					db	90h
2F94:0103  00			data_28		db	0			;  xref 2F94:0357, 0383, 03F4, 0413
										;            043C, 5FBA, 79D3
2F94:0104  00			data_29		db	0			;  xref 2F94:037E, 040D, 0453
2F94:0105  63C6 6406 644A	pattern_table	dw	63C6h, 6406h, 644Ah	; Data table (indexed access)
										;  xref 2F94:091C
2F94:010B  648A 64CA 650A			dw	648Ah, 64CAh, 650Ah
2F94:0111  654A 658A 63C6			dw	654Ah, 658Ah, 63C6h
2F94:0117  6406 644A 648A			dw	6406h, 644Ah, 648Ah
2F94:011D  64CA 650A 654A			dw	64CAh, 650Ah, 654Ah
2F94:0123  658A					dw	658Ah
2F94:0125  00			data_30		db	0			;  xref 2F94:052C, 2D05
2F94:0126  E6			data_31		db	0E6h			;  xref 2F94:0507
2F94:0127  DC D2 C8 BE AA 96			db	0DCh,0D2h,0C8h,0BEh,0AAh, 96h
2F94:012D  00			data_32		db	0			;  xref 2F94:04DD, 2D00, 308F, 5523
2F94:012E  FF			goback_num	db	0FFh			; count of going back and forth
										;  between rooms?
										;  xref 2F94:04E2, 04EB, 04F3, 04FB
										;            0502, 050A, 2CF3, 3088
										;            37BA, 37C1, 3808, 380F
										;            384F, 3856, 3898, 389F
										;            77F9, 7CA7
2F94:012F  00			data_33		db	0			;  xref 2F94:017F, 051A, 2B53, 2B86
										;            2B8A, 2BB8, 2BEF, 3456
										;            3C80, 60CE, 780E, 7B38
2F94:0130  00FF			data_34		dw	0FFh			;  xref 2F94:047D
2F94:0132  00			joystick_selected	db	0			;  xref 2F94:01FB, 034D, 0361, 0377
										;            12B8, 254A, 25DA, 2679
										;            2726, 345D, 3B9A, 3CC6
										;            517B, 59C5, 5A2A, 5ADF
										;            60B2, 60D5, 77FE, 7A2C
2F94:0133  00			advanced_mode	db	0			;  xref 2F94:0481, 0523, 088B, 2640
										;            2648, 2832, 2B45, 2B4F
										;            2B82, 2BB4, 2BE3, 2C00
										;            60BC
2F94:0134  0000			player_x	dw	0			;  xref 2F94:01D6, 297C, 2A2A, 2D57
										;            35A9, 3635, 3698, 36C0
										;            36E8, 3721, 3786, 37CF
										;            37E1, 381D, 382E, 3873
										;            38BB, 4712, 4724, 4809
										;            4818, 48E3, 48F2, 498C
										;            499B, 4D08, 4D9E, 5236
										;            57B2, 7BBA, 7CAC
2F94:0136  00			player_y	db	0			;  xref 2F94:01D1, 2978, 2A44, 2D5F
										;            35A3, 3628, 3630, 3660
										;            3693, 371C, 374D, 3781
										;            37DD, 382A, 3865, 3877
										;            38AE, 38BF, 471B, 4731
										;            480F, 4825, 48E9, 48FF
										;            4992, 49A8, 4D0C, 4DA2
										;            5244, 57D5, 7BBE, 7CB2
2F94:0137  0000			player_x2	dw	0			;  xref 2F94:01DC, 37D3, 3821, 385F
										;            38A8, 466D, 4671, 7BB6
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 3

										;            7CB7
2F94:0139  00			player_y2	db	0			;  xref 2F94:01E2, 37CA, 3818, 3869
										;            38B2, 7BB2, 7CBD
2F94:013A  01			sound_enabled	db	1			;  xref 2F94:0273, 02B3, 030C, 0345
										;            2763, 29D6, 2A81, 2AA7
										;            35DB, 3952, 3996, 39C4
										;            3A03, 3A33, 3A91, 3AB1
										;            3AE6, 3B1C, 4326, 453E
										;            476C, 488C, 4921, 49F5
										;            5174, 535A, 5424, 544A
										;            54A9, 55BD, 5645, 5670
										;            569D, 583D, 5863, 5889
										;            5945, 5986, 5BE1, 5C2B
										;            6223, 624A, 626F, 6296
										;            62BD, 62E2, 6309, 6330
										;            6355, 6382, 7A07, 7A36
										;            7A5A, 7ADF, 7B08, 7C69
2F94:013B  00			room_num	db	0			;  xref 2F94:0466, 053B, 0541, 079B
										;            07B8, 090A, 0929, 0AA1
										;            0AC2, 2B3C, 2B70, 2BA2
										;            2BD2, 2BF7, 37A2, 37A9
										;            37AD, 37B4, 37F0, 37F7
										;            37FB, 3802, 383D, 3841
										;            3849, 3886, 388A, 3892
										;            4630, 4A3D, 58C6, 602F
										;            604A, 6065, 6085, 7C42
2F94:013C  00			data_35		db	0			;  xref 2F94:5A8D, 5A91, 5A96, 5AF3
										;            5AF7, 5AFC, 5B13, 5B17
										;            5B1C, 5B33, 5B37, 5B3C
										;            5B62, 5B66, 5B6B, 5B82
										;            5B86, 5B8B, 5BA2, 5BA6
										;            5BAB, 5BC6, 77E0, 77E7
										;            784A, 7851, 7894, 789B
										;            78D2, 78D9, 7926, 792D
										;            7967, 796E, 799F, 79A6
										;            79C4, 79CB
2F94:013D  0000			repspr_yofs	dw	0			;  xref 2F94:0565, 059D, 05B7, 05DC
										;            060C, 0638, 06E9, 0702
										;            0729, 074A, 0950, 0997
										;            099C, 09DF
2F94:013F  0000			repspr_savesrc1	dw	0			;  xref 2F94:0941, 0956
2F94:0141  0000			repspr_savesrc2	dw	0			;  xref 2F94:0945, 09A2
2F94:0143  0000			patptr_a	dw	0			;  xref 2F94:0570, 0595, 05CB, 05F0
										;            0616, 0642, 06E5, 0708
										;            072F, 0754, 0920, 0930
2F94:0145  0000			patptr_b	dw	0			;  xref 2F94:0574, 0599, 05C7, 05EC
										;            0612, 063E, 06E1, 070C
										;            0733, 0750, 0926, 0936
2F94:0147  0000			repspr_xofs	dw	0			;  xref 2F94:055F, 0585, 05D3, 05F8
										;            0601, 0632, 06D1, 06F2
										;            0719, 073A, 094C, 0993
2F94:0149  00			repspr_ycount	db	0			;  xref 2F94:056B, 0590, 05C2, 05E7
										;            0607, 064B, 06DC, 06FD
										;            0724, 0740, 098A, 09D6
2F94:014A  00			data_37		db	0			;  xref 2F94:026E, 02D9, 03C7, 03E3
										;            049A, 29CF, 2A7A, 2AE4
										;            35C3, 431F, 450F, 452E
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 4

										;            456E, 5353, 541D, 54A2
										;            5542, 55D9, 5698, 58B9
2F94:014B  0000			data_38		dw	0			;  xref 2F94:0248, 0260, 0264, 0491
										;            07E4, 35BB, 48C4, 48CB
										;            4C19, 568C, 5719
2F94:014D  00			powerup_present	db	0			; from gamestate_a[room_num] & 3
										;  xref 2F94:022F, 0256, 0548, 0551
										;            07DD, 2D9B, 4A46, 4C21
										;            5720, 5728
2F94:014E  00					db	0
2F94:014F  00			data_39		db	0			;  xref 2F94:0228, 07D3, 07EA, 2C75
										;            4DB6
2F94:0150  00					db	0
2F94:0151  01			data_40		db	1			;  xref 2F94:03A9, 299B, 29AC
2F94:0152  00			data_41		db	0			;  xref 2F94:79D8
2F94:0153  00			data_42		db	0			;  xref 2F94:0192, 01A9, 01F6, 02F8
										;            120D, 12C5, 12E6, 131F
										;            7AB6, 7B8D, 7BE6
2F94:0154  6E20 6E38 6E50	digit_glyph_table	dw	6E20h, 6E38h, 6E50h	; table to 0..9 glyphs
										;  xref 2F94:0AB2, 0AD7, 0AEC, 33C8
										;            33E8, 33FB
2F94:015A  6E68 6E80 6E98			dw	6E68h, 6E80h, 6E98h
2F94:0160  6EB0 6EC8 6EE0			dw	6EB0h, 6EC8h, 6EE0h
2F94:0166  6EF8					dw	6EF8h
2F94:0168  00					db	0

				;лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл
				;
				;                       External Entry Point
				;
				;лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл

2F94:0169			real_start:					;  xref 2F94:0100
2F94:0169  8C C8				mov	ax,cs
2F94:016B  8E D8				mov	ds,ax
2F94:016D  E8 7C50				call	sub_28			; (7DC0)
2F94:0170  B8 F000				mov	ax,0F000h
2F94:0173  8E C0				mov	es,ax
2F94:0175 .BF FFFE				mov	di,data_320e		; (F000:FFFE=0FCh)
2F94:0178  26: 8A 05				mov	al,es:[di]
2F94:017B  3C FD				cmp	al,0FDh
2F94:017D  75 08				jne	loc_2			; Jump if not equal
2F94:017F  C6 06 012F 01			mov	[data_33],1		; (2F94:012F=0)
2F94:0184  EB 01				jmp	short loc_2		; (0187)
2F94:0186  90					db	90h
2F94:0187			loc_2:						;  xref 2F94:017D, 0184
2F94:0187  E8 7BB6				call	sub_27			; (7D40)
2F94:018A  B8 B800				mov	ax,0B800h
2F94:018D  8E C0				mov	es,ax
2F94:018F  E8 7C5E				call	set_cga_mode_7df0	; (7DF0)
2F94:0192  C6 06 0153 01			mov	[data_42],1		; (2F94:0153=0)
2F94:0197  E8 1CE4				call	title_screen		; (1E7E)
2F94:019A  E8 0EE8		;*		call	install_int_handler_2_or_3	;*(1085)
2F94:019A  E8 E8 0E				db	0E8h,0E8h, 0Eh
2F94:019D .BE 4DC0				mov	si,offset march_pitches	; (2F94:4DC0=82h)
2F94:01A0 .BD 4F68				mov	bp,offset march_durations	; (2F94:4F68=14h)
2F94:01A3  E8 4F8A				call	play_march		; (5130)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 5

2F94:01A6			loc_3:						;  xref 2F94:0326, 033E
2F94:01A6 њE8 7C47				call	set_cga_mode_7df0	; (7DF0)
2F94:01A9  C6 06 0153 01			mov	[data_42],1		; (2F94:0153=0)
2F94:01AE  E8 21DF				call	setup_screen		; (2390)
2F94:01B1  E8 39E6				call	init_variables		; (3B9A)
2F94:01B4  E8 753F				call	install_int_handler	; (76F6)
2F94:01B7  E8 2AF3				call	update_systick_ax	; (2CAD)
2F94:01BA  A8 01				test	al,1
2F94:01BC  74 10				jz	loc_4			; Jump if zero
2F94:01BE  BB 0002				mov	bx,2
2F94:01C1  C6 87 6B70 01			mov	byte ptr [gamestate_a][bx],1	; (2F94:6B70=52h)
2F94:01C6  BB 0006				mov	bx,6
2F94:01C9  C6 87 6B70 4B			mov	byte ptr [gamestate_a][bx],4Bh	; (2F94:6B70=52h) 'K'
2F94:01CE			loc_4:						;  xref 2F94:01BC
2F94:01CE  E8 028A				call	sub_1			; (045B)
2F94:01D1  C6 06 0136 5C			mov	[player_y],5Ch		; (2F94:0136=0) '\'
2F94:01D6  C7 06 0134 0002			mov	[player_x],2		; (2F94:0134=0)
2F94:01DC  C7 06 0137 0002			mov	[player_x2],2		; (2F94:0137=0)
2F94:01E2  C6 06 0139 5C			mov	[player_y2],5Ch		; (2F94:0139=0) '\'
2F94:01E7  BA 005C				mov	dx,5Ch
2F94:01EA  B9 0002				mov	cx,2
2F94:01ED .BF 6710				mov	di,offset spr_shamus_0	; (2F94:6710=0)
2F94:01F0  BB 3004				mov	bx,3004h
2F94:01F3  E8 113C				call	draw_sprite_xor_v4_check_wall	; (1332)
2F94:01F6  C6 06 0153 00			mov	[data_42],0		; (2F94:0153=0)
2F94:01FB  80 3E 0132 01			cmp	[joystick_selected],1	; (2F94:0132=0)
2F94:0200  74 12				je	loc_5			; Jump if equal
2F94:0202  B0 36				mov	al,36h			; '6'
2F94:0204  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:0206  BB 04B0				mov	bx,4B0h
2F94:0209  8A C3				mov	al,bl
2F94:020B  E6 40				out	40h,al			; port 40h, 8253 timer 0 clock
2F94:020D  8A C7				mov	al,bh
2F94:020F  E6 40				out	40h,al			; port 40h, 8253 timer 0 clock
2F94:0211  EB 0B				jmp	short loc_6		; (021E)
2F94:0213  90					db	90h
2F94:0214			loc_5:						;  xref 2F94:0200
2F94:0214  B0 36				mov	al,36h			; '6'
2F94:0216  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:0218  33 C0				xor	ax,ax			; Zero register
2F94:021A  E6 40				out	40h,al			; port 40h, 8253 timer 0 clock
2F94:021C  E6 40				out	40h,al			; port 40h, 8253 timer 0 clock
2F94:021E			loc_6:						;  xref 2F94:0211, 03D6, 03ED, 03FF
										;            0435, 0447, 0458
2F94:021E њ53					push	bx
2F94:021F  8B 1E 6000				mov	bx,[data_280]		; (2F94:6000=0)
2F94:0223  FF 16 238E				call	word ptr [sync_func_ptr]	; (2F94:238E=7622h)
2F94:0227  5B					pop	bx
2F94:0228  F6 06 014F 01			test	[data_39],1		; (2F94:014F=0)
2F94:022D  74 0D				jz	loc_7			; Jump if zero
2F94:022F  F6 06 014D 01			test	[powerup_present],1	; (2F94:014D=0)
2F94:0234  74 06				jz	loc_7			; Jump if zero
2F94:0236  E8 489A				call	sub_21			; (4AD3)
2F94:0239  E8 49DD				call	sub_10			; (4C19)
2F94:023C			loc_7:						;  xref 2F94:022D, 0234
2F94:023C  E8 2A9C				call	process_foes		; (2CDB)
2F94:023F  E8 519D				call	sub_15			; (53DF)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 6

2F94:0242  E8 4090				call	process_shivs		; (42D5)
2F94:0245  E8 50F7				call	sub_14			; (533F)
2F94:0248  F7 06 014B 0001			test	[data_38],1		; (2F94:014B=0)
2F94:024E  74 06				jz	loc_8			; Jump if zero
2F94:0250  E8 518C				call	sub_15			; (53DF)
2F94:0253  E8 50E9				call	sub_14			; (533F)
2F94:0256			loc_8:						;  xref 2F94:024E
2F94:0256  F6 06 014D 01			test	[powerup_present],1	; (2F94:014D=0)
2F94:025B  74 03				jz	loc_9			; Jump if zero
2F94:025D  E8 4486				call	process_extralife	; (46E6)
2F94:0260			loc_9:						;  xref 2F94:025B
2F94:0260  FF 0E 014B				dec	[data_38]		; (2F94:014B=0)
2F94:0264  A1 014B				mov	ax,[data_38]		; (2F94:014B=0)
2F94:0267  3D 005A				cmp	ax,5Ah
2F94:026A  7F 63				jg	loc_14			; Jump if >
2F94:026C  7C 2C				jl	loc_11			; Jump if <
2F94:026E  C6 06 014A 01			mov	[data_37],1		; (2F94:014A=0)
2F94:0273  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:0278  74 15				jz	loc_10			; Jump if zero
2F94:027A  50					push	ax
2F94:027B  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:027D  0C 03				or	al,3
2F94:027F  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:0281  B0 B6				mov	al,0B6h
2F94:0283  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:0285  B8 7530				mov	ax,7530h
2F94:0288  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:028A  8A C4				mov	al,ah
2F94:028C  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:028E  58					pop	ax
2F94:028F			loc_10:						;  xref 2F94:0278
2F94:028F  B4 0B				mov	ah,0Bh
2F94:0291  B3 01				mov	bl,1
2F94:0293  B7 01				mov	bh,1
2F94:0295  CD 10				int	10h			; Video display   ah=functn 0Bh
										;  set color from bx (CGA modes)
2F94:0297  E9 008F				jmp	loc_18			; (0329)
2F94:029A			loc_11:						;  xref 2F94:026C
2F94:029A  3D 0050				cmp	ax,50h
2F94:029D  74 05				je	loc_12			; Jump if equal
2F94:029F  7C 0B				jl	loc_13			; Jump if <
2F94:02A1  E9 0085				jmp	loc_18			; (0329)
2F94:02A4			loc_12:						;  xref 2F94:029D
2F94:02A4  B4 0B				mov	ah,0Bh
2F94:02A6  B3 00				mov	bl,0
2F94:02A8  B7 01				mov	bh,1
2F94:02AA  CD 10				int	10h			; Video display   ah=functn 0Bh
										;  set color from bx (CGA modes)
2F94:02AC			loc_13:						;  xref 2F94:029F
2F94:02AC  3D 004B				cmp	ax,4Bh
2F94:02AF  7F 78				jg	loc_18			; Jump if >
2F94:02B1  7C 1F				jl	loc_15			; Jump if <
2F94:02B3  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:02B8  74 15				jz	loc_14			; Jump if zero
2F94:02BA  50					push	ax
2F94:02BB  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:02BD  0C 03				or	al,3
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 7

2F94:02BF  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:02C1  B0 B6				mov	al,0B6h
2F94:02C3  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:02C5  B8 4E20				mov	ax,4E20h
2F94:02C8  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:02CA  8A C4				mov	al,ah
2F94:02CC  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:02CE  58					pop	ax
2F94:02CF			loc_14:						;  xref 2F94:026A, 02B8
2F94:02CF  EB 58				jmp	short loc_18		; (0329)
2F94:02D1  90					db	90h
2F94:02D2			loc_15:						;  xref 2F94:02B1
2F94:02D2  3D 003C				cmp	ax,3Ch
2F94:02D5  7F 52				jg	loc_18			; Jump if >
2F94:02D7  7C 10				jl	loc_16			; Jump if <
2F94:02D9  C6 06 014A 00			mov	[data_37],0		; (2F94:014A=0)
2F94:02DE  50					push	ax
2F94:02DF  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:02E1  24 FC				and	al,0FCh
2F94:02E3  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
										;  al = 0, speaker off
2F94:02E5  58					pop	ax
2F94:02E6  EB 41				jmp	short loc_18		; (0329)
2F94:02E8  90					db	90h
2F94:02E9			loc_16:						;  xref 2F94:02D7
2F94:02E9  3D 0000				cmp	ax,0
2F94:02EC  7F 3B				jg	loc_18			; Jump if >
2F94:02EE  E8 529F				call	sub_17			; (5590)
2F94:02F1  83 3E 557E 00			cmp	[data_269],0		; (2F94:557E=0)
2F94:02F6  7E 31				jle	loc_18			; Jump if < or =
2F94:02F8  C6 06 0153 01			mov	[data_42],1		; (2F94:0153=0)
2F94:02FD  E8 24BF				call	score_screen		; (27BF)
2F94:0300  C7 06 0DB0 0000			mov	[keyboard_buf_rdptr],0	; (2F94:0DB0=0)
2F94:0306  C7 06 0DB2 0000			mov	[keyboard_buf_wrptr],0	; (2F94:0DB2=0)
2F94:030C  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:0311  74 09				jz	loc_17			; Jump if zero
2F94:0313 .BE 4DC0				mov	si,offset march_pitches	; (2F94:4DC0=82h)
2F94:0316 .BD 4F68				mov	bp,offset march_durations	; (2F94:4F68=14h)
2F94:0319  E8 4E14				call	play_march		; (5130)
2F94:031C			loc_17:						;  xref 2F94:0311, 0321
2F94:031C  E8 0E59				call	check_stick		; (1178)
2F94:031F  3C 00				cmp	al,0
2F94:0321  74 F9				je	loc_17			; Jump if equal
2F94:0323  E8 7916				call	init_game_variables	; (7C3C)
2F94:0326  E9 FE7D				jmp	loc_3			; (01A6)
2F94:0329			loc_18:						;  xref 2F94:0297, 02A1, 02AF, 02CF
										;            02D5, 02E6, 02EC, 02F6
										;            03A0
2F94:0329 њE8 0E4C				call	check_stick		; (1178)
2F94:032C  80 3E 0DB8 01			cmp	byte ptr [ctrl_pressed],1	; (2F94:0DB8=0)
2F94:0331  75 1A				jne	loc_20			; Jump if not equal
2F94:0333  3C 13				cmp	al,13h
2F94:0335  74 04				je	loc_19			; Jump if equal
2F94:0337  3C 93				cmp	al,93h
2F94:0339  75 06				jne	check_ctrl_s		; Jump if not equal
2F94:033B			loc_19:						;  xref 2F94:0335, 03B7
2F94:033B њE8 78FE				call	init_game_variables	; (7C3C)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 8

2F94:033E  E9 FE65				jmp	loc_3			; (01A6)
2F94:0341			check_ctrl_s:					;  xref 2F94:0339
2F94:0341  3C 1F				cmp	al,1Fh
2F94:0343  75 08				jne	loc_20			; Jump if not equal
2F94:0345  80 36 013A 01			xor	[sound_enabled],1	; (2F94:013A=1)
2F94:034A  EB 01				jmp	short loc_20		; (034D)
2F94:034C  90					db	90h
2F94:034D			loc_20:						;  xref 2F94:0331, 0343, 034A
2F94:034D  80 3E 0132 00			cmp	[joystick_selected],0	; (2F94:0132=0)
2F94:0352  74 03				je	loc_21			; Jump if equal
2F94:0354  E8 5B86				call	sub_21			; (5EDD)
2F94:0357			loc_21:						;  xref 2F94:0352
2F94:0357  80 3E 0103 00			cmp	[data_28],0		; (2F94:0103=0)
2F94:035C  74 03				je	loc_22			; Jump if equal
2F94:035E  E9 00AC				jmp	loc_36			; (040D)
2F94:0361			loc_22:						;  xref 2F94:035C, 0418
2F94:0361 њ80 3E 0132 00			cmp	[joystick_selected],0	; (2F94:0132=0)
2F94:0366  7F 2D				jg	loc_25			; Jump if >
2F94:0368  3C 00				cmp	al,0
2F94:036A  74 2C				je	loc_26			; Jump if equal
2F94:036C  83 3E 3454 00			cmp	[player_dir],0		; (2F94:3454=0)
2F94:0371  75 1F				jne	loc_24			; Jump if not equal
2F94:0373  3C 38				cmp	al,38h			; '8'
2F94:0375  75 14				jne	loc_23			; Jump if not equal
2F94:0377  80 3E 0132 01			cmp	[joystick_selected],1	; (2F94:0132=0)
2F94:037C  74 0D				je	loc_23			; Jump if equal
2F94:037E  C6 06 0104 32			mov	[data_29],32h		; (2F94:0104=0) '2'
2F94:0383  C6 06 0103 01			mov	[data_28],1		; (2F94:0103=0)
2F94:0388  EB 0E				jmp	short loc_26		; (0398)
2F94:038A  90					db	90h
2F94:038B			loc_23:						;  xref 2F94:0375, 037C
2F94:038B  3C 46				cmp	al,46h			; 'F'
2F94:038D  7F 06				jg	loc_25			; Jump if >
2F94:038F  EB 07				jmp	short loc_26		; (0398)
2F94:0391  90					nop
2F94:0392			loc_24:						;  xref 2F94:0371
2F94:0392  EB 5C				jmp	short loc_33		; (03F0)
2F94:0394  90					db	90h
2F94:0395			loc_25:						;  xref 2F94:0366, 038D
2F94:0395  E8 30BE				call	set_player_dir		; (3456)
2F94:0398			loc_26:						;  xref 2F94:036A, 0388, 038F, 0406
										;            040B
2F94:0398 њE8 3208				call	player_walk		; (35A3)
2F94:039B  80 FA FF				cmp	dl,0FFh
2F94:039E  75 02				jne	loc_27			; Jump if not equal
2F94:03A0  EB 87				jmp	short loc_18		; (0329)
2F94:03A2			loc_27:						;  xref 2F94:039E
2F94:03A2  80 3E 1330 00			cmp	byte ptr [collision_1330],0	; (2F94:1330=0)
2F94:03A7  74 10				je	loc_28			; Jump if equal
2F94:03A9  80 3E 0151 00			cmp	[data_40],0		; (2F94:0151=1)
2F94:03AE  74 09				je	loc_28			; Jump if equal
2F94:03B0  E8 7421				call	sub_26			; (77D4)
2F94:03B3  3C FF				cmp	al,0FFh
2F94:03B5  75 02				jne	loc_28			; Jump if not equal
2F94:03B7  EB 82				jmp	short loc_19		; (033B)
2F94:03B9			loc_28:						;  xref 2F94:03A7, 03AE, 03B5
2F94:03B9  83 3E 4582 00			cmp	[data_233],0		; (2F94:4582=0)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 9

2F94:03BE  7F 19				jg	loc_30			; Jump if >
2F94:03C0  80 3E 5313 00			cmp	byte ptr [data_247],0	; (2F94:5313=0)
2F94:03C5  7F 0F				jg	loc_29			; Jump if >
2F94:03C7  80 3E 014A 00			cmp	[data_37],0		; (2F94:014A=0)
2F94:03CC  7F 08				jg	loc_29			; Jump if >
2F94:03CE  50					push	ax
2F94:03CF  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:03D1  24 FC				and	al,0FCh
2F94:03D3  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
										;  al = 0, speaker off
2F94:03D5  58					pop	ax
2F94:03D6			loc_29:						;  xref 2F94:03C5, 03CC
2F94:03D6  E9 FE45				jmp	loc_6			; (021E)
2F94:03D9			loc_30:						;  xref 2F94:03BE
2F94:03D9  80 3E 4586 04			cmp	byte ptr [data_235],4	; (2F94:4586=0)
2F94:03DE  75 03				jne	loc_31			; Jump if not equal
2F94:03E0  E8 5F8F				call	sub_24			; (6372)
2F94:03E3			loc_31:						;  xref 2F94:03DE
2F94:03E3  80 3E 014A 00			cmp	[data_37],0		; (2F94:014A=0)
2F94:03E8  7F 03				jg	loc_32			; Jump if >
2F94:03EA  E8 5E03				call	sub_23			; (61F0)
2F94:03ED			loc_32:						;  xref 2F94:03E8
2F94:03ED  E9 FE2E				jmp	loc_6			; (021E)
2F94:03F0			loc_33:						;  xref 2F94:0392
2F94:03F0  3C 38				cmp	al,38h			; '8'
2F94:03F2  75 0E				jne	loc_34			; Jump if not equal
2F94:03F4  C6 06 0103 01			mov	[data_28],1		; (2F94:0103=0)
2F94:03F9  A1 3454				mov	ax,[player_dir]		; (2F94:3454=0)
2F94:03FC  E8 2575				call	process_player		; (2974)
2F94:03FF  E9 FE1C				jmp	loc_6			; (021E)
2F94:0402			loc_34:						;  xref 2F94:03F2
2F94:0402  3C 47				cmp	al,47h			; 'G'
2F94:0404  73 02				jae	loc_35			; Jump if above or =
2F94:0406  EB 90				jmp	short loc_26		; (0398)
2F94:0408			loc_35:						;  xref 2F94:0404
2F94:0408  E8 304B				call	set_player_dir		; (3456)
2F94:040B  EB 8B				jmp	short loc_26		; (0398)
2F94:040D			loc_36:						;  xref 2F94:035E
2F94:040D  FE 0E 0104				dec	[data_29]		; (2F94:0104=0)
2F94:0411  75 08				jnz	loc_37			; Jump if not zero
2F94:0413  C6 06 0103 00			mov	[data_28],0		; (2F94:0103=0)
2F94:0418  E9 FF46				jmp	loc_22			; (0361)
2F94:041B			loc_37:						;  xref 2F94:0411
2F94:041B  83 3E 4582 00			cmp	[data_233],0		; (2F94:4582=0)
2F94:0420  74 0A				je	loc_38			; Jump if equal
2F94:0422  80 3E 4586 04			cmp	byte ptr [data_235],4	; (2F94:4586=0)
2F94:0427  75 03				jne	loc_38			; Jump if not equal
2F94:0429  E8 5F46				call	sub_24			; (6372)
2F94:042C			loc_38:						;  xref 2F94:0420, 0427
2F94:042C  3C 46				cmp	al,46h			; 'F'
2F94:042E  77 08				ja	loc_39			; Jump if above
2F94:0430  33 C0				xor	ax,ax			; Zero register
2F94:0432  E8 253F				call	process_player		; (2974)
2F94:0435  E9 FDE6				jmp	loc_6			; (021E)
2F94:0438			loc_39:						;  xref 2F94:042E
2F94:0438  3C B8				cmp	al,0B8h
2F94:043A  75 0E				jne	loc_40			; Jump if not equal
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 10

2F94:043C  C6 06 0103 00			mov	[data_28],0		; (2F94:0103=0)
2F94:0441  B8 0000				mov	ax,0
2F94:0444  E8 252D				call	process_player		; (2974)
2F94:0447  E9 FDD4				jmp	loc_6			; (021E)
2F94:044A			loc_40:						;  xref 2F94:043A
2F94:044A  E8 3009				call	set_player_dir		; (3456)
2F94:044D  A1 3454				mov	ax,[player_dir]		; (2F94:3454=0)
2F94:0450  E8 2521				call	process_player		; (2974)
2F94:0453  C6 06 0104 05			mov	[data_29],5		; (2F94:0104=0)
2F94:0458  E9 FDC3				jmp	loc_6			; (021E)

				shamus		endp

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                              SUBROUTINE
				;
				;         Called from:   2F94:01CE, 37D7, 3825, 386D, 38B6, 7BAF
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:045B			sub_1		proc	near
2F94:045B  50					push	ax
2F94:045C  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:045E  24 FC				and	al,0FCh
2F94:0460  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
										;  al = 0, speaker off
2F94:0462  58					pop	ax
2F94:0463  E8 798A				call	set_cga_mode_7df0	; (7DF0)
2F94:0466  80 3E 013B 7F			cmp	[room_num],7Fh		; (2F94:013B=0)
2F94:046B  72 08				jb	loc_41			; Jump if below
2F94:046D  B4 0B				mov	ah,0Bh
2F94:046F  B3 01				mov	bl,1
2F94:0471  B7 01				mov	bh,1
2F94:0473  CD 10				int	10h			; Video display   ah=functn 0Bh
										;  set color from bx (CGA modes)
2F94:0475			loc_41:						;  xref 2F94:046B
2F94:0475  C6 06 3CF1 00			mov	byte ptr [joy_dir],0	; (2F94:3CF1=0)
2F94:047A  A1 2B03				mov	ax,[systick_2b03]	; (2F94:2B03=0)
2F94:047D  23 06 0130				and	ax,[data_34]		; (2F94:0130=0FFh)
2F94:0481  80 3E 0133 00			cmp	[advanced_mode],0	; (2F94:0133=0)
2F94:0486  74 06				je	loc_42			; Jump if equal
2F94:0488  05 00C8				add	ax,0C8h
2F94:048B  EB 04				jmp	short loc_43		; (0491)
2F94:048D  90					db	90h
2F94:048E			loc_42:						;  xref 2F94:0486
2F94:048E  05 012C				add	ax,12Ch
2F94:0491			loc_43:						;  xref 2F94:048B
2F94:0491  A3 014B				mov	[data_38],ax		; (2F94:014B=0)
2F94:0494  C7 06 4582 0000			mov	[data_233],0		; (2F94:4582=0)
2F94:049A  C6 06 014A 00			mov	[data_37],0		; (2F94:014A=0)
2F94:049F  C6 06 5560 00			mov	byte ptr [data_254],0	; (2F94:5560=0)
2F94:04A4  C6 06 556E 01			mov	byte ptr [data_259],1	; (2F94:556E=0)
2F94:04A9 .BB 2930				mov	bx,offset shivs_data	; (2F94:2930=0)
2F94:04AC  C6 07 00				mov	byte ptr [bx],0
2F94:04AF  83 C3 05				add	bx,5
2F94:04B2  C6 07 00				mov	byte ptr [bx],0
2F94:04B5  BB 52E0				mov	bx,52E0h
2F94:04B8  C6 07 00				mov	byte ptr [bx],0
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 11

2F94:04BB  83 C3 05				add	bx,5
2F94:04BE  C6 07 00				mov	byte ptr [bx],0
2F94:04C1  83 C3 05				add	bx,5
2F94:04C4  C6 07 00				mov	byte ptr [bx],0
2F94:04C7  83 C3 05				add	bx,5
2F94:04CA  C6 07 00				mov	byte ptr [bx],0
2F94:04CD  83 C3 05				add	bx,5
2F94:04D0  C6 07 00				mov	byte ptr [bx],0
2F94:04D3  C6 06 5313 00			mov	byte ptr [data_247],0	; (2F94:5313=0)
2F94:04D8  C6 06 293B 00			mov	byte ptr [num_shivs],0	; (2F94:293B=0)
2F94:04DD  C6 06 012D 00			mov	[data_32],0		; (2F94:012D=0)
2F94:04E2  80 3E 012E 00			cmp	[goback_num],0		; (2F94:012E=0FFh)
2F94:04E7  7F 12				jg	loc_45			; Jump if >
2F94:04E9  7C 08				jl	loc_44			; Jump if <
2F94:04EB  C6 06 012E 01			mov	[goback_num],1		; (2F94:012E=0FFh)
2F94:04F0  EB 09				jmp	short loc_45		; (04FB)
2F94:04F2  90					db	90h
2F94:04F3			loc_44:						;  xref 2F94:04E9
2F94:04F3  C6 06 012E 00			mov	[goback_num],0		; (2F94:012E=0FFh)
2F94:04F8  EB 38				jmp	short loc_49		; (0532)
2F94:04FA  90					db	90h
2F94:04FB			loc_45:						;  xref 2F94:04E7, 04F0
2F94:04FB  80 3E 012E 06			cmp	[goback_num],6		; (2F94:012E=0FFh)
2F94:0500  76 05				jbe	loc_46			; Jump if below or =
2F94:0502  C6 06 012E 06			mov	[goback_num],6		; (2F94:012E=0FFh)
2F94:0507			loc_46:						;  xref 2F94:0500
2F94:0507 .BB 0126				mov	bx,offset data_31	; (2F94:0126=0E6h)
2F94:050A  A0 012E				mov	al,[goback_num]		; (2F94:012E=0FFh)
2F94:050D  98					cbw				; Convrt byte to word
2F94:050E  03 D8				add	bx,ax
2F94:0510  8A 0F				mov	cl,[bx]
2F94:0512  A1 2B03				mov	ax,[systick_2b03]	; (2F94:2B03=0)
2F94:0515  25 000F				and	ax,0Fh
2F94:0518  02 C1				add	al,cl
2F94:051A  80 3E 012F 00			cmp	[data_33],0		; (2F94:012F=0)
2F94:051F  74 02				je	loc_47			; Jump if equal
2F94:0521  2C 0F				sub	al,0Fh
2F94:0523			loc_47:						;  xref 2F94:051F
2F94:0523  80 3E 0133 00			cmp	[advanced_mode],0	; (2F94:0133=0)
2F94:0528  74 02				je	loc_48			; Jump if equal
2F94:052A  2C 0F				sub	al,0Fh
2F94:052C			loc_48:						;  xref 2F94:0528
2F94:052C  A2 0125				mov	[data_30],al		; (2F94:0125=0)
2F94:052F  A2 2B02				mov	[data_158],al		; (2F94:2B02=17h)
2F94:0532			loc_49:						;  xref 2F94:04F8
2F94:0532  E8 03D5				call	room_to_pattern		; (090A)
2F94:0535  E8 5AF1				call	init_room_patterns	; (6029)
2F94:0538 .BB 6A70				mov	bx,offset gamestate_b	; (2F94:6A70=49h)
2F94:053B  A0 013B				mov	al,[room_num]		; (2F94:013B=0)
2F94:053E  D7					xlat				; al=[al+[bx]] table
2F94:053F  8A E0				mov	ah,al
2F94:0541  A0 013B				mov	al,[room_num]		; (2F94:013B=0)
2F94:0544 .BB 6B70				mov	bx,offset gamestate_a	; (2F94:6B70=52h)
2F94:0547  D7					xlat				; al=[al+[bx]] table
2F94:0548  C6 06 014D 00			mov	[powerup_present],0	; (2F94:014D=0)
2F94:054D  A8 03				test	al,3
2F94:054F  74 05				jz	loc_50			; Jump if zero
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 12

2F94:0551  C6 06 014D 01			mov	[powerup_present],1	; (2F94:014D=0)
2F94:0556			loc_50:						;  xref 2F94:054F
2F94:0556  F6 C4 03				test	ah,3
2F94:0559  50					push	ax
2F94:055A  74 03				jz	loc_51			; Jump if zero
2F94:055C  E9 0172				jmp	loc_62			; (06D1)
2F94:055F			loc_51:						;  xref 2F94:055A
2F94:055F  C7 06 0147 0000			mov	[repspr_xofs],0		; (2F94:0147=0)
2F94:0565  C7 06 013D 0000			mov	[repspr_yofs],0		; (2F94:013D=0)
2F94:056B  C6 06 0149 07			mov	[repspr_ycount],7	; (2F94:0149=0)
2F94:0570  8B 0E 0143				mov	cx,[patptr_a]		; (2F94:0143=0)
2F94:0574  8B 16 0145				mov	dx,[patptr_b]		; (2F94:0145=0)
2F94:0578  F6 C4 80				test	ah,80h
2F94:057B  74 2C				jz	loc_52			; Jump if zero
2F94:057D  C6 06 63C5 08			mov	byte ptr [repspr_count],8	; (2F94:63C5=0)
2F94:0582  E8 03B8				call	big_pattern_fill	; (093D)
2F94:0585  C7 06 0147 0030			mov	[repspr_xofs],30h	; (2F94:0147=0)
2F94:058B  C6 06 63C5 08			mov	byte ptr [repspr_count],8	; (2F94:63C5=0)
2F94:0590  C6 06 0149 07			mov	[repspr_ycount],7	; (2F94:0149=0)
2F94:0595  8B 0E 0143				mov	cx,[patptr_a]		; (2F94:0143=0)
2F94:0599  8B 16 0145				mov	dx,[patptr_b]		; (2F94:0145=0)
2F94:059D  C7 06 013D 0000			mov	[repspr_yofs],0		; (2F94:013D=0)
2F94:05A3  E8 0397				call	big_pattern_fill	; (093D)
2F94:05A6  EB 09				jmp	short loc_53		; (05B1)
2F94:05A8  90					db	90h
2F94:05A9			loc_52:						;  xref 2F94:057B
2F94:05A9  C6 06 63C5 14			mov	byte ptr [repspr_count],14h	; (2F94:63C5=0)
2F94:05AE  E8 038C				call	big_pattern_fill	; (093D)
2F94:05B1			loc_53:						;  xref 2F94:05A6
2F94:05B1  E8 054A				call	clear_stats_areas	; (0AFE)
2F94:05B4  E8 449A				call	draw_lives		; (4A51)
2F94:05B7  C7 06 013D 0038			mov	[repspr_yofs],38h	; (2F94:013D=0)
2F94:05BD  C6 06 63C5 08			mov	byte ptr [repspr_count],8	; (2F94:63C5=0)
2F94:05C2  C6 06 0149 08			mov	[repspr_ycount],8	; (2F94:0149=0)
2F94:05C7  8B 0E 0145				mov	cx,[patptr_b]		; (2F94:0145=0)
2F94:05CB  8B 16 0143				mov	dx,[patptr_a]		; (2F94:0143=0)
2F94:05CF  A8 80				test	al,80h
2F94:05D1  75 09				jnz	loc_54			; Jump if not zero
2F94:05D3  C7 06 0147 0000			mov	[repspr_xofs],0		; (2F94:0147=0)
2F94:05D9  E8 0361				call	big_pattern_fill	; (093D)
2F94:05DC			loc_54:						;  xref 2F94:05D1
2F94:05DC  C7 06 013D 0038			mov	[repspr_yofs],38h	; (2F94:013D=0)
2F94:05E2  C6 06 63C5 08			mov	byte ptr [repspr_count],8	; (2F94:63C5=0)
2F94:05E7  C6 06 0149 08			mov	[repspr_ycount],8	; (2F94:0149=0)
2F94:05EC  8B 0E 0145				mov	cx,[patptr_b]		; (2F94:0145=0)
2F94:05F0  8B 16 0143				mov	dx,[patptr_a]		; (2F94:0143=0)
2F94:05F4  A8 20				test	al,20h			; ' '
2F94:05F6  75 09				jnz	loc_55			; Jump if not zero
2F94:05F8  C7 06 0147 0030			mov	[repspr_xofs],30h	; (2F94:0147=0)
2F94:05FE  E8 033C				call	big_pattern_fill	; (093D)
2F94:0601			loc_55:						;  xref 2F94:05F6
2F94:0601  C7 06 0147 0000			mov	[repspr_xofs],0		; (2F94:0147=0)
2F94:0607  C6 06 0149 07			mov	[repspr_ycount],7	; (2F94:0149=0)
2F94:060C  C7 06 013D 0078			mov	[repspr_yofs],78h	; (2F94:013D=0)
2F94:0612  8B 0E 0145				mov	cx,[patptr_b]		; (2F94:0145=0)
2F94:0616  8B 16 0143				mov	dx,[patptr_a]		; (2F94:0143=0)
2F94:061A  F6 C4 80				test	ah,80h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 13

2F94:061D  74 0B				jz	loc_56			; Jump if zero
2F94:061F  C6 06 63C5 14			mov	byte ptr [repspr_count],14h	; (2F94:63C5=0)
2F94:0624  E8 0316				call	big_pattern_fill	; (093D)
2F94:0627  EB 2A				jmp	short loc_57		; (0653)
2F94:0629  90					db	90h
2F94:062A			loc_56:						;  xref 2F94:061D
2F94:062A  C6 06 63C5 08			mov	byte ptr [repspr_count],8	; (2F94:63C5=0)
2F94:062F  E8 030B				call	big_pattern_fill	; (093D)
2F94:0632  C7 06 0147 0030			mov	[repspr_xofs],30h	; (2F94:0147=0)
2F94:0638  C7 06 013D 0078			mov	[repspr_yofs],78h	; (2F94:013D=0)
2F94:063E  8B 0E 0145				mov	cx,[patptr_b]		; (2F94:0145=0)
2F94:0642  8B 16 0143				mov	dx,[patptr_a]		; (2F94:0143=0)
2F94:0646  C6 06 63C5 08			mov	byte ptr [repspr_count],8	; (2F94:63C5=0)
2F94:064B  C6 06 0149 07			mov	[repspr_ycount],7	; (2F94:0149=0)
2F94:0650  E8 02EA				call	big_pattern_fill	; (093D)
2F94:0653			loc_57:						;  xref 2F94:0627
2F94:0653  8B 36 6006				mov	si,[pattern_b]		; (2F94:6006=0)
2F94:0657  BB 0802				mov	bx,802h
2F94:065A  F6 C4 80				test	ah,80h
2F94:065D  74 1B				jz	loc_58			; Jump if zero
2F94:065F  32 D2				xor	dl,dl			; Zero register
2F94:0661  B6 20				mov	dh,20h			; ' '
2F94:0663  C6 06 63C5 08			mov	byte ptr [repspr_count],8	; (2F94:63C5=0)
2F94:0668  E8 0428				call	horz_rep_sprite		; (0A93)
2F94:066B  32 D2				xor	dl,dl			; Zero register
2F94:066D  B6 2E				mov	dh,2Eh			; '.'
2F94:066F  C6 06 63C5 08			mov	byte ptr [repspr_count],8	; (2F94:63C5=0)
2F94:0674  E8 041C				call	horz_rep_sprite		; (0A93)
2F94:0677  EB 19				jmp	short loc_59		; (0692)
2F94:0679  90					db	90h
2F94:067A			loc_58:						;  xref 2F94:065D
2F94:067A  B2 78				mov	dl,78h			; 'x'
2F94:067C  B6 20				mov	dh,20h			; ' '
2F94:067E  C6 06 63C5 07			mov	byte ptr [repspr_count],7	; (2F94:63C5=0)
2F94:0683  E8 040D				call	horz_rep_sprite		; (0A93)
2F94:0686  B2 78				mov	dl,78h			; 'x'
2F94:0688  B6 2E				mov	dh,2Eh			; '.'
2F94:068A  C6 06 63C5 07			mov	byte ptr [repspr_count],7	; (2F94:63C5=0)
2F94:068F  E8 0401				call	horz_rep_sprite		; (0A93)
2F94:0692			loc_59:						;  xref 2F94:0677
2F94:0692  A8 80				test	al,80h
2F94:0694  8B 36 6004				mov	si,[pattern_a]		; (2F94:6004=0)
2F94:0698  74 18				jz	loc_60			; Jump if zero
2F94:069A  B2 38				mov	dl,38h			; '8'
2F94:069C  32 F6				xor	dh,dh			; Zero register
2F94:069E  C6 06 63C5 04			mov	byte ptr [repspr_count],4	; (2F94:63C5=0)
2F94:06A3  E8 03DE				call	horz_rep_sprite_4x8	; (0A84)
2F94:06A6  B2 70				mov	dl,70h			; 'p'
2F94:06A8  32 F6				xor	dh,dh			; Zero register
2F94:06AA  C6 06 63C5 04			mov	byte ptr [repspr_count],4	; (2F94:63C5=0)
2F94:06AF  E8 03D2				call	horz_rep_sprite_4x8	; (0A84)
2F94:06B2			loc_60:						;  xref 2F94:0698
2F94:06B2  A8 04				test	al,4
2F94:06B4  74 18				jz	loc_61			; Jump if zero
2F94:06B6  B2 38				mov	dl,38h			; '8'
2F94:06B8  B6 30				mov	dh,30h			; '0'
2F94:06BA  C6 06 63C5 08			mov	byte ptr [repspr_count],8	; (2F94:63C5=0)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 14

2F94:06BF  E8 03C2				call	horz_rep_sprite_4x8	; (0A84)
2F94:06C2  B2 70				mov	dl,70h			; 'p'
2F94:06C4  B6 30				mov	dh,30h			; '0'
2F94:06C6  C6 06 63C5 08			mov	byte ptr [repspr_count],8	; (2F94:63C5=0)
2F94:06CB  E8 03B6				call	horz_rep_sprite_4x8	; (0A84)
2F94:06CE			loc_61:						;  xref 2F94:06B4
2F94:06CE  E9 008D				jmp	loc_63			; (075E)
2F94:06D1			loc_62:						;  xref 2F94:055C
2F94:06D1  C7 06 0147 0000			mov	[repspr_xofs],0		; (2F94:0147=0)
2F94:06D7  C6 06 63C5 04			mov	byte ptr [repspr_count],4	; (2F94:63C5=0)
2F94:06DC  C6 06 0149 07			mov	[repspr_ycount],7	; (2F94:0149=0)
2F94:06E1  8B 0E 0145				mov	cx,[patptr_b]		; (2F94:0145=0)
2F94:06E5  8B 16 0143				mov	dx,[patptr_a]		; (2F94:0143=0)
2F94:06E9  C7 06 013D 0000			mov	[repspr_yofs],0		; (2F94:013D=0)
2F94:06EF  E8 024B				call	big_pattern_fill	; (093D)
2F94:06F2  C7 06 0147 0040			mov	[repspr_xofs],40h	; (2F94:0147=0)
2F94:06F8  C6 06 63C5 04			mov	byte ptr [repspr_count],4	; (2F94:63C5=0)
2F94:06FD  C6 06 0149 07			mov	[repspr_ycount],7	; (2F94:0149=0)
2F94:0702  C7 06 013D 0000			mov	[repspr_yofs],0		; (2F94:013D=0)
2F94:0708  8B 0E 0143				mov	cx,[patptr_a]		; (2F94:0143=0)
2F94:070C  8B 16 0145				mov	dx,[patptr_b]		; (2F94:0145=0)
2F94:0710  E8 022A				call	big_pattern_fill	; (093D)
2F94:0713  E8 03E8				call	clear_stats_areas	; (0AFE)
2F94:0716  E8 4338				call	draw_lives		; (4A51)
2F94:0719  C7 06 0147 0000			mov	[repspr_xofs],0		; (2F94:0147=0)
2F94:071F  C6 06 63C5 04			mov	byte ptr [repspr_count],4	; (2F94:63C5=0)
2F94:0724  C6 06 0149 07			mov	[repspr_ycount],7	; (2F94:0149=0)
2F94:0729  C7 06 013D 0078			mov	[repspr_yofs],78h	; (2F94:013D=0)
2F94:072F  8B 0E 0143				mov	cx,[patptr_a]		; (2F94:0143=0)
2F94:0733  8B 16 0145				mov	dx,[patptr_b]		; (2F94:0145=0)
2F94:0737  E8 0203				call	big_pattern_fill	; (093D)
2F94:073A  C7 06 0147 0040			mov	[repspr_xofs],40h	; (2F94:0147=0)
2F94:0740  C6 06 0149 07			mov	[repspr_ycount],7	; (2F94:0149=0)
2F94:0745  C6 06 63C5 04			mov	byte ptr [repspr_count],4	; (2F94:63C5=0)
2F94:074A  C7 06 013D 0078			mov	[repspr_yofs],78h	; (2F94:013D=0)
2F94:0750  8B 0E 0145				mov	cx,[patptr_b]		; (2F94:0145=0)
2F94:0754  8B 16 0143				mov	dx,[patptr_a]		; (2F94:0143=0)
2F94:0758  E8 01E2				call	big_pattern_fill	; (093D)
2F94:075B  E8 028B				call	sub_2			; (09E9)
2F94:075E			loc_63:						;  xref 2F94:06CE
2F94:075E .BB 0005				mov	bx,data_8e		; (2F94:0005=0)
2F94:0761			loc_64:						;  xref 2F94:0799
2F94:0761  D0 D0				rcl	al,1			; Rotate thru carry
2F94:0763  73 16				jnc	loc_65			; Jump if carry=0
2F94:0765  C6 06 63C5 04			mov	byte ptr [repspr_count],4	; (2F94:63C5=0)
2F94:076A  8A B7 6CF0				mov	dh,[data_292][bx]	; (2F94:6CF0=30h)
2F94:076E  8A 97 6CF6				mov	dl,[data_293][bx]	; (2F94:6CF6=70h)
2F94:0772  53					push	bx
2F94:0773  8B 36 6004				mov	si,[pattern_a]		; (2F94:6004=0)
2F94:0777  E8 030A				call	horz_rep_sprite_4x8	; (0A84)
2F94:077A  5B					pop	bx
2F94:077B			loc_65:						;  xref 2F94:0763
2F94:077B  D0 D4				rcl	ah,1			; Rotate thru carry
2F94:077D  73 19				jnc	loc_66			; Jump if carry=0
2F94:077F  C6 06 63C5 08			mov	byte ptr [repspr_count],8	; (2F94:63C5=0)
2F94:0784  8B 36 6006				mov	si,[pattern_b]		; (2F94:6006=0)
2F94:0788  8A B7 6CFC				mov	dh,[data_294][bx]	; (2F94:6CFC=2Eh)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 15

2F94:078C  8A 97 6D02				mov	dl,[data_295][bx]	; (2F94:6D02=70h)
2F94:0790  53					push	bx
2F94:0791  BB 0802				mov	bx,802h
2F94:0794  E8 02FC				call	horz_rep_sprite		; (0A93)
2F94:0797  5B					pop	bx
2F94:0798			loc_66:						;  xref 2F94:077D
2F94:0798  4B					dec	bx
2F94:0799  79 C6				jns	loc_64			; Jump if not sign
2F94:079B  80 3E 013B 00			cmp	[room_num],0		; (2F94:013B=0)
2F94:07A0  7F 16				jg	loc_67			; Jump if >
2F94:07A2  B2 40				mov	dl,40h			; '@'
2F94:07A4  32 F6				xor	dh,dh			; Zero register
2F94:07A6  C6 06 63C5 06			mov	byte ptr [repspr_count],6	; (2F94:63C5=0)
2F94:07AB  8B 36 6006				mov	si,[pattern_b]		; (2F94:6006=0)
2F94:07AF  BB 0802				mov	bx,802h
2F94:07B2  E8 02DE				call	horz_rep_sprite		; (0A93)
2F94:07B5  EB 1B				jmp	short loc_68		; (07D2)
2F94:07B7  90					db	90h
2F94:07B8			loc_67:						;  xref 2F94:07A0
2F94:07B8  80 3E 013B 7F			cmp	[room_num],7Fh		; (2F94:013B=0)
2F94:07BD  75 13				jne	loc_68			; Jump if not equal
2F94:07BF  B2 40				mov	dl,40h			; '@'
2F94:07C1  B6 4E				mov	dh,4Eh			; 'N'
2F94:07C3  C6 06 63C5 06			mov	byte ptr [repspr_count],6	; (2F94:63C5=0)
2F94:07C8  8B 36 6006				mov	si,[pattern_b]		; (2F94:6006=0)
2F94:07CC  BB 0802				mov	bx,802h
2F94:07CF  E8 02C1				call	horz_rep_sprite		; (0A93)
2F94:07D2			loc_68:						;  xref 2F94:07B5, 07BD
2F94:07D2  58					pop	ax
2F94:07D3  C6 06 014F 00			mov	[data_39],0		; (2F94:014F=0)
2F94:07D8  F6 C4 02				test	ah,2
2F94:07DB  74 35				jz	loc_69			; Jump if zero
2F94:07DD  80 3E 014D 00			cmp	[powerup_present],0	; (2F94:014D=0)
2F94:07E2  74 2E				je	loc_69			; Jump if equal
2F94:07E4  C7 06 014B 02BC			mov	[data_38],2BCh		; (2F94:014B=0)
2F94:07EA  C6 06 014F 01			mov	[data_39],1		; (2F94:014F=0)
2F94:07EF  C6 06 4AD2 07			mov	byte ptr [data_243],7	; (2F94:4AD2=0)
2F94:07F4  B6 1F				mov	dh,1Fh
2F94:07F6  B2 08				mov	dl,8
2F94:07F8 .BE 66DA				mov	si,offset pat4x8_vstripes	; (2F94:66DA=0CCh)
2F94:07FB  BB 0804				mov	bx,804h
2F94:07FE  C6 06 63C5 14			mov	byte ptr [repspr_count],14h	; (2F94:63C5=0)
2F94:0803  E8 028D				call	horz_rep_sprite		; (0A93)
2F94:0806  B6 2F				mov	dh,2Fh			; '/'
2F94:0808  B2 08				mov	dl,8
2F94:080A  C6 06 63C5 14			mov	byte ptr [repspr_count],14h	; (2F94:63C5=0)
2F94:080F  E8 0281				call	horz_rep_sprite		; (0A93)
2F94:0812			loc_69:						;  xref 2F94:07DB, 07E2
2F94:0812  B6 01				mov	dh,1
2F94:0814  B2 C0				mov	dl,0C0h
2F94:0816 .BE 6D78				mov	si,offset pat3x8_R	; (2F94:6D78=0CCh)
2F94:0819  BB 0803				mov	bx,803h
2F94:081C  E8 59A1				call	draw_si_to_screen	; (61C0)
2F94:081F  80 C6 04				add	dh,4
2F94:0822 .BE 6D60				mov	si,offset pat3x8_O	; (2F94:6D60=0Ch)
2F94:0825  E8 5998				call	draw_si_to_screen	; (61C0)
2F94:0828  80 C6 04				add	dh,4
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 16

2F94:082B  E8 5992				call	draw_si_to_screen	; (61C0)
2F94:082E  80 C6 04				add	dh,4
2F94:0831 .BE 6D48				mov	si,offset pat3x8_M	; (2F94:6D48=0CCh)
2F94:0834  E8 5989				call	draw_si_to_screen	; (61C0)
2F94:0837  80 C6 04				add	dh,4
2F94:083A .BE 6E08				mov	si,offset pat4x4_Colon	; (2F94:6E08=0)
2F94:083D  E8 5980				call	draw_si_to_screen	; (61C0)
2F94:0840  B6 28				mov	dh,28h			; '('
2F94:0842 .BE 6D90				mov	si,offset pat3x8_L	; (2F94:6D90=80h)
2F94:0845  E8 5978				call	draw_si_to_screen	; (61C0)
2F94:0848  B6 2C				mov	dh,2Ch			; ','
2F94:084A .BE 6DA8				mov	si,offset pat3x8_E	; (2F94:6DA8=88h)
2F94:084D  E8 5970				call	draw_si_to_screen	; (61C0)
2F94:0850  B6 30				mov	dh,30h			; '0'
2F94:0852 .BE 6DC0				mov	si,offset pat3x8_V	; (2F94:6DC0=80h)
2F94:0855  E8 5968				call	draw_si_to_screen	; (61C0)
2F94:0858  B6 34				mov	dh,34h			; '4'
2F94:085A .BE 6DA8				mov	si,offset pat3x8_E	; (2F94:6DA8=88h)
2F94:085D  E8 5960				call	draw_si_to_screen	; (61C0)
2F94:0860  B6 38				mov	dh,38h			; '8'
2F94:0862 .BE 6D90				mov	si,offset pat3x8_L	; (2F94:6D90=80h)
2F94:0865  E8 5958				call	draw_si_to_screen	; (61C0)
2F94:0868  B6 3C				mov	dh,3Ch			; '<'
2F94:086A .BE 6E08				mov	si,offset pat4x4_Colon	; (2F94:6E08=0)
2F94:086D  E8 5950				call	draw_si_to_screen	; (61C0)
2F94:0870  50					push	ax
2F94:0871  51					push	cx
2F94:0872  52					push	dx
2F94:0873  32 ED				xor	ch,ch			; Zero register
2F94:0875  32 F6				xor	dh,dh			; Zero register
2F94:0877  32 E4				xor	ah,ah			; Zero register
2F94:0879  A0 6008				mov	al,[pattern_n]		; (2F94:6008=1)
2F94:087C  B1 3E				mov	cl,3Eh			; '>'
2F94:087E  B2 C0				mov	dl,0C0h
2F94:0880  E8 2B2E				call	print_level_num		; (33B1)
2F94:0883  5A					pop	dx
2F94:0884  59					pop	cx
2F94:0885  58					pop	ax
2F94:0886  B6 4C				mov	dh,4Ch			; 'L'
2F94:0888  BE 6DF0				mov	si,6DF0h
2F94:088B  80 3E 0133 00			cmp	[advanced_mode],0	; (2F94:0133=0)
2F94:0890  74 03				je	loc_70			; Jump if equal
2F94:0892 .BE 6DD8				mov	si,offset pat3x8_A	; (2F94:6DD8=0)
2F94:0895			loc_70:						;  xref 2F94:0890
2F94:0895  E8 5928				call	draw_si_to_screen	; (61C0)
2F94:0898  F6 C4 02				test	ah,2
2F94:089B  75 06				jnz	loc_71			; Jump if not zero
2F94:089D  E8 227F				call	spawn_monsters		; (2B1F)
2F94:08A0  EB 06				jmp	short loc_72		; (08A8)
2F94:08A2  90					db	90h
2F94:08A3			loc_71:						;  xref 2F94:089B
2F94:08A3  C6 06 741A FF			mov	byte ptr [foe_data_741a],0FFh	; (2F94:741A=0)
2F94:08A8			loc_72:						;  xref 2F94:08A0
2F94:08A8  A8 03				test	al,3
2F94:08AA  74 03				jz	loc_73			; Jump if zero
2F94:08AC  E8 3D0B				call	place_powerup		; (45BA)
2F94:08AF			loc_73:						;  xref 2F94:08AA
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 17

2F94:08AF  E8 01EE				call	display_room_num	; (0AA0)
2F94:08B2  E8 03A4				call	display_score		; (0C59)
2F94:08B5  E8 03B8				call	display_hiscore		; (0C70)
2F94:08B8 .BE 45B5				mov	si,offset found_keys	; (2F94:45B5=0FFh)
2F94:08BB  BA 00B2				mov	dx,0B2h
2F94:08BE  80 3C 00				cmp	byte ptr [si],0
2F94:08C1  7C 11				jl	loc_74			; Jump if <
2F94:08C3  8A 04				mov	al,[si]
2F94:08C5  98					cbw				; Convrt byte to word
2F94:08C6 .BF 7315				mov	di,offset spr_key_4b	; (2F94:7315=55h)
2F94:08C9  BB 0C04				mov	bx,0C04h
2F94:08CC  03 F8				add	di,ax
2F94:08CE  B9 003F				mov	cx,3Fh
2F94:08D1  E8 0C5D				call	draw_sprite_xor_v1	; (1531)
2F94:08D4			loc_74:						;  xref 2F94:08C1
2F94:08D4  46					inc	si
2F94:08D5  80 3C 00				cmp	byte ptr [si],0
2F94:08D8  7C 11				jl	loc_75			; Jump if <
2F94:08DA  8A 04				mov	al,[si]
2F94:08DC  98					cbw				; Convrt byte to word
2F94:08DD .BF 7315				mov	di,offset spr_key_4b	; (2F94:7315=55h)
2F94:08E0  03 F8				add	di,ax
2F94:08E2  B9 0044				mov	cx,44h
2F94:08E5  BB 0C04				mov	bx,0C04h
2F94:08E8  E8 0C46				call	draw_sprite_xor_v1	; (1531)
2F94:08EB			loc_75:						;  xref 2F94:08D8
2F94:08EB  46					inc	si
2F94:08EC  80 3C 00				cmp	byte ptr [si],0
2F94:08EF  7C 11				jl	loc_76			; Jump if <
2F94:08F1  8A 04				mov	al,[si]
2F94:08F3  98					cbw				; Convrt byte to word
2F94:08F4 .BF 7315				mov	di,offset spr_key_4b	; (2F94:7315=55h)
2F94:08F7  03 F8				add	di,ax
2F94:08F9  B9 0049				mov	cx,49h
2F94:08FC  BB 0C04				mov	bx,0C04h
2F94:08FF  E8 0C2F				call	draw_sprite_xor_v1	; (1531)
2F94:0902			loc_76:						;  xref 2F94:08EF
2F94:0902  C6 06 293B 00			mov	byte ptr [num_shivs],0	; (2F94:293B=0)
2F94:0907  B2 FF				mov	dl,0FFh
2F94:0909  C3					retn
				sub_1		endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          room_to_pattern
				;
				;         Called from:   2F94:0532
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:090A			room_to_pattern	proc	near
2F94:090A  A0 013B				mov	al,[room_num]		; (2F94:013B=0)
2F94:090D  98					cbw				; Convrt byte to word
2F94:090E  3C 08				cmp	al,8
2F94:0910  76 06				jbe	loc_77			; Jump if below or =
2F94:0912  D1 E8				shr	ax,1			; Shift w/zeros fill
2F94:0914  D1 E8				shr	ax,1			; Shift w/zeros fill
2F94:0916  D1 E8				shr	ax,1			; Shift w/zeros fill
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 18

2F94:0918			loc_77:						;  xref 2F94:0910
2F94:0918  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:091A  8B F8				mov	di,ax
2F94:091C  8B 85 0105				mov	ax,[pattern_table][di]	; (2F94:0105=63C6h)
2F94:0920  A3 0143				mov	[patptr_a],ax		; (2F94:0143=0)
2F94:0923  05 0020				add	ax,20h
2F94:0926  A3 0145				mov	[patptr_b],ax		; (2F94:0145=0)
2F94:0929  80 3E 013B 7F			cmp	[room_num],7Fh		; (2F94:013B=0)
2F94:092E  72 0C				jb	loc_ret_78		; Jump if below
2F94:0930  C7 06 0143 65CA			mov	[patptr_a],65CAh	; (2F94:0143=0)
2F94:0936  C7 06 0145 65EA			mov	[patptr_b],65EAh	; (2F94:0145=0)

2F94:093C			loc_ret_78:					;  xref 2F94:092E
2F94:093C  C3					retn
				room_to_pattern	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         cx = src1, dx = src2
				;
				;         Called from:   2F94:0582, 05A3, 05AE, 05D9, 05FE, 0624, 062F
				;                             0650, 06EF, 0710, 0737, 0758
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:093D			big_pattern_fill	proc	near
2F94:093D  50					push	ax
2F94:093E  BB 0804				mov	bx,804h
2F94:0941  89 0E 013F				mov	[repspr_savesrc1],cx	; (2F94:013F=0)
2F94:0945  89 16 0141				mov	[repspr_savesrc2],dx	; (2F94:0141=0)
2F94:0949  A0 63C5				mov	al,[repspr_count]	; (2F94:63C5=0)
2F94:094C			loc_79:						;  xref 2F94:09E4
2F94:094C њ8B 0E 0147				mov	cx,[repspr_xofs]	; (2F94:0147=0)
2F94:0950  8B 16 013D				mov	dx,[repspr_yofs]	; (2F94:013D=0)
2F94:0954  8A F1				mov	dh,cl
2F94:0956  8B 36 013F				mov	si,[repspr_savesrc1]	; (2F94:013F=0)
2F94:095A			loc_80:						;  xref 2F94:0988
2F94:095A  50					push	ax
2F94:095B  53					push	bx
2F94:095C  51					push	cx
2F94:095D  52					push	dx
2F94:095E  56					push	si
2F94:095F			loc_81:						;  xref 2F94:097B
2F94:095F  8A C2				mov	al,dl
2F94:0961  32 E4				xor	ah,ah			; Zero register
2F94:0963  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:0965  8B F8				mov	di,ax
2F94:0967  8A C6				mov	al,dh
2F94:0969  32 E4				xor	ah,ah			; Zero register
2F94:096B  03 85 68E0				add	ax,[line_offsets_table][di]	; (2F94:68E0=0)
2F94:096F  8B F8				mov	di,ax
2F94:0971  33 C9				xor	cx,cx			; Zero register
2F94:0973  8A CB				mov	cl,bl
2F94:0975  F3/ A4				rep	movsb			; Rep when cx >0 Mov [si] to es:[di]
2F94:0977  FE C2				inc	dl
2F94:0979  FE CF				dec	bh
2F94:097B  75 E2				jnz	loc_81			; Jump if not zero
2F94:097D  5E					pop	si
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 19

2F94:097E  5A					pop	dx
2F94:097F  59					pop	cx
2F94:0980  5B					pop	bx
2F94:0981  58					pop	ax
2F94:0982  02 F3				add	dh,bl
2F94:0984  FE 0E 63C5				dec	[repspr_count]		; (2F94:63C5=0)
2F94:0988  75 D0				jnz	loc_80			; Jump if not zero
2F94:098A  FE 0E 0149				dec	[repspr_ycount]		; (2F94:0149=0)
2F94:098E  74 57				jz	loc_84			; Jump if zero
2F94:0990  A2 63C5				mov	[repspr_count],al	; (2F94:63C5=0)
2F94:0993  8B 0E 0147				mov	cx,[repspr_xofs]	; (2F94:0147=0)
2F94:0997  83 06 013D 08			add	[repspr_yofs],8		; (2F94:013D=0)
2F94:099C  8B 16 013D				mov	dx,[repspr_yofs]	; (2F94:013D=0)
2F94:09A0  8A F1				mov	dh,cl
2F94:09A2  8B 36 0141				mov	si,[repspr_savesrc2]	; (2F94:0141=0)
2F94:09A6			loc_82:						;  xref 2F94:09D4
2F94:09A6  50					push	ax
2F94:09A7  53					push	bx
2F94:09A8  51					push	cx
2F94:09A9  52					push	dx
2F94:09AA  56					push	si
2F94:09AB			loc_83:						;  xref 2F94:09C7
2F94:09AB  8A C2				mov	al,dl
2F94:09AD  32 E4				xor	ah,ah			; Zero register
2F94:09AF  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:09B1  8B F8				mov	di,ax
2F94:09B3  8A C6				mov	al,dh
2F94:09B5  32 E4				xor	ah,ah			; Zero register
2F94:09B7  03 85 68E0				add	ax,[line_offsets_table][di]	; (2F94:68E0=0)
2F94:09BB  8B F8				mov	di,ax
2F94:09BD  33 C9				xor	cx,cx			; Zero register
2F94:09BF  8A CB				mov	cl,bl
2F94:09C1  F3/ A4				rep	movsb			; Rep when cx >0 Mov [si] to es:[di]
2F94:09C3  FE C2				inc	dl
2F94:09C5  FE CF				dec	bh
2F94:09C7  75 E2				jnz	loc_83			; Jump if not zero
2F94:09C9  5E					pop	si
2F94:09CA  5A					pop	dx
2F94:09CB  59					pop	cx
2F94:09CC  5B					pop	bx
2F94:09CD  58					pop	ax
2F94:09CE  02 F3				add	dh,bl
2F94:09D0  FE 0E 63C5				dec	[repspr_count]		; (2F94:63C5=0)
2F94:09D4  75 D0				jnz	loc_82			; Jump if not zero
2F94:09D6  FE 0E 0149				dec	[repspr_ycount]		; (2F94:0149=0)
2F94:09DA  74 0B				jz	loc_84			; Jump if zero
2F94:09DC  A2 63C5				mov	[repspr_count],al	; (2F94:63C5=0)
2F94:09DF  83 06 013D 08			add	[repspr_yofs],8		; (2F94:013D=0)
2F94:09E4  E9 FF65				jmp	loc_79			; (094C)
2F94:09E7			loc_84:						;  xref 2F94:098E, 09DA
2F94:09E7  58					pop	ax
2F94:09E8  C3					retn
				big_pattern_fill	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                              SUBROUTINE
           shamus.lst						Sourcer	v8.01  20-Dec-2023  2:31 am   Page 20

				;
				;         Called from:   2F94:075B
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:09E9			sub_2		proc	near
2F94:09E9  C6 06 63C5 04			mov	byte ptr [repspr_count],4	; (2F94:63C5=0)
2F94:09EE  B2 38				mov	dl,38h			; '8'
2F94:09F0  32 F6				xor	dh,dh			; Zero register
2F94:09F2  8B 36 6004				mov	si,[pattern_a]		; (2F94:6004=0)
2F94:09F6  E8 008B				call	horz_rep_sprite_4x8	; (0A84)
2F94:09F9  C6 06 63C5 04			mov	byte ptr [repspr_count],4	; (2F94:63C5=0)
2F94:09FE  32 F6				xor	dh,dh			; Zero register
2F94:0A00  B2 70				mov	dl,70h			; 'p'
2F94:0A02  E8 007F				call	horz_rep_sprite_4x8	; (0A84)
2F94:0A05  BB 0802				mov	bx,802h
2F94:0A08  C6 06 63C5 08			mov	byte ptr [repspr_count],8	; (2F94:63C5=0)
2F94:0A0D  32 D2				xor	dl,dl			; Zero register
2F94:0A0F  B6 10				mov	dh,10h
2F94:0A11  8B 36 6006				mov	si,[pattern_b]		; (2F94:6006=0)
2F94:0A15  E8 007B				call	horz_rep_sprite		; (0A93)
2F94:0A18  C6 06 63C5 0C			mov	byte ptr [repspr_count],0Ch	; (2F94:63C5=0)
2F94:0A1D  32 D2				xor	dl,dl			; Zero register
2F94:0A1F  8B 36 6004				mov	si,[pattern_a]		; (2F94:6004=0)
2F94:0A23  E8 005E				call	horz_rep_sprite_4x8	; (0A84)
2F94:0A26  BB 0802				mov	bx,802h
2F94:0A29  C6 06 63C5 07			mov	byte ptr [repspr_count],7	; (2F94:63C5=0)
2F94:0A2E  B6 40				mov	dh,40h			; '@'
2F94:0A30  8B 36 6006				mov	si,[pattern_b]		; (2F94:6006=0)
2F94:0A34  E8 005C				call	horz_rep_sprite		; (0A93)
2F94:0A37  C6 06 63C5 04			mov	byte ptr [repspr_count],4	; (2F94:63C5=0)
2F94:0A3C  8B 36 6004				mov	si,[pattern_a]		; (2F94:6004=0)
2F94:0A40  E8 0041				call	horz_rep_sprite_4x8	; (0A84)
2F94:0A43  BB 0802				mov	bx,802h
2F94:0A46  B6 40				mov	dh,40h			; '@'
2F94:0A48  C6 06 63C5 08			mov	byte ptr [repspr_count],8	; (2F94:63C5=0)
2F94:0A4D  B2 70				mov	dl,70h			; 'p'
2F94:0A4F  8B 36 6006				mov	si,[pattern_b]		; (2F94:6006=0)
2F94:0A53  E8 003D				call	horz_rep_sprite		; (0A93)
2F94:0A56  C6 06 63C5 04			mov	byte ptr [repspr_count],4	; (2F94:63C5=0)
2F94:0A5B  B2 70				mov	dl,70h			; 'p'
2F94:0A5D  8B 36 6004				mov	si,[pattern_a]		; (2F94:6004=0)
2F94:0A61  E8 0020				call	horz_rep_sprite_4x8	; (0A84)
2F94:0A64  B2 A8				mov	dl,0A8h
2F94:0A66  B6 10				mov	dh,10h
2F94:0A68  C6 06 63C5 0C			mov	byte ptr [repspr_count],0Ch	; (2F94:63C5=0)
2F94:0A6D  E8 0014				call	horz_rep_sprite_4x8	; (0A84)
2F94:0A70  BB 0802				mov	bx,802h
2F94:0A73  B2 70				mov	dl,70h			; 'p'
2F94:0A75  B6 10				mov	dh,10h
2F94:0A77  C6 06 63C5 08			mov	byte ptr [repspr_count],8	; (2F94:63C5=0)
2F94:0A7C  8B 36 6006				mov	si,[pattern_b]		; (2F94:6006=0)
2F94:0A80  E8 0010				call	horz_rep_sprite		; (0A93)
2F94:0A83  C3					retn
				sub_2		endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 21

				;                          horz_rep_sprite_4x8
				;
				;         Called from:   2F94:06A3, 06AF, 06BF, 06CB, 0777, 09F6, 0A02
				;                             0A23, 0A40, 0A61, 0A6D, 0B0A, 0B16, 0B22
				;                             0B2E, 0B3A, 0B46, 0B52
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:0A84			horz_rep_sprite_4x8	proc	near
2F94:0A84  BB 0804				mov	bx,804h
2F94:0A87			loc_85:						;  xref 2F94:0A90
2F94:0A87  E8 5736				call	draw_si_to_screen	; (61C0)
2F94:0A8A  02 F3				add	dh,bl
2F94:0A8C  FE 0E 63C5				dec	[repspr_count]		; (2F94:63C5=0)
2F94:0A90  75 F5				jnz	loc_85			; Jump if not zero
2F94:0A92  C3					retn
				horz_rep_sprite_4x8	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          horz_rep_sprite
				;
				;         Called from:   2F94:0668, 0674, 0683, 068F, 0794, 07B2, 07CF
				;                             0803, 080F, 0A15, 0A34, 0A53, 0A80, 4692
				;                             4D85, 4D97
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:0A93			horz_rep_sprite	proc	near
2F94:0A93			loc_86:						;  xref 2F94:0A9D
2F94:0A93  E8 572A				call	draw_si_to_screen	; (61C0)
2F94:0A96  80 C2 08				add	dl,8
2F94:0A99  FE 0E 63C5				dec	[repspr_count]		; (2F94:63C5=0)
2F94:0A9D  75 F4				jnz	loc_86			; Jump if not zero
2F94:0A9F  C3					retn
				horz_rep_sprite	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          display_room_num
				;
				;         Called from:   2F94:08AF
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:0AA0			display_room_num	proc	near
2F94:0AA0  56					push	si
2F94:0AA1  A0 013B				mov	al,[room_num]		; (2F94:013B=0)
2F94:0AA4  33 F6				xor	si,si			; Zero register
2F94:0AA6  3C 64				cmp	al,64h			; 'd'
2F94:0AA8  7C 18				jl	loc_88			; Jump if <
2F94:0AAA			loc_87:						;  xref 2F94:0AB0
2F94:0AAA  46					inc	si
2F94:0AAB  46					inc	si
2F94:0AAC  2C 64				sub	al,64h			; 'd'
2F94:0AAE  3C 64				cmp	al,64h			; 'd'
2F94:0AB0  7D F8				jge	loc_87			; Jump if > or =
2F94:0AB2  8B BC 0154				mov	di,[digit_glyph_table][si]	; (2F94:0154=6E20h)
2F94:0AB6  BB 1803				mov	bx,1803h
2F94:0AB9  BA 00C0				mov	dx,0C0h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 22

2F94:0ABC  B9 0014				mov	cx,14h
2F94:0ABF  E8 0A08				call	draw_sprite_v2		; (14CA)
2F94:0AC2			loc_88:						;  xref 2F94:0AA8
2F94:0AC2  80 3E 013B 0A			cmp	[room_num],0Ah		; (2F94:013B=0)
2F94:0AC7  7C 1E				jl	loc_91			; Jump if <
2F94:0AC9  33 F6				xor	si,si			; Zero register
2F94:0ACB  3C 0A				cmp	al,0Ah
2F94:0ACD  7C 08				jl	loc_90			; Jump if <
2F94:0ACF			loc_89:						;  xref 2F94:0AD5
2F94:0ACF  46					inc	si
2F94:0AD0  46					inc	si
2F94:0AD1  2C 0A				sub	al,0Ah
2F94:0AD3  3C 0A				cmp	al,0Ah
2F94:0AD5  7D F8				jge	loc_89			; Jump if > or =
2F94:0AD7			loc_90:						;  xref 2F94:0ACD
2F94:0AD7  8B BC 0154				mov	di,[digit_glyph_table][si]	; (2F94:0154=6E20h)
2F94:0ADB  BB 1803				mov	bx,1803h
2F94:0ADE  BA 00C0				mov	dx,0C0h
2F94:0AE1  B9 0018				mov	cx,18h
2F94:0AE4  E8 09E3				call	draw_sprite_v2		; (14CA)
2F94:0AE7			loc_91:						;  xref 2F94:0AC7
2F94:0AE7  98					cbw				; Convrt byte to word
2F94:0AE8  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:0AEA  8B F0				mov	si,ax
2F94:0AEC  8B BC 0154				mov	di,[digit_glyph_table][si]	; (2F94:0154=6E20h)
2F94:0AF0  B9 001C				mov	cx,1Ch
2F94:0AF3  BB 1803				mov	bx,1803h
2F94:0AF6  BA 00C0				mov	dx,0C0h
2F94:0AF9  E8 09CE				call	draw_sprite_v2		; (14CA)
2F94:0AFC  5E					pop	si
2F94:0AFD  C3					retn
				display_room_num	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          clear_stats_areas
				;
				;         Called from:   2F94:05B1, 0713
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:0AFE			clear_stats_areas	proc	near
2F94:0AFE .BE 6D08				mov	si,offset clear_bitmap	; (2F94:6D08=0)
2F94:0B01  32 F6				xor	dh,dh			; Zero register
2F94:0B03  B2 08				mov	dl,8
2F94:0B05  C6 06 63C5 04			mov	byte ptr [repspr_count],4	; (2F94:63C5=0)
2F94:0B0A  E8 FF77				call	horz_rep_sprite_4x8	; (0A84)
2F94:0B0D  32 F6				xor	dh,dh			; Zero register
2F94:0B0F  B2 10				mov	dl,10h
2F94:0B11  C6 06 63C5 04			mov	byte ptr [repspr_count],4	; (2F94:63C5=0)
2F94:0B16  E8 FF6B				call	horz_rep_sprite_4x8	; (0A84)
2F94:0B19  32 F6				xor	dh,dh			; Zero register
2F94:0B1B  B2 20				mov	dl,20h			; ' '
2F94:0B1D  C6 06 63C5 04			mov	byte ptr [repspr_count],4	; (2F94:63C5=0)
2F94:0B22  E8 FF5F				call	horz_rep_sprite_4x8	; (0A84)
2F94:0B25  32 F6				xor	dh,dh			; Zero register
2F94:0B27  B2 28				mov	dl,28h			; '('
2F94:0B29  C6 06 63C5 04			mov	byte ptr [repspr_count],4	; (2F94:63C5=0)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 23

2F94:0B2E  E8 FF53				call	horz_rep_sprite_4x8	; (0A84)
2F94:0B31  B6 44				mov	dh,44h			; 'D'
2F94:0B33  32 D2				xor	dl,dl			; Zero register
2F94:0B35  C6 06 63C5 03			mov	byte ptr [repspr_count],3	; (2F94:63C5=0)
2F94:0B3A  E8 FF47				call	horz_rep_sprite_4x8	; (0A84)
2F94:0B3D  B6 44				mov	dh,44h			; 'D'
2F94:0B3F  B2 08				mov	dl,8
2F94:0B41  C6 06 63C5 03			mov	byte ptr [repspr_count],3	; (2F94:63C5=0)
2F94:0B46  E8 FF3B				call	horz_rep_sprite_4x8	; (0A84)
2F94:0B49  B6 44				mov	dh,44h			; 'D'
2F94:0B4B  B2 10				mov	dl,10h
2F94:0B4D  C6 06 63C5 03			mov	byte ptr [repspr_count],3	; (2F94:63C5=0)
2F94:0B52  E8 FF2F				call	horz_rep_sprite_4x8	; (0A84)
2F94:0B55  C3					retn
				clear_stats_areas	endp

2F94:0B56  000A[00]				db	10 dup (0)
2F94:0B60  00			score_bcd	db	0			;  xref 2F94:0C5E, 0CEE, 0D19, 0D47
										;            0D6B, 0D88, 27E1, 7C85
2F94:0B61  00 00 00 00 00 00			db	0, 0, 0, 0, 0, 0
2F94:0B67  00					db	0
2F94:0B68  00			hiscore_bcd	db	0			;  xref 2F94:0C75, 0D6E, 0D8B
2F94:0B69  00 00 00 00 00 00			db	0, 0, 0, 0, 0, 0
2F94:0B6F  00					db	0
2F94:0B70  00			data_48		db	0			;  xref 2F94:0CA2, 0CB5, 0CC7
2F94:0B71  00			data_49		db	0			;  xref 2F94:0CA7, 0CC0, 0CDC, 0CE7
										;            0D12, 0D40
2F94:0B72  0F C0 3F C0 03 C0	narrow_digits_2x10	db	 0Fh,0C0h, 3Fh,0C0h, 03h,0C0h
2F94:0B78  03 C0 03 C0 03 C0			db	 03h,0C0h, 03h,0C0h, 03h,0C0h
2F94:0B7E  03 C0 03 C0 03 C0			db	 03h,0C0h, 03h,0C0h, 03h,0C0h
2F94:0B84  3F FC 0F F0 F0 F0			db	 3Fh,0FCh, 0Fh,0F0h,0F0h,0F0h
2F94:0B8A  F0 3C 00 3C 00 3C			db	0F0h, 3Ch, 00h, 3Ch, 00h, 3Ch
2F94:0B90  0F F0 3C 00 F0 00			db	 0Fh,0F0h, 3Ch, 00h,0F0h, 00h
2F94:0B96  F0 00 FF FC 3F C0			db	0F0h, 00h,0FFh,0FCh, 3Fh,0C0h
2F94:0B9C  F0 3C F0 3C 00 30			db	0F0h, 3Ch,0F0h, 3Ch, 00h, 30h
2F94:0BA2  0F F0 00 3C 00 3C			db	 0Fh,0F0h, 00h, 3Ch, 00h, 3Ch
2F94:0BA8  00 3C F0 F0 3F C0			db	 00h, 3Ch,0F0h,0F0h, 3Fh,0C0h
2F94:0BAE  00 F0 03 F0 0F 30			db	 00h,0F0h, 03h,0F0h, 0Fh, 30h
2F94:0BB4  3C 30 F0 30 F0 30			db	 3Ch, 30h,0F0h, 30h,0F0h, 30h
2F94:0BBA  FF FC 00 30 00 30			db	0FFh,0FCh, 00h, 30h, 00h, 30h
2F94:0BC0  00 30 FF FC C0 00			db	 00h, 30h,0FFh,0FCh,0C0h, 00h
2F94:0BC6  C0 00 C0 00 FF F0			db	0C0h, 00h,0C0h, 00h,0FFh,0F0h
2F94:0BCC  00 3C 00 3C 00 3C			db	 00h, 3Ch, 00h, 3Ch, 00h, 3Ch
2F94:0BD2  F0 3C 3F F0 0F FC			db	0F0h, 3Ch, 3Fh,0F0h, 0Fh,0FCh
2F94:0BD8  3C 00 F0 00 F0 00			db	 3Ch, 00h,0F0h, 00h,0F0h, 00h
2F94:0BDE  FF F0 F0 3C F0 3C			db	0FFh,0F0h,0F0h, 3Ch,0F0h, 3Ch
2F94:0BE4  F0 3C 30 30 0F C0			db	0F0h, 3Ch, 30h, 30h, 0Fh,0C0h
2F94:0BEA  FF FC 00 3C 00 F0			db	0FFh,0FCh, 00h, 3Ch, 00h,0F0h
2F94:0BF0  00 F0 00 F0 03 C0			db	 00h,0F0h, 00h,0F0h, 03h,0C0h
2F94:0BF6  03 C0 03 C0 03 C0			db	 03h,0C0h, 03h,0C0h, 03h,0C0h
2F94:0BFC  03 C0 0F C0 3C F0			db	 03h,0C0h, 0Fh,0C0h, 3Ch,0F0h
2F94:0C02  F0 3C F0 3C 3C F0			db	0F0h, 3Ch,0F0h, 3Ch, 3Ch,0F0h
2F94:0C08  0F C0 3F F0 F0 3C			db	 0Fh,0C0h, 3Fh,0F0h,0F0h, 3Ch
2F94:0C0E  F0 3C 3F F0 0F C0			db	0F0h, 3Ch, 3Fh,0F0h, 0Fh,0C0h
2F94:0C14  3C F0 F0 3C F0 3C			db	 3Ch,0F0h,0F0h, 3Ch,0F0h, 3Ch
2F94:0C1A  F0 3C 3F FC 00 3C			db	0F0h, 3Ch, 3Fh,0FCh, 00h, 3Ch
2F94:0C20  00 3C 00 F0 3F C0			db	 00h, 3Ch, 00h,0F0h, 3Fh,0C0h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 24

2F94:0C26  0F C0 3C F0 F0 3C	narrow_digit_zero_2x10	db	 0Fh,0C0h, 3Ch,0F0h,0F0h, 3Ch	;  xref 2F94:0C95, 3C9B
2F94:0C2C  C0 0C C0 0C C0 0C			db	0C0h, 0Ch,0C0h, 0Ch,0C0h, 0Ch
2F94:0C32  C0 0C F0 3C 3C F0			db	0C0h, 0Ch,0F0h, 3Ch, 3Ch,0F0h
2F94:0C38  0F C0				db	 0Fh,0C0h
2F94:0C3A  0C26			data_51		dw	0C26h			; Data table (indexed access)
										;  xref 2F94:0CCE
2F94:0C3C  72 0B 86 0B 9A 0B			db	 72h, 0Bh, 86h, 0Bh, 9Ah, 0Bh
2F94:0C42  AE 0B C2 0B D6 0B			db	0AEh, 0Bh,0C2h, 0Bh,0D6h, 0Bh
2F94:0C48  EA 0B FE 0B 12 0C			db	0EAh, 0Bh,0FEh, 0Bh, 12h, 0Ch
2F94:0C4E  3C 3C 75 06 80 36			db	 3Ch, 3Ch, 75h, 06h, 80h, 36h
2F94:0C54  51 01 01 C3 C3			db	 51h, 01h, 01h,0C3h,0C3h

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          display_score
				;
				;         Called from:   2F94:08B2, 3983, 3AE3, 48AB, 58D6
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:0C59			display_score	proc	near
2F94:0C59  50					push	ax
2F94:0C5A  51					push	cx
2F94:0C5B  52					push	dx
2F94:0C5C  57					push	di
2F94:0C5D  56					push	si
2F94:0C5E .BE 0B60				mov	si,offset score_bcd	; (2F94:0B60=0)
2F94:0C61  BA 0023				mov	dx,23h
2F94:0C64  B9 0000				mov	cx,0
2F94:0C67  E8 001D				call	display_narrow_num	; (0C87)
2F94:0C6A  5E					pop	si
2F94:0C6B  5F					pop	di
2F94:0C6C  5A					pop	dx
2F94:0C6D  59					pop	cx
2F94:0C6E  58					pop	ax
2F94:0C6F  C3					retn
				display_score	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          display_hiscore
				;
				;         Called from:   2F94:08B5, 0D99
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:0C70			display_hiscore	proc	near
2F94:0C70  50					push	ax
2F94:0C71  51					push	cx
2F94:0C72  52					push	dx
2F94:0C73  57					push	di
2F94:0C74  56					push	si
2F94:0C75 .BE 0B68				mov	si,offset hiscore_bcd	; (2F94:0B68=0)
2F94:0C78  BA 000B				mov	dx,0Bh
2F94:0C7B  B9 0000				mov	cx,0
2F94:0C7E  E8 0006				call	display_narrow_num	; (0C87)
2F94:0C81  5E					pop	si
2F94:0C82  5F					pop	di
2F94:0C83  5A					pop	dx
2F94:0C84  59					pop	cx
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 25

2F94:0C85  58					pop	ax
2F94:0C86  C3					retn
				display_hiscore	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         prints using narrow_digits_2x10
				;
				;         Called from:   2F94:0C67, 0C7E, 27E4
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:0C87			display_narrow_num	proc	near
2F94:0C87 .BB 0007				mov	bx,data_9e		; (2F94:0007=0)
2F94:0C8A			loc_92:						;  xref 2F94:0C90
2F94:0C8A  80 38 00				cmp	byte ptr [bx+si],0
2F94:0C8D  75 10				jne	loc_93			; Jump if not equal
2F94:0C8F  4B					dec	bx
2F94:0C90  79 F8				jns	loc_92			; Jump if not sign
2F94:0C92  B9 000E				mov	cx,0Eh
2F94:0C95 .BF 0C26				mov	di,offset narrow_digit_zero_2x10	; (2F94:0C26=0Fh)
2F94:0C98  BB 1402				mov	bx,1402h
2F94:0C9B  E8 082C				call	draw_sprite_v2		; (14CA)
2F94:0C9E  C3					retn
2F94:0C9F			loc_93:						;  xref 2F94:0C8D
2F94:0C9F  83 C6 07				add	si,7
2F94:0CA2  C6 06 0B70 00			mov	[data_48],0		; (2F94:0B70=0)
2F94:0CA7  C6 06 0B71 08			mov	[data_49],8		; (2F94:0B71=0)
2F94:0CAC			loc_94:						;  xref 2F94:0CC4, 0CE0
2F94:0CAC  32 FF				xor	bh,bh			; Zero register
2F94:0CAE  8A 1C				mov	bl,[si]
2F94:0CB0  80 FB 00				cmp	bl,0
2F94:0CB3  75 12				jne	loc_95			; Jump if not equal
2F94:0CB5  80 3E 0B70 00			cmp	[data_48],0		; (2F94:0B70=0)
2F94:0CBA  75 0B				jne	loc_95			; Jump if not equal
2F94:0CBC  83 C1 02				add	cx,2
2F94:0CBF  4E					dec	si
2F94:0CC0  FE 0E 0B71				dec	[data_49]		; (2F94:0B71=0)
2F94:0CC4  75 E6				jnz	loc_94			; Jump if not zero
2F94:0CC6  C3					retn
2F94:0CC7			loc_95:						;  xref 2F94:0CB3, 0CBA
2F94:0CC7  C6 06 0B70 01			mov	[data_48],1		; (2F94:0B70=0)
2F94:0CCC  D1 E3				shl	bx,1			; Shift w/zeros fill
2F94:0CCE  8B BF 0C3A				mov	di,[data_51][bx]	; (2F94:0C3A=0C26h)
2F94:0CD2  BB 1402				mov	bx,1402h
2F94:0CD5  E8 07F2				call	draw_sprite_v2		; (14CA)
2F94:0CD8  83 C1 02				add	cx,2
2F94:0CDB  4E					dec	si
2F94:0CDC  FE 0E 0B71				dec	[data_49]		; (2F94:0B71=0)
2F94:0CE0  75 CA				jnz	loc_94			; Jump if not zero
2F94:0CE2  C3					retn
				display_narrow_num	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          convert_score_1
				;
				;         Called from:   2F94:3980, 3AE0
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 26

				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:0CE3			convert_score_1	proc	near
2F94:0CE3  50					push	ax
2F94:0CE4  51					push	cx
2F94:0CE5  52					push	dx
2F94:0CE6  56					push	si
2F94:0CE7  C6 06 0B71 00			mov	[data_49],0		; (2F94:0B71=0)
2F94:0CEC  B1 07				mov	cl,7
2F94:0CEE .BE 0B60				mov	si,offset score_bcd	; (2F94:0B60=0)
2F94:0CF1  F8					clc				; Clear carry flag
2F94:0CF2  8A 04				mov	al,[si]
2F94:0CF4  14 05				adc	al,5
2F94:0CF6			loc_96:						;  xref 2F94:0D04
2F94:0CF6 њ37					aaa				; Ascii adjust
2F94:0CF7  88 04				mov	[si],al
2F94:0CF9  46					inc	si
2F94:0CFA  FE C9				dec	cl
2F94:0CFC  74 08				jz	loc_97			; Jump if zero
2F94:0CFE  73 06				jnc	loc_97			; Jump if carry=0
2F94:0D00  8A 04				mov	al,[si]
2F94:0D02  14 00				adc	al,0
2F94:0D04  EB F0				jmp	short loc_96		; (0CF6)
2F94:0D06			loc_97:						;  xref 2F94:0CFC, 0CFE
2F94:0D06  E8 0061				call	update_hiscore		; (0D6A)
2F94:0D09  5E					pop	si
2F94:0D0A  5A					pop	dx
2F94:0D0B  59					pop	cx
2F94:0D0C  58					pop	ax
2F94:0D0D  C3					retn
				convert_score_1	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          convert_score_2
				;
				;         Called from:   2F94:397D, 3ADD
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:0D0E			convert_score_2	proc	near
2F94:0D0E  50					push	ax
2F94:0D0F  51					push	cx
2F94:0D10  52					push	dx
2F94:0D11  56					push	si
2F94:0D12  C6 06 0B71 00			mov	[data_49],0		; (2F94:0B71=0)
2F94:0D17  B1 07				mov	cl,7
2F94:0D19 .BE 0B60				mov	si,offset score_bcd	; (2F94:0B60=0)
2F94:0D1C  83 C6 02				add	si,2
2F94:0D1F  F8					clc				; Clear carry flag
2F94:0D20  8A 04				mov	al,[si]
2F94:0D22  14 02				adc	al,2
2F94:0D24			loc_98:						;  xref 2F94:0D32
2F94:0D24 њ37					aaa				; Ascii adjust
2F94:0D25  88 04				mov	[si],al
2F94:0D27  46					inc	si
2F94:0D28  FE C9				dec	cl
2F94:0D2A  74 08				jz	loc_99			; Jump if zero
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 27

2F94:0D2C  73 06				jnc	loc_99			; Jump if carry=0
2F94:0D2E  8A 04				mov	al,[si]
2F94:0D30  14 00				adc	al,0
2F94:0D32  EB F0				jmp	short loc_98		; (0D24)
2F94:0D34			loc_99:						;  xref 2F94:0D2A, 0D2C
2F94:0D34  E8 0033				call	update_hiscore		; (0D6A)
2F94:0D37  5E					pop	si
2F94:0D38  5A					pop	dx
2F94:0D39  59					pop	cx
2F94:0D3A  58					pop	ax
2F94:0D3B  C3					retn
				convert_score_2	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          convert_score_3
				;
				;         Called from:   2F94:48A8, 58D0, 58D3
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:0D3C			convert_score_3	proc	near
2F94:0D3C  50					push	ax
2F94:0D3D  51					push	cx
2F94:0D3E  52					push	dx
2F94:0D3F  56					push	si
2F94:0D40  C6 06 0B71 00			mov	[data_49],0		; (2F94:0B71=0)
2F94:0D45  B1 07				mov	cl,7
2F94:0D47 .BE 0B60				mov	si,offset score_bcd	; (2F94:0B60=0)
2F94:0D4A  83 C6 02				add	si,2
2F94:0D4D  F8					clc				; Clear carry flag
2F94:0D4E  8A 04				mov	al,[si]
2F94:0D50  14 05				adc	al,5
2F94:0D52			loc_100:					;  xref 2F94:0D60
2F94:0D52 њ37					aaa				; Ascii adjust
2F94:0D53  88 04				mov	[si],al
2F94:0D55  46					inc	si
2F94:0D56  FE C9				dec	cl
2F94:0D58  74 08				jz	loc_101			; Jump if zero
2F94:0D5A  73 06				jnc	loc_101			; Jump if carry=0
2F94:0D5C  8A 04				mov	al,[si]
2F94:0D5E  14 00				adc	al,0
2F94:0D60  EB F0				jmp	short loc_100		; (0D52)
2F94:0D62			loc_101:					;  xref 2F94:0D58, 0D5A
2F94:0D62  E8 0005				call	update_hiscore		; (0D6A)
2F94:0D65  5E					pop	si
2F94:0D66  5A					pop	dx
2F94:0D67  59					pop	cx
2F94:0D68  58					pop	ax
2F94:0D69  C3					retn
				convert_score_3	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          update_hiscore
				;
				;         Called from:   2F94:0D06, 0D34, 0D62
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 28


2F94:0D6A			update_hiscore	proc	near
2F94:0D6A  57					push	di
2F94:0D6B .BE 0B60				mov	si,offset score_bcd	; (2F94:0B60=0)
2F94:0D6E .BF 0B68				mov	di,offset hiscore_bcd	; (2F94:0B68=0)
2F94:0D71  83 C6 07				add	si,7
2F94:0D74  83 C7 07				add	di,7
2F94:0D77  B9 0008				mov	cx,8

2F94:0D7A			locloop_102:					;  xref 2F94:0D84
2F94:0D7A  8A 04				mov	al,[si]
2F94:0D7C  3A 05				cmp	al,[di]
2F94:0D7E  77 08				ja	loc_104			; Jump if above
2F94:0D80  72 04				jc	loc_103			; Jump if carry Set
2F94:0D82  4E					dec	si
2F94:0D83  4F					dec	di
2F94:0D84  E2 F4				loop	locloop_102		; Loop if cx > 0

2F94:0D86			loc_103:					;  xref 2F94:0D80
2F94:0D86  5F					pop	di
2F94:0D87  C3					retn
2F94:0D88			loc_104:					;  xref 2F94:0D7E
2F94:0D88 .BE 0B60				mov	si,offset score_bcd	; (2F94:0B60=0)
2F94:0D8B .BF 0B68				mov	di,offset hiscore_bcd	; (2F94:0B68=0)
2F94:0D8E  B9 0008				mov	cx,8

2F94:0D91			locloop_105:					;  xref 2F94:0D97
2F94:0D91  8A 04				mov	al,[si]
2F94:0D93  88 05				mov	[di],al
2F94:0D95  46					inc	si
2F94:0D96  47					inc	di
2F94:0D97  E2 F8				loop	locloop_105		; Loop if cx > 0

2F94:0D99  E8 FED4				call	display_hiscore		; (0C70)
2F94:0D9C  5F					pop	di
2F94:0D9D  C3					retn
				update_hiscore	endp

2F94:0D9E  00 00				db	0, 0
2F94:0DA0  00 00 00 00 00 00	keyboard_buf	db	0, 0, 0, 0, 0, 0	; Data table (indexed access)
										;  xref 2F94:10CD, 115A, 1189
2F94:0DA6  00 00 00 00 00 00			db	0, 0, 0, 0, 0, 0
2F94:0DAC  00 00 00 00				db	0, 0, 0, 0
2F94:0DB0  0000			keyboard_buf_rdptr	dw	0			;  xref 2F94:0300, 10DC, 1169, 117C
										;            121B, 1235, 1296, 12DA
										;            24E2, 25BE, 2746, 27AB
										;            7AAA, 7B77, 7BD1
2F94:0DB2  0000			keyboard_buf_wrptr	dw	0			;  xref 2F94:0306, 10C8, 10E3, 1155
										;            1170, 1180, 1221, 129C
										;            12E0, 24E8, 25C4, 274C
										;            27B1, 7AB0, 7B7D, 7BD7
2F94:0DB4  0000			old_kbd_handler_w1	dw	0			;  xref 2F94:109F, 1245
2F94:0DB6  0000			old_kbd_handler_w0	dw	0			;  xref 2F94:10A6, 124A
2F94:0DB8  00			ctrl_pressed	db	0			;  xref 2F94:032C, 1191, 11C5, 11E0
										;            12F8, 77D4, 7AC2, 7B95
										;            7CE5, 7E25
2F94:0DB9  00			alt_pressed	db	0			;  xref 2F94:119D, 11B9, 11E7
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 29

2F94:0DBA  00			del_pressed	db	0			;  xref 2F94:11A9, 11D1, 11D9
2F94:0DBB  00					db	0
2F94:0DBC  00			data_53		db	0			;  xref 2F94:130B
2F94:0DBD  00AF[00]				db	175 dup (0)
2F94:0E6C  00			data_54		db	0			;  xref 2F94:1319
2F94:0E6D  01CF[00]				db	463 dup (0)
2F94:103C  E05B F000		data_55		dw	0E05Bh, 0F000h		;  xref 2F94:1204
2F94:1040  47 61 6D 65 20 70	data_56		db	'Game pausedPress any key to cont'	;  xref 2F94:127C
2F94:1046  61 75 73 65 64 50
2F94:104C  72 65 73 73 20 61
2F94:1052  6E 79 20 6B 65 79
2F94:1058  20 74 6F 20 63 6F
2F94:105E  6E 74
2F94:1060  69 6E 75 65 2E 2E			db	'inue... Press a button to contin'
2F94:1066  2E 20 50 72 65 73
2F94:106C  73 20 61 20 62 75
2F94:1072  74 74 6F 6E 20 74
2F94:1078  6F 20 63 6F 6E 74
2F94:107E  69 6E
2F94:1080  75 65 2E 2E 2E			db	'ue...'

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         install keyboard or joy int handler, data_35 selects
				;
				;         Called from:   2F94:019A
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:1085			install_int_handler_2_or_3	proc	near
2F94:1085  53					push	bx
2F94:1086  FA					cli				; Disable interrupts
2F94:1087  BB 10EF				mov	bx,10EFh
2F94:108A  F6 06 012F 01			test	[data_33],1		; (2F94:012F=0)
2F94:108F  75 03				jnz	loc_106			; Jump if not zero
2F94:1091  BB 10B8				mov	bx,10B8h
2F94:1094			loc_106:
2F94:1094  33 C0				xor	ax,ax			; Zero register
2F94:1096  06					push	es
2F94:1097  8E C0				mov	es,ax
2F94:1099 .BF 0024				mov	di,data_3e		; (0000:0024=87h)
2F94:109C  26: 8B 05				mov	ax,es:[di]
2F94:109F  A3 0DB4				mov	[old_kbd_handler_w1],ax	; (2F94:0DB4=0)
2F94:10A2  26: 8B 45 02				mov	ax,es:[di+2]
2F94:10A6  A3 0DB6				mov	[old_kbd_handler_w0],ax	; (2F94:0DB6=0)
2F94:10A9  8B C3				mov	ax,bx
2F94:10AB  FC					cld				; Clear direction
2F94:10AC  AB					stosw				; Store ax to es:[di]
2F94:10AD  0E					push	cs
2F94:10AE  58					pop	ax
2F94:10AF  AB					stosw				; Store ax to es:[di]
2F94:10B0  B0 FC				mov	al,0FCh
2F94:10B2  E6 21				out	21h,al			; port 21h, 8259-1 int comands
2F94:10B4  07					pop	es
2F94:10B5  FB					sti				; Enable interrupts
2F94:10B6  5B					pop	bx
2F94:10B7  C3					retn
				install_int_handler_2_or_3	endp

           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 30


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          int_handler_2
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:10B8			int_handler_2	proc	near
2F94:10B8  53					push	bx
2F94:10B9  50					push	ax
2F94:10BA  E4 60				in	al,60h			; port 60h, keybd scan or sw1
2F94:10BC  50					push	ax
2F94:10BD  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:10BF  0C 80				or	al,80h
2F94:10C1  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:10C3  24 7F				and	al,7Fh
2F94:10C5  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
										;  al = 0, speaker off
2F94:10C7  58					pop	ax
2F94:10C8  2E: 8B 1E 0DB2			mov	bx,cs:[keyboard_buf_wrptr]	; (2F94:0DB2=0)
2F94:10CD  2E: 88 87 0DA0			mov	cs:[keyboard_buf][bx],al	; (2F94:0DA0=0)
2F94:10D2  43					inc	bx
2F94:10D3  2E: 3B 1E 3B98			cmp	bx,cs:[keyboard_buf_len]	; (2F94:3B98=0Ah)
2F94:10D8  72 02				jb	loc_107			; Jump if below
2F94:10DA  33 DB				xor	bx,bx			; Zero register
2F94:10DC			loc_107:					;  xref 2F94:10D8
2F94:10DC  2E: 3B 1E 0DB0			cmp	bx,cs:[keyboard_buf_rdptr]	; (2F94:0DB0=0)
2F94:10E1  74 05				je	loc_108			; Jump if equal
2F94:10E3  2E: 89 1E 0DB2			mov	cs:[keyboard_buf_wrptr],bx	; (2F94:0DB2=0)
2F94:10E8			loc_108:					;  xref 2F94:10E1
2F94:10E8  B0 20				mov	al,20h			; ' '
2F94:10EA  E6 20				out	20h,al			; port 20h, 8259-1 int command
										;  al = 20h, end of interrupt
2F94:10EC  58					pop	ax
2F94:10ED  5B					pop	bx
2F94:10EE  CF					iret				; Interrupt return
				int_handler_2	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          int_handler_3
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:10EF			int_handler_3	proc	near
2F94:10EF  FB					sti				; Enable interrupts
2F94:10F0  53					push	bx
2F94:10F1  57					push	di
2F94:10F2  56					push	si
2F94:10F3  3C FF				cmp	al,0FFh
2F94:10F5  75 15				jne	loc_109			; Jump if not equal
2F94:10F7  FA					cli				; Disable interrupts
2F94:10F8  80 26 0017 F0			and	byte ptr ds:[data_11e],0F0h	; (2F94:0017=0)
2F94:10FD  80 26 0018 0F			and	byte ptr ds:[data_12e],0Fh	; (2F94:0018=0)
2F94:1102  80 26 0088 1F			and	byte ptr ds:[data_19e],1Fh	; (2F94:0088=0)
2F94:1107  FB					sti				; Enable interrupts
2F94:1108  5E					pop	si
2F94:1109  5F					pop	di
2F94:110A  5B					pop	bx
2F94:110B  CF					iret				; Interrupt return
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 31

2F94:110C			loc_109:					;  xref 2F94:10F5
2F94:110C  FA					cli				; Disable interrupts
2F94:110D  80 26 0018 F7			and	byte ptr ds:[data_12e],0F7h	; (2F94:0018=0)
2F94:1112  50					push	ax
2F94:1113  1E					push	ds
2F94:1114  B8 0050				mov	ax,50h
2F94:1117  8E D8				mov	ds,ax
2F94:1119  C6 06 0000 01			mov	byte ptr ds:[data_6e],1	; (0050:0000=0)
2F94:111E  1F					pop	ds
2F94:111F  58					pop	ax
2F94:1120 .BF 001C				mov	di,data_14e		; (2F94:001C=0)
2F94:1123  8B 1D				mov	bx,[di]
2F94:1125  8B F3				mov	si,bx
2F94:1127  43					inc	bx
2F94:1128  43					inc	bx
2F94:1129  3B 1E 0082				cmp	bx,ds:[PSP_cmd_tail+1]	; (2F94:0082=0)
2F94:112D  75 04				jne	loc_110			; Jump if not equal
2F94:112F  8B 1E 0080				mov	bx,ds:[PSP_cmd_size]	; (2F94:0080=0)
2F94:1133			loc_110:					;  xref 2F94:112D
2F94:1133  3B 1E 001A				cmp	bx,ds:[data_13e]	; (2F94:001A=0)
2F94:1137  75 14				jne	loc_111			; Jump if not equal
2F94:1139  80 26 0017 F0			and	byte ptr ds:[data_11e],0F0h	; (2F94:0017=0)
2F94:113E  80 26 0018 0F			and	byte ptr ds:[data_12e],0Fh	; (2F94:0018=0)
2F94:1143  80 26 0088 1F			and	byte ptr ds:[data_19e],1Fh	; (2F94:0088=0)
2F94:1148  5E					pop	si
2F94:1149  5F					pop	di
2F94:114A  EB 09				jmp	short loc_112		; (1155)
2F94:114C  90					db	90h
2F94:114D			loc_111:					;  xref 2F94:1137
2F94:114D  89 04				mov	[si],ax
2F94:114F  89 1E 001C				mov	ds:[data_14e],bx	; (2F94:001C=0)
2F94:1153  5E					pop	si
2F94:1154  5F					pop	di
2F94:1155			loc_112:					;  xref 2F94:114A
2F94:1155  2E: 8B 1E 0DB2			mov	bx,cs:[keyboard_buf_wrptr]	; (2F94:0DB2=0)
2F94:115A  2E: 88 87 0DA0			mov	cs:[keyboard_buf][bx],al	; (2F94:0DA0=0)
2F94:115F  43					inc	bx
2F94:1160  2E: 3B 1E 3B98			cmp	bx,cs:[keyboard_buf_len]	; (2F94:3B98=0Ah)
2F94:1165  72 02				jb	loc_113			; Jump if below
2F94:1167  33 DB				xor	bx,bx			; Zero register
2F94:1169			loc_113:					;  xref 2F94:1165
2F94:1169  2E: 3B 1E 0DB0			cmp	bx,cs:[keyboard_buf_rdptr]	; (2F94:0DB0=0)
2F94:116E  74 05				je	loc_114			; Jump if equal
2F94:1170  2E: 89 1E 0DB2			mov	cs:[keyboard_buf_wrptr],bx	; (2F94:0DB2=0)
2F94:1175			loc_114:					;  xref 2F94:116E
2F94:1175  5B					pop	bx
2F94:1176  FB					sti				; Enable interrupts
2F94:1177  CF					iret				; Interrupt return
				int_handler_3	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          check_stick
				;
				;         Called from:   2F94:031C, 0329, 12CA, 12F5, 2539, 25CA, 2630
				;                             275C, 27B7, 3D6C, 51D5, 7ABB, 7B92, 7BE3
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 32


2F94:1178			check_stick	proc	near
2F94:1178  53					push	bx
2F94:1179  33 C0				xor	ax,ax			; Zero register
2F94:117B  FA					cli				; Disable interrupts
2F94:117C  8B 1E 0DB0				mov	bx,[keyboard_buf_rdptr]	; (2F94:0DB0=0)
2F94:1180  3B 1E 0DB2				cmp	bx,[keyboard_buf_wrptr]	; (2F94:0DB2=0)
2F94:1184  75 03				jne	is_scancode_ctrl	; Jump if not equal
2F94:1186  FB					sti				; Enable interrupts
2F94:1187  5B					pop	bx
2F94:1188  C3					retn
2F94:1189			is_scancode_ctrl:				;  xref 2F94:1184
2F94:1189  8A 87 0DA0				mov	al,[keyboard_buf][bx]	; (2F94:0DA0=0)
2F94:118D  3C 1D				cmp	al,1Dh
2F94:118F  75 08				jne	is_scancode_alt		; Jump if not equal
2F94:1191  C6 06 0DB8 01			mov	[ctrl_pressed],1	; (2F94:0DB8=0)
2F94:1196  EB 41				jmp	short loc_115		; (11D9)
2F94:1198  90					db	90h
2F94:1199			is_scancode_alt:				;  xref 2F94:118F
2F94:1199  3C 38				cmp	al,38h			; '8'
2F94:119B  75 08				jne	is_scancode_del		; Jump if not equal
2F94:119D  C6 06 0DB9 01			mov	[alt_pressed],1		; (2F94:0DB9=0)
2F94:11A2  EB 35				jmp	short loc_115		; (11D9)
2F94:11A4  90					db	90h
2F94:11A5			is_scancode_del:				;  xref 2F94:119B
2F94:11A5  3C 53				cmp	al,53h			; 'S'
2F94:11A7  75 08				jne	is_scancode_turbo_b8	; Jump if not equal
2F94:11A9  C6 06 0DBA 01			mov	[del_pressed],1		; (2F94:0DBA=0)
2F94:11AE  EB 29				jmp	short loc_115		; (11D9)
2F94:11B0  90					db	90h
2F94:11B1			is_scancode_turbo_b8:				;  xref 2F94:11A7
2F94:11B1  A8 80				test	al,80h
2F94:11B3  74 24				jz	loc_115			; Jump if zero
2F94:11B5  3C B8				cmp	al,0B8h
2F94:11B7  75 08				jne	is_scancode_turbo2_9d	; Jump if not equal
2F94:11B9  C6 06 0DB9 00			mov	[alt_pressed],0		; (2F94:0DB9=0)
2F94:11BE  EB 49				jmp	short is_esc_release	; (1209)
2F94:11C0  90					db	90h
2F94:11C1			is_scancode_turbo2_9d:				;  xref 2F94:11B7
2F94:11C1  3C 9D				cmp	al,9Dh
2F94:11C3  75 08				jne	is_scancode_d3		; Jump if not equal
2F94:11C5  C6 06 0DB8 00			mov	[ctrl_pressed],0	; (2F94:0DB8=0)
2F94:11CA  EB 3D				jmp	short is_esc_release	; (1209)
2F94:11CC  90					db	90h
2F94:11CD			is_scancode_d3:					;  xref 2F94:11C3
2F94:11CD  3C D3				cmp	al,0D3h
2F94:11CF  75 38				jne	is_esc_release		; Jump if not equal
2F94:11D1  C6 06 0DBA 00			mov	[del_pressed],0		; (2F94:0DBA=0)
2F94:11D6  EB 31				jmp	short is_esc_release	; (1209)
2F94:11D8  90					db	90h
2F94:11D9			loc_115:					;  xref 2F94:1196, 11A2, 11AE, 11B3
2F94:11D9  F6 06 0DBA 01			test	[del_pressed],1		; (2F94:0DBA=0)
2F94:11DE  74 29				jz	is_esc_release		; Jump if zero
2F94:11E0  F6 06 0DB8 01			test	[ctrl_pressed],1	; (2F94:0DB8=0)
2F94:11E5  74 22				jz	is_esc_release		; Jump if zero
2F94:11E7  F6 06 0DB9 01			test	[alt_pressed],1		; (2F94:0DB9=0)
2F94:11EC  74 1B				jz	is_esc_release		; Jump if zero
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 33

2F94:11EE			gtfo:
2F94:11EE  E8 6538				call	sub_25			; (7729)
2F94:11F1  E8 0048				call	sub_3			; (123C)
2F94:11F4  B8 0002				mov	ax,2
2F94:11F7  CD 10				int	10h			; Video display   ah=functn 00h
										;  set display mode in al
2F94:11F9  CD 20				int	20h			; DOS program terminate
							                        ;* No entry point to code
2F94:11FB  C7 07 1234				mov	word ptr [bx],1234h
2F94:11FF  B8 0000				mov	ax,0
2F94:1202  8E C0				mov	es,ax
2F94:1204  2E: FF 2E 103C			jmp	dword ptr cs:[data_55]	; (2F94:103C=0E05Bh)
2F94:1209			is_esc_release:					;  xref 2F94:11BE, 11CA, 11CF, 11D6
										;            11DE, 11E5, 11EC
2F94:1209  3C 81				cmp	al,81h
2F94:120B  75 1F				jne	loc_117			; Jump if not equal
2F94:120D  80 3E 0153 01			cmp	[data_42],1		; (2F94:0153=0)
2F94:1212  74 18				je	loc_117			; Jump if equal
2F94:1214  E8 003E				call	pause_game		; (1255)
2F94:1217  3C 93				cmp	al,93h
2F94:1219  74 0E				je	loc_116			; Jump if equal
2F94:121B  C7 06 0DB0 0000			mov	[keyboard_buf_rdptr],0	; (2F94:0DB0=0)
2F94:1221  C7 06 0DB2 0000			mov	[keyboard_buf_wrptr],0	; (2F94:0DB2=0)
2F94:1227  B0 00				mov	al,0
2F94:1229			loc_116:					;  xref 2F94:1219
2F94:1229  FB					sti				; Enable interrupts
2F94:122A  5B					pop	bx
2F94:122B  C3					retn
2F94:122C			loc_117:					;  xref 2F94:120B, 1212
2F94:122C  43					inc	bx
2F94:122D  3B 1E 3B98				cmp	bx,[keyboard_buf_len]	; (2F94:3B98=0Ah)
2F94:1231  72 02				jb	loc_118			; Jump if below
2F94:1233  33 DB				xor	bx,bx			; Zero register
2F94:1235			loc_118:					;  xref 2F94:1231
2F94:1235  89 1E 0DB0				mov	[keyboard_buf_rdptr],bx	; (2F94:0DB0=0)
2F94:1239  FB					sti				; Enable interrupts
2F94:123A  5B					pop	bx
2F94:123B  C3					retn
				check_stick	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                              SUBROUTINE
				;
				;         Called from:   2F94:11F1
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:123C			sub_3		proc	near
2F94:123C  FA					cli				; Disable interrupts
2F94:123D  06					push	es
2F94:123E  33 C0				xor	ax,ax			; Zero register
2F94:1240  8E C0				mov	es,ax
2F94:1242 .BF 0024				mov	di,data_3e		; (0000:0024=87h)
2F94:1245  A1 0DB4				mov	ax,[old_kbd_handler_w1]	; (2F94:0DB4=0)
2F94:1248  FC					cld				; Clear direction
2F94:1249  AB					stosw				; Store ax to es:[di]
2F94:124A  A1 0DB6				mov	ax,[old_kbd_handler_w0]	; (2F94:0DB6=0)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 34

2F94:124D  AB					stosw				; Store ax to es:[di]
2F94:124E  07					pop	es
2F94:124F  B0 FC				mov	al,0FCh
2F94:1251  E6 21				out	21h,al			; port 21h, 8259-1 int comands
2F94:1253  FB					sti				; Enable interrupts
2F94:1254  C3					retn
				sub_3		endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          pause_game
				;
				;         Called from:   2F94:1214
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:1255			pause_game	proc	near
2F94:1255  53					push	bx
2F94:1256  50					push	ax
2F94:1257  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:1259  24 FC				and	al,0FCh
2F94:125B  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
										;  al = 0, speaker off
2F94:125D  58					pop	ax
2F94:125E  B2 50				mov	dl,50h			; 'P'
2F94:1260  B6 1C				mov	dh,1Ch
2F94:1262  B3 16				mov	bl,16h
2F94:1264  B7 08				mov	bh,8
2F94:1266  BF 0DBC				mov	di,0DBCh
2F94:1269  E8 4F14				call	sub_22			; (6180)
2F94:126C  53					push	bx
2F94:126D  52					push	dx
2F94:126E  50					push	ax
2F94:126F  33 DB				xor	bx,bx			; Zero register
2F94:1271  B6 0A				mov	dh,0Ah
2F94:1273  B2 0E				mov	dl,0Eh
2F94:1275  B4 02				mov	ah,2
2F94:1277  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:1279  58					pop	ax
2F94:127A  5A					pop	dx
2F94:127B  5B					pop	bx
2F94:127C .BE 1040				mov	si,offset data_56	; (2F94:1040='Game pausedPress')
2F94:127F  BB 0001				mov	bx,1
2F94:1282  B9 000B				mov	cx,0Bh
2F94:1285  E8 0D50				call	puts2			; (1FD8)
2F94:1288  B2 60				mov	dl,60h			; '`'
2F94:128A  B6 0C				mov	dh,0Ch
2F94:128C  B3 3A				mov	bl,3Ah			; ':'
2F94:128E  B7 08				mov	bh,8
2F94:1290  BF 0E6C				mov	di,0E6Ch
2F94:1293  E8 4EEA				call	sub_22			; (6180)
2F94:1296  C7 06 0DB0 0000			mov	[keyboard_buf_rdptr],0	; (2F94:0DB0=0)
2F94:129C  C7 06 0DB2 0000			mov	[keyboard_buf_wrptr],0	; (2F94:0DB2=0)
2F94:12A2  53					push	bx
2F94:12A3  52					push	dx
2F94:12A4  50					push	ax
2F94:12A5  33 DB				xor	bx,bx			; Zero register
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 35

2F94:12A7  B6 0C				mov	dh,0Ch
2F94:12A9  B2 06				mov	dl,6
2F94:12AB  B4 02				mov	ah,2
2F94:12AD  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:12AF  58					pop	ax
2F94:12B0  5A					pop	dx
2F94:12B1  5B					pop	bx
2F94:12B2  BB 0001				mov	bx,1
2F94:12B5  B9 001D				mov	cx,1Dh
2F94:12B8  80 3E 0132 01			cmp	[joystick_selected],1	; (2F94:0132=0)
2F94:12BD  74 15				je	loc_120			; Jump if equal
2F94:12BF .BE 104B				mov	si,offset data_56+0Bh	; (2F94:104B='Press any key to')
2F94:12C2  E8 0D13				call	puts2			; (1FD8)
2F94:12C5  C6 06 0153 01			mov	[data_42],1		; (2F94:0153=0)
2F94:12CA			loc_119:					;  xref 2F94:12CF
2F94:12CA  E8 FEAB				call	check_stick		; (1178)
2F94:12CD  A8 80				test	al,80h
2F94:12CF  74 F9				jz	loc_119			; Jump if zero
2F94:12D1  EB 30				jmp	short loc_122		; (1303)
2F94:12D3  90					db	90h
2F94:12D4			loc_120:					;  xref 2F94:12BD
2F94:12D4 .BE 1068				mov	si,offset 1068h		; (2F94:1068='Press a button t')
2F94:12D7  E8 0CFE				call	puts2			; (1FD8)
2F94:12DA  C7 06 0DB0 0000			mov	[keyboard_buf_rdptr],0	; (2F94:0DB0=0)
2F94:12E0  C7 06 0DB2 0000			mov	[keyboard_buf_wrptr],0	; (2F94:0DB2=0)
2F94:12E6  C6 06 0153 01			mov	[data_42],1		; (2F94:0153=0)
2F94:12EB			loc_121:					;  xref 2F94:12FD, 1301
2F94:12EB  BA 0201				mov	dx,201h
2F94:12EE  EC					in	al,dx			; port 201h, start game 1-shots
2F94:12EF  F6 D0				not	al
2F94:12F1  24 F0				and	al,0F0h
2F94:12F3  75 0E				jnz	loc_122			; Jump if not zero
2F94:12F5  E8 FE80				call	check_stick		; (1178)
2F94:12F8  80 3E 0DB8 01			cmp	[ctrl_pressed],1	; (2F94:0DB8=0)
2F94:12FD  75 EC				jne	loc_121			; Jump if not equal
2F94:12FF  3C 93				cmp	al,93h
2F94:1301  75 E8				jne	loc_121			; Jump if not equal
2F94:1303			loc_122:					;  xref 2F94:12D1, 12F3
2F94:1303  B2 50				mov	dl,50h			; 'P'
2F94:1305  B6 1C				mov	dh,1Ch
2F94:1307  B3 16				mov	bl,16h
2F94:1309  B7 08				mov	bh,8
2F94:130B .BE 0DBC				mov	si,offset data_53	; (2F94:0DBC=0)
2F94:130E  E8 4EAF				call	draw_si_to_screen	; (61C0)
2F94:1311  B2 60				mov	dl,60h			; '`'
2F94:1313  B6 0C				mov	dh,0Ch
2F94:1315  B3 3A				mov	bl,3Ah			; ':'
2F94:1317  B7 08				mov	bh,8
2F94:1319 .BE 0E6C				mov	si,offset data_54	; (2F94:0E6C=0)
2F94:131C  E8 4EA1				call	draw_si_to_screen	; (61C0)
2F94:131F  C6 06 0153 00			mov	[data_42],0		; (2F94:0153=0)
2F94:1324  5B					pop	bx
2F94:1325  C3					retn
				pause_game	endp

2F94:1326  000A[00]				db	10 dup (0)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 36

2F94:1330  00			collision_1330	db	0			;  xref 2F94:03A2, 1336, 1355, 137B
										;            139A, 13BB, 13D4, 13E4
										;            140A, 1423, 1433, 148D
										;            14B0, 2994, 2EEF, 2F10
										;            2F23, 2F36, 2F49, 2F5C
										;            3E97, 3EBD, 435A, 4396
										;            43C8, 4404, 4432, 4460
										;            449C, 44CE, 4C4A, 4C64
										;            4C98, 4CC4, 4CE9, 540C
										;            5E3E, 615B, 7696, 76B5
										;            76DB
2F94:1331  00			pointless_save_1331	db	0			;  xref 2F94:133B, 134B, 1380, 1390
										;            13C0, 13D0, 140F, 141F
										;            1454, 1464, 1489, 149E
										;            14D0, 14E0, 1506, 1516
										;            1535, 1545

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          draw_sprite_xor_v4_check_wall
				;
				;         Called from:   2F94:01F3
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:1332			draw_sprite_xor_v4_check_wall	proc	near
2F94:1332  50					push	ax
2F94:1333  51					push	cx
2F94:1334  52					push	dx
2F94:1335  56					push	si
2F94:1336  C6 06 1330 00			mov	[collision_1330],0	; (2F94:1330=0)
2F94:133B  88 1E 1331				mov	[pointless_save_1331],bl	; (2F94:1331=0)
2F94:133F			loc_123:					;  xref 2F94:1370
2F94:133F њ8B F2				mov	si,dx
2F94:1341  D1 E6				shl	si,1			; Shift w/zeros fill
2F94:1343  8B 84 68E0				mov	ax,[line_offsets_table][si]	; (2F94:68E0=0)
2F94:1347  03 C1				add	ax,cx
2F94:1349  8B F0				mov	si,ax
2F94:134B  8A 1E 1331				mov	bl,[pointless_save_1331]	; (2F94:1331=0)
2F94:134F			loc_124:					;  xref 2F94:1368
2F94:134F  26: F6 04 AA				test	byte ptr es:[si],0AAh
2F94:1353  74 05				jz	loc_125			; Jump if zero
2F94:1355  C6 06 1330 01			mov	[collision_1330],1	; (2F94:1330=0)
2F94:135A			loc_125:					;  xref 2F94:1353
2F94:135A  8A 05				mov	al,[di]
2F94:135C  26: 32 04				xor	al,es:[si]
2F94:135F  26: 88 04				mov	es:[si],al
2F94:1362  47					inc	di
2F94:1363  46					inc	si
2F94:1364  FE CF				dec	bh
2F94:1366  FE CB				dec	bl
2F94:1368  75 E5				jnz	loc_124			; Jump if not zero
2F94:136A  80 FF 00				cmp	bh,0
2F94:136D  7E 03				jle	loc_126			; Jump if < or =
2F94:136F  42					inc	dx
2F94:1370  EB CD				jmp	short loc_123		; (133F)
2F94:1372			loc_126:					;  xref 2F94:136D
2F94:1372  5E					pop	si
2F94:1373  5A					pop	dx
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 37

2F94:1374  59					pop	cx
2F94:1375  58					pop	ax
2F94:1376  C3					retn
				draw_sprite_xor_v4_check_wall	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         di=bitmap bx=hhww cx=X dx=Y
				;
				;         Called from:   2F94:2991, 3611, 364D, 3678, 36B0, 36D8, 3700
				;                             3739, 3765, 379E, 37EC, 3839, 3882, 38CA
				;                             4C47, 4C61, 4C95, 4CC1, 4CE6
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:1377			draw_sprite_xor_check_wall	proc	near
2F94:1377  50					push	ax
2F94:1378  51					push	cx
2F94:1379  52					push	dx
2F94:137A  56					push	si
2F94:137B  C6 06 1330 00			mov	[collision_1330],0	; (2F94:1330=0)
2F94:1380  88 1E 1331				mov	[pointless_save_1331],bl	; (2F94:1331=0)
2F94:1384			loc_127:					;  xref 2F94:13B0
2F94:1384  8B F2				mov	si,dx
2F94:1386  D1 E6				shl	si,1			; Shift w/zeros fill
2F94:1388  8B 84 68E0				mov	ax,[line_offsets_table][si]	; (2F94:68E0=0)
2F94:138C  03 C1				add	ax,cx
2F94:138E  8B F0				mov	si,ax
2F94:1390  8A 1E 1331				mov	bl,[pointless_save_1331]	; (2F94:1331=0)
2F94:1394			loc_128:					;  xref 2F94:13AB
2F94:1394  26: F6 04 AA				test	byte ptr es:[si],0AAh
2F94:1398  74 05				jz	loc_129			; Jump if zero
2F94:139A  C6 06 1330 01			mov	[collision_1330],1	; (2F94:1330=0)
2F94:139F			loc_129:					;  xref 2F94:1398
2F94:139F  8A 05				mov	al,[di]
2F94:13A1  26: 32 04				xor	al,es:[si]
2F94:13A4  26: 88 04				mov	es:[si],al
2F94:13A7  47					inc	di
2F94:13A8  46					inc	si
2F94:13A9  FE CB				dec	bl
2F94:13AB  75 E7				jnz	loc_128			; Jump if not zero
2F94:13AD  42					inc	dx
2F94:13AE  FE CF				dec	bh
2F94:13B0  75 D2				jnz	loc_127			; Jump if not zero
2F94:13B2  5E					pop	si
2F94:13B3  5A					pop	dx
2F94:13B4  59					pop	cx
2F94:13B5  58					pop	ax
2F94:13B6  C3					retn
				draw_sprite_xor_check_wall	endp

							                        ;* No entry point to code
2F94:13B7  50					push	ax
2F94:13B8  51					push	cx
2F94:13B9  52					push	dx
2F94:13BA  56					push	si
2F94:13BB  C6 06 1330 00			mov	[collision_1330],0	; (2F94:1330=0)
2F94:13C0  88 1E 1331				mov	[pointless_save_1331],bl	; (2F94:1331=0)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 38

2F94:13C4			loc_130:					;  xref 2F94:13FF
2F94:13C4 њ8B F2				mov	si,dx
2F94:13C6  D1 E6				shl	si,1			; Shift w/zeros fill
2F94:13C8  8B 84 68E0				mov	ax,[line_offsets_table][si]	; (2F94:68E0=0)
2F94:13CC  03 C1				add	ax,cx
2F94:13CE  8B F0				mov	si,ax
2F94:13D0  8A 1E 1331				mov	bl,[pointless_save_1331]	; (2F94:1331=0)
2F94:13D4			loc_131:					;  xref 2F94:13F7
2F94:13D4  80 3E 1330 00			cmp	[collision_1330],0	; (2F94:1330=0)
2F94:13D9  7F 0E				jg	loc_132			; Jump if >
2F94:13DB  8A 05				mov	al,[di]
2F94:13DD  26: 22 04				and	al,es:[si]
2F94:13E0  24 AA				and	al,0AAh
2F94:13E2  74 05				jz	loc_132			; Jump if zero
2F94:13E4  C6 06 1330 01			mov	[collision_1330],1	; (2F94:1330=0)
2F94:13E9			loc_132:					;  xref 2F94:13D9, 13E2
2F94:13E9  8A 05				mov	al,[di]
2F94:13EB  26: 32 04				xor	al,es:[si]
2F94:13EE  26: 88 04				mov	es:[si],al
2F94:13F1  47					inc	di
2F94:13F2  46					inc	si
2F94:13F3  FE CF				dec	bh
2F94:13F5  FE CB				dec	bl
2F94:13F7  75 DB				jnz	loc_131			; Jump if not zero
2F94:13F9  80 FF 00				cmp	bh,0
2F94:13FC  7E 03				jle	loc_133			; Jump if < or =
2F94:13FE  42					inc	dx
2F94:13FF  EB C3				jmp	short loc_130		; (13C4)
2F94:1401			loc_133:					;  xref 2F94:13FC
2F94:1401  5E					pop	si
2F94:1402  5A					pop	dx
2F94:1403  59					pop	cx
2F94:1404  58					pop	ax
2F94:1405  C3					retn
							                        ;* No entry point to code
2F94:1406  50					push	ax
2F94:1407  51					push	cx
2F94:1408  52					push	dx
2F94:1409  56					push	si
2F94:140A  C6 06 1330 00			mov	[collision_1330],0	; (2F94:1330=0)
2F94:140F  88 1E 1331				mov	[pointless_save_1331],bl	; (2F94:1331=0)
2F94:1413			loc_134:					;  xref 2F94:1449
2F94:1413  8B F2				mov	si,dx
2F94:1415  D1 E6				shl	si,1			; Shift w/zeros fill
2F94:1417  8B 84 68E0				mov	ax,[line_offsets_table][si]	; (2F94:68E0=0)
2F94:141B  03 C1				add	ax,cx
2F94:141D  8B F0				mov	si,ax
2F94:141F  8A 1E 1331				mov	bl,[pointless_save_1331]	; (2F94:1331=0)
2F94:1423			loc_135:					;  xref 2F94:1444
2F94:1423  80 3E 1330 00			cmp	[collision_1330],0	; (2F94:1330=0)
2F94:1428  7F 0E				jg	loc_136			; Jump if >
2F94:142A  8A 05				mov	al,[di]
2F94:142C  26: 22 04				and	al,es:[si]
2F94:142F  24 AA				and	al,0AAh
2F94:1431  74 05				jz	loc_136			; Jump if zero
2F94:1433  C6 06 1330 01			mov	[collision_1330],1	; (2F94:1330=0)
2F94:1438			loc_136:					;  xref 2F94:1428, 1431
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 39

2F94:1438  8A 05				mov	al,[di]
2F94:143A  26: 32 04				xor	al,es:[si]
2F94:143D  26: 88 04				mov	es:[si],al
2F94:1440  47					inc	di
2F94:1441  46					inc	si
2F94:1442  FE CB				dec	bl
2F94:1444  75 DD				jnz	loc_135			; Jump if not zero
2F94:1446  42					inc	dx
2F94:1447  FE CF				dec	bh
2F94:1449  75 C8				jnz	loc_134			; Jump if not zero
2F94:144B  5E					pop	si
2F94:144C  5A					pop	dx
2F94:144D  59					pop	cx
2F94:144E  58					pop	ax
2F94:144F  C3					retn

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         di=bitmap bx=hhww cx=X dx=Y
				;
				;         Called from:   2F94:2A68, 4387, 43B9, 43F5, 4423, 4451, 448D
				;                             44BF, 44FB, 4661, 46B6, 46C9, 46DD, 4743
				;                             4757, 47B0, 47FB, 4850, 4866, 487E, 4913
				;                             4959, 496F, 4985, 4A20, 4A35, 4D43, 4D6E
				;                             53C1, 551D, 5623, 575E, 5782, 579A, 5829
				;                             5836, 58FE, 5929, 5983, 59B1, 5A15, 5A27
				;                             5ADC, 77F6, 7BC8
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:1450			draw_sprite_xor_v2_cxX_dxY	proc	near
2F94:1450  50					push	ax
2F94:1451  51					push	cx
2F94:1452  52					push	dx
2F94:1453  56					push	si
2F94:1454  88 1E 1331				mov	[pointless_save_1331],bl	; (2F94:1331=0)
2F94:1458			loc_137:					;  xref 2F94:147E
2F94:1458 њ8B F2				mov	si,dx
2F94:145A  D1 E6				shl	si,1			; Shift w/zeros fill
2F94:145C  8B 84 68E0				mov	ax,[line_offsets_table][si]	; (2F94:68E0=0)
2F94:1460  03 C1				add	ax,cx
2F94:1462  8B F0				mov	si,ax
2F94:1464  8A 1E 1331				mov	bl,[pointless_save_1331]	; (2F94:1331=0)
2F94:1468			loc_138:					;  xref 2F94:1476
2F94:1468  8A 05				mov	al,[di]
2F94:146A  26: 32 04				xor	al,es:[si]
2F94:146D  26: 88 04				mov	es:[si],al
2F94:1470  47					inc	di
2F94:1471  46					inc	si
2F94:1472  FE CF				dec	bh
2F94:1474  FE CB				dec	bl
2F94:1476  75 F0				jnz	loc_138			; Jump if not zero
2F94:1478  80 FF 00				cmp	bh,0
2F94:147B  74 03				je	loc_139			; Jump if equal
2F94:147D  42					inc	dx
2F94:147E  EB D8				jmp	short loc_137		; (1458)
2F94:1480			loc_139:					;  xref 2F94:147B
2F94:1480  5E					pop	si
2F94:1481  5A					pop	dx
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 40

2F94:1482  59					pop	cx
2F94:1483  58					pop	ax
2F94:1484  C3					retn
				draw_sprite_xor_v2_cxX_dxY	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         di=bitmap bx=hhww cx=X dx=Y
				;
				;         Called from:   2F94:4357, 4393, 43C5, 4401, 442F, 445D, 4499
				;                             44CB, 5409, 55BA, 5607, 5631, 5716, 5810
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:1485			draw_sprite_xor_v3_check_wall	proc	near
2F94:1485  50					push	ax
2F94:1486  51					push	cx
2F94:1487  52					push	dx
2F94:1488  56					push	si
2F94:1489  88 1E 1331				mov	[pointless_save_1331],bl	; (2F94:1331=0)
2F94:148D  C6 06 1330 00			mov	[collision_1330],0	; (2F94:1330=0)
2F94:1492			loc_140:					;  xref 2F94:14C3
2F94:1492 њ8B F2				mov	si,dx
2F94:1494  D1 E6				shl	si,1			; Shift w/zeros fill
2F94:1496  8B 84 68E0				mov	ax,[line_offsets_table][si]	; (2F94:68E0=0)
2F94:149A  03 C1				add	ax,cx
2F94:149C  8B F0				mov	si,ax
2F94:149E  8A 1E 1331				mov	bl,[pointless_save_1331]	; (2F94:1331=0)
2F94:14A2			loc_141:					;  xref 2F94:14BB
2F94:14A2  8A 05				mov	al,[di]
2F94:14A4  26: 32 04				xor	al,es:[si]
2F94:14A7  26: 88 04				mov	es:[si],al
2F94:14AA  22 05				and	al,[di]
2F94:14AC  24 AA				and	al,0AAh
2F94:14AE  74 05				jz	loc_142			; Jump if zero
2F94:14B0  C6 06 1330 01			mov	[collision_1330],1	; (2F94:1330=0)
2F94:14B5			loc_142:					;  xref 2F94:14AE
2F94:14B5  47					inc	di
2F94:14B6  46					inc	si
2F94:14B7  FE CF				dec	bh
2F94:14B9  FE CB				dec	bl
2F94:14BB  75 E5				jnz	loc_141			; Jump if not zero
2F94:14BD  80 FF 00				cmp	bh,0
2F94:14C0  7E 03				jle	loc_143			; Jump if < or =
2F94:14C2  42					inc	dx
2F94:14C3  EB CD				jmp	short loc_140		; (1492)
2F94:14C5			loc_143:					;  xref 2F94:14C0
2F94:14C5  5E					pop	si
2F94:14C6  5A					pop	dx
2F94:14C7  59					pop	cx
2F94:14C8  58					pop	ax
2F94:14C9  C3					retn
				draw_sprite_xor_v3_check_wall	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         di=bitmap bx=hhww cx=X dx=Y
				;
           shamus.lst						Sourcer	v8.01  20-Dec-2023  2:31 am   Page 41

				;         Called from:   2F94:0ABF, 0AE4, 0AF9, 0C9B, 0CD5, 33D0, 33F3
				;                             3406, 4A6D, 4A76, 4A7F, 4A8A, 4A93, 4A9C
				;                             4AA7, 4AB0, 4AB9, 63B3
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:14CA			draw_sprite_v2	proc	near
2F94:14CA  50					push	ax
2F94:14CB  53					push	bx
2F94:14CC  51					push	cx
2F94:14CD  52					push	dx
2F94:14CE  57					push	di
2F94:14CF  56					push	si
2F94:14D0  88 1E 1331				mov	[pointless_save_1331],bl	; (2F94:1331=0)
2F94:14D4			loc_144:					;  xref 2F94:14F7
2F94:14D4 њ8B F2				mov	si,dx
2F94:14D6  D1 E6				shl	si,1			; Shift w/zeros fill
2F94:14D8  8B 84 68E0				mov	ax,[line_offsets_table][si]	; (2F94:68E0=0)
2F94:14DC  03 C1				add	ax,cx
2F94:14DE  8B F0				mov	si,ax
2F94:14E0  8A 1E 1331				mov	bl,[pointless_save_1331]	; (2F94:1331=0)
2F94:14E4			loc_145:					;  xref 2F94:14EF
2F94:14E4  8A 05				mov	al,[di]
2F94:14E6  26: 88 04				mov	es:[si],al
2F94:14E9  47					inc	di
2F94:14EA  46					inc	si
2F94:14EB  FE CF				dec	bh
2F94:14ED  FE CB				dec	bl
2F94:14EF  75 F3				jnz	loc_145			; Jump if not zero
2F94:14F1  80 FF 00				cmp	bh,0
2F94:14F4  7E 03				jle	loc_146			; Jump if < or =
2F94:14F6  42					inc	dx
2F94:14F7  EB DB				jmp	short loc_144		; (14D4)
2F94:14F9			loc_146:					;  xref 2F94:14F4
2F94:14F9  5E					pop	si
2F94:14FA  5F					pop	di
2F94:14FB  5A					pop	dx
2F94:14FC  59					pop	cx
2F94:14FD  5B					pop	bx
2F94:14FE  58					pop	ax
2F94:14FF  C3					retn
				draw_sprite_v2	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         di=bitmap bx=hhww cx=X dx=Y
				;
				;         Called from:   2F94:23A4, 23B0, 23BC, 23C5, 23D4, 23E0, 23EC
				;                             23F8
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:1500			draw_sprite_v1	proc	near
2F94:1500  50					push	ax
2F94:1501  53					push	bx
2F94:1502  51					push	cx
2F94:1503  52					push	dx
2F94:1504  57					push	di
2F94:1505  56					push	si
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 42

2F94:1506  88 1E 1331				mov	[pointless_save_1331],bl	; (2F94:1331=0)
2F94:150A			loc_147:					;  xref 2F94:1528
2F94:150A  8B F2				mov	si,dx
2F94:150C  D1 E6				shl	si,1			; Shift w/zeros fill
2F94:150E  8B 84 68E0				mov	ax,[line_offsets_table][si]	; (2F94:68E0=0)
2F94:1512  03 C1				add	ax,cx
2F94:1514  8B F0				mov	si,ax
2F94:1516  8A 1E 1331				mov	bl,[pointless_save_1331]	; (2F94:1331=0)
2F94:151A			loc_148:					;  xref 2F94:1523
2F94:151A  8A 05				mov	al,[di]
2F94:151C  26: 88 04				mov	es:[si],al
2F94:151F  47					inc	di
2F94:1520  46					inc	si
2F94:1521  FE CB				dec	bl
2F94:1523  75 F5				jnz	loc_148			; Jump if not zero
2F94:1525  42					inc	dx
2F94:1526  FE CF				dec	bh
2F94:1528  75 E0				jnz	loc_147			; Jump if not zero
2F94:152A  5E					pop	si
2F94:152B  5F					pop	di
2F94:152C  5A					pop	dx
2F94:152D  59					pop	cx
2F94:152E  5B					pop	bx
2F94:152F  58					pop	ax
2F94:1530  C3					retn
				draw_sprite_v1	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         di=bitmap bx=hhww cx=X dx=Y
				;
				;         Called from:   2F94:08D1, 08E8, 08FF, 1E8A, 1E96, 1EA2, 1EE6
				;                             1EF2, 1EFE, 1F0A, 1F16, 1F22, 2987, 3601
				;                             3625, 3659, 368C, 36BC, 36E4, 3715, 3746
				;                             377A, 4C79, 4C87, 4CAC, 4CD8, 4CFD, 4D1B
				;                             4DAD
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:1531			draw_sprite_xor_v1	proc	near
2F94:1531  50					push	ax
2F94:1532  51					push	cx
2F94:1533  52					push	dx
2F94:1534  56					push	si
2F94:1535  88 1E 1331				mov	[pointless_save_1331],bl	; (2F94:1331=0)
2F94:1539			loc_149:					;  xref 2F94:155A
2F94:1539  8B F2				mov	si,dx
2F94:153B  D1 E6				shl	si,1			; Shift w/zeros fill
2F94:153D  8B 84 68E0				mov	ax,[line_offsets_table][si]	; (2F94:68E0=0)
2F94:1541  03 C1				add	ax,cx
2F94:1543  8B F0				mov	si,ax
2F94:1545  8A 1E 1331				mov	bl,[pointless_save_1331]	; (2F94:1331=0)
2F94:1549			loc_150:					;  xref 2F94:1555
2F94:1549  8A 05				mov	al,[di]
2F94:154B  26: 32 04				xor	al,es:[si]
2F94:154E  26: 88 04				mov	es:[si],al
2F94:1551  47					inc	di
2F94:1552  46					inc	si
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 43

2F94:1553  FE CB				dec	bl
2F94:1555  75 F2				jnz	loc_150			; Jump if not zero
2F94:1557  42					inc	dx
2F94:1558  FE CF				dec	bh
2F94:155A  75 DD				jnz	loc_149			; Jump if not zero
2F94:155C  5E					pop	si
2F94:155D  5A					pop	dx
2F94:155E  59					pop	cx
2F94:155F  58					pop	ax
2F94:1560  C3					retn
				draw_sprite_xor_v1	endp

2F94:1561  000F[00]				db	15 dup (0)
2F94:1570  FF			bigtitI_1570	db	0FFh			;  xref 2F94:1E87, 7DDD
2F94:1571  FF FC 00 00 00 FF			db	0FFh,0FCh, 00h, 00h, 00h,0FFh
2F94:1577  FF FC 00 00 00 03			db	0FFh,0FCh, 00h, 00h, 00h, 03h
2F94:157D  FF 00 00 00 00 03			db	0FFh, 00h, 00h, 00h, 00h, 03h
2F94:1583  FF 00 00 00 00 03			db	0FFh, 00h, 00h, 00h, 00h, 03h
2F94:1589  FF 00 00 00 00 03			db	0FFh, 00h, 00h, 00h, 00h, 03h
2F94:158F  FF 00 00 00 00 FF			db	0FFh, 00h, 00h, 00h, 00h,0FFh
2F94:1595  FF FC 00 00 00 FF			db	0FFh,0FCh, 00h, 00h, 00h,0FFh
2F94:159B  FF FC				db	0FFh,0FCh
2F94:159D  3F			bigtitB_159D	db	3Fh			;  xref 2F94:1E93
2F94:159E  FF FF F0 00 00 00			db	0FFh,0FFh,0F0h, 00h, 00h, 00h
2F94:15A4  00 00 00 3F FF FF			db	 00h, 00h, 00h, 3Fh,0FFh,0FFh
2F94:15AA  FF 00 00 00 00 00			db	0FFh, 00h, 00h, 00h, 00h, 00h
2F94:15B0  00 03 FC 03 FF C0			db	 00h, 03h,0FCh, 03h,0FFh,0C0h
2F94:15B6  00 00 00 00 00 03			db	 00h, 00h, 00h, 00h, 00h, 03h
2F94:15BC  FF FF FF 00 00 00			db	0FFh,0FFh,0FFh, 00h, 00h, 00h
2F94:15C2  00 00 00 03 FF FF			db	 00h, 00h, 00h, 03h,0FFh,0FFh
2F94:15C8  FF 00 00 00 00 00			db	0FFh, 00h, 00h, 00h, 00h, 00h
2F94:15CE  00 03 FC 03 FF C0			db	 00h, 03h,0FCh, 03h,0FFh,0C0h
2F94:15D4  00 00 00 00 00 3F			db	 00h, 00h, 00h, 00h, 00h, 3Fh
2F94:15DA  FF FF FF 00 00 00			db	0FFh,0FFh,0FFh, 00h, 00h, 00h
2F94:15E0  00 00 00 3F FF FF			db	 00h, 00h, 00h, 3Fh,0FFh,0FFh
2F94:15E6  F0 00				db	0F0h, 00h
2F94:15E8  03			bigtitM_15E8	db	3			;  xref 2F94:1E9F
2F94:15E9  FF C0 00 0F FF 00			db	0FFh,0C0h, 00h, 0Fh,0FFh, 00h
2F94:15EF  00 00 00 00 00 03			db	 00h, 00h, 00h, 00h, 00h, 03h
2F94:15F5  FF F0 00 3F FF 00			db	0FFh,0F0h, 00h, 3Fh,0FFh, 00h
2F94:15FB  00 00 00 00 00 00			db	 00h, 00h, 00h, 00h, 00h, 00h
2F94:1601  3F FC 00 FF F0			db	 3Fh,0FCh, 00h,0FFh,0F0h
2F94:1606  0007[00]				db	7 dup (0)
2F94:160D  3F FF 03 FF F0			db	 3Fh,0FFh, 03h,0FFh,0F0h
2F94:1612  0007[00]				db	7 dup (0)
2F94:1619  3F CF FF CF F0			db	 3Fh,0CFh,0FFh,0CFh,0F0h
2F94:161E  0007[00]				db	7 dup (0)
2F94:1625  3F C3 FF 0F F0 00			db	 3Fh,0C3h,0FFh, 0Fh,0F0h, 00h
2F94:162B  00 00 00 00 00 03			db	 00h, 00h, 00h, 00h, 00h, 03h
2F94:1631  FF C0 FC 0F FF 00			db	0FFh,0C0h,0FCh, 0Fh,0FFh, 00h
2F94:1637  00 00 00 00 00 03			db	 00h, 00h, 00h, 00h, 00h, 03h
2F94:163D  FF C0 30 0F FF			db	0FFh,0C0h, 30h, 0Fh,0FFh
2F94:1642  02			bigtitle_S	db	2			;  xref 2F94:1EE3, 1F1F
2F94:1643  AA AA AA AA AA AA			db	0AAh,0AAh,0AAh,0AAh,0AAh,0AAh
2F94:1649  AF 00 00 0A AA AA			db	0AFh, 00h, 00h, 0Ah,0AAh,0AAh
2F94:164F  AA AA AA AA AF 00			db	0AAh,0AAh,0AAh,0AAh,0AFh, 00h
2F94:1655  00 2A AA AA AA AA			db	 00h, 2Ah,0AAh,0AAh,0AAh,0AAh
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 44

2F94:165B  AA AA AF 00 00			db	0AAh,0AAh,0AFh, 00h, 00h
2F94:1660  0007[AA]				db	7 dup (0AAh)
2F94:1667  AF 00 00				db	0AFh, 00h, 00h
2F94:166A  0007[AA]				db	7 dup (0AAh)
2F94:1671  AF 00 00				db	0AFh, 00h, 00h
2F94:1674  0007[AA]				db	7 dup (0AAh)
2F94:167B  AF 00 00 AA AB C0			db	0AFh, 00h, 00h,0AAh,0ABh,0C0h
2F94:1681  00 00 00 00 00 00			db	 00h, 00h, 00h, 00h, 00h, 00h
2F94:1687  00 AA AF 00				db	 00h,0AAh,0AFh, 00h
2F94:168B  0007[00]				db	7 dup (0)
2F94:1692  AA AF				db	0AAh,0AFh
2F94:1694  0008[00]				db	8 dup (0)
2F94:169C  AA AF				db	0AAh,0AFh
2F94:169E  0008[00]				db	8 dup (0)
2F94:16A6  AA AF				db	0AAh,0AFh
2F94:16A8  0008[00]				db	8 dup (0)
2F94:16B0  AA AF				db	0AAh,0AFh
2F94:16B2  0008[00]				db	8 dup (0)
2F94:16BA  AA AF				db	0AAh,0AFh
2F94:16BC  0008[00]				db	8 dup (0)
2F94:16C4  AA AF				db	0AAh,0AFh
2F94:16C6  0008[00]				db	8 dup (0)
2F94:16CE  AA AF				db	0AAh,0AFh
2F94:16D0  0008[00]				db	8 dup (0)
2F94:16D8  AA AB C0 00 00 00			db	0AAh,0ABh,0C0h, 00h, 00h, 00h
2F94:16DE  00 00 00 00 AA AA			db	 00h, 00h, 00h, 00h,0AAh,0AAh
2F94:16E4  AA AA AA AA AB C0			db	0AAh,0AAh,0AAh,0AAh,0ABh,0C0h
2F94:16EA  00 00				db	 00h, 00h
2F94:16EC  0007[AA]				db	7 dup (0AAh)
2F94:16F3  F0 00 00				db	0F0h, 00h, 00h
2F94:16F6  0007[AA]				db	7 dup (0AAh)
2F94:16FD  BC 00 00 2A AA AA			db	0BCh, 00h, 00h, 2Ah,0AAh,0AAh
2F94:1703  AA AA AA AA AF 00			db	0AAh,0AAh,0AAh,0AAh,0AFh, 00h
2F94:1709  00 0A AA AA AA AA			db	 00h, 0Ah,0AAh,0AAh,0AAh,0AAh
2F94:170F  AA AA AF 00 00 02			db	0AAh,0AAh,0AFh, 00h, 00h, 02h
2F94:1715  AA AA AA AA AA AA			db	0AAh,0AAh,0AAh,0AAh,0AAh,0AAh
2F94:171B  AF					db	0AFh
2F94:171C  0007[00]				db	7 dup (0)
2F94:1723  02 AA AF 00				db	 02h,0AAh,0AFh, 00h
2F94:1727  0007[00]				db	7 dup (0)
2F94:172E  AA AF				db	0AAh,0AFh
2F94:1730  0008[00]				db	8 dup (0)
2F94:1738  AA AF				db	0AAh,0AFh
2F94:173A  0008[00]				db	8 dup (0)
2F94:1742  AA AF				db	0AAh,0AFh
2F94:1744  0008[00]				db	8 dup (0)
2F94:174C  AA AF				db	0AAh,0AFh
2F94:174E  0008[00]				db	8 dup (0)
2F94:1756  AA AF				db	0AAh,0AFh
2F94:1758  0008[00]				db	8 dup (0)
2F94:1760  AA AF				db	0AAh,0AFh
2F94:1762  0008[00]				db	8 dup (0)
2F94:176A  AA AF				db	0AAh,0AFh
2F94:176C  0008[00]				db	8 dup (0)
2F94:1774  AA AF				db	0AAh,0AFh
2F94:1776  0008[00]				db	8 dup (0)
2F94:177E  AA AF				db	0AAh,0AFh
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 45

2F94:1780  0008[00]				db	8 dup (0)
2F94:1788  AA AF				db	0AAh,0AFh
2F94:178A  0007[00]				db	7 dup (0)
2F94:1791  02 AA AF 00 00 AA			db	 02h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1797  AA AA AA AA AA AA			db	0AAh,0AAh,0AAh,0AAh,0AAh,0AAh
2F94:179D  AF 00 00				db	0AFh, 00h, 00h
2F94:17A0  0007[AA]				db	7 dup (0AAh)
2F94:17A7  AF 00 00				db	0AFh, 00h, 00h
2F94:17AA  0007[AA]				db	7 dup (0AAh)
2F94:17B1  AF 00 00				db	0AFh, 00h, 00h
2F94:17B4  0007[AA]				db	7 dup (0AAh)
2F94:17BB  BC 00 00				db	0BCh, 00h, 00h
2F94:17BE  0007[AA]				db	7 dup (0AAh)
2F94:17C5  F0 00 00 AA AA AA			db	0F0h, 00h, 00h,0AAh,0AAh,0AAh
2F94:17CB  AA AA AA AB C0 00			db	0AAh,0AAh,0AAh,0ABh,0C0h, 00h
2F94:17D1  00					db	 00h
2F94:17D2  AA			bigtitle_H	db	0AAh			;  xref 2F94:1EEF
2F94:17D3  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:17D9  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:17DF  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:17E5  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:17EB  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:17F1  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:17F7  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:17FD  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:1803  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:1809  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:180F  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:1815  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:181B  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:1821  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:1827  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:182D  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:1833  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:1839  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:183F  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:1845  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:184B  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:1851  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:1857  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:185D  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:1863  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1869  AB C0 00 00 02 AA			db	0ABh,0C0h, 00h, 00h, 02h,0AAh
2F94:186F  AF 00 00 AA AA AA			db	0AFh, 00h, 00h,0AAh,0AAh,0AAh
2F94:1875  AA AA AA AA AF 00			db	0AAh,0AAh,0AAh,0AAh,0AFh, 00h
2F94:187B  00					db	 00h
2F94:187C  0007[AA]				db	7 dup (0AAh)
2F94:1883  AF 00 00				db	0AFh, 00h, 00h
2F94:1886  0007[AA]				db	7 dup (0AAh)
2F94:188D  AF 00 00				db	0AFh, 00h, 00h
2F94:1890  0007[AA]				db	7 dup (0AAh)
2F94:1897  AF 00 00				db	0AFh, 00h, 00h
2F94:189A  0007[AA]				db	7 dup (0AAh)
2F94:18A1  AF 00 00				db	0AFh, 00h, 00h
2F94:18A4  0007[AA]				db	7 dup (0AAh)
2F94:18AB  AF 00 00 AA AB C0			db	0AFh, 00h, 00h,0AAh,0ABh,0C0h
2F94:18B1  00 00 02 AA AF 00			db	 00h, 00h, 02h,0AAh,0AFh, 00h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 46

2F94:18B7  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:18BD  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:18C3  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:18C9  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:18CF  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:18D5  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:18DB  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:18E1  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:18E7  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:18ED  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:18F3  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:18F9  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:18FF  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:1905  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:190B  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:1911  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:1917  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:191D  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:1923  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:1929  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:192F  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:1935  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:193B  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:1941  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:1947  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:194D  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:1953  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1959  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:195F  AF 00 00				db	0AFh, 00h, 00h
2F94:1962  00			bigtitle_A	db	0			;  xref 2F94:1EFB
2F94:1963  00 00 0A F0				db	 00h, 00h, 0Ah,0F0h
2F94:1967  0008[00]				db	8 dup (0)
2F94:196F  2A BC 00 00 00 00			db	 2Ah,0BCh, 00h, 00h, 00h, 00h
2F94:1975  00 00 00 00 AA AF			db	 00h, 00h, 00h, 00h,0AAh,0AFh
2F94:197B  00 00 00 00 00 00			db	 00h, 00h, 00h, 00h, 00h, 00h
2F94:1981  00 02 AA AB C0 00			db	 00h, 02h,0AAh,0ABh,0C0h, 00h
2F94:1987  00 00 00 00 00 0A			db	 00h, 00h, 00h, 00h, 00h, 0Ah
2F94:198D  AA AA F0 00 00 00			db	0AAh,0AAh,0F0h, 00h, 00h, 00h
2F94:1993  00 00 00 2A AA AA			db	 00h, 00h, 00h, 2Ah,0AAh,0AAh
2F94:1999  BC 00 00 00 00 00			db	0BCh, 00h, 00h, 00h, 00h, 00h
2F94:199F  00 AA AA AA AF 00			db	 00h,0AAh,0AAh,0AAh,0AFh, 00h
2F94:19A5  00 00 00 00 02 AA			db	 00h, 00h, 00h, 00h, 02h,0AAh
2F94:19AB  AA AA AB C0 00 00			db	0AAh,0AAh,0ABh,0C0h, 00h, 00h
2F94:19B1  00 00 0A AA AA AA			db	 00h, 00h, 0Ah,0AAh,0AAh,0AAh
2F94:19B7  AA F0 00 00 00 00			db	0AAh,0F0h, 00h, 00h, 00h, 00h
2F94:19BD  2A AA AF AA AA BC			db	 2Ah,0AAh,0AFh,0AAh,0AAh,0BCh
2F94:19C3  00 00 00 00 AA AA			db	 00h, 00h, 00h, 00h,0AAh,0AAh
2F94:19C9  BC 2A AA AF 00 00			db	0BCh, 2Ah,0AAh,0AFh, 00h, 00h
2F94:19CF  00 02 AA AA F0 0A			db	 00h, 02h,0AAh,0AAh,0F0h, 0Ah
2F94:19D5  AA AB C0 00 00 0A			db	0AAh,0ABh,0C0h, 00h, 00h, 0Ah
2F94:19DB  AA AB C0 02 AA AA			db	0AAh,0ABh,0C0h, 02h,0AAh,0AAh
2F94:19E1  F0 00 00 2A AA AF			db	0F0h, 00h, 00h, 2Ah,0AAh,0AFh
2F94:19E7  00 00 AA AA BC 00			db	 00h, 00h,0AAh,0AAh,0BCh, 00h
2F94:19ED  00 2A AA BC 00 00			db	 00h, 2Ah,0AAh,0BCh, 00h, 00h
2F94:19F3  2A AA BC 00 00 AA			db	 2Ah,0AAh,0BCh, 00h, 00h,0AAh
2F94:19F9  AA F0 00 00 0A AA			db	0AAh,0F0h, 00h, 00h, 0Ah,0AAh
2F94:19FF  AF 00 00 AA AB C0			db	0AFh, 00h, 00h,0AAh,0ABh,0C0h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 47

2F94:1A05  00 00 02 AA AF 00			db	 00h, 00h, 02h,0AAh,0AFh, 00h
2F94:1A0B  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:1A11  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1A17  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:1A1D  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:1A23  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:1A29  00 AA AB C0 00 00			db	 00h,0AAh,0ABh,0C0h, 00h, 00h
2F94:1A2F  02 AA AF 00 00 AA			db	 02h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1A35  AA AA AA AA AA AA			db	0AAh,0AAh,0AAh,0AAh,0AAh,0AAh
2F94:1A3B  AF 00 00				db	0AFh, 00h, 00h
2F94:1A3E  0007[AA]				db	7 dup (0AAh)
2F94:1A45  AF 00 00				db	0AFh, 00h, 00h
2F94:1A48  0007[AA]				db	7 dup (0AAh)
2F94:1A4F  AF 00 00				db	0AFh, 00h, 00h
2F94:1A52  0007[AA]				db	7 dup (0AAh)
2F94:1A59  AF 00 00				db	0AFh, 00h, 00h
2F94:1A5C  0007[AA]				db	7 dup (0AAh)
2F94:1A63  AF 00 00				db	0AFh, 00h, 00h
2F94:1A66  0007[AA]				db	7 dup (0AAh)
2F94:1A6D  AF 00 00 AA AB C0			db	0AFh, 00h, 00h,0AAh,0ABh,0C0h
2F94:1A73  00 00 02 AA AF 00			db	 00h, 00h, 02h,0AAh,0AFh, 00h
2F94:1A79  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:1A7F  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1A85  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:1A8B  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:1A91  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:1A97  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:1A9D  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1AA3  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:1AA9  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:1AAF  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:1AB5  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:1ABB  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1AC1  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:1AC7  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:1ACD  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:1AD3  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:1AD9  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1ADF  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:1AE5  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:1AEB  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:1AF1  00					db	 00h
2F94:1AF2  AA			bigtitle_M	db	0AAh			;  xref 2F94:1F07
2F94:1AF3  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:1AF9  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:1AFF  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:1B05  00 AA AB C0 00 00			db	 00h,0AAh,0ABh,0C0h, 00h, 00h
2F94:1B0B  02 AA AF 00 00 AA			db	 02h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1B11  AB C0 00 00 02 AA			db	0ABh,0C0h, 00h, 00h, 02h,0AAh
2F94:1B17  AF 00 00 AA AA F0			db	0AFh, 00h, 00h,0AAh,0AAh,0F0h
2F94:1B1D  00 00 0A AA AF 00			db	 00h, 00h, 0Ah,0AAh,0AFh, 00h
2F94:1B23  00 AA AA F0 00 00			db	 00h,0AAh,0AAh,0F0h, 00h, 00h
2F94:1B29  0A AA AF 00 00 AA			db	 0Ah,0AAh,0AFh, 00h, 00h,0AAh
2F94:1B2F  AA BC 00 00 2A AA			db	0AAh,0BCh, 00h, 00h, 2Ah,0AAh
2F94:1B35  AF 00 00 AA AA BC			db	0AFh, 00h, 00h,0AAh,0AAh,0BCh
2F94:1B3B  00 00 2A AA AF 00			db	 00h, 00h, 2Ah,0AAh,0AFh, 00h
2F94:1B41  00 AA AA AF 00 00			db	 00h,0AAh,0AAh,0AFh, 00h, 00h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 48

2F94:1B47  AA AA AF 00 00 AA			db	0AAh,0AAh,0AFh, 00h, 00h,0AAh
2F94:1B4D  AA AF 00 00 AA AA			db	0AAh,0AFh, 00h, 00h,0AAh,0AAh
2F94:1B53  AF 00 00 AA AA AB			db	0AFh, 00h, 00h,0AAh,0AAh,0ABh
2F94:1B59  C0 02 AA AA AF 00			db	0C0h, 02h,0AAh,0AAh,0AFh, 00h
2F94:1B5F  00 AA AA AB C0 02			db	 00h,0AAh,0AAh,0ABh,0C0h, 02h
2F94:1B65  AA AA AF 00 00 AA			db	0AAh,0AAh,0AFh, 00h, 00h,0AAh
2F94:1B6B  AA AA F0 0A AA AA			db	0AAh,0AAh,0F0h, 0Ah,0AAh,0AAh
2F94:1B71  AF 00 00 AA AA AA			db	0AFh, 00h, 00h,0AAh,0AAh,0AAh
2F94:1B77  F0 0A AA AA AF 00			db	0F0h, 0Ah,0AAh,0AAh,0AFh, 00h
2F94:1B7D  00 AA AE AA BC 2A			db	 00h,0AAh,0AEh,0AAh,0BCh, 2Ah
2F94:1B83  AB AA AF 00 00 AA			db	0ABh,0AAh,0AFh, 00h, 00h,0AAh
2F94:1B89  AE AA BC 2A AB AA			db	0AEh,0AAh,0BCh, 2Ah,0ABh,0AAh
2F94:1B8F  AF 00 00 AA AF AA			db	0AFh, 00h, 00h,0AAh,0AFh,0AAh
2F94:1B95  AF AA AF AA AF 00			db	0AFh,0AAh,0AFh,0AAh,0AFh, 00h
2F94:1B9B  00 AA AF AA AF AA			db	 00h,0AAh,0AFh,0AAh,0AFh,0AAh
2F94:1BA1  AF AA AF 00 00 AA			db	0AFh,0AAh,0AFh, 00h, 00h,0AAh
2F94:1BA7  AF 2A AA AA BC AA			db	0AFh, 2Ah,0AAh,0AAh,0BCh,0AAh
2F94:1BAD  AF 00 00 AA AF 2A			db	0AFh, 00h, 00h,0AAh,0AFh, 2Ah
2F94:1BB3  AA AA BC AA AF 00			db	0AAh,0AAh,0BCh,0AAh,0AFh, 00h
2F94:1BB9  00 AA AF 0A AA AA			db	 00h,0AAh,0AFh, 0Ah,0AAh,0AAh
2F94:1BBF  F0 AA AF 00 00 AA			db	0F0h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1BC5  AF 0A AA AA F0 AA			db	0AFh, 0Ah,0AAh,0AAh,0F0h,0AAh
2F94:1BCB  AF 00 00 AA AF 02			db	0AFh, 00h, 00h,0AAh,0AFh, 02h
2F94:1BD1  AA AB C0 AA AF 00			db	0AAh,0ABh,0C0h,0AAh,0AFh, 00h
2F94:1BD7  00 AA AF 02 AA AB			db	 00h,0AAh,0AFh, 02h,0AAh,0ABh
2F94:1BDD  C0 AA AF 00 00 AA			db	0C0h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1BE3  AF 00 AA AF 00 AA			db	0AFh, 00h,0AAh,0AFh, 00h,0AAh
2F94:1BE9  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:1BEF  AA AF 00 AA AF 00			db	0AAh,0AFh, 00h,0AAh,0AFh, 00h
2F94:1BF5  00 AA AF 00 2A BC			db	 00h,0AAh,0AFh, 00h, 2Ah,0BCh
2F94:1BFB  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1C01  AF 00 2A BC 00 AA			db	0AFh, 00h, 2Ah,0BCh, 00h,0AAh
2F94:1C07  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:1C0D  0A F0 00 AA AF 00			db	 0Ah,0F0h, 00h,0AAh,0AFh, 00h
2F94:1C13  00 AA AF 00 0A F0			db	 00h,0AAh,0AFh, 00h, 0Ah,0F0h
2F94:1C19  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1C1F  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:1C25  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:1C2B  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:1C31  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:1C37  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1C3D  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:1C43  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:1C49  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:1C4F  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:1C55  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1C5B  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:1C61  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:1C67  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:1C6D  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:1C73  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1C79  AB C0 00 00 02 AA			db	0ABh,0C0h, 00h, 00h, 02h,0AAh
2F94:1C7F  AF 00 00				db	0AFh, 00h, 00h
2F94:1C82  AA			bigtitle_U	db	0AAh			;  xref 2F94:1F13
2F94:1C83  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:1C89  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:1C8F  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 49

2F94:1C95  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:1C9B  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1CA1  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:1CA7  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:1CAD  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:1CB3  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:1CB9  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1CBF  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:1CC5  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:1CCB  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:1CD1  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:1CD7  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1CDD  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:1CE3  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:1CE9  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:1CEF  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:1CF5  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1CFB  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:1D01  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:1D07  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:1D0D  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:1D13  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1D19  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:1D1F  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:1D25  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:1D2B  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:1D31  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1D37  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:1D3D  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:1D43  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:1D49  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:1D4F  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1D55  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:1D5B  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:1D61  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:1D67  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:1D6D  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1D73  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:1D79  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:1D7F  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:1D85  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:1D8B  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1D91  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:1D97  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:1D9D  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:1DA3  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:1DA9  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1DAF  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:1DB5  AF 00 00 AA AF 00			db	0AFh, 00h, 00h,0AAh,0AFh, 00h
2F94:1DBB  00 00 00 AA AF 00			db	 00h, 00h, 00h,0AAh,0AFh, 00h
2F94:1DC1  00 AA AF 00 00 00			db	 00h,0AAh,0AFh, 00h, 00h, 00h
2F94:1DC7  00 AA AF 00 00 AA			db	 00h,0AAh,0AFh, 00h, 00h,0AAh
2F94:1DCD  AF 00 00 00 00 AA			db	0AFh, 00h, 00h, 00h, 00h,0AAh
2F94:1DD3  AF 00 00 AA AB C0			db	0AFh, 00h, 00h,0AAh,0ABh,0C0h
2F94:1DD9  00 00 02 AA AF 00			db	 00h, 00h, 02h,0AAh,0AFh, 00h
2F94:1DDF  00 AA AA AA AA AA			db	 00h,0AAh,0AAh,0AAh,0AAh,0AAh
2F94:1DE5  AA AA AF 00 00			db	0AAh,0AAh,0AFh, 00h, 00h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 50

2F94:1DEA  0007[AA]				db	7 dup (0AAh)
2F94:1DF1  AF 00 00				db	0AFh, 00h, 00h
2F94:1DF4  0007[AA]				db	7 dup (0AAh)
2F94:1DFB  AF 00 00 2A AA AA			db	0AFh, 00h, 00h, 2Ah,0AAh,0AAh
2F94:1E01  AA AA AA AA BC 00			db	0AAh,0AAh,0AAh,0AAh,0BCh, 00h
2F94:1E07  00 0A AA AA AA AA			db	 00h, 0Ah,0AAh,0AAh,0AAh,0AAh
2F94:1E0D  AA AA C0 00 00			db	0AAh,0AAh,0C0h, 00h, 00h
2F94:1E12  74 6D 70 72 65 73	data_106	db	'tmpresents(C), 1988 By IBR  Writ'	;  xref 2F94:1ED4, 1F86
2F94:1E18  65 6E 74 73 28 43
2F94:1E1E  29 2C 20 31 39 38
2F94:1E24  38 20 42 79 20 49
2F94:1E2A  42 52 20 20 57 72
2F94:1E30  69 74
2F94:1E32  65 6E 20 42 79 3A			db	'en By: ST. NiCK      I.B. Resear'
2F94:1E38  20 53 54 2E 20 4E
2F94:1E3E  69 43 4B 20 20 20
2F94:1E44  20 20 20 49 2E 42
2F94:1E4A  2E 20 52 65 73 65
2F94:1E50  61 72
2F94:1E52  63 68 2C 20 49 6E			db	'ch, Inc.                        '
2F94:1E58  63 2E 20 20 20 20
2F94:1E5E  20 20 20 20 20 20
2F94:1E64  20 20 20 20 20 20
2F94:1E6A  20 20 20 20 20 20
2F94:1E70  20 20
2F94:1E72  20 20 20 20 20 20			db	'            '
2F94:1E78  20 20 20 20 20 20

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          title_screen
				;
				;         Called from:   2F94:0197
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:1E7E			title_screen	proc	near
2F94:1E7E  B9 0021				mov	cx,21h
2F94:1E81  BA 0001				mov	dx,1
2F94:1E84  BB 0F03				mov	bx,0F03h
2F94:1E87 .BF 1570				mov	di,offset bigtitI_1570	; (2F94:1570=0FFh)
2F94:1E8A  E8 F6A4				call	draw_sprite_xor_v1	; (1531)
2F94:1E8D  B9 0024				mov	cx,24h
2F94:1E90  BB 0F05				mov	bx,0F05h
2F94:1E93 .BF 159D				mov	di,offset bigtitB_159D	; (2F94:159D=3Fh)
2F94:1E96  E8 F698				call	draw_sprite_xor_v1	; (1531)
2F94:1E99  B9 0028				mov	cx,28h
2F94:1E9C  BB 0F06				mov	bx,0F06h
2F94:1E9F .BF 15E8				mov	di,offset bigtitM_15E8	; (2F94:15E8=3)
2F94:1EA2  E8 F68C				call	draw_sprite_xor_v1	; (1531)
2F94:1EA5  53					push	bx
2F94:1EA6  52					push	dx
2F94:1EA7  50					push	ax
2F94:1EA8  33 DB				xor	bx,bx			; Zero register
2F94:1EAA  B6 03				mov	dh,3
2F94:1EAC  B2 10				mov	dl,10h
2F94:1EAE  B4 02				mov	ah,2
2F94:1EB0  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 51

2F94:1EB2  58					pop	ax
2F94:1EB3  5A					pop	dx
2F94:1EB4  5B					pop	bx
2F94:1EB5 .BE 1E14				mov	si,offset data_106+2	; (2F94:1E14='presents')
2F94:1EB8  B9 0008				mov	cx,8
2F94:1EBB  BB 0001				mov	bx,1
2F94:1EBE  E8 0117				call	puts2			; (1FD8)
2F94:1EC1  53					push	bx
2F94:1EC2  52					push	dx
2F94:1EC3  50					push	ax
2F94:1EC4  33 DB				xor	bx,bx			; Zero register
2F94:1EC6  B6 05				mov	dh,5
2F94:1EC8  B2 23				mov	dl,23h			; '#'
2F94:1ECA  B4 02				mov	ah,2
2F94:1ECC  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:1ECE  58					pop	ax
2F94:1ECF  5A					pop	dx
2F94:1ED0  5B					pop	bx
2F94:1ED1  B9 0002				mov	cx,2
2F94:1ED4 .BE 1E12				mov	si,offset data_106	; (2F94:1E12='tmpresents(C), 1')
2F94:1ED7  E8 0A13				call	puts			; (28ED)
2F94:1EDA  B9 000A				mov	cx,0Ah
2F94:1EDD  BA 0032				mov	dx,32h
2F94:1EE0  BB 280A				mov	bx,280Ah
2F94:1EE3 .BF 1642				mov	di,offset bigtitle_S	; (2F94:1642=2)
2F94:1EE6  E8 F648				call	draw_sprite_xor_v1	; (1531)
2F94:1EE9  83 C1 0A				add	cx,0Ah
2F94:1EEC  BB 280A				mov	bx,280Ah
2F94:1EEF .BF 17D2				mov	di,offset bigtitle_H	; (2F94:17D2=0AAh)
2F94:1EF2  E8 F63C				call	draw_sprite_xor_v1	; (1531)
2F94:1EF5  83 C1 0A				add	cx,0Ah
2F94:1EF8  BB 280A				mov	bx,280Ah
2F94:1EFB .BF 1962				mov	di,offset bigtitle_A	; (2F94:1962=0)
2F94:1EFE  E8 F630				call	draw_sprite_xor_v1	; (1531)
2F94:1F01  83 C1 0A				add	cx,0Ah
2F94:1F04  BB 280A				mov	bx,280Ah
2F94:1F07 .BF 1AF2				mov	di,offset bigtitle_M	; (2F94:1AF2=0AAh)
2F94:1F0A  E8 F624				call	draw_sprite_xor_v1	; (1531)
2F94:1F0D  83 C1 0A				add	cx,0Ah
2F94:1F10  BB 280A				mov	bx,280Ah
2F94:1F13 .BF 1C82				mov	di,offset bigtitle_U	; (2F94:1C82=0AAh)
2F94:1F16  E8 F618				call	draw_sprite_xor_v1	; (1531)
2F94:1F19  83 C1 0A				add	cx,0Ah
2F94:1F1C  BB 280A				mov	bx,280Ah
2F94:1F1F .BF 1642				mov	di,offset bigtitle_S	; (2F94:1642=2)
2F94:1F22  E8 F60C				call	draw_sprite_xor_v1	; (1531)
2F94:1F25  53					push	bx
2F94:1F26  52					push	dx
2F94:1F27  50					push	ax
2F94:1F28  33 DB				xor	bx,bx			; Zero register
2F94:1F2A  B6 0E				mov	dh,0Eh
2F94:1F2C  B2 0B				mov	dl,0Bh
2F94:1F2E  B4 02				mov	ah,2
2F94:1F30  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:1F32  58					pop	ax
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 52

2F94:1F33  5A					pop	dx
2F94:1F34  5B					pop	bx
2F94:1F35 .BE 1E1C				mov	si,offset 1E1Ch		; (2F94:1E1C='(C), 1988 By IBR')
2F94:1F38  B9 0011				mov	cx,11h
2F94:1F3B  E8 09AF				call	puts			; (28ED)
2F94:1F3E  53					push	bx
2F94:1F3F  52					push	dx
2F94:1F40  50					push	ax
2F94:1F41  33 DB				xor	bx,bx			; Zero register
2F94:1F43  B6 11				mov	dh,11h
2F94:1F45  B2 08				mov	dl,8
2F94:1F47  B4 02				mov	ah,2
2F94:1F49  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:1F4B  58					pop	ax
2F94:1F4C  5A					pop	dx
2F94:1F4D  5B					pop	bx
2F94:1F4E .BE 1E2D				mov	si,offset 1E2Dh		; (2F94:1E2D=' Writen By:')
2F94:1F51  B9 000B				mov	cx,0Bh
2F94:1F54  E8 0996				call	puts			; (28ED)
2F94:1F57  53					push	bx
2F94:1F58  52					push	dx
2F94:1F59  50					push	ax
2F94:1F5A  33 DB				xor	bx,bx			; Zero register
2F94:1F5C  B6 11				mov	dh,11h
2F94:1F5E  B2 14				mov	dl,14h
2F94:1F60  B4 02				mov	ah,2
2F94:1F62  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:1F64  58					pop	ax
2F94:1F65  5A					pop	dx
2F94:1F66  5B					pop	bx
2F94:1F67 .BE 1E38				mov	si,offset 1E38h		; (2F94:1E38=' ST. NiCK   ')
2F94:1F6A  B9 000C				mov	cx,0Ch
2F94:1F6D  E8 097D				call	puts			; (28ED)
2F94:1F70  53					push	bx
2F94:1F71  52					push	dx
2F94:1F72  50					push	ax
2F94:1F73  33 DB				xor	bx,bx			; Zero register
2F94:1F75  B6 15				mov	dh,15h
2F94:1F77  B2 1B				mov	dl,1Bh
2F94:1F79  B4 02				mov	ah,2
2F94:1F7B  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:1F7D  58					pop	ax
2F94:1F7E  5A					pop	dx
2F94:1F7F  5B					pop	bx
2F94:1F80  B9 0002				mov	cx,2
2F94:1F83  BB 0001				mov	bx,1
2F94:1F86 .BE 1E12				mov	si,offset data_106	; (2F94:1E12='tmpresents(C), 1')
2F94:1F89  E8 004C				call	puts2			; (1FD8)
2F94:1F8C  53					push	bx
2F94:1F8D  52					push	dx
2F94:1F8E  50					push	ax
2F94:1F8F  33 DB				xor	bx,bx			; Zero register
2F94:1F91  B6 16				mov	dh,16h
2F94:1F93  B2 06				mov	dl,6
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 53

2F94:1F95  B4 02				mov	ah,2
2F94:1F97  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:1F99  58					pop	ax
2F94:1F9A  5A					pop	dx
2F94:1F9B  5B					pop	bx
2F94:1F9C .BE 1E44				mov	si,offset 1E44h		; (2F94:1E44='   I.B. Research')
2F94:1F9F  B9 001D				mov	cx,1Dh
2F94:1FA2  BB 0001				mov	bx,1
2F94:1FA5  E8 0030				call	puts2			; (1FD8)
2F94:1FA8  53					push	bx
2F94:1FA9  52					push	dx
2F94:1FAA  50					push	ax
2F94:1FAB  33 DB				xor	bx,bx			; Zero register
2F94:1FAD  B6 18				mov	dh,18h
2F94:1FAF  B2 06				mov	dl,6
2F94:1FB1  B4 02				mov	ah,2
2F94:1FB3  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:1FB5  58					pop	ax
2F94:1FB6  5A					pop	dx
2F94:1FB7  5B					pop	bx
2F94:1FB8 .BE 1E61				mov	si,offset 1E61h		; (2F94:1E61='                ')
2F94:1FBB  B9 001D				mov	cx,1Dh
2F94:1FBE  BB 0001				mov	bx,1
2F94:1FC1  E8 0014				call	puts2			; (1FD8)
2F94:1FC4  1E					push	ds
2F94:1FC5  B8 0040				mov	ax,40h
2F94:1FC8  8E D8				mov	ds,ax
2F94:1FCA .BF 003F				mov	di,data_5e		; (0040:003F=0)
2F94:1FCD  80 25 F0				and	byte ptr [di],0F0h
2F94:1FD0  BA 03F2				mov	dx,3F2h
2F94:1FD3  B0 0C				mov	al,0Ch
2F94:1FD5  EE					out	dx,al			; port 3F2h, dsk0 contrl output
2F94:1FD6  1F					pop	ds
2F94:1FD7  C3					retn
				title_screen	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         string in si, cx = length
				;
				;         Called from:   2F94:1285, 12C2, 12D7, 1EBE, 1F89, 1FA5, 1FC1
				;                             7A04, 7AA7, 7B74
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:1FD8			puts2		proc	near

2F94:1FD8			locloop_151:					;  xref 2F94:1FDF
2F94:1FD8  8A 04				mov	al,[si]
2F94:1FDA  B4 0E				mov	ah,0Eh
2F94:1FDC  CD 10				int	10h			; Video display   ah=functn 0Eh
										;  write char al, teletype mode
2F94:1FDE  46					inc	si
2F94:1FDF  E2 F7				loop	locloop_151		; Loop if cx > 0

2F94:1FE1  C3					retn
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 54

				puts2		endp

2F94:1FE2  000E[00]				db	14 dup (0)
2F94:1FF0  4B 45 59 48 4F 4C	strings		db	'KEYHOLEKEYMYSTERY?EXTRA LIFEROBO'	;  xref 2F94:242A
2F94:1FF6  45 4B 45 59 4D 59
2F94:1FFC  53 54 45 52 59 3F
2F94:2002  45 58 54 52 41 20
2F94:2008  4C 49 46 45 52 4F
2F94:200E  42 4F
2F94:2010  2D 44 52 4F 49 44			db	'-DROIDSSHADOWSPIRAL DRONESSNAP-J'
2F94:2016  53 53 48 41 44 4F
2F94:201C  57 53 50 49 52 41
2F94:2022  4C 20 44 52 4F 4E
2F94:2028  45 53 53 4E 41 50
2F94:202E  2D 4A
2F94:2030  55 4D 50 45 52 53			db	'UMPERSJ(oystick)K(eyboard)N(ovic'
2F94:2036  4A 28 6F 79 73 74
2F94:203C  69 63 6B 29 4B 28
2F94:2042  65 79 62 6F 61 72
2F94:2048  64 29 4E 28 6F 76
2F94:204E  69 63
2F94:2050  65 29 41 28 64 76			db	'e)A(dvanced)Either joystick is n'
2F94:2056  61 6E 63 65 64 29
2F94:205C  45 69 74 68 65 72
2F94:2062  20 6A 6F 79 73 74
2F94:2068  69 63 6B 20 69 73
2F94:206E  20 6E
2F94:2070  6F 74 20 61 74 74			db	'ot attached or  Game Control Ada'
2F94:2076  61 63 68 65 64 20
2F94:207C  6F 72 20 20 47 61
2F94:2082  6D 65 20 43 6F 6E
2F94:2088  74 72 6F 6C 20 41
2F94:208E  64 61
2F94:2090  70 74 65 72 20 69			db	'pter is not present.Please corre'
2F94:2096  73 20 6E 6F 74 20
2F94:209C  70 72 65 73 65 6E
2F94:20A2  74 2E 50 6C 65 61
2F94:20A8  73 65 20 63 6F 72
2F94:20AE  72 65
2F94:20B0  63 74 20 6F 72 20			db	'ct or select keyboard.  Press an'
2F94:20B6  73 65 6C 65 63 74
2F94:20BC  20 6B 65 79 62 6F
2F94:20C2  61 72 64 2E 20 20
2F94:20C8  50 72 65 73 73 20
2F94:20CE  61 6E
2F94:20D0  79 20 6B 65 79 20			db	'y key to continue...Select one o'
2F94:20D6  74 6F 20 63 6F 6E
2F94:20DC  74 69 6E 75 65 2E
2F94:20E2  2E 2E 53 65 6C 65
2F94:20E8  63 74 20 6F 6E 65
2F94:20EE  20 6F
2F94:20F0  66 20 74 68 65 73			db	'f these:And one of these:To cont'
2F94:20F6  65 3A 41 6E 64 20
2F94:20FC  6F 6E 65 20 6F 66
2F94:2102  20 74 68 65 73 65
2F94:2108  3A 54 6F 20 63 6F
2F94:210E  6E 74
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 55

2F94:2110  69 6E 75 65 2C 20			db	'inue, press any key...Center joy'
2F94:2116  70 72 65 73 73 20
2F94:211C  61 6E 79 20 6B 65
2F94:2122  79 2E 2E 2E 43 65
2F94:2128  6E 74 65 72 20 6A
2F94:212E  6F 79
2F94:2130  73 74 69 63 6B 2C			db	'stick, then press a button...Mov'
2F94:2136  20 74 68 65 6E 20
2F94:213C  70 72 65 73 73 20
2F94:2142  61 20 62 75 74 74
2F94:2148  6F 6E 2E 2E 2E 4D
2F94:214E  6F 76
2F94:2150  65 6D 65 6E 74 3A			db	'ement:             Cursor keysAi'
2F94:2156  20 20 20 20 20 20
2F94:215C  20 20 20 20 20 20
2F94:2162  20 43 75 72 73 6F
2F94:2168  72 20 6B 65 79 73
2F94:216E  41 69
2F94:2170  6D 20 49 4F 4E 2D			db	'm ION-SHIVS:        Cursor keysM'
2F94:2176  53 48 49 56 53 3A
2F94:217C  20 20 20 20 20 20
2F94:2182  20 20 43 75 72 73
2F94:2188  6F 72 20 6B 65 79
2F94:218E  73 4D
2F94:2190  6F 76 65 6D 65 6E			db	'ovement:                Joystick'
2F94:2196  74 3A 20 20 20 20
2F94:219C  20 20 20 20 20 20
2F94:21A2  20 20 20 20 20 20
2F94:21A8  4A 6F 79 73 74 69
2F94:21AE  63 6B
2F94:21B0  41 69 6D 20 49 4F			db	'Aim ION-SHIVS:           Joystic'
2F94:21B6  4E 2D 53 48 49 56
2F94:21BC  53 3A 20 20 20 20
2F94:21C2  20 20 20 20 20 20
2F94:21C8  20 4A 6F 79 73 74
2F94:21CE  69 63
2F94:21D0  6B 44 75 72 69 6E			db	'kDuring play:Fire ION-SHIVS:    '
2F94:21D6  67 20 70 6C 61 79
2F94:21DC  3A 46 69 72 65 20
2F94:21E2  49 4F 4E 2D 53 48
2F94:21E8  49 56 53 3A 20 20
2F94:21EE  20 20
2F94:21F0  20 20 20 20 20 20			db	'           AltFire ION-SHIVS:   '
2F94:21F6  20 20 20 20 20 41
2F94:21FC  6C 74 46 69 72 65
2F94:2202  20 49 4F 4E 2D 53
2F94:2208  48 49 56 53 3A 20
2F94:220E  20 20
2F94:2210  4A 6F 79 73 74 69			db	'Joystick buttonTurn sound on or '
2F94:2216  63 6B 20 62 75 74
2F94:221C  74 6F 6E 54 75 72
2F94:2222  6E 20 73 6F 75 6E
2F94:2228  64 20 6F 6E 20 6F
2F94:222E  72 20
2F94:2230  6F 66 66 3A 20 20			db	'off:      Ctrl-SRestart game:   '
2F94:2236  20 20 20 20 43 74
2F94:223C  72 6C 2D 53 52 65
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 56

2F94:2242  73 74 61 72 74 20
2F94:2248  67 61 6D 65 3A 20
2F94:224E  20 20
2F94:2250  20 20 20 20 20 20			db	'           Ctrl-RPause:         '
2F94:2256  20 20 20 20 20 43
2F94:225C  74 72 6C 2D 52 50
2F94:2262  61 75 73 65 3A 20
2F94:2268  20 20 20 20 20 20
2F94:226E  20 20
2F94:2270  20 20 20 20 20 20			db	'               EscTo play, press'
2F94:2276  20 20 20 20 20 20
2F94:227C  20 20 20 45 73 63
2F94:2282  54 6F 20 70 6C 61
2F94:2288  79 2C 20 70 72 65
2F94:228E  73 73
2F94:2290  20 61 6E 79 20 6B			db	' any key...To play, press a butt'
2F94:2296  65 79 2E 2E 2E 54
2F94:229C  6F 20 70 6C 61 79
2F94:22A2  2C 20 70 72 65 73
2F94:22A8  73 20 61 20 62 75
2F94:22AE  74 74
2F94:22B0  6F 6E 2E 2E 2E 46			db	'on...Final score =C O N G R A T '
2F94:22B6  69 6E 61 6C 20 73
2F94:22BC  63 6F 72 65 20 3D
2F94:22C2  43 20 4F 20 4E 20
2F94:22C8  47 20 52 20 41 20
2F94:22CE  54 20
2F94:22D0  55 20 4C 20 41 20			db	'U L A T I O N S !You have destro'
2F94:22D6  54 20 49 20 4F 20
2F94:22DC  4E 20 53 20 21 59
2F94:22E2  6F 75 20 68 61 76
2F94:22E8  65 20 64 65 73 74
2F94:22EE  72 6F
2F94:22F0  79 65 64 74 68 65			db	'yedthe elusive, dreadedShadow!!S'
2F94:22F6  20 65 6C 75 73 69
2F94:22FC  76 65 2C 20 64 72
2F94:2302  65 61 64 65 64 53
2F94:2308  68 61 64 6F 77 21
2F94:230E  21 53
2F94:2310  68 61 64 6F 77 49			db	'hadowIf you desire a greater cha'
2F94:2316  66 20 79 6F 75 20
2F94:231C  64 65 73 69 72 65
2F94:2322  20 61 20 67 72 65
2F94:2328  61 74 65 72 20 63
2F94:232E  68 61
2F94:2330  6C 6C 65 6E 67 65			db	'llengetry the Advanced level.at '
2F94:2336  74 72 79 20 74 68
2F94:233C  65 20 41 64 76 61
2F94:2342  6E 63 65 64 20 6C
2F94:2348  65 76 65 6C 2E 61
2F94:234E  74 20
2F94:2350  74 68 65 20 41 64			db	'the Advanced level!Very, very fe'
2F94:2356  76 61 6E 63 65 64
2F94:235C  20 6C 65 76 65 6C
2F94:2362  21 56 65 72 79 2C
2F94:2368  20 76 65 72 79 20
2F94:236E  66 65
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 57

2F94:2370  77 20 68 61 76 65			db	'w haveaccomplished this feat.', 0
2F94:2376  61 63 63 6F 6D 70
2F94:237C  6C 69 73 68 65 64
2F94:2382  20 74 68 69 73 20
2F94:2388  66 65 61 74 2E 00
2F94:238E  7622			sync_func_ptr	dw	7622h			;  xref 2F94:0223, 254F, 25DF, 2AA2
										;            2AC8, 2D16, 2D50, 3972
										;            39E4, 3A53, 3AD2, 3B3D
										;            4346, 455E, 5192, 51CF
										;            5214, 5445, 585E, 5884
										;            58AA, 58B4, 5966, 59D1
										;            59FF, 5A36, 5DF7, 5E38
										;            7901, 7917, 7939, 794C
										;            7962, 7987, 799A, 79BF

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          setup_screen
				;
				;         Called from:   2F94:01AE
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:2390			setup_screen	proc	near
2F94:2390  50					push	ax
2F94:2391  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:2393  24 FC				and	al,0FCh
2F94:2395  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
										;  al = 0, speaker off
2F94:2397  58					pop	ax
2F94:2398			draw_legend:					;  xref 2F94:25D7
2F94:2398 њB9 0002				mov	cx,2
2F94:239B  BA 0007				mov	dx,7
2F94:239E .BF 73A5				mov	di,offset spr_keyhole_3b	; (2F94:73A5=5)
2F94:23A1  BB 0D03				mov	bx,0D03h
2F94:23A4  E8 F159				call	draw_sprite_v1		; (1500)
2F94:23A7  83 C2 10				add	dx,10h
2F94:23AA .BF 7315				mov	di,offset spr_key_4b	; (2F94:7315=55h)
2F94:23AD  BB 0C04				mov	bx,0C04h
2F94:23B0  E8 F14D				call	draw_sprite_v1		; (1500)
2F94:23B3  83 C2 10				add	dx,10h
2F94:23B6 .BF 7285				mov	di,offset spr_mystery_3b	; (2F94:7285=1)
2F94:23B9  BB 0C03				mov	bx,0C03h
2F94:23BC  E8 F141				call	draw_sprite_v1		; (1500)
2F94:23BF  83 C2 10				add	dx,10h
2F94:23C2 .BF 72CD				mov	di,offset spr_extralife_3b	; (2F94:72CD=1)
2F94:23C5  E8 F138				call	draw_sprite_v1		; (1500)
2F94:23C8  B9 0028				mov	cx,28h
2F94:23CB  BA 0007				mov	dx,7
2F94:23CE .BF 7090				mov	di,offset spr_robodroid_4b	; (2F94:7090=0)
2F94:23D1  BB 0804				mov	bx,804h
2F94:23D4  E8 F129				call	draw_sprite_v1		; (1500)
2F94:23D7  83 C2 10				add	dx,10h
2F94:23DA .BF 71F5				mov	di,offset spr_shadow2_3b	; (2F94:71F5=2Ah)
2F94:23DD  BB 0C03				mov	bx,0C03h
2F94:23E0  E8 F11D				call	draw_sprite_v1		; (1500)
2F94:23E3  83 C2 10				add	dx,10h
2F94:23E6 .BF 6F10				mov	di,offset spr_spiraldrone2_4b	; (2F94:6F10=80h)
2F94:23E9  BB 0804				mov	bx,804h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 58

2F94:23EC  E8 F111				call	draw_sprite_v1		; (1500)
2F94:23EF  83 C2 10				add	dx,10h
2F94:23F2 .BF 718E				mov	di,offset spr_snapjumper_3b	; (2F94:718E=0FFh)
2F94:23F5  BB 0803				mov	bx,803h
2F94:23F8  E8 F105				call	draw_sprite_v1		; (1500)
2F94:23FB  51					push	cx
2F94:23FC  52					push	dx
2F94:23FD  E8 08AD				call	update_systick_ax	; (2CAD)
2F94:2400  5A					pop	dx
2F94:2401  59					pop	cx
2F94:2402  25 0003				and	ax,3
2F94:2405  B3 09				mov	bl,9
2F94:2407  F6 E3				mul	bl			; ax = reg * al
2F94:2409 .BE 71A6				mov	si,offset spr_snapjumper_eyes_3b	; (2F94:71A6=14h)
2F94:240C  03 F0				add	si,ax
2F94:240E  BB 0303				mov	bx,303h
2F94:2411  52					push	dx
2F94:2412  FE C2				inc	dl
2F94:2414  8A F1				mov	dh,cl
2F94:2416  E8 3CD8				call	xor_to_screen_60f1	; (60F1)
2F94:2419  5A					pop	dx
2F94:241A  53					push	bx
2F94:241B  52					push	dx
2F94:241C  50					push	ax
2F94:241D  33 DB				xor	bx,bx			; Zero register
2F94:241F  B6 01				mov	dh,1
2F94:2421  B2 04				mov	dl,4
2F94:2423  B4 02				mov	ah,2
2F94:2425  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:2427  58					pop	ax
2F94:2428  5A					pop	dx
2F94:2429  5B					pop	bx
2F94:242A .BE 1FF0				mov	si,offset strings	; (2F94:1FF0='KEYHOLEKEYMYSTER')
2F94:242D  B9 0007				mov	cx,7
2F94:2430  E8 04BA				call	puts			; (28ED)
2F94:2433  53					push	bx
2F94:2434  52					push	dx
2F94:2435  50					push	ax
2F94:2436  33 DB				xor	bx,bx			; Zero register
2F94:2438  B6 03				mov	dh,3
2F94:243A  B2 04				mov	dl,4
2F94:243C  B4 02				mov	ah,2
2F94:243E  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:2440  58					pop	ax
2F94:2441  5A					pop	dx
2F94:2442  5B					pop	bx
2F94:2443 .BE 1FF7				mov	si,offset strings+7	; (2F94:1FF7='K')
2F94:2446  B9 0003				mov	cx,3
2F94:2449  E8 04A1				call	puts			; (28ED)
2F94:244C  53					push	bx
2F94:244D  52					push	dx
2F94:244E  50					push	ax
2F94:244F  33 DB				xor	bx,bx			; Zero register
2F94:2451  B6 05				mov	dh,5
2F94:2453  B2 04				mov	dl,4
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 59

2F94:2455  B4 02				mov	ah,2
2F94:2457  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:2459  58					pop	ax
2F94:245A  5A					pop	dx
2F94:245B  5B					pop	bx
2F94:245C .BE 1FFA				mov	si,offset 1FFAh		; (2F94:1FFA='MYSTERY?')
2F94:245F  B9 0008				mov	cx,8
2F94:2462  E8 0488				call	puts			; (28ED)
2F94:2465  53					push	bx
2F94:2466  52					push	dx
2F94:2467  50					push	ax
2F94:2468  33 DB				xor	bx,bx			; Zero register
2F94:246A  B6 07				mov	dh,7
2F94:246C  B2 04				mov	dl,4
2F94:246E  B4 02				mov	ah,2
2F94:2470  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:2472  58					pop	ax
2F94:2473  5A					pop	dx
2F94:2474  5B					pop	bx
2F94:2475 .BE 2002				mov	si,offset 2002h		; (2F94:2002='EXTRA LIFE')
2F94:2478  B9 000A				mov	cx,0Ah
2F94:247B  E8 046F				call	puts			; (28ED)
2F94:247E  53					push	bx
2F94:247F  52					push	dx
2F94:2480  50					push	ax
2F94:2481  33 DB				xor	bx,bx			; Zero register
2F94:2483  B6 01				mov	dh,1
2F94:2485  B2 18				mov	dl,18h
2F94:2487  B4 02				mov	ah,2
2F94:2489  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:248B  58					pop	ax
2F94:248C  5A					pop	dx
2F94:248D  5B					pop	bx
2F94:248E .BE 200C				mov	si,offset 200Ch		; (2F94:200C='ROBO-DROIDS')
2F94:2491  B9 000B				mov	cx,0Bh
2F94:2494  E8 0456				call	puts			; (28ED)
2F94:2497  53					push	bx
2F94:2498  52					push	dx
2F94:2499  50					push	ax
2F94:249A  33 DB				xor	bx,bx			; Zero register
2F94:249C  B6 03				mov	dh,3
2F94:249E  B2 18				mov	dl,18h
2F94:24A0  B4 02				mov	ah,2
2F94:24A2  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:24A4  58					pop	ax
2F94:24A5  5A					pop	dx
2F94:24A6  5B					pop	bx
2F94:24A7 .BE 2017				mov	si,offset 2017h		; (2F94:2017=53h)
2F94:24AA  B9 0006				mov	cx,6
2F94:24AD  E8 043D				call	puts			; (28ED)
2F94:24B0  53					push	bx
2F94:24B1  52					push	dx
2F94:24B2  50					push	ax
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 60

2F94:24B3  33 DB				xor	bx,bx			; Zero register
2F94:24B5  B6 05				mov	dh,5
2F94:24B7  B2 18				mov	dl,18h
2F94:24B9  B4 02				mov	ah,2
2F94:24BB  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:24BD  58					pop	ax
2F94:24BE  5A					pop	dx
2F94:24BF  5B					pop	bx
2F94:24C0 .BE 201D				mov	si,offset 201Dh		; (2F94:201D='SPIRAL DRONES')
2F94:24C3  B9 000D				mov	cx,0Dh
2F94:24C6  E8 0424				call	puts			; (28ED)
2F94:24C9  53					push	bx
2F94:24CA  52					push	dx
2F94:24CB  50					push	ax
2F94:24CC  33 DB				xor	bx,bx			; Zero register
2F94:24CE  B6 07				mov	dh,7
2F94:24D0  B2 18				mov	dl,18h
2F94:24D2  B4 02				mov	ah,2
2F94:24D4  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:24D6  58					pop	ax
2F94:24D7  5A					pop	dx
2F94:24D8  5B					pop	bx
2F94:24D9 .BE 202A				mov	si,offset 202Ah		; (2F94:202A='SNAP-JUMPERS')
2F94:24DC  B9 000C				mov	cx,0Ch
2F94:24DF  E8 040B				call	puts			; (28ED)
2F94:24E2  C7 06 0DB0 0000			mov	[keyboard_buf_rdptr],0	; (2F94:0DB0=0)
2F94:24E8  C7 06 0DB2 0000			mov	[keyboard_buf_wrptr],0	; (2F94:0DB2=0)
2F94:24EE  53					push	bx
2F94:24EF  52					push	dx
2F94:24F0  50					push	ax
2F94:24F1  33 DB				xor	bx,bx			; Zero register
2F94:24F3  B6 0A				mov	dh,0Ah
2F94:24F5  B2 05				mov	dl,5
2F94:24F7  B4 02				mov	ah,2
2F94:24F9  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:24FB  58					pop	ax
2F94:24FC  5A					pop	dx
2F94:24FD  5B					pop	bx
2F94:24FE .BE 20E4				mov	si,offset 20E4h		; (2F94:20E4='Select one of th')
2F94:2501  B9 0014				mov	cx,14h
2F94:2504  E8 03E6				call	puts			; (28ED)
2F94:2507  53					push	bx
2F94:2508  52					push	dx
2F94:2509  50					push	ax
2F94:250A  33 DB				xor	bx,bx			; Zero register
2F94:250C  B6 0A				mov	dh,0Ah
2F94:250E  B2 1B				mov	dl,1Bh
2F94:2510  B4 02				mov	ah,2
2F94:2512  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:2514  58					pop	ax
2F94:2515  5A					pop	dx
2F94:2516  5B					pop	bx
2F94:2517 .BE 2036				mov	si,offset 2036h		; (2F94:2036='J(oystick)')
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 61

2F94:251A  B9 000A				mov	cx,0Ah
2F94:251D  E8 03CD				call	puts			; (28ED)
2F94:2520  53					push	bx
2F94:2521  52					push	dx
2F94:2522  50					push	ax
2F94:2523  33 DB				xor	bx,bx			; Zero register
2F94:2525  B6 0B				mov	dh,0Bh
2F94:2527  B2 1B				mov	dl,1Bh
2F94:2529  B4 02				mov	ah,2
2F94:252B  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:252D  58					pop	ax
2F94:252E  5A					pop	dx
2F94:252F  5B					pop	bx
2F94:2530 .BE 2040				mov	si,offset 2040h		; (2F94:2040='K(eyboard)')
2F94:2533  B9 000A				mov	cx,0Ah
2F94:2536  E8 03B4				call	puts			; (28ED)
2F94:2539			loc_152:					;  xref 2F94:2545
2F94:2539  E8 EC3C				call	check_stick		; (1178)
2F94:253C  E8 58E3				call	check_keys_and_vsync	; (7E22)
2F94:253F			is_J_pressed:
2F94:253F  3C 24				cmp	al,24h			; '$'
2F94:2541  74 07				je	joy_selected		; Jump if equal
2F94:2543			is_K_pressed:
2F94:2543  3C 25				cmp	al,25h			; '%'
2F94:2545  75 F2				jne	loc_152			; Jump if not equal
2F94:2547  E9 0090				jmp	keyboard_selected	; (25DA)
2F94:254A			joy_selected:					;  xref 2F94:2541
2F94:254A  C6 06 0132 01			mov	[joystick_selected],1	; (2F94:0132=0)
2F94:254F  C7 06 238E 7622			mov	[sync_func_ptr],7622h	; (2F94:238E=7622h)
2F94:2555  E8 03A4				call	joy_wait		; (28FC)
2F94:2558  3D FFFF				cmp	ax,0FFFFh
2F94:255B  74 03				je	no_joy			; Jump if equal
2F94:255D  E9 0085				jmp	controls_accepted	; (25E5)
2F94:2560			no_joy:						;  xref 2F94:255B
2F94:2560  53					push	bx
2F94:2561  52					push	dx
2F94:2562  50					push	ax
2F94:2563  33 DB				xor	bx,bx			; Zero register
2F94:2565  B6 0D				mov	dh,0Dh
2F94:2567  B2 03				mov	dl,3
2F94:2569  B4 02				mov	ah,2
2F94:256B  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:256D  58					pop	ax
2F94:256E  5A					pop	dx
2F94:256F  5B					pop	bx
2F94:2570 .BE 205C				mov	si,offset 205Ch		; (2F94:205C='Either joystick ')
2F94:2573  B9 0024				mov	cx,24h
2F94:2576  E8 0374				call	puts			; (28ED)
2F94:2579  53					push	bx
2F94:257A  52					push	dx
2F94:257B  50					push	ax
2F94:257C  33 DB				xor	bx,bx			; Zero register
2F94:257E  B6 0F				mov	dh,0Fh
2F94:2580  B2 03				mov	dl,3
2F94:2582  B4 02				mov	ah,2
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 62

2F94:2584  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:2586  58					pop	ax
2F94:2587  5A					pop	dx
2F94:2588  5B					pop	bx
2F94:2589 .BE 2080				mov	si,offset 2080h		; (2F94:2080='Game Control Ada')
2F94:258C  E8 035E				call	puts			; (28ED)
2F94:258F  53					push	bx
2F94:2590  52					push	dx
2F94:2591  50					push	ax
2F94:2592  33 DB				xor	bx,bx			; Zero register
2F94:2594  B6 11				mov	dh,11h
2F94:2596  B2 03				mov	dl,3
2F94:2598  B4 02				mov	ah,2
2F94:259A  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:259C  58					pop	ax
2F94:259D  5A					pop	dx
2F94:259E  5B					pop	bx
2F94:259F .BE 20A4				mov	si,offset 20A4h		; (2F94:20A4='Please correct o')
2F94:25A2  E8 0348				call	puts			; (28ED)
2F94:25A5  53					push	bx
2F94:25A6  52					push	dx
2F94:25A7  50					push	ax
2F94:25A8  33 DB				xor	bx,bx			; Zero register
2F94:25AA  B6 14				mov	dh,14h
2F94:25AC  B2 03				mov	dl,3
2F94:25AE  B4 02				mov	ah,2
2F94:25B0  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:25B2  58					pop	ax
2F94:25B3  5A					pop	dx
2F94:25B4  5B					pop	bx
2F94:25B5 .BE 20C8				mov	si,offset 20C8h		; (2F94:20C8='Press any key to')
2F94:25B8  B9 001C				mov	cx,1Ch
2F94:25BB  E8 032F				call	puts			; (28ED)
2F94:25BE  C7 06 0DB0 0000			mov	[keyboard_buf_rdptr],0	; (2F94:0DB0=0)
2F94:25C4  C7 06 0DB2 0000			mov	[keyboard_buf_wrptr],0	; (2F94:0DB2=0)
2F94:25CA			wait_input_25ca:				;  xref 2F94:25D2
2F94:25CA  E8 EBAB				call	check_stick		; (1178)
2F94:25CD  E8 5852				call	check_keys_and_vsync	; (7E22)
2F94:25D0  A8 80				test	al,80h
2F94:25D2  74 F6				jz	wait_input_25ca		; Jump if zero
2F94:25D4  E8 5819				call	set_cga_mode_7df0	; (7DF0)
2F94:25D7  E9 FDBE				jmp	draw_legend		; (2398)
2F94:25DA			keyboard_selected:				;  xref 2F94:2547
2F94:25DA  C6 06 0132 00			mov	[joystick_selected],0	; (2F94:0132=0)
2F94:25DF  C7 06 238E 7610			mov	[sync_func_ptr],7610h	; (2F94:238E=7622h)
2F94:25E5			controls_accepted:				;  xref 2F94:255D
2F94:25E5  53					push	bx
2F94:25E6  52					push	dx
2F94:25E7  50					push	ax
2F94:25E8  33 DB				xor	bx,bx			; Zero register
2F94:25EA  B6 0D				mov	dh,0Dh
2F94:25EC  B2 08				mov	dl,8
2F94:25EE  B4 02				mov	ah,2
2F94:25F0  CD 10				int	10h			; Video display   ah=functn 02h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 63

										;  set cursor location in dx
2F94:25F2  58					pop	ax
2F94:25F3  5A					pop	dx
2F94:25F4  5B					pop	bx
2F94:25F5 .BE 20F8				mov	si,offset 20F8h		; (2F94:20F8='And one of these')
2F94:25F8  B9 0011				mov	cx,11h
2F94:25FB  E8 02EF				call	puts			; (28ED)
2F94:25FE  53					push	bx
2F94:25FF  52					push	dx
2F94:2600  50					push	ax
2F94:2601  33 DB				xor	bx,bx			; Zero register
2F94:2603  B6 0D				mov	dh,0Dh
2F94:2605  B2 1B				mov	dl,1Bh
2F94:2607  B4 02				mov	ah,2
2F94:2609  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:260B  58					pop	ax
2F94:260C  5A					pop	dx
2F94:260D  5B					pop	bx
2F94:260E .BE 204A				mov	si,offset 204Ah		; (2F94:204A='N(ovice)')
2F94:2611  B9 0008				mov	cx,8
2F94:2614  E8 02D6				call	puts			; (28ED)
2F94:2617  53					push	bx
2F94:2618  52					push	dx
2F94:2619  50					push	ax
2F94:261A  33 DB				xor	bx,bx			; Zero register
2F94:261C  B6 0E				mov	dh,0Eh
2F94:261E  B2 1B				mov	dl,1Bh
2F94:2620  B4 02				mov	ah,2
2F94:2622  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:2624  58					pop	ax
2F94:2625  5A					pop	dx
2F94:2626  5B					pop	bx
2F94:2627 .BE 2052				mov	si,offset 2052h		; (2F94:2052='A(dvanced)')
2F94:262A  B9 000A				mov	cx,0Ah
2F94:262D  E8 02BD				call	puts			; (28ED)
2F94:2630			loc_153:					;  xref 2F94:263E
2F94:2630 њE8 EB45				call	check_stick		; (1178)
2F94:2633  E8 57EC				call	check_keys_and_vsync	; (7E22)
2F94:2636			is_N_pressed:
2F94:2636  3C 31				cmp	al,31h			; '1'
2F94:2638  74 06				je	novice_selected		; Jump if equal
2F94:263A			is_A_pressed:
2F94:263A  3C 1E				cmp	al,1Eh
2F94:263C  74 0A				je	advanced_selected	; Jump if equal
2F94:263E  EB F0				jmp	short loc_153		; (2630)
2F94:2640			novice_selected:				;  xref 2F94:2638
2F94:2640  C6 06 0133 00			mov	[advanced_mode],0	; (2F94:0133=0)
2F94:2645  EB 06				jmp	short loc_154		; (264D)
2F94:2647  90					db	90h
2F94:2648			advanced_selected:				;  xref 2F94:263C
2F94:2648  C6 06 0133 01			mov	[advanced_mode],1	; (2F94:0133=0)
2F94:264D			loc_154:					;  xref 2F94:2645
2F94:264D  53					push	bx
2F94:264E  52					push	dx
2F94:264F  50					push	ax
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 64

2F94:2650  33 DB				xor	bx,bx			; Zero register
2F94:2652  B6 0F				mov	dh,0Fh
2F94:2654  B2 01				mov	dl,1
2F94:2656  B4 02				mov	ah,2
2F94:2658  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:265A  58					pop	ax
2F94:265B  5A					pop	dx
2F94:265C  5B					pop	bx
2F94:265D .BE 21D1				mov	si,offset 21D1h		; (2F94:21D1='During play:')
2F94:2660  B9 000C				mov	cx,0Ch
2F94:2663  E8 0287				call	puts			; (28ED)
2F94:2666  53					push	bx
2F94:2667  52					push	dx
2F94:2668  50					push	ax
2F94:2669  33 DB				xor	bx,bx			; Zero register
2F94:266B  B6 11				mov	dh,11h
2F94:266D  B2 04				mov	dl,4
2F94:266F  B4 02				mov	ah,2
2F94:2671  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:2673  58					pop	ax
2F94:2674  5A					pop	dx
2F94:2675  5B					pop	bx
2F94:2676  B9 0021				mov	cx,21h
2F94:2679  F6 06 0132 01			test	[joystick_selected],1	; (2F94:0132=0)
2F94:267E  74 32				jz	loc_155			; Jump if zero
2F94:2680 .BE 21B0				mov	si,offset 21B0h		; (2F94:21B0='Aim ION-SHIVS:  ')
2F94:2683  E8 0267				call	puts			; (28ED)
2F94:2686  53					push	bx
2F94:2687  52					push	dx
2F94:2688  50					push	ax
2F94:2689  33 DB				xor	bx,bx			; Zero register
2F94:268B  B6 12				mov	dh,12h
2F94:268D  B2 04				mov	dl,4
2F94:268F  B4 02				mov	ah,2
2F94:2691  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:2693  58					pop	ax
2F94:2694  5A					pop	dx
2F94:2695  5B					pop	bx
2F94:2696 .BE 21FE				mov	si,offset 21FEh		; (2F94:21FE='Fire ION-SHIVS: ')
2F94:2699  E8 0251				call	puts			; (28ED)
2F94:269C  53					push	bx
2F94:269D  52					push	dx
2F94:269E  50					push	ax
2F94:269F  33 DB				xor	bx,bx			; Zero register
2F94:26A1  B6 13				mov	dh,13h
2F94:26A3  B2 04				mov	dl,4
2F94:26A5  B4 02				mov	ah,2
2F94:26A7  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:26A9  58					pop	ax
2F94:26AA  5A					pop	dx
2F94:26AB  5B					pop	bx
2F94:26AC  BE 218F				mov	si,218Fh
2F94:26AF  EB 30				jmp	short loc_156		; (26E1)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 65

2F94:26B1  90					db	90h
2F94:26B2			loc_155:					;  xref 2F94:267E
2F94:26B2 .BE 216E				mov	si,offset 216Eh		; (2F94:216E='Aim ION-SHIVS:  ')
2F94:26B5  E8 0235				call	puts			; (28ED)
2F94:26B8  53					push	bx
2F94:26B9  52					push	dx
2F94:26BA  50					push	ax
2F94:26BB  33 DB				xor	bx,bx			; Zero register
2F94:26BD  B6 12				mov	dh,12h
2F94:26BF  B2 04				mov	dl,4
2F94:26C1  B4 02				mov	ah,2
2F94:26C3  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:26C5  58					pop	ax
2F94:26C6  5A					pop	dx
2F94:26C7  5B					pop	bx
2F94:26C8 .BE 21DD				mov	si,offset 21DDh		; (2F94:21DD='Fire ION-SHIVS: ')
2F94:26CB  E8 021F				call	puts			; (28ED)
2F94:26CE  53					push	bx
2F94:26CF  52					push	dx
2F94:26D0  50					push	ax
2F94:26D1  33 DB				xor	bx,bx			; Zero register
2F94:26D3  B6 13				mov	dh,13h
2F94:26D5  B2 04				mov	dl,4
2F94:26D7  B4 02				mov	ah,2
2F94:26D9  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:26DB  58					pop	ax
2F94:26DC  5A					pop	dx
2F94:26DD  5B					pop	bx
2F94:26DE .BE 214D				mov	si,offset 214Dh		; (2F94:214D='Movement:       ')
2F94:26E1			loc_156:					;  xref 2F94:26AF
2F94:26E1  E8 0209				call	puts			; (28ED)
2F94:26E4  53					push	bx
2F94:26E5  52					push	dx
2F94:26E6  50					push	ax
2F94:26E7  33 DB				xor	bx,bx			; Zero register
2F94:26E9  B6 14				mov	dh,14h
2F94:26EB  B2 04				mov	dl,4
2F94:26ED  B4 02				mov	ah,2
2F94:26EF  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:26F1  58					pop	ax
2F94:26F2  5A					pop	dx
2F94:26F3  5B					pop	bx
2F94:26F4 .BE 221F				mov	si,offset 221Fh		; (2F94:221F='Turn sound on or')
2F94:26F7  E8 01F3				call	puts			; (28ED)
2F94:26FA  53					push	bx
2F94:26FB  52					push	dx
2F94:26FC  50					push	ax
2F94:26FD  33 DB				xor	bx,bx			; Zero register
2F94:26FF  B6 15				mov	dh,15h
2F94:2701  B2 04				mov	dl,4
2F94:2703  B4 02				mov	ah,2
2F94:2705  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:2707  58					pop	ax
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 66

2F94:2708  5A					pop	dx
2F94:2709  5B					pop	bx
2F94:270A .BE 2240				mov	si,offset 2240h		; (2F94:2240='Restart game:   ')
2F94:270D  E8 01DD				call	puts			; (28ED)
2F94:2710  53					push	bx
2F94:2711  52					push	dx
2F94:2712  50					push	ax
2F94:2713  33 DB				xor	bx,bx			; Zero register
2F94:2715  B6 16				mov	dh,16h
2F94:2717  B2 04				mov	dl,4
2F94:2719  B4 02				mov	ah,2
2F94:271B  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:271D  58					pop	ax
2F94:271E  5A					pop	dx
2F94:271F  5B					pop	bx
2F94:2720 .BE 2261				mov	si,offset 2261h		; (2F94:2261='Pause:          ')
2F94:2723  E8 01C7				call	puts			; (28ED)
2F94:2726  F6 06 0132 01			test	[joystick_selected],1	; (2F94:0132=0)
2F94:272B  74 65				jz	keyboard_start		; Jump if zero
2F94:272D  53					push	bx
2F94:272E  52					push	dx
2F94:272F  50					push	ax
2F94:2730  33 DB				xor	bx,bx			; Zero register
2F94:2732  B6 18				mov	dh,18h
2F94:2734  B2 00				mov	dl,0
2F94:2736  B4 02				mov	ah,2
2F94:2738  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:273A  58					pop	ax
2F94:273B  5A					pop	dx
2F94:273C  5B					pop	bx
2F94:273D .BE 2126				mov	si,offset 2126h		; (2F94:2126='Center joystick,')
2F94:2740  B9 0027				mov	cx,27h
2F94:2743  E8 01A7				call	puts			; (28ED)
2F94:2746			loc_157:					;  xref 2F94:278C
2F94:2746 њC7 06 0DB0 0000			mov	[keyboard_buf_rdptr],0	; (2F94:0DB0=0)
2F94:274C  C7 06 0DB2 0000			mov	[keyboard_buf_wrptr],0	; (2F94:0DB2=0)
2F94:2752			loc_158:					;  xref 2F94:2761
2F94:2752  BA 0201				mov	dx,201h
2F94:2755  EC					in	al,dx			; port 201h, start game 1-shots
2F94:2756  F6 D0				not	al
2F94:2758  24 F0				and	al,0F0h
2F94:275A  75 32				jnz	loc_161			; Jump if not zero
2F94:275C  E8 EA19				call	check_stick		; (1178)
2F94:275F  A8 80				test	al,80h
2F94:2761  74 EF				jz	loc_158			; Jump if zero
2F94:2763  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:2768  74 15				jz	loc_159			; Jump if zero
2F94:276A  50					push	ax
2F94:276B  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:276D  0C 03				or	al,3
2F94:276F  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:2771  B0 B6				mov	al,0B6h
2F94:2773  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:2775  B8 03E8				mov	ax,3E8h
2F94:2778  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 67

2F94:277A  8A C4				mov	al,ah
2F94:277C  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:277E  58					pop	ax
2F94:277F			loc_159:					;  xref 2F94:2768
2F94:277F  B9 EF00				mov	cx,0EF00h

2F94:2782			locloop_160:					;  xref 2F94:2782
2F94:2782  E2 FE				loop	locloop_160		; Loop if cx > 0

2F94:2784  50					push	ax
2F94:2785  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:2787  24 FC				and	al,0FCh
2F94:2789  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
										;  al = 0, speaker off
2F94:278B  58					pop	ax
2F94:278C  EB B8				jmp	short loc_157		; (2746)
2F94:278E			loc_161:					;  xref 2F94:275A
2F94:278E  E8 15F7				call	joy_poll_v2		; (3D88)
2F94:2791  C3					retn
2F94:2792			keyboard_start:					;  xref 2F94:272B
2F94:2792  BE 2109				mov	si,2109h
2F94:2795  53					push	bx
2F94:2796  52					push	dx
2F94:2797  50					push	ax
2F94:2798  33 DB				xor	bx,bx			; Zero register
2F94:279A  B6 18				mov	dh,18h
2F94:279C  B2 07				mov	dl,7
2F94:279E  B4 02				mov	ah,2
2F94:27A0  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:27A2  58					pop	ax
2F94:27A3  5A					pop	dx
2F94:27A4  5B					pop	bx
2F94:27A5  B9 001D				mov	cx,1Dh
2F94:27A8  E8 0142				call	puts			; (28ED)
2F94:27AB  C7 06 0DB0 0000			mov	[keyboard_buf_rdptr],0	; (2F94:0DB0=0)
2F94:27B1  C7 06 0DB2 0000			mov	[keyboard_buf_wrptr],0	; (2F94:0DB2=0)
2F94:27B7			loc_162:					;  xref 2F94:27BC
2F94:27B7  E8 E9BE				call	check_stick		; (1178)
2F94:27BA  A8 80				test	al,80h
2F94:27BC  74 F9				jz	loc_162			; Jump if zero
2F94:27BE  C3					retn
				setup_screen	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          score_screen
				;
				;         Called from:   2F94:02FD
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:27BF			score_screen	proc	near
2F94:27BF  E8 562E				call	set_cga_mode_7df0	; (7DF0)
2F94:27C2  53					push	bx
2F94:27C3  52					push	dx
2F94:27C4  50					push	ax
2F94:27C5  33 DB				xor	bx,bx			; Zero register
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 68

2F94:27C7  B6 01				mov	dh,1
2F94:27C9  B2 0A				mov	dl,0Ah
2F94:27CB  B4 02				mov	ah,2
2F94:27CD  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:27CF  58					pop	ax
2F94:27D0  5A					pop	dx
2F94:27D1  5B					pop	bx
2F94:27D2 .BE 22B5				mov	si,offset 22B5h		; (2F94:22B5='Final score =')
2F94:27D5  B9 000D				mov	cx,0Dh
2F94:27D8  E8 0112				call	puts			; (28ED)
2F94:27DB  B9 0032				mov	cx,32h
2F94:27DE  BA 0006				mov	dx,6
2F94:27E1 .BE 0B60				mov	si,offset score_bcd	; (2F94:0B60=0)
2F94:27E4  E8 E4A0				call	display_narrow_num	; (0C87)
2F94:27E7  53					push	bx
2F94:27E8  52					push	dx
2F94:27E9  50					push	ax
2F94:27EA  33 DB				xor	bx,bx			; Zero register
2F94:27EC  B6 05				mov	dh,5
2F94:27EE  B2 05				mov	dl,5
2F94:27F0  B4 02				mov	ah,2
2F94:27F2  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:27F4  58					pop	ax
2F94:27F5  5A					pop	dx
2F94:27F6  5B					pop	bx
2F94:27F7 .BE 22C2				mov	si,offset 22C2h		; (2F94:22C2='C O N G R A T U ')
2F94:27FA  B9 001F				mov	cx,1Fh
2F94:27FD  E8 00ED				call	puts			; (28ED)
2F94:2800  53					push	bx
2F94:2801  52					push	dx
2F94:2802  50					push	ax
2F94:2803  33 DB				xor	bx,bx			; Zero register
2F94:2805  B6 09				mov	dh,9
2F94:2807  B2 0B				mov	dl,0Bh
2F94:2809  B4 02				mov	ah,2
2F94:280B  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:280D  58					pop	ax
2F94:280E  5A					pop	dx
2F94:280F  5B					pop	bx
2F94:2810 .BE 22E1				mov	si,offset 22E1h		; (2F94:22E1='You have destroy')
2F94:2813  B9 0012				mov	cx,12h
2F94:2816  E8 00D4				call	puts			; (28ED)
2F94:2819  53					push	bx
2F94:281A  52					push	dx
2F94:281B  50					push	ax
2F94:281C  33 DB				xor	bx,bx			; Zero register
2F94:281E  B6 0B				mov	dh,0Bh
2F94:2820  B2 0A				mov	dl,0Ah
2F94:2822  B4 02				mov	ah,2
2F94:2824  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:2826  58					pop	ax
2F94:2827  5A					pop	dx
2F94:2828  5B					pop	bx
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 69

2F94:2829 .BE 22F3				mov	si,offset 22F3h		; (2F94:22F3='the elusive, dre')
2F94:282C  B9 0014				mov	cx,14h
2F94:282F  E8 00BB				call	puts			; (28ED)
2F94:2832  80 3E 0133 00			cmp	[advanced_mode],0	; (2F94:0133=0)
2F94:2837  74 03				je	loc_163			; Jump if equal
2F94:2839  EB 4D				jmp	short loc_164		; (2888)
2F94:283B  90					db	90h
2F94:283C			loc_163:					;  xref 2F94:2837
2F94:283C  53					push	bx
2F94:283D  52					push	dx
2F94:283E  50					push	ax
2F94:283F  33 DB				xor	bx,bx			; Zero register
2F94:2841  B6 0D				mov	dh,0Dh
2F94:2843  B2 10				mov	dl,10h
2F94:2845  B4 02				mov	ah,2
2F94:2847  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:2849  58					pop	ax
2F94:284A  5A					pop	dx
2F94:284B  5B					pop	bx
2F94:284C .BE 2307				mov	si,offset 2307h		; (2F94:2307='Shadow!!')
2F94:284F  B9 0008				mov	cx,8
2F94:2852  E8 0098				call	puts			; (28ED)
2F94:2855  53					push	bx
2F94:2856  52					push	dx
2F94:2857  50					push	ax
2F94:2858  33 DB				xor	bx,bx			; Zero register
2F94:285A  B6 12				mov	dh,12h
2F94:285C  B2 03				mov	dl,3
2F94:285E  B4 02				mov	ah,2
2F94:2860  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:2862  58					pop	ax
2F94:2863  5A					pop	dx
2F94:2864  5B					pop	bx
2F94:2865 .BE 2315				mov	si,offset 2315h		; (2F94:2315='If you desire a ')
2F94:2868  B9 0021				mov	cx,21h
2F94:286B  E8 007F				call	puts			; (28ED)
2F94:286E  53					push	bx
2F94:286F  52					push	dx
2F94:2870  50					push	ax
2F94:2871  33 DB				xor	bx,bx			; Zero register
2F94:2873  B6 14				mov	dh,14h
2F94:2875  B2 08				mov	dl,8
2F94:2877  B4 02				mov	ah,2
2F94:2879  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:287B  58					pop	ax
2F94:287C  5A					pop	dx
2F94:287D  5B					pop	bx
2F94:287E .BE 2336				mov	si,offset 2336h		; (2F94:2336='try the Advanced')
2F94:2881  B9 0017				mov	cx,17h
2F94:2884  E8 0066				call	puts			; (28ED)
2F94:2887  C3					retn
2F94:2888			loc_164:					;  xref 2F94:2839
2F94:2888  53					push	bx
2F94:2889  52					push	dx
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 70

2F94:288A  50					push	ax
2F94:288B  33 DB				xor	bx,bx			; Zero register
2F94:288D  B6 0D				mov	dh,0Dh
2F94:288F  B2 11				mov	dl,11h
2F94:2891  B4 02				mov	ah,2
2F94:2893  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:2895  58					pop	ax
2F94:2896  5A					pop	dx
2F94:2897  5B					pop	bx
2F94:2898 .BE 230F				mov	si,offset 230Fh		; (2F94:230F=53h)
2F94:289B  B9 0006				mov	cx,6
2F94:289E  E8 004C				call	puts			; (28ED)
2F94:28A1  53					push	bx
2F94:28A2  52					push	dx
2F94:28A3  50					push	ax
2F94:28A4  33 DB				xor	bx,bx			; Zero register
2F94:28A6  B6 0F				mov	dh,0Fh
2F94:28A8  B2 09				mov	dl,9
2F94:28AA  B4 02				mov	ah,2
2F94:28AC  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:28AE  58					pop	ax
2F94:28AF  5A					pop	dx
2F94:28B0  5B					pop	bx
2F94:28B1 .BE 234D				mov	si,offset 234Dh		; (2F94:234D='at the Advanced ')
2F94:28B4  B9 0016				mov	cx,16h
2F94:28B7  E8 0033				call	puts			; (28ED)
2F94:28BA  53					push	bx
2F94:28BB  52					push	dx
2F94:28BC  50					push	ax
2F94:28BD  33 DB				xor	bx,bx			; Zero register
2F94:28BF  B6 14				mov	dh,14h
2F94:28C1  B2 0A				mov	dl,0Ah
2F94:28C3  B4 02				mov	ah,2
2F94:28C5  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:28C7  58					pop	ax
2F94:28C8  5A					pop	dx
2F94:28C9  5B					pop	bx
2F94:28CA .BE 2363				mov	si,offset 2363h		; (2F94:2363='Very, very few h')
2F94:28CD  B9 0013				mov	cx,13h
2F94:28D0  E8 001A				call	puts			; (28ED)
2F94:28D3  53					push	bx
2F94:28D4  52					push	dx
2F94:28D5  50					push	ax
2F94:28D6  33 DB				xor	bx,bx			; Zero register
2F94:28D8  B6 16				mov	dh,16h
2F94:28DA  B2 09				mov	dl,9
2F94:28DC  B4 02				mov	ah,2
2F94:28DE  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:28E0  58					pop	ax
2F94:28E1  5A					pop	dx
2F94:28E2  5B					pop	bx
2F94:28E3 .BE 2376				mov	si,offset 2376h		; (2F94:2376='accomplished thi')
2F94:28E6  B9 0017				mov	cx,17h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 71

2F94:28E9  E8 0001				call	puts			; (28ED)
2F94:28EC  C3					retn
				score_screen	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         print string in si, length in	cx
				;
				;         Called from:   2F94:1ED7, 1F3B, 1F54, 1F6D, 2430, 2449, 2462
				;                             247B, 2494, 24AD, 24C6, 24DF, 2504, 251D
				;                             2536, 2576, 258C, 25A2, 25BB, 25FB, 2614
				;                             262D, 2663, 2683, 2699, 26B5, 26CB, 26E1
				;                             26F7, 270D, 2723, 2743, 27A8, 27D8, 27FD
				;                             2816, 282F, 2852, 286B, 2884, 289E, 28B7
				;                             28D0, 28E9, 7D79, 7D8C, 7D97
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:28ED			puts		proc	near
2F94:28ED  51					push	cx
2F94:28EE  BB 0003				mov	bx,3

2F94:28F1			locloop_165:					;  xref 2F94:28F8
2F94:28F1  8A 04				mov	al,[si]
2F94:28F3  B4 0E				mov	ah,0Eh
2F94:28F5  CD 10				int	10h			; Video display   ah=functn 0Eh
										;  write char al, teletype mode
2F94:28F7  46					inc	si
2F94:28F8  E2 F7				loop	locloop_165		; Loop if cx > 0

2F94:28FA  59					pop	cx
2F94:28FB  C3					retn
				puts		endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          joy_wait
				;
				;         Called from:   2F94:2555
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:28FC			joy_wait	proc	near
2F94:28FC  B9 00FF				mov	cx,0FFh
2F94:28FF  BA 0201				mov	dx,201h
2F94:2902  33 F6				xor	si,si			; Zero register
2F94:2904  33 FF				xor	di,di			; Zero register
2F94:2906  BD 0101				mov	bp,101h
2F94:2909  8B DD				mov	bx,bp
2F94:290B  EE					out	dx,al			; port 201h, start game 1-shots
2F94:290C  FA					cli				; Disable interrupts

2F94:290D			locloop_166:					;  xref 2F94:2925
2F94:290D  EC					in	al,dx			; port 201h, start game 1-shots
2F94:290E  8A E0				mov	ah,al
2F94:2910  D0 EC				shr	ah,1			; Shift w/zeros fill
2F94:2912  23 E8				and	bp,ax
2F94:2914  03 F5				add	si,bp
2F94:2916  D1 E8				shr	ax,1			; Shift w/zeros fill
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 72

2F94:2918  D1 E8				shr	ax,1			; Shift w/zeros fill
2F94:291A  23 D8				and	bx,ax
2F94:291C  03 FB				add	di,bx
2F94:291E  51					push	cx
2F94:291F  B9 00FF				mov	cx,0FFh

2F94:2922			locloop_167:					;  xref 2F94:2922
2F94:2922  E2 FE				loop	locloop_167		; Loop if cx > 0

2F94:2924  59					pop	cx
2F94:2925  E2 E6				loop	locloop_166		; Loop if cx > 0

2F94:2927  8B C6				mov	ax,si
2F94:2929  8B DF				mov	bx,di
2F94:292B  FB					sti				; Enable interrupts
2F94:292C  C3					retn
				joy_wait	endp

2F94:292D  00 00 00				db	0, 0, 0
2F94:2930  00			shivs_data	db	0			; +0=1,+1=x,+2=y,+3=dir,+4=sound pitch
										;  xref 2F94:04A9, 29F2, 42E2, 4D1E
										;            4D46, 58D9, 5901, 5E51
2F94:2931  0009[00]				db	9 dup (0)
2F94:293A  00			data_153	db	0			;  xref 2F94:2A6E
2F94:293B  00			num_shivs	db	0			; number of flying shivs
										;  xref 2F94:04D8, 0902, 29BE, 2ACD
										;            2AD1, 2AD8, 42D5, 4504
										;            4D71, 592C, 5E45
2F94:293C  64 00				db	 64h, 00h
2F94:293E  00			data_154	db	0			;  xref 2F94:2A23
2F94:293F  00 FE FC 01 F9 04			db	 00h,0FEh,0FCh, 01h,0F9h, 04h
2F94:2945  FC FE 05 04 05 FE			db	0FCh,0FEh, 05h, 04h, 05h,0FEh
2F94:294B  0A 01 0C 04				db	 0Ah, 01h, 0Ch, 04h
2F94:294F  0A					db	0Ah
2F94:2950  0000			data_155	dw	0			; Data table (indexed access)
										;  xref 2F94:2A61, 4D3B, 4D66, 58F6
										;            5921
2F94:2952  02 0C 02 0E 02 0C			db	 02h, 0Ch, 02h, 0Eh, 02h, 0Ch
2F94:2958  02 0A 02 0A 02 0C			db	 02h, 0Ah, 02h, 0Ah, 02h, 0Ch
2F94:295E  02 0E 02				db	 02h, 0Eh, 02h
2F94:2961  0C					db	0Ch
2F94:2962  2ADD			data_156	dw	2ADDh			; Data table (indexed access)
										;  xref 2F94:2A5A, 4D3F, 4D6A, 58FA
										;            5925
2F94:2964  70 7E 7C 7E 8A 7E			db	 70h, 7Eh, 7Ch, 7Eh, 8Ah, 7Eh
2F94:296A  96 7E A0 7E AA 7E			db	 96h, 7Eh,0A0h, 7Eh,0AAh, 7Eh
2F94:2970  B6 7E C4				db	0B6h, 7Eh,0C4h
2F94:2973  7E					db	7Eh

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         handle shamus, ax = direction
				;
				;         Called from:   2F94:03FC, 0432, 0444, 0450
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:2974			process_player	proc	near
2F94:2974  33 D2				xor	dx,dx			; Zero register
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 73

2F94:2976  33 C9				xor	cx,cx			; Zero register
2F94:2978  8A 16 0136				mov	dl,[player_y]		; (2F94:0136=0)
2F94:297C  8A 0E 0134				mov	cl,byte ptr [player_x]	; (2F94:0134=0)
2F94:2980  8B 3E 3414				mov	di,[sprite_ptr]		; (2F94:3414=6710h)
2F94:2984  BB 0C04				mov	bx,0C04h
2F94:2987  E8 EBA7				call	draw_sprite_xor_v1	; (1531)
2F94:298A  BB 0C04				mov	bx,0C04h
2F94:298D  8B 3E 3414				mov	di,[sprite_ptr]		; (2F94:3414=6710h)
2F94:2991  E8 E9E3				call	draw_sprite_xor_check_wall	; (1377)
2F94:2994  80 3E 1330 00			cmp	[collision_1330],0	; (2F94:1330=0)
2F94:2999  74 1B				je	check_walk_29B6		; Jump if equal
2F94:299B  80 3E 0151 00			cmp	[data_40],0		; (2F94:0151=1)
2F94:29A0  74 14				je	check_walk_29B6		; Jump if equal
2F94:29A2  E8 4E2F				call	sub_26			; (77D4)
2F94:29A5  80 3E 458E 00			cmp	byte ptr [lives_remaining],0	; (2F94:458E=4)
2F94:29AA  7D 0A				jge	check_walk_29B6		; Jump if > or =
2F94:29AC  C6 06 0151 00			mov	[data_40],0		; (2F94:0151=1)
2F94:29B1  C6 06 458E 00			mov	byte ptr [lives_remaining],0	; (2F94:458E=4)
2F94:29B6			check_walk_29B6:				;  xref 2F94:2999, 29A0, 29AA
2F94:29B6  3D 0000				cmp	ax,0
2F94:29B9  75 03				jne	loc_168			; Jump if not equal
2F94:29BB  E9 011F				jmp	shiv_cannot		; (2ADD)
2F94:29BE			loc_168:					;  xref 2F94:29B9
2F94:29BE  80 3E 293B 02			cmp	[num_shivs],2		; (2F94:293B=0)
2F94:29C3  72 03				jb	loc_169			; Jump if below
2F94:29C5  E9 0115				jmp	shiv_cannot		; (2ADD)
2F94:29C8			loc_169:					;  xref 2F94:29C3
2F94:29C8  83 3E 4582 00			cmp	[data_233],0		; (2F94:4582=0)
2F94:29CD  75 23				jne	try_shiv_0		; Jump if not equal
2F94:29CF  80 3E 014A 00			cmp	[data_37],0		; (2F94:014A=0)
2F94:29D4  75 1C				jne	try_shiv_0		; Jump if not equal
2F94:29D6  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:29DB  74 15				jz	try_shiv_0		; Jump if zero
2F94:29DD  50					push	ax
2F94:29DE  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:29E0  0C 03				or	al,3
2F94:29E2  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:29E4  B0 B6				mov	al,0B6h
2F94:29E6  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:29E8  B8 0096				mov	ax,96h
2F94:29EB  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:29ED  8A C4				mov	al,ah
2F94:29EF  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:29F1  58					pop	ax
2F94:29F2			try_shiv_0:					;  xref 2F94:29CD, 29D4, 29DB
2F94:29F2 .BE 2930				mov	si,offset shivs_data	; (2F94:2930=0)
2F94:29F5  80 3C 00				cmp	byte ptr [si],0
2F94:29F8  74 09				je	try_shiv_1		; Jump if equal
2F94:29FA  80 7C 04 1E				cmp	byte ptr [si+4],1Eh
2F94:29FE  73 03				jae	try_shiv_1		; Jump if above or =
2F94:2A00  E9 00DA				jmp	shiv_cannot		; (2ADD)
2F94:2A03			try_shiv_1:					;  xref 2F94:29F8, 29FE
2F94:2A03  80 7C 05 00				cmp	byte ptr ds:data_8e[si],0	; (2F94:0005=0)
2F94:2A07  74 09				je	loc_170			; Jump if equal
2F94:2A09  80 7C 09 1E				cmp	byte ptr [si+9],1Eh
2F94:2A0D  73 03				jae	loc_170			; Jump if above or =
2F94:2A0F  E9 00CB				jmp	shiv_cannot		; (2ADD)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 74

2F94:2A12			loc_170:					;  xref 2F94:2A07, 2A0D
2F94:2A12  80 3C 00				cmp	byte ptr [si],0
2F94:2A15  74 03				je	loc_171			; Jump if equal
2F94:2A17  83 C6 05				add	si,5
2F94:2A1A			loc_171:					;  xref 2F94:2A15
2F94:2A1A  33 C9				xor	cx,cx			; Zero register
2F94:2A1C  33 D2				xor	dx,dx			; Zero register
2F94:2A1E			set_shiv_dir:
2F94:2A1E  88 44 03				mov	[si+3],al
2F94:2A21  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:2A23 .BB 293E				mov	bx,offset data_154	; (2F94:293E=0)
2F94:2A26  03 D8				add	bx,ax
2F94:2A28  8A 0F				mov	cl,[bx]
2F94:2A2A  02 0E 0134				add	cl,byte ptr [player_x]	; (2F94:0134=0)
2F94:2A2E  80 F9 00				cmp	cl,0
2F94:2A31  73 03				jae	loc_2a36		; Jump if above or =
2F94:2A33  E9 00A7				jmp	shiv_cannot		; (2ADD)
2F94:2A36			loc_2a36:					;  xref 2F94:2A31
2F94:2A36  80 F9 4E				cmp	cl,4Eh			; 'N'
2F94:2A39  76 03				jbe	set_shiv_x		; Jump if below or =
2F94:2A3B  E9 009F				jmp	shiv_cannot		; (2ADD)
2F94:2A3E			set_shiv_x:					;  xref 2F94:2A39
2F94:2A3E  88 4C 01				mov	[si+1],cl
2F94:2A41  8A 57 01				mov	dl,[bx+1]
2F94:2A44  02 16 0136				add	dl,[player_y]		; (2F94:0136=0)
2F94:2A48  80 FA 00				cmp	dl,0
2F94:2A4B  80 FA B4				cmp	dl,0B4h
2F94:2A4E  76 03				jbe	set_shiv_y		; Jump if below or =
2F94:2A50  E9 008A				jmp	shiv_cannot		; (2ADD)
2F94:2A53			set_shiv_y:					;  xref 2F94:2A4E
2F94:2A53  88 54 02				mov	[si+2],dl
2F94:2A56  C6 44 04 11				mov	byte ptr [si+4],11h
2F94:2A5A .BB 2962				mov	bx,offset data_156	; (2F94:2962=0DDh)
2F94:2A5D  03 D8				add	bx,ax
2F94:2A5F  8B 3F				mov	di,[bx]
2F94:2A61 .BB 2950				mov	bx,offset data_155	; (2F94:2950=0)
2F94:2A64  03 D8				add	bx,ax
2F94:2A66  8B 1F				mov	bx,[bx]
2F94:2A68  E8 E9E5				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:2A6B			set_shiv_active:
2F94:2A6B  C6 04 01				mov	byte ptr [si],1
2F94:2A6E  C6 06 293A 02			mov	[data_153],2		; (2F94:293A=0)
2F94:2A73  83 3E 4582 00			cmp	[data_233],0		; (2F94:4582=0)
2F94:2A78  75 53				jne	add_shiv		; Jump if not equal
2F94:2A7A  80 3E 014A 00			cmp	[data_37],0		; (2F94:014A=0)
2F94:2A7F  75 4C				jne	add_shiv		; Jump if not equal
2F94:2A81  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:2A86  74 15				jz	loc_172			; Jump if zero
2F94:2A88  50					push	ax
2F94:2A89  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:2A8B  0C 03				or	al,3
2F94:2A8D  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:2A8F  B0 B6				mov	al,0B6h
2F94:2A91  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:2A93  B8 00B4				mov	ax,0B4h
2F94:2A96  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:2A98  8A C4				mov	al,ah
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 75

2F94:2A9A  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:2A9C  58					pop	ax
2F94:2A9D			loc_172:					;  xref 2F94:2A86
2F94:2A9D  53					push	bx
2F94:2A9E  8B 1E 3B6A				mov	bx,[data_195]		; (2F94:3B6A=0)
2F94:2AA2  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:2AA6  5B					pop	bx
2F94:2AA7  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:2AAC  74 15				jz	loc_173			; Jump if zero
2F94:2AAE  50					push	ax
2F94:2AAF  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:2AB1  0C 03				or	al,3
2F94:2AB3  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:2AB5  B0 B6				mov	al,0B6h
2F94:2AB7  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:2AB9  B8 00DC				mov	ax,0DCh
2F94:2ABC  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:2ABE  8A C4				mov	al,ah
2F94:2AC0  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:2AC2  58					pop	ax
2F94:2AC3			loc_173:					;  xref 2F94:2AAC
2F94:2AC3  53					push	bx
2F94:2AC4  8B 1E 3B6C				mov	bx,[data_196]		; (2F94:3B6C=0)
2F94:2AC8  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:2ACC  5B					pop	bx
2F94:2ACD			add_shiv:					;  xref 2F94:2A78, 2A7F
2F94:2ACD  FE 06 293B				inc	[num_shivs]		; (2F94:293B=0)
2F94:2AD1  80 3E 293B 02			cmp	[num_shivs],2		; (2F94:293B=0)
2F94:2AD6  76 05				jbe	shiv_cannot		; Jump if below or =
2F94:2AD8  C6 06 293B 02			mov	[num_shivs],2		; (2F94:293B=0)
2F94:2ADD			shiv_cannot:					;  xref 2F94:29BB, 29C5, 2A00, 2A0F
										;            2A33, 2A3B, 2A50, 2AD6
2F94:2ADD  83 3E 4582 00			cmp	[data_233],0		; (2F94:4582=0)
2F94:2AE2  75 0F				jne	loc_ret_174		; Jump if not equal
2F94:2AE4  80 3E 014A 00			cmp	[data_37],0		; (2F94:014A=0)
2F94:2AE9  75 08				jne	loc_ret_174		; Jump if not equal
2F94:2AEB  50					push	ax
2F94:2AEC  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:2AEE  24 FC				and	al,0FCh
2F94:2AF0  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
										;  al = 0, speaker off
2F94:2AF2  58					pop	ax

2F94:2AF3			loc_ret_174:					;  xref 2F94:2AE2, 2AE9
2F94:2AF3  C3					retn
				process_player	endp

2F94:2AF4  000C[00]				db	12 dup (0)
2F94:2B00  00			room_kind_2c30	db	0			;  xref 2F94:2B25, 2C30
2F94:2B01  00			num_monsters	db	0			;  xref 2F94:2B5E, 2B95, 2BC3, 2C04
										;            2C08, 2C14, 3977, 3AD7
2F94:2B02  17			data_158	db	17h			;  xref 2F94:052F, 2CFA, 2D08
2F94:2B03  0000			systick_2b03	dw	0			; Data table (indexed access)
										;  xref 2F94:047A, 0512, 2CB3, 2CB7
										;            2CE4, 2CE9, 2DED, 2DF2
										;            2EAA, 2FB3, 2FB9, 3949
										;            39B6, 3A23, 3A7F, 3A85
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 76

										;            3EE4, 3F1A, 3F24, 3F2A
										;            4263, 4268, 4271, 4279
										;            45D1, 47B3, 47B8, 48AE
										;            5163, 5168, 56BD
2F94:2B05  00 00		anim_offsets_ptr	db	0, 0			; points to frame offsets table
										;  xref 2F94:2D89, 2D95, 2E12, 2EDA
2F94:2B07  00			data_159	db	0			;  xref 2F94:2D5B, 2DA9, 2DC0, 2E2E
										;            2E54, 2E5C, 3140, 315B
										;            3226, 323E, 3F5A, 4287
										;            4292, 42A2, 42AD
2F94:2B08  00			data_160	db	0			;  xref 2F94:2D63, 2DB1, 2DC9, 2DD0
										;            2DD4, 2DDB, 2DE3, 2E32
										;            2E44, 2E4C, 3318, 418B
										;            428C, 4297, 42A7, 42B2
2F94:2B09  00			data_161	db	0			;  xref 2F94:2D41, 2DE7, 2DF9, 2E18
										;            2FC3, 2FC8, 2FCF, 2FD9
										;            307D, 30AF, 312B, 3132
										;            313A, 3B48, 3EC5, 3ECF
										;            3F14, 3F21
2F94:2B0A  00			data_162	db	0			;  xref 2F94:2E25, 2FAC
2F94:2B0B  00			data_163	db	0			;  xref 2F94:2D3A, 2DB8, 2E01, 2FD4
										;            3006, 301A, 3027, 3076
										;            30BB, 30C8, 30CE, 30E0
										;            30E7, 3EA6, 3F31, 3F37
2F94:2B0C  00			data_164	db	0			;  xref 2F94:2B1F, 2C1F, 2C65, 2D28
										;            2F9B
2F94:2B0D  00			check_move_result	db	0			;  xref 2F94:2EA5, 2EB5, 2EC5, 2FA5
										;            2FE8, 2FFA, 2FFE, 3010
										;            31C4, 321A, 32AB, 3309
										;            3356, 339A, 3EDF, 3EEF
										;            3EFF, 3FC3, 4017, 406C
										;            40CD, 4120, 4175, 41E9
										;            4254
2F94:2B0E  00			data_165	db	0			;  xref 2F94:2CDE, 2CEC, 2D20
2F94:2B0F  FB			data_166	db	0FBh			; Data table (indexed access)
										;  xref 2F94:2DBC, 2DC5
2F94:2B10  F0 00 F0 05 F0 05			db	0F0h, 00h,0F0h, 05h,0F0h, 05h
2F94:2B16  00 05 10 00 10 FB			db	 00h, 05h, 10h, 00h, 10h,0FBh
2F94:2B1C  10 FB 00				db	 10h,0FBh, 00h

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          spawn_monsters
				;
				;         Called from:   2F94:089D, 4DB3
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:2B1F			spawn_monsters	proc	near
2F94:2B1F  C6 06 2B0C 00			mov	[data_164],0		; (2F94:2B0C=0)
2F94:2B24  50					push	ax
2F94:2B25  88 26 2B00				mov	[room_kind_2c30],ah	; (2F94:2B00=0)
2F94:2B29  33 C9				xor	cx,cx			; Zero register
2F94:2B2B  E8 017F				call	update_systick_ax	; (2CAD)
2F94:2B2E  8B D8				mov	bx,ax
2F94:2B30  81 E3 001E				and	bx,1Eh
2F94:2B34 .BF 741A				mov	di,offset foe_data_741a	; (2F94:741A=0)
2F94:2B37 .BE 6F10				mov	si,offset spr_spiraldrone2_4b	; (2F94:6F10=80h)
2F94:2B3A  8A C8				mov	cl,al
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 77

2F94:2B3C  80 3E 013B 01			cmp	[room_num],1		; (2F94:013B=0)
2F94:2B41  77 09				ja	loc_175			; Jump if above
2F94:2B43  B1 01				mov	cl,1
2F94:2B45  02 0E 0133				add	cl,[advanced_mode]	; (2F94:0133=0)
2F94:2B49  EB 0C				jmp	short loc_176		; (2B57)
2F94:2B4B  90					db	90h
2F94:2B4C			loc_175:					;  xref 2F94:2B41
2F94:2B4C  80 E1 03				and	cl,3
2F94:2B4F  02 0E 0133				add	cl,[advanced_mode]	; (2F94:0133=0)
2F94:2B53  2A 0E 012F				sub	cl,[data_33]		; (2F94:012F=0)
2F94:2B57			loc_176:					;  xref 2F94:2B49
2F94:2B57  80 F9 00				cmp	cl,0
2F94:2B5A  7F 02				jg	loc_177			; Jump if >
2F94:2B5C  B1 01				mov	cl,1
2F94:2B5E			loc_177:					;  xref 2F94:2B5A
2F94:2B5E  88 0E 2B01				mov	[num_monsters],cl	; (2F94:2B01=0)
2F94:2B62			spawnloop_spiral2:				; set monster id 0
										;  xref 2F94:2B69
2F94:2B62  C6 05 00				mov	byte ptr [di],0
2F94:2B65  47					inc	di
2F94:2B66  E8 00C6				call	spawn_one_monster	; (2C2F)
2F94:2B69  E2 F7				loop	spawnloop_spiral2	; Loop if cx > 0

2F94:2B6B .BE 6FD0				mov	si,offset spr_spiraldrone3_4b_6frm	; (2F94:6FD0=3)
2F94:2B6E  8A C8				mov	cl,al
2F94:2B70  80 3E 013B 0A			cmp	[room_num],0Ah		; (2F94:013B=0)
2F94:2B75  77 06				ja	loc_178			; Jump if above
2F94:2B77  80 E1 01				and	cl,1
2F94:2B7A  EB 04				jmp	short loc_179		; (2B80)
2F94:2B7C  90					db	90h
2F94:2B7D			loc_178:					;  xref 2F94:2B75
2F94:2B7D  80 E1 03				and	cl,3
2F94:2B80			loc_179:					;  xref 2F94:2B7A
2F94:2B80  FE C1				inc	cl
2F94:2B82  02 0E 0133				add	cl,[advanced_mode]	; (2F94:0133=0)
2F94:2B86  2A 0E 012F				sub	cl,[data_33]		; (2F94:012F=0)
2F94:2B8A  2A 0E 012F				sub	cl,[data_33]		; (2F94:012F=0)
2F94:2B8E  80 F9 00				cmp	cl,0
2F94:2B91  7F 02				jg	loc_180			; Jump if >
2F94:2B93  B1 01				mov	cl,1
2F94:2B95			loc_180:					;  xref 2F94:2B91
2F94:2B95  00 0E 2B01				add	[num_monsters],cl	; (2F94:2B01=0)
2F94:2B99			spawnloop_spiral3:				; set monster id 1		
										;  xref 2F94:2BA0
2F94:2B99  C6 05 01				mov	byte ptr [di],1
2F94:2B9C  47					inc	di
2F94:2B9D  E8 008F				call	spawn_one_monster	; (2C2F)
2F94:2BA0  E2 F7				loop	spawnloop_spiral3	; Loop if cx > 0

2F94:2BA2  80 3E 013B 06			cmp	[room_num],6		; (2F94:013B=0)
2F94:2BA7  73 03				jae	loc_181			; Jump if above or =
2F94:2BA9  EB 7F				jmp	short loc_188		; (2C2A)
2F94:2BAB  90					db	90h
2F94:2BAC			loc_181:					;  xref 2F94:2BA7
2F94:2BAC .BE 7090				mov	si,offset spr_robodroid_4b	; (2F94:7090=0)
2F94:2BAF  8A C8				mov	cl,al
2F94:2BB1  80 E1 03				and	cl,3
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 78

2F94:2BB4  02 0E 0133				add	cl,[advanced_mode]	; (2F94:0133=0)
2F94:2BB8  2A 0E 012F				sub	cl,[data_33]		; (2F94:012F=0)
2F94:2BBC  80 F9 00				cmp	cl,0
2F94:2BBF  7F 02				jg	loc_182			; Jump if >
2F94:2BC1  B1 01				mov	cl,1
2F94:2BC3			loc_182:					;  xref 2F94:2BBF
2F94:2BC3  00 0E 2B01				add	[num_monsters],cl	; (2F94:2B01=0)
2F94:2BC7  E3 09				jcxz	loc_183			; Jump if cx=0
2F94:2BC9			spawnloop_robodroids:				; set monster id 2		
										;  xref 2F94:2BD0
2F94:2BC9  C6 05 02				mov	byte ptr [di],2
2F94:2BCC  47					inc	di
2F94:2BCD  E8 005F				call	spawn_one_monster	; (2C2F)
2F94:2BD0  E2 F7				loop	spawnloop_robodroids	; Loop if cx > 0

2F94:2BD2			loc_183:					;  xref 2F94:2BC7
2F94:2BD2  80 3E 013B 0F			cmp	[room_num],0Fh		; (2F94:013B=0)
2F94:2BD7  72 51				jb	loc_188			; Jump if below
2F94:2BD9 .BE 718E				mov	si,offset spr_snapjumper_3b	; (2F94:718E=0FFh)
2F94:2BDC  8A C8				mov	cl,al
2F94:2BDE  80 E1 01				and	cl,1
2F94:2BE1  FE C1				inc	cl
2F94:2BE3  02 0E 0133				add	cl,[advanced_mode]	; (2F94:0133=0)
2F94:2BE7  8A 26 6008				mov	ah,[pattern_n]		; (2F94:6008=1)
2F94:2BEB  D0 EC				shr	ah,1			; Shift w/zeros fill
2F94:2BED  02 CC				add	cl,ah
2F94:2BEF  2A 0E 012F				sub	cl,[data_33]		; (2F94:012F=0)
2F94:2BF3  75 02				jnz	loc_184			; Jump if not zero
2F94:2BF5  B1 01				mov	cl,1
2F94:2BF7			loc_184:					;  xref 2F94:2BF3
2F94:2BF7  80 3E 013B 64			cmp	[room_num],64h		; (2F94:013B=0) 'd'
2F94:2BFC  72 06				jb	loc_185			; Jump if below
2F94:2BFE  FE C1				inc	cl
2F94:2C00  02 0E 0133				add	cl,[advanced_mode]	; (2F94:0133=0)
2F94:2C04			loc_185:					;  xref 2F94:2BFC
2F94:2C04  00 0E 2B01				add	[num_monsters],cl	; (2F94:2B01=0)
2F94:2C08			loc_186:					;  xref 2F94:2C18
2F94:2C08 њ8A 16 2B01				mov	dl,[num_monsters]	; (2F94:2B01=0)
2F94:2C0C  3A 16 3B82				cmp	dl,[data_207]		; (2F94:3B82=12h)
2F94:2C10  76 08				jbe	loc_187			; Jump if below or =
2F94:2C12  FE C9				dec	cl
2F94:2C14  FE 0E 2B01				dec	[num_monsters]		; (2F94:2B01=0)
2F94:2C18  EB EE				jmp	short loc_186		; (2C08)
2F94:2C1A			loc_187:					;  xref 2F94:2C10
2F94:2C1A  E3 0E				jcxz	loc_188			; Jump if cx=0
2F94:2C1C			spawnloop_snapjumpers:				;  xref 2F94:2C28
2F94:2C1C  C6 05 03				mov	byte ptr [di],3
2F94:2C1F  C6 06 2B0C 03			mov	[data_164],3		; (2F94:2B0C=0)
2F94:2C24  47					inc	di
2F94:2C25  E8 0007				call	spawn_one_monster	; (2C2F)
2F94:2C28  E2 F2				loop	spawnloop_snapjumpers	; Loop if cx > 0

2F94:2C2A			loc_188:					;  xref 2F94:2BA9, 2BD7, 2C1A
2F94:2C2A  C6 05 FF				mov	byte ptr [di],0FFh
2F94:2C2D  58					pop	ax
2F94:2C2E  C3					retn
				spawn_monsters	endp
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 79



				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         ax=random?, bx=random	& $1e, di=&foe_data[1],	si=sprite
				;
				;         Called from:   2F94:2B66, 2B9D, 2BCD, 2C25
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:2C2F			spawn_one_monster	proc	near
2F94:2C2F  51					push	cx
2F94:2C30  F6 06 2B00 03			test	[room_kind_2c30],3	; (2F94:2B00=0)
2F94:2C35  74 06				jz	spawn_at_fixed_loc	; Jump if zero
2F94:2C37  E8 0081				call	random_spawn_loc	; (2CBB)
2F94:2C3A  EB 05				jmp	short loc_189		; (2C41)
2F94:2C3C  90					db	90h
2F94:2C3D			spawn_at_fixed_loc:				; set monster id 3
										;  xref 2F94:2C35
2F94:2C3D  B6 22				mov	dh,22h			; '"'
2F94:2C3F  B2 40				mov	dl,40h			; '@'
2F94:2C41			loc_189:					;  xref 2F94:2C3A
2F94:2C41  02 97 7535				add	dl,[placement_offset][bx]	; (2F94:7535=0)
2F94:2C45  43					inc	bx
2F94:2C46  02 B7 7535				add	dh,[placement_offset][bx]	; (2F94:7535=0)
2F94:2C4A  43					inc	bx
2F94:2C4B  88 15				mov	[di],dl
2F94:2C4D  47					inc	di
2F94:2C4E  88 35				mov	[di],dh
2F94:2C50  47					inc	di
2F94:2C51  C6 05 00				mov	byte ptr [di],0
2F94:2C54  47					inc	di
2F94:2C55  C6 05 00				mov	byte ptr [di],0
2F94:2C58  47					inc	di
2F94:2C59  C6 05 01				mov	byte ptr [di],1
2F94:2C5C  47					inc	di
2F94:2C5D  83 FB 22				cmp	bx,22h
2F94:2C60  7E 02				jle	loc_190			; Jump if < or =
2F94:2C62  33 DB				xor	bx,bx			; Zero register
2F94:2C64			loc_190:					;  xref 2F94:2C60
2F94:2C64  53					push	bx
2F94:2C65  80 3E 2B0C 03			cmp	[data_164],3		; (2F94:2B0C=0)
2F94:2C6A  75 06				jne	loc_191			; Jump if not equal
2F94:2C6C  BB 0803				mov	bx,803h
2F94:2C6F  EB 04				jmp	short loc_192		; (2C75)
2F94:2C71  90					db	90h
2F94:2C72			loc_191:					;  xref 2F94:2C6A
2F94:2C72  BB 0804				mov	bx,804h
2F94:2C75			loc_192:					;  xref 2F94:2C6F
2F94:2C75  F6 06 014F 01			test	[data_39],1		; (2F94:014F=0)
2F94:2C7A  74 06				jz	loc_193			; Jump if zero
2F94:2C7C  E8 3472				call	xor_to_screen_60f1	; (60F1)
2F94:2C7F  EB 27				jmp	short loc_195		; (2CA8)
2F94:2C81  90					db	90h
2F94:2C82			loc_193:					;  xref 2F94:2C7A
2F94:2C82  50					push	ax
2F94:2C83  51					push	cx
2F94:2C84  56					push	si
2F94:2C85  57					push	di
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 80

2F94:2C86			loc_194:					;  xref 2F94:2CA2
2F94:2C86  8A C2				mov	al,dl
2F94:2C88  32 E4				xor	ah,ah			; Zero register
2F94:2C8A  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:2C8C  8B F8				mov	di,ax
2F94:2C8E  8A C6				mov	al,dh
2F94:2C90  32 E4				xor	ah,ah			; Zero register
2F94:2C92  03 85 68E0				add	ax,[line_offsets_table][di]	; (2F94:68E0=0)
2F94:2C96  8B F8				mov	di,ax
2F94:2C98  33 C9				xor	cx,cx			; Zero register
2F94:2C9A  8A CB				mov	cl,bl
2F94:2C9C  F3/ A4				rep	movsb			; Rep when cx >0 Mov [si] to es:[di]
2F94:2C9E  FE C2				inc	dl
2F94:2CA0  FE CF				dec	bh
2F94:2CA2  75 E2				jnz	loc_194			; Jump if not zero
2F94:2CA4  5F					pop	di
2F94:2CA5  5E					pop	si
2F94:2CA6  59					pop	cx
2F94:2CA7  58					pop	ax
2F94:2CA8			loc_195:					;  xref 2F94:2C7F
2F94:2CA8  5B					pop	bx
2F94:2CA9  D1 C8				ror	ax,1			; Rotate
2F94:2CAB  59					pop	cx
2F94:2CAC  C3					retn
				spawn_one_monster	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          update_systick_ax
				;
				;         Called from:   2F94:01B7, 23FD, 2B2B, 2D1C, 7CC2
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:2CAD			update_systick_ax	proc	near
2F94:2CAD  33 C0				xor	ax,ax			; Zero register
2F94:2CAF  CD 1A				int	1Ah			; Real time clock   ah=func 00h
										;  get system timer count cx,dx
2F94:2CB1  8B C2				mov	ax,dx
2F94:2CB3  03 06 2B03				add	ax,[systick_2b03]	; (2F94:2B03=0)
2F94:2CB7  A3 2B03				mov	[systick_2b03],ax	; (2F94:2B03=0)
2F94:2CBA  C3					retn
				update_systick_ax	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         ax to dl,dh
				;
				;         Called from:   2F94:2C37
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:2CBB			random_spawn_loc	proc	near
2F94:2CBB  56					push	si
2F94:2CBC  8B F0				mov	si,ax
2F94:2CBE  81 E6 000F				and	si,0Fh
2F94:2CC2  8A CC				mov	cl,ah
2F94:2CC4  81 E1 0001				and	cx,1
2F94:2CC8  03 F1				add	si,cx
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 81

2F94:2CCA  81 E6 00FE				and	si,0FEh
2F94:2CCE  33 D2				xor	dx,dx			; Zero register
2F94:2CD0  8A 94 7523				mov	dl,[data_301][si]	; (2F94:7523=8)
2F94:2CD4  46					inc	si
2F94:2CD5  8A B4 7523				mov	dh,[data_301][si]	; (2F94:7523=8)
2F94:2CD9  5E					pop	si
2F94:2CDA  C3					retn
				random_spawn_loc	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          process_foes
				;
				;         Called from:   2F94:023C
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:2CDB			process_foes	proc	near
2F94:2CDB  A0 3B82				mov	al,[data_207]		; (2F94:3B82=12h)
2F94:2CDE  A2 2B0E				mov	[data_165],al		; (2F94:2B0E=0)
2F94:2CE1 .BF 741A				mov	di,offset foe_data_741a	; (2F94:741A=0)
2F94:2CE4  A1 2B03				mov	ax,[systick_2b03]	; (2F94:2B03=0)
2F94:2CE7  D1 C8				ror	ax,1			; Rotate
2F94:2CE9  A3 2B03				mov	[systick_2b03],ax	; (2F94:2B03=0)
2F94:2CEC			next_foe_2cec:					;  xref 2F94:2D55, 2E0C, 2F98, 30AC
2F94:2CEC њFE 0E 2B0E				dec	[data_165]		; (2F94:2B0E=0)
2F94:2CF0  79 01				jns	loc_196			; Jump if not sign
2F94:2CF2  C3					retn
2F94:2CF3			loc_196:					;  xref 2F94:2CF0
2F94:2CF3  80 3E 012E 00			cmp	[goback_num],0		; (2F94:012E=0FFh)
2F94:2CF8  74 11				je	loc_197			; Jump if equal
2F94:2CFA  FE 0E 2B02				dec	[data_158]		; (2F94:2B02=17h)
2F94:2CFE  75 0B				jnz	loc_197			; Jump if not zero
2F94:2D00  C6 06 012D 01			mov	[data_32],1		; (2F94:012D=0)
2F94:2D05  A0 0125				mov	al,[data_30]		; (2F94:0125=0)
2F94:2D08  A2 2B02				mov	[data_158],al		; (2F94:2B02=17h)
2F94:2D0B			loc_197:					;  xref 2F94:2CF8, 2CFE
2F94:2D0B  8A 05				mov	al,[di]
2F94:2D0D  3C FF				cmp	al,0FFh
2F94:2D0F  75 16				jne	loc_199			; Jump if not equal
2F94:2D11			loc_198:					;  xref 2F94:2D24
2F94:2D11  53					push	bx
2F94:2D12  8B 1E 3B7E				mov	bx,[data_205]		; (2F94:3B7E=0)
2F94:2D16  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:2D1A  5B					pop	bx
2F94:2D1B  50					push	ax
2F94:2D1C  E8 FF8E				call	update_systick_ax	; (2CAD)
2F94:2D1F  58					pop	ax
2F94:2D20  FE 0E 2B0E				dec	[data_165]		; (2F94:2B0E=0)
2F94:2D24  79 EB				jns	loc_198			; Jump if not sign
2F94:2D26  C3					retn
2F94:2D27			loc_199:					;  xref 2F94:2D0F
2F94:2D27  47					inc	di
2F94:2D28  A2 2B0C				mov	[data_164],al		; (2F94:2B0C=0)
2F94:2D2B  33 C9				xor	cx,cx			; Zero register
2F94:2D2D  33 D2				xor	dx,dx			; Zero register
2F94:2D2F  8A 15				mov	dl,[di]
2F94:2D31  47					inc	di
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 82

2F94:2D32  8A 35				mov	dh,[di]
2F94:2D34  47					inc	di
2F94:2D35  8A 25				mov	ah,[di]
2F94:2D37  47					inc	di
2F94:2D38  8A 3D				mov	bh,[di]
2F94:2D3A  88 3E 2B0B				mov	[data_163],bh		; (2F94:2B0B=0)
2F94:2D3E  47					inc	di
2F94:2D3F  8A 3D				mov	bh,[di]
2F94:2D41  88 3E 2B09				mov	[data_161],bh		; (2F94:2B09=0)
2F94:2D45  47					inc	di
2F94:2D46  80 FF 00				cmp	bh,0
2F94:2D49  75 0C				jne	loc_200			; Jump if not equal
2F94:2D4B  53					push	bx
2F94:2D4C  8B 1E 3B7E				mov	bx,[data_205]		; (2F94:3B7E=0)
2F94:2D50  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:2D54  5B					pop	bx
2F94:2D55  EB 95				jmp	short next_foe_2cec	; (2CEC)
2F94:2D57			loc_200:					;  xref 2F94:2D49
2F94:2D57  8A 1E 0134				mov	bl,byte ptr [player_x]	; (2F94:0134=0)
2F94:2D5B  88 1E 2B07				mov	[data_159],bl		; (2F94:2B07=0)
2F94:2D5F  8A 1E 0136				mov	bl,[player_y]		; (2F94:0136=0)
2F94:2D63  88 1E 2B08				mov	[data_160],bl		; (2F94:2B08=0)
2F94:2D67  3C 00				cmp	al,0
2F94:2D69  74 1B				je	mov_si_spiraldrone	; Jump if equal
2F94:2D6B  3C 01				cmp	al,1
2F94:2D6D  74 23				je	loc_203			; Jump if equal
2F94:2D6F  3C 02				cmp	al,2
2F94:2D71  77 03				ja	loc_201			; Jump if above
2F94:2D73  E9 0099				jmp	loc_209			; (2E0F)
2F94:2D76			loc_201:					;  xref 2F94:2D71
2F94:2D76  3C 03				cmp	al,3
2F94:2D78  74 03				je	loc_202			; Jump if equal
2F94:2D7A  E9 008C				jmp	loc_208			; (2E09)
2F94:2D7D			loc_202:					;  xref 2F94:2D78
2F94:2D7D .BE 718E				mov	si,offset spr_snapjumper_3b	; (2F94:718E=0FFh)
2F94:2D80  E8 110E				call	sub_18			; (3E91)
2F94:2D83  E9 02E4				jmp	loc_234			; (306A)
2F94:2D86			mov_si_spiraldrone:				;  xref 2F94:2D69
2F94:2D86  BE 6F10				mov	si,6F10h
2F94:2D89  C7 06 2B05 74FE			mov	word ptr [anim_offsets_ptr],74FEh	; (2F94:2B05=0)
2F94:2D8F  E9 00CF				jmp	loc_spr_4x8_fastxor	; (2E61)
2F94:2D92			loc_203:					;  xref 2F94:2D6D
2F94:2D92 .BE 6FD0				mov	si,offset spr_spiraldrone3_4b_6frm	; (2F94:6FD0=3)
2F94:2D95  C7 06 2B05 74DA			mov	word ptr [anim_offsets_ptr],74DAh	; (2F94:2B05=0)
2F94:2D9B  80 3E 014D 01			cmp	[powerup_present],1	; (2F94:014D=0)
2F94:2DA0  74 03				je	loc_204			; Jump if equal
2F94:2DA2  E9 00BC				jmp	loc_spr_4x8_fastxor	; (2E61)
2F94:2DA5			loc_204:					;  xref 2F94:2DA0
2F94:2DA5  8A 1E 4588				mov	bl,[powerup_x]		; (2F94:4588=0)
2F94:2DA9  88 1E 2B07				mov	[data_159],bl		; (2F94:2B07=0)
2F94:2DAD  8A 1E 4589				mov	bl,[powerup_y]		; (2F94:4589=0)
2F94:2DB1  88 1E 2B08				mov	[data_160],bl		; (2F94:2B08=0)
2F94:2DB5  50					push	ax
2F94:2DB6  33 DB				xor	bx,bx			; Zero register
2F94:2DB8  8A 1E 2B0B				mov	bl,[data_163]		; (2F94:2B0B=0)
2F94:2DBC  8A 87 2B0F				mov	al,[data_166][bx]	; (2F94:2B0F=0FBh)
2F94:2DC0  00 06 2B07				add	[data_159],al		; (2F94:2B07=0)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 83

2F94:2DC4  43					inc	bx
2F94:2DC5  8A 87 2B0F				mov	al,[data_166][bx]	; (2F94:2B0F=0FBh)
2F94:2DC9  80 3E 2B08 10			cmp	[data_160],10h		; (2F94:2B08=0)
2F94:2DCE  73 13				jae	loc_205			; Jump if above or =
2F94:2DD0  00 06 2B08				add	[data_160],al		; (2F94:2B08=0)
2F94:2DD4  80 3E 2B08 00			cmp	[data_160],0		; (2F94:2B08=0)
2F94:2DD9  7D 0C				jge	loc_206			; Jump if > or =
2F94:2DDB  C6 06 2B08 00			mov	[data_160],0		; (2F94:2B08=0)
2F94:2DE0  EB 05				jmp	short loc_206		; (2DE7)
2F94:2DE2  90					db	90h
2F94:2DE3			loc_205:					;  xref 2F94:2DCE
2F94:2DE3  00 06 2B08				add	[data_160],al		; (2F94:2B08=0)
2F94:2DE7			loc_206:					;  xref 2F94:2DD9, 2DE0
2F94:2DE7  FE 0E 2B09				dec	[data_161]		; (2F94:2B09=0)
2F94:2DEB  75 18				jnz	loc_207			; Jump if not zero
2F94:2DED  A1 2B03				mov	ax,[systick_2b03]	; (2F94:2B03=0)
2F94:2DF0  D1 C8				ror	ax,1			; Rotate
2F94:2DF2  A3 2B03				mov	[systick_2b03],ax	; (2F94:2B03=0)
2F94:2DF5  24 0F				and	al,0Fh
2F94:2DF7  04 05				add	al,5
2F94:2DF9  A2 2B09				mov	[data_161],al		; (2F94:2B09=0)
2F94:2DFC  80 E4 07				and	ah,7
2F94:2DFF  D0 E4				shl	ah,1			; Shift w/zeros fill
2F94:2E01  88 26 2B0B				mov	[data_163],ah		; (2F94:2B0B=0)
2F94:2E05			loc_207:					;  xref 2F94:2DEB
2F94:2E05  58					pop	ax
2F94:2E06  EB 59				jmp	short loc_spr_4x8_fastxor	; (2E61)
2F94:2E08  90					db	90h
2F94:2E09			loc_208:					;  xref 2F94:2D7A
2F94:2E09  E8 0B39				call	sub_5			; (3945)
2F94:2E0C  E9 FEDD				jmp	next_foe_2cec		; (2CEC)
2F94:2E0F			loc_209:					;  xref 2F94:2D73
2F94:2E0F .BE 7090				mov	si,offset spr_robodroid_4b	; (2F94:7090=0)
2F94:2E12  C7 06 2B05 74B6			mov	word ptr [anim_offsets_ptr],74B6h	; (2F94:2B05=0)
2F94:2E18  8A 3E 2B09				mov	bh,[data_161]		; (2F94:2B09=0)
2F94:2E1C  80 E7 E0				and	bh,0E0h
2F94:2E1F  D0 C7				rol	bh,1			; Rotate
2F94:2E21  D0 C7				rol	bh,1			; Rotate
2F94:2E23  D0 C7				rol	bh,1			; Rotate
2F94:2E25  88 3E 2B0A				mov	[data_162],bh		; (2F94:2B0A=0)
2F94:2E29  80 FF 00				cmp	bh,0
2F94:2E2C  74 33				je	loc_spr_4x8_fastxor	; Jump if equal
2F94:2E2E  88 36 2B07				mov	[data_159],dh		; (2F94:2B07=0)
2F94:2E32  88 16 2B08				mov	[data_160],dl		; (2F94:2B08=0)
2F94:2E36  80 FF 01				cmp	bh,1
2F94:2E39  74 09				je	loc_210			; Jump if equal
2F94:2E3B  80 FF 03				cmp	bh,3
2F94:2E3E  72 0C				jb	loc_211			; Jump if below
2F94:2E40  74 12				jz	loc_212			; Jump if zero
2F94:2E42  77 18				ja	loc_213			; Jump if above
2F94:2E44			loc_210:					;  xref 2F94:2E39
2F94:2E44  C6 06 2B08 00			mov	[data_160],0		; (2F94:2B08=0)
2F94:2E49  EB 16				jmp	short loc_spr_4x8_fastxor	; (2E61)
2F94:2E4B  90					db	90h
2F94:2E4C			loc_211:					;  xref 2F94:2E3E
2F94:2E4C  C6 06 2B08 C8			mov	[data_160],0C8h		; (2F94:2B08=0)
2F94:2E51  EB 0E				jmp	short loc_spr_4x8_fastxor	; (2E61)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 84

2F94:2E53  90					db	90h
2F94:2E54			loc_212:					;  xref 2F94:2E40
2F94:2E54  C6 06 2B07 00			mov	[data_159],0		; (2F94:2B07=0)
2F94:2E59  EB 06				jmp	short loc_spr_4x8_fastxor	; (2E61)
2F94:2E5B  90					db	90h
2F94:2E5C			loc_213:					;  xref 2F94:2E42
2F94:2E5C  C6 06 2B07 4D			mov	[data_159],4Dh		; (2F94:2B07=0) 'M'
2F94:2E61			loc_spr_4x8_fastxor:				;  xref 2F94:2D8F, 2DA2, 2E06, 2E2C
										;            2E49, 2E51, 2E59
2F94:2E61  32 FF				xor	bh,bh			; Zero register
2F94:2E63  8A DC				mov	bl,ah
2F94:2E65  56					push	si
2F94:2E66  53					push	bx
2F94:2E67  03 F3				add	si,bx
2F94:2E69  BB 0804				mov	bx,804h
2F94:2E6C  50					push	ax
2F94:2E6D  52					push	dx
2F94:2E6E  57					push	di
2F94:2E6F			loc_214:					;  xref 2F94:2E99
2F94:2E6F  8A C2				mov	al,dl
2F94:2E71  32 E4				xor	ah,ah			; Zero register
2F94:2E73  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:2E75  8B F8				mov	di,ax
2F94:2E77  8A C6				mov	al,dh
2F94:2E79  32 E4				xor	ah,ah			; Zero register
2F94:2E7B  03 85 68E0				add	ax,[line_offsets_table][di]	; (2F94:68E0=0)
2F94:2E7F  8B F8				mov	di,ax
2F94:2E81  AC					lodsb				; String [si] to al
2F94:2E82  26: 30 05				xor	es:[di],al
2F94:2E85  47					inc	di
2F94:2E86  AC					lodsb				; String [si] to al
2F94:2E87  26: 30 05				xor	es:[di],al
2F94:2E8A  47					inc	di
2F94:2E8B  AC					lodsb				; String [si] to al
2F94:2E8C  26: 30 05				xor	es:[di],al
2F94:2E8F  47					inc	di
2F94:2E90  AC					lodsb				; String [si] to al
2F94:2E91  26: 30 05				xor	es:[di],al
2F94:2E94  47					inc	di
2F94:2E95  FE C2				inc	dl
2F94:2E97  FE CF				dec	bh
2F94:2E99  75 D4				jnz	loc_214			; Jump if not zero
2F94:2E9B  5F					pop	di
2F94:2E9C  5A					pop	dx
2F94:2E9D  58					pop	ax
2F94:2E9E  3C 02				cmp	al,2
2F94:2EA0  75 03				jne	loc_215			; Jump if not equal
2F94:2EA2  E8 020A				call	sub_4			; (30AF)
2F94:2EA5			loc_215:					;  xref 2F94:2EA0
2F94:2EA5  C6 06 2B0D 00			mov	[check_move_result],0	; (2F94:2B0D=0)
2F94:2EAA  F7 06 2B03 0001			test	[systick_2b03],1	; (2F94:2B03=0)
2F94:2EB0  75 10				jnz	loc_216			; Jump if not zero
2F94:2EB2  E8 028B				call	big_collision_check	; (3140)
2F94:2EB5  80 3E 2B0D 00			cmp	[check_move_result],0	; (2F94:2B0D=0)
2F94:2EBA  77 13				ja	loc_217			; Jump if above
2F94:2EBC  E8 0453				call	check_move		; (3312)
2F94:2EBF  EB 0E				jmp	short loc_217		; (2ECF)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 85

2F94:2EC1  90					db	90h
2F94:2EC2			loc_216:					;  xref 2F94:2EB0
2F94:2EC2  E8 044D				call	check_move		; (3312)
2F94:2EC5  80 3E 2B0D 00			cmp	[check_move_result],0	; (2F94:2B0D=0)
2F94:2ECA  77 03				ja	loc_217			; Jump if above
2F94:2ECC  E8 0271				call	big_collision_check	; (3140)
2F94:2ECF			loc_217:					;  xref 2F94:2EBA, 2EBF, 2ECA
2F94:2ECF  5B					pop	bx
2F94:2ED0  D1 EB				shr	bx,1			; Shift w/zeros fill
2F94:2ED2  D1 EB				shr	bx,1			; Shift w/zeros fill
2F94:2ED4  D1 EB				shr	bx,1			; Shift w/zeros fill
2F94:2ED6  D1 EB				shr	bx,1			; Shift w/zeros fill
2F94:2ED8  03 DE				add	bx,si
2F94:2EDA  03 1E 2B05				add	bx,word ptr [anim_offsets_ptr]	; (2F94:2B05=0)
2F94:2EDE  8A 07				mov	al,[bx]
2F94:2EE0  32 E4				xor	ah,ah			; Zero register
2F94:2EE2  5E					pop	si
2F94:2EE3  03 F0				add	si,ax
2F94:2EE5  43					inc	bx
2F94:2EE6  02 37				add	dh,[bx]
2F94:2EE8  BB 0804				mov	bx,804h
2F94:2EEB  50					push	ax
2F94:2EEC  52					push	dx
2F94:2EED  57					push	di
2F94:2EEE  56					push	si
2F94:2EEF  C6 06 1330 00			mov	[collision_1330],0	; (2F94:1330=0)
2F94:2EF4			loc_218:					;  xref 2F94:2F56
2F94:2EF4  8A C2				mov	al,dl
2F94:2EF6  32 E4				xor	ah,ah			; Zero register
2F94:2EF8  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:2EFA  8B F8				mov	di,ax
2F94:2EFC  8A C6				mov	al,dh
2F94:2EFE  32 E4				xor	ah,ah			; Zero register
2F94:2F00  03 85 68E0				add	ax,[line_offsets_table][di]	; (2F94:68E0=0)
2F94:2F04  8B F8				mov	di,ax
2F94:2F06  AC					lodsb				; String [si] to al
2F94:2F07  8A E0				mov	ah,al
2F94:2F09  26: 22 05				and	al,es:[di]
2F94:2F0C  A8 AA				test	al,0AAh
2F94:2F0E  74 05				jz	loc_219			; Jump if zero
2F94:2F10  C6 06 1330 01			mov	[collision_1330],1	; (2F94:1330=0)
2F94:2F15			loc_219:					;  xref 2F94:2F0E
2F94:2F15  26: 30 25				xor	es:[di],ah
2F94:2F18  47					inc	di
2F94:2F19  AC					lodsb				; String [si] to al
2F94:2F1A  8A E0				mov	ah,al
2F94:2F1C  26: 22 05				and	al,es:[di]
2F94:2F1F  A8 AA				test	al,0AAh
2F94:2F21  74 05				jz	loc_220			; Jump if zero
2F94:2F23  C6 06 1330 01			mov	[collision_1330],1	; (2F94:1330=0)
2F94:2F28			loc_220:					;  xref 2F94:2F21
2F94:2F28  26: 30 25				xor	es:[di],ah
2F94:2F2B  47					inc	di
2F94:2F2C  AC					lodsb				; String [si] to al
2F94:2F2D  8A E0				mov	ah,al
2F94:2F2F  26: 22 05				and	al,es:[di]
2F94:2F32  A8 AA				test	al,0AAh
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 86

2F94:2F34  74 05				jz	loc_221			; Jump if zero
2F94:2F36  C6 06 1330 01			mov	[collision_1330],1	; (2F94:1330=0)
2F94:2F3B			loc_221:					;  xref 2F94:2F34
2F94:2F3B  26: 30 25				xor	es:[di],ah
2F94:2F3E  47					inc	di
2F94:2F3F  AC					lodsb				; String [si] to al
2F94:2F40  8A E0				mov	ah,al
2F94:2F42  26: 22 05				and	al,es:[di]
2F94:2F45  A8 AA				test	al,0AAh
2F94:2F47  74 05				jz	loc_222			; Jump if zero
2F94:2F49  C6 06 1330 01			mov	[collision_1330],1	; (2F94:1330=0)
2F94:2F4E			loc_222:					;  xref 2F94:2F47
2F94:2F4E  26: 30 25				xor	es:[di],ah
2F94:2F51  47					inc	di
2F94:2F52  FE C2				inc	dl
2F94:2F54  FE CF				dec	bh
2F94:2F56  75 9C				jnz	loc_218			; Jump if not zero
2F94:2F58  5E					pop	si
2F94:2F59  5F					pop	di
2F94:2F5A  5A					pop	dx
2F94:2F5B  58					pop	ax
2F94:2F5C  80 3E 1330 00			cmp	[collision_1330],0	; (2F94:1330=0)
2F94:2F61  74 38				je	loc_224			; Jump if equal
2F94:2F63  C6 45 FA 0A				mov	byte ptr [di-6],0Ah
2F94:2F67  BB 0804				mov	bx,804h
2F94:2F6A  57					push	di
2F94:2F6B			loc_223:					;  xref 2F94:2F95
2F94:2F6B  8A C2				mov	al,dl
2F94:2F6D  32 E4				xor	ah,ah			; Zero register
2F94:2F6F  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:2F71  8B F8				mov	di,ax
2F94:2F73  8A C6				mov	al,dh
2F94:2F75  32 E4				xor	ah,ah			; Zero register
2F94:2F77  03 85 68E0				add	ax,[line_offsets_table][di]	; (2F94:68E0=0)
2F94:2F7B  8B F8				mov	di,ax
2F94:2F7D  AC					lodsb				; String [si] to al
2F94:2F7E  26: 30 05				xor	es:[di],al
2F94:2F81  47					inc	di
2F94:2F82  AC					lodsb				; String [si] to al
2F94:2F83  26: 30 05				xor	es:[di],al
2F94:2F86  47					inc	di
2F94:2F87  AC					lodsb				; String [si] to al
2F94:2F88  26: 30 05				xor	es:[di],al
2F94:2F8B  47					inc	di
2F94:2F8C  AC					lodsb				; String [si] to al
2F94:2F8D  26: 30 05				xor	es:[di],al
2F94:2F90  47					inc	di
2F94:2F91  FE C2				inc	dl
2F94:2F93  FE CF				dec	bh
2F94:2F95  75 D4				jnz	loc_223			; Jump if not zero
2F94:2F97  5F					pop	di
2F94:2F98  E9 FD51				jmp	next_foe_2cec		; (2CEC)
2F94:2F9B			loc_224:					;  xref 2F94:2F61
2F94:2F9B  80 3E 2B0C 02			cmp	[data_164],2		; (2F94:2B0C=0)
2F94:2FA0  74 03				je	loc_225			; Jump if equal
2F94:2FA2  E9 00C5				jmp	loc_234			; (306A)
2F94:2FA5			loc_225:					;  xref 2F94:2FA0
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 87

2F94:2FA5  80 3E 2B0D 00			cmp	[check_move_result],0	; (2F94:2B0D=0)
2F94:2FAA  75 28				jne	loc_227			; Jump if not equal
2F94:2FAC  80 3E 2B0A 00			cmp	[data_162],0		; (2F94:2B0A=0)
2F94:2FB1  75 1C				jne	loc_226			; Jump if not equal
2F94:2FB3  8B 1E 2B03				mov	bx,[systick_2b03]	; (2F94:2B03=0)
2F94:2FB7  D1 CB				ror	bx,1			; Rotate
2F94:2FB9  89 1E 2B03				mov	[systick_2b03],bx	; (2F94:2B03=0)
2F94:2FBD  80 E7 60				and	bh,60h			; '`'
2F94:2FC0  80 C7 20				add	bh,20h			; ' '
2F94:2FC3  80 26 2B09 1F			and	[data_161],1Fh		; (2F94:2B09=0)
2F94:2FC8  08 3E 2B09				or	[data_161],bh		; (2F94:2B09=0)
2F94:2FCC  EB 06				jmp	short loc_227		; (2FD4)
2F94:2FCE  90					db	90h
2F94:2FCF			loc_226:					;  xref 2F94:2FB1
2F94:2FCF  80 26 2B09 1F			and	[data_161],1Fh		; (2F94:2B09=0)
2F94:2FD4			loc_227:					;  xref 2F94:2FAA, 2FCC
2F94:2FD4  C6 06 2B0B 00			mov	[data_163],0		; (2F94:2B0B=0)
2F94:2FD9  8A 3E 2B09				mov	bh,[data_161]		; (2F94:2B09=0)
2F94:2FDD  80 E7 1F				and	bh,1Fh
2F94:2FE0  80 FF 06				cmp	bh,6
2F94:2FE3  73 03				jae	loc_228			; Jump if above or =
2F94:2FE5  E9 0082				jmp	loc_234			; (306A)
2F94:2FE8			loc_228:					;  xref 2F94:2FE3
2F94:2FE8  80 3E 2B0D 00			cmp	[check_move_result],0	; (2F94:2B0D=0)
2F94:2FED  74 7B				je	loc_234			; Jump if equal
2F94:2FEF  8B D8				mov	bx,ax
2F94:2FF1  D1 EB				shr	bx,1			; Shift w/zeros fill
2F94:2FF3  D1 EB				shr	bx,1			; Shift w/zeros fill
2F94:2FF5  D1 EB				shr	bx,1			; Shift w/zeros fill
2F94:2FF7 .BE 7176				mov	si,offset data_298	; (2F94:7176=0D2h)
2F94:2FFA  FE 0E 2B0D				dec	[check_move_result]	; (2F94:2B0D=0)
2F94:2FFE  02 1E 2B0D				add	bl,[check_move_result]	; (2F94:2B0D=0)
2F94:3002  03 F3				add	si,bx
2F94:3004  8A 1C				mov	bl,[si]
2F94:3006  88 1E 2B0B				mov	[data_163],bl		; (2F94:2B0B=0)
2F94:300A .BE 7090				mov	si,offset spr_robodroid_4b	; (2F94:7090=0)
2F94:300D  03 F3				add	si,bx
2F94:300F  52					push	dx
2F94:3010  80 3E 2B0D 02			cmp	[check_move_result],2	; (2F94:2B0D=0)
2F94:3015  73 1D				jae	loc_230			; Jump if above or =
2F94:3017  BB 0501				mov	bx,501h
2F94:301A  80 3E 2B0B D7			cmp	[data_163],0D7h		; (2F94:2B0B=0)
2F94:301F  75 06				jne	loc_229			; Jump if not equal
2F94:3021  80 C6 02				add	dh,2
2F94:3024  EB 13				jmp	short loc_231		; (3039)
2F94:3026  90					db	90h
2F94:3027			loc_229:					;  xref 2F94:301F
2F94:3027  80 3E 2B0B E1			cmp	[data_163],0E1h		; (2F94:2B0B=0)
2F94:302C  75 0B				jne	loc_231			; Jump if not equal
2F94:302E  80 C6 03				add	dh,3
2F94:3031  EB 06				jmp	short loc_231		; (3039)
2F94:3033  90					db	90h
2F94:3034			loc_230:					;  xref 2F94:3015
2F94:3034  BB 0203				mov	bx,203h
2F94:3037  FE C2				inc	dl
2F94:3039			loc_231:					;  xref 2F94:3024, 302C, 3031
2F94:3039  50					push	ax
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 88

2F94:303A  57					push	di
2F94:303B			loc_232:					;  xref 2F94:3065
2F94:303B  8A C2				mov	al,dl
2F94:303D  32 E4				xor	ah,ah			; Zero register
2F94:303F  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:3041  8B F8				mov	di,ax
2F94:3043  8A C6				mov	al,dh
2F94:3045  32 E4				xor	ah,ah			; Zero register
2F94:3047  03 85 68E0				add	ax,[line_offsets_table][di]	; (2F94:68E0=0)
2F94:304B  8B F8				mov	di,ax
2F94:304D  AC					lodsb				; String [si] to al
2F94:304E  26: 30 05				xor	es:[di],al
2F94:3051  47					inc	di
2F94:3052  80 FB 01				cmp	bl,1
2F94:3055  74 0A				je	loc_233			; Jump if equal
2F94:3057  AC					lodsb				; String [si] to al
2F94:3058  26: 30 05				xor	es:[di],al
2F94:305B  47					inc	di
2F94:305C  AC					lodsb				; String [si] to al
2F94:305D  26: 30 05				xor	es:[di],al
2F94:3060  47					inc	di
2F94:3061			loc_233:					;  xref 2F94:3055
2F94:3061  FE C2				inc	dl
2F94:3063  FE CF				dec	bh
2F94:3065  75 D4				jnz	loc_232			; Jump if not zero
2F94:3067  5F					pop	di
2F94:3068  58					pop	ax
2F94:3069  5A					pop	dx
2F94:306A			loc_234:					;  xref 2F94:2D83, 2FA2, 2FE5, 2FED
2F94:306A  83 EF 05				sub	di,5
2F94:306D  88 15				mov	[di],dl
2F94:306F  47					inc	di
2F94:3070  88 35				mov	[di],dh
2F94:3072  47					inc	di
2F94:3073  88 05				mov	[di],al
2F94:3075  47					inc	di
2F94:3076  8A 1E 2B0B				mov	bl,[data_163]		; (2F94:2B0B=0)
2F94:307A  88 1D				mov	[di],bl
2F94:307C  47					inc	di
2F94:307D  8A 1E 2B09				mov	bl,[data_161]		; (2F94:2B09=0)
2F94:3081  88 1D				mov	[di],bl
2F94:3083  47					inc	di
2F94:3084  0A DB				or	bl,bl			; Zero ?
2F94:3086  74 24				jz	loc_235			; Jump if zero
2F94:3088  80 3E 012E 00			cmp	[goback_num],0		; (2F94:012E=0FFh)
2F94:308D  74 1D				je	loc_235			; Jump if equal
2F94:308F  80 3E 012D 00			cmp	[data_32],0		; (2F94:012D=0)
2F94:3094  74 16				je	loc_235			; Jump if equal
2F94:3096  51					push	cx
2F94:3097  52					push	dx
2F94:3098  56					push	si
2F94:3099  57					push	di
2F94:309A  33 C9				xor	cx,cx			; Zero register
2F94:309C  8A CE				mov	cl,dh
2F94:309E  32 F6				xor	dh,dh			; Zero register
2F94:30A0  87 F7				xchg	si,di
2F94:30A2  E8 218B				call	sub_13			; (5230)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 89

2F94:30A5  E8 23E3				call	sub_16			; (548B)
2F94:30A8  5F					pop	di
2F94:30A9  5E					pop	si
2F94:30AA  5A					pop	dx
2F94:30AB  59					pop	cx
2F94:30AC			loc_235:					;  xref 2F94:3086, 308D, 3094
2F94:30AC  E9 FC3D				jmp	next_foe_2cec		; (2CEC)
				process_foes	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                              SUBROUTINE
				;
				;         Called from:   2F94:2EA2
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:30AF			sub_4		proc	near
2F94:30AF  8A 3E 2B09				mov	bh,[data_161]		; (2F94:2B09=0)
2F94:30B3  80 E7 1F				and	bh,1Fh
2F94:30B6  80 FF 06				cmp	bh,6
2F94:30B9  72 70				jb	loc_241			; Jump if below
2F94:30BB  80 3E 2B0B 00			cmp	[data_163],0		; (2F94:2B0B=0)
2F94:30C0  74 69				je	loc_241			; Jump if equal
2F94:30C2  52					push	dx
2F94:30C3 .BE 7090				mov	si,offset spr_robodroid_4b	; (2F94:7090=0)
2F94:30C6  33 DB				xor	bx,bx			; Zero register
2F94:30C8  8A 1E 2B0B				mov	bl,[data_163]		; (2F94:2B0B=0)
2F94:30CC  03 F3				add	si,bx
2F94:30CE  80 3E 2B0B CC			cmp	[data_163],0CCh		; (2F94:2B0B=0)
2F94:30D3  77 08				ja	loc_236			; Jump if above
2F94:30D5  BB 0203				mov	bx,203h
2F94:30D8  FE C2				inc	dl
2F94:30DA  EB 1C				jmp	short loc_238		; (30F8)
2F94:30DC  90					db	90h
2F94:30DD			loc_236:					;  xref 2F94:30D3
2F94:30DD  BB 0501				mov	bx,501h
2F94:30E0  80 3E 2B0B D7			cmp	[data_163],0D7h		; (2F94:2B0B=0)
2F94:30E5  74 0D				je	loc_237			; Jump if equal
2F94:30E7  80 3E 2B0B E1			cmp	[data_163],0E1h		; (2F94:2B0B=0)
2F94:30EC  75 0A				jne	loc_238			; Jump if not equal
2F94:30EE  80 C6 03				add	dh,3
2F94:30F1  EB 05				jmp	short loc_238		; (30F8)
2F94:30F3  90					db	90h
2F94:30F4			loc_237:					;  xref 2F94:30E5
2F94:30F4  FE C6				inc	dh
2F94:30F6  FE C6				inc	dh
2F94:30F8			loc_238:					;  xref 2F94:30DA, 30EC, 30F1
2F94:30F8  50					push	ax
2F94:30F9  57					push	di
2F94:30FA  56					push	si
2F94:30FB			loc_239:					;  xref 2F94:3125
2F94:30FB  8A C2				mov	al,dl
2F94:30FD  32 E4				xor	ah,ah			; Zero register
2F94:30FF  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:3101  8B F8				mov	di,ax
2F94:3103  8A C6				mov	al,dh
2F94:3105  32 E4				xor	ah,ah			; Zero register
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 90

2F94:3107  03 85 68E0				add	ax,[line_offsets_table][di]	; (2F94:68E0=0)
2F94:310B  8B F8				mov	di,ax
2F94:310D  AC					lodsb				; String [si] to al
2F94:310E  26: 30 05				xor	es:[di],al
2F94:3111  47					inc	di
2F94:3112  80 FB 01				cmp	bl,1
2F94:3115  74 0A				je	loc_240			; Jump if equal
2F94:3117  AC					lodsb				; String [si] to al
2F94:3118  26: 30 05				xor	es:[di],al
2F94:311B  47					inc	di
2F94:311C  AC					lodsb				; String [si] to al
2F94:311D  26: 30 05				xor	es:[di],al
2F94:3120  47					inc	di
2F94:3121			loc_240:					;  xref 2F94:3115
2F94:3121  FE C2				inc	dl
2F94:3123  FE CF				dec	bh
2F94:3125  75 D4				jnz	loc_239			; Jump if not zero
2F94:3127  5E					pop	si
2F94:3128  5F					pop	di
2F94:3129  58					pop	ax
2F94:312A  5A					pop	dx
2F94:312B			loc_241:					;  xref 2F94:30B9, 30C0
2F94:312B  8A 3E 2B09				mov	bh,[data_161]		; (2F94:2B09=0)
2F94:312F  80 E7 1F				and	bh,1Fh
2F94:3132  FE 0E 2B09				dec	[data_161]		; (2F94:2B09=0)
2F94:3136  FE CF				dec	bh
2F94:3138  75 05				jnz	loc_ret_242		; Jump if not zero
2F94:313A  80 06 2B09 0C			add	[data_161],0Ch		; (2F94:2B09=0)

2F94:313F			loc_ret_242:					;  xref 2F94:3138
2F94:313F  C3					retn
				sub_4		endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          big_collision_check
				;
				;         Called from:   2F94:2EB2, 2ECC
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:3140			big_collision_check	proc	near
2F94:3140  3A 36 2B07				cmp	dh,[data_159]		; (2F94:2B07=0)
2F94:3144  77 03				ja	loc_243			; Jump if above
2F94:3146  E9 00DD				jmp	loc_248			; (3226)
2F94:3149			loc_243:					;  xref 2F94:3144
2F94:3149  33 C9				xor	cx,cx			; Zero register
2F94:314B  8A CA				mov	cl,dl
2F94:314D  8B F1				mov	si,cx
2F94:314F  D1 E6				shl	si,1			; Shift w/zeros fill
2F94:3151  8B 9C 68E0				mov	bx,[line_offsets_table][si]	; (2F94:68E0=0)
2F94:3155  3C 00				cmp	al,0
2F94:3157  77 12				ja	loc_244			; Jump if above
2F94:3159  8A CE				mov	cl,dh
2F94:315B  02 0E 2B07				add	cl,[data_159]		; (2F94:2B07=0)
2F94:315F  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3161  53					push	bx
2F94:3162  03 D9				add	bx,cx
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 91

2F94:3164  26: F6 07 AA				test	byte ptr es:[bx],0AAh
2F94:3168  5B					pop	bx
2F94:3169  75 62				jnz	loc_245			; Jump if not zero
2F94:316B			loc_244:					;  xref 2F94:3157
2F94:316B  33 C9				xor	cx,cx			; Zero register
2F94:316D  8A CE				mov	cl,dh
2F94:316F  03 D9				add	bx,cx
2F94:3171  80 FC 40				cmp	ah,40h			; '@'
2F94:3174  77 5A				ja	loc_246			; Jump if above
2F94:3176  4B					dec	bx
2F94:3177  4B					dec	bx
2F94:3178  26: F7 07 0AAA			test	word ptr es:[bx],0AAAh
2F94:317D  75 4E				jnz	loc_245			; Jump if not zero
2F94:317F  26: F7 47 50 0AAA			test	word ptr es:[bx+50h],0AAAh
2F94:3185  75 46				jnz	loc_245			; Jump if not zero
2F94:3187  26: F7 87 00A0 0AAA			test	word ptr es:[data_20e][bx],0AAAh	; (2F94:00A0=0)
2F94:318E  75 3D				jnz	loc_245			; Jump if not zero
2F94:3190  26: F7 87 00F0 0AAA			test	word ptr es:[data_24e][bx],0AAAh	; (2F94:00F0=0)
2F94:3197  75 34				jnz	loc_245			; Jump if not zero
2F94:3199  26: F7 87 0140 0AAA			test	word ptr es:[repspr_savesrc1+1][bx],0AAAh	; (2F94:0140=0)
2F94:31A0  75 2B				jnz	loc_245			; Jump if not zero
2F94:31A2  33 DB				xor	bx,bx			; Zero register
2F94:31A4  8A DA				mov	bl,dl
2F94:31A6  FE CB				dec	bl
2F94:31A8  D1 E3				shl	bx,1			; Shift w/zeros fill
2F94:31AA  8B B7 68E0				mov	si,[line_offsets_table][bx]	; (2F94:68E0=0)
2F94:31AE  33 DB				xor	bx,bx			; Zero register
2F94:31B0  8A DE				mov	bl,dh
2F94:31B2  03 F3				add	si,bx
2F94:31B4  4E					dec	si
2F94:31B5  4E					dec	si
2F94:31B6  26: F7 04 0AAA			test	word ptr es:[si],0AAAh
2F94:31BB  75 10				jnz	loc_245			; Jump if not zero
2F94:31BD  26: F7 84 0140 0AAA			test	word ptr es:[repspr_savesrc1+1][si],0AAAh	; (2F94:0140=0)
2F94:31C4  C6 06 2B0D 03			mov	[check_move_result],3	; (2F94:2B0D=0)
2F94:31C9 .BE 000C				mov	si,data_10e		; (2F94:000C=0)
2F94:31CC  C3					retn
2F94:31CD			loc_245:					;  xref 2F94:3169, 317D, 3185, 318E
										;            3197, 31A0, 31BB, 31D5
										;            31DD, 31E6, 3211
2F94:31CD  33 F6				xor	si,si			; Zero register
2F94:31CF  C3					retn
2F94:31D0			loc_246:					;  xref 2F94:3174
2F94:31D0  26: F7 07 0AA0			test	word ptr es:[bx],0AA0h
2F94:31D5  75 F6				jnz	loc_245			; Jump if not zero
2F94:31D7  26: F7 47 50 0AA0			test	word ptr es:[bx+50h],0AA0h
2F94:31DD  75 EE				jnz	loc_245			; Jump if not zero
2F94:31DF  26: F7 87 00A0 0AA0			test	word ptr es:[data_20e][bx],0AA0h	; (2F94:00A0=0)
2F94:31E6  75 E5				jnz	loc_245			; Jump if not zero
2F94:31E8  26: F7 87 00F0 0AA0			test	word ptr es:[data_24e][bx],0AA0h	; (2F94:00F0=0)
2F94:31EF  75 32				jnz	loc_247			; Jump if not zero
2F94:31F1  26: F7 87 0140 0AA0			test	word ptr es:[repspr_savesrc1+1][bx],0AA0h	; (2F94:0140=0)
2F94:31F8  75 29				jnz	loc_247			; Jump if not zero
2F94:31FA  33 DB				xor	bx,bx			; Zero register
2F94:31FC  8A DA				mov	bl,dl
2F94:31FE  FE CB				dec	bl
2F94:3200  D1 E3				shl	bx,1			; Shift w/zeros fill
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 92

2F94:3202  8B B7 68E0				mov	si,[line_offsets_table][bx]	; (2F94:68E0=0)
2F94:3206  33 DB				xor	bx,bx			; Zero register
2F94:3208  8A DE				mov	bl,dh
2F94:320A  03 F3				add	si,bx
2F94:320C  26: F7 04 0AA0			test	word ptr es:[si],0AA0h
2F94:3211  75 BA				jnz	loc_245			; Jump if not zero
2F94:3213  26: F7 84 0140 0AA0			test	word ptr es:[repspr_savesrc1+1][si],0AA0h	; (2F94:0140=0)
2F94:321A  C6 06 2B0D 03			mov	[check_move_result],3	; (2F94:2B0D=0)
2F94:321F .BE 000C				mov	si,data_10e		; (2F94:000C=0)
2F94:3222  C3					retn
2F94:3223			loc_247:					;  xref 2F94:31EF, 31F8, 322A, 324C
2F94:3223  33 F6				xor	si,si			; Zero register
2F94:3225  C3					retn
2F94:3226			loc_248:					;  xref 2F94:3146
2F94:3226  3A 36 2B07				cmp	dh,[data_159]		; (2F94:2B07=0)
2F94:322A  73 F7				jae	loc_247			; Jump if above or =
2F94:322C  33 C9				xor	cx,cx			; Zero register
2F94:322E  8A CA				mov	cl,dl
2F94:3230  8B F1				mov	si,cx
2F94:3232  D1 E6				shl	si,1			; Shift w/zeros fill
2F94:3234  8B 9C 68E0				mov	bx,[line_offsets_table][si]	; (2F94:68E0=0)
2F94:3238  3C 00				cmp	al,0
2F94:323A  77 12				ja	loc_249			; Jump if above
2F94:323C  8A CE				mov	cl,dh
2F94:323E  02 0E 2B07				add	cl,[data_159]		; (2F94:2B07=0)
2F94:3242  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3244  53					push	bx
2F94:3245  03 D9				add	bx,cx
2F94:3247  26: F6 07 AA				test	byte ptr es:[bx],0AAh
2F94:324B  5B					pop	bx
2F94:324C  75 D5				jnz	loc_247			; Jump if not zero
2F94:324E			loc_249:					;  xref 2F94:323A
2F94:324E  33 C9				xor	cx,cx			; Zero register
2F94:3250  8A CE				mov	cl,dh
2F94:3252  03 D9				add	bx,cx
2F94:3254  80 FC 40				cmp	ah,40h			; '@'
2F94:3257  77 5E				ja	loc_251			; Jump if above
2F94:3259  83 C3 03				add	bx,3
2F94:325C  26: F7 07 0AA0			test	word ptr es:[bx],0AA0h
2F94:3261  75 51				jnz	loc_250			; Jump if not zero
2F94:3263  26: F7 47 50 0AA0			test	word ptr es:[bx+50h],0AA0h
2F94:3269  75 49				jnz	loc_250			; Jump if not zero
2F94:326B  26: F7 87 00A0 0AA0			test	word ptr es:[data_20e][bx],0AA0h	; (2F94:00A0=0)
2F94:3272  75 40				jnz	loc_250			; Jump if not zero
2F94:3274  26: F7 87 00F0 0AA0			test	word ptr es:[data_24e][bx],0AA0h	; (2F94:00F0=0)
2F94:327B  75 37				jnz	loc_250			; Jump if not zero
2F94:327D  26: F7 87 0140 0AA0			test	word ptr es:[repspr_savesrc1+1][bx],0AA0h	; (2F94:0140=0)
2F94:3284  75 2E				jnz	loc_250			; Jump if not zero
2F94:3286  33 DB				xor	bx,bx			; Zero register
2F94:3288  8A DA				mov	bl,dl
2F94:328A  FE CB				dec	bl
2F94:328C  D1 E3				shl	bx,1			; Shift w/zeros fill
2F94:328E  8B B7 68E0				mov	si,[line_offsets_table][bx]	; (2F94:68E0=0)
2F94:3292  33 DB				xor	bx,bx			; Zero register
2F94:3294  8A DE				mov	bl,dh
2F94:3296  03 F3				add	si,bx
2F94:3298  83 C6 03				add	si,3
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 93

2F94:329B  26: F7 04 0AA0			test	word ptr es:[si],0AA0h
2F94:32A0  75 12				jnz	loc_250			; Jump if not zero
2F94:32A2  26: F7 84 0140 0AA0			test	word ptr es:[repspr_savesrc1+1][si],0AA0h	; (2F94:0140=0)
2F94:32A9  75 09				jnz	loc_250			; Jump if not zero
2F94:32AB  C6 06 2B0D 04			mov	[check_move_result],4	; (2F94:2B0D=0)
2F94:32B0 .BE 0018				mov	si,data_12e		; (2F94:0018=0)
2F94:32B3  C3					retn
2F94:32B4			loc_250:					;  xref 2F94:3261, 3269, 3272, 327B
										;            3284, 32A0, 32A9, 32BF
										;            32C7, 32D0, 32D9, 32E2
										;            32FE, 3307
2F94:32B4  33 F6				xor	si,si			; Zero register
2F94:32B6  C3					retn
2F94:32B7			loc_251:					;  xref 2F94:3257
2F94:32B7  83 C3 04				add	bx,4
2F94:32BA  26: F7 07 AAA0			test	word ptr es:[bx],0AAA0h
2F94:32BF  75 F3				jnz	loc_250			; Jump if not zero
2F94:32C1  26: F7 47 50 AAA0			test	word ptr es:[bx+50h],0AAA0h
2F94:32C7  75 EB				jnz	loc_250			; Jump if not zero
2F94:32C9  26: F7 87 00A0 AAA0			test	word ptr es:[data_20e][bx],0AAA0h	; (2F94:00A0=0)
2F94:32D0  75 E2				jnz	loc_250			; Jump if not zero
2F94:32D2  26: F7 87 00F0 AAA0			test	word ptr es:[data_24e][bx],0AAA0h	; (2F94:00F0=0)
2F94:32D9  75 D9				jnz	loc_250			; Jump if not zero
2F94:32DB  26: F7 87 0140 AAA0			test	word ptr es:[repspr_savesrc1+1][bx],0AAA0h	; (2F94:0140=0)
2F94:32E2  75 D0				jnz	loc_250			; Jump if not zero
2F94:32E4  33 DB				xor	bx,bx			; Zero register
2F94:32E6  8A DA				mov	bl,dl
2F94:32E8  FE CB				dec	bl
2F94:32EA  D1 E3				shl	bx,1			; Shift w/zeros fill
2F94:32EC  8B B7 68E0				mov	si,[line_offsets_table][bx]	; (2F94:68E0=0)
2F94:32F0  33 DB				xor	bx,bx			; Zero register
2F94:32F2  8A DE				mov	bl,dh
2F94:32F4  03 F3				add	si,bx
2F94:32F6  83 C6 04				add	si,4
2F94:32F9  26: F7 04 AAA0			test	word ptr es:[si],0AAA0h
2F94:32FE  75 B4				jnz	loc_250			; Jump if not zero
2F94:3300  26: F7 84 0140 AAA0			test	word ptr es:[repspr_savesrc1+1][si],0AAA0h	; (2F94:0140=0)
2F94:3307  75 AB				jnz	loc_250			; Jump if not zero
2F94:3309  C6 06 2B0D 04			mov	[check_move_result],4	; (2F94:2B0D=0)
2F94:330E  BE 0018				mov	si,18h
2F94:3311  C3					retn
				big_collision_check	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         seems to be checking if movement is possible
				;
				;         Called from:   2F94:2EBC, 2EC2
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:3312			check_move	proc	near
2F94:3312  33 C9				xor	cx,cx			; Zero register
2F94:3314  8A CE				mov	cl,dh
2F94:3316  32 F6				xor	dh,dh			; Zero register
2F94:3318  3A 16 2B08				cmp	dl,[data_160]		; (2F94:2B08=0)
2F94:331C  74 3F				je	loc_252			; Jump if equal
2F94:331E  72 42				jc	loc_253			; Jump if carry Set
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 94

2F94:3320  80 FA 00				cmp	dl,0
2F94:3323  76 38				jbe	loc_252			; Jump if below or =
2F94:3325  8B DA				mov	bx,dx
2F94:3327  4B					dec	bx
2F94:3328  D1 E3				shl	bx,1			; Shift w/zeros fill
2F94:332A  8B B7 68E0				mov	si,[line_offsets_table][bx]	; (2F94:68E0=0)
2F94:332E  03 F1				add	si,cx
2F94:3330  26: F7 04 AAAA			test	word ptr es:[si],0AAAAh
2F94:3335  75 26				jnz	loc_252			; Jump if not zero
2F94:3337  26: F7 44 02 AAAA			test	word ptr es:[si+2],0AAAAh
2F94:333D  75 1E				jnz	loc_252			; Jump if not zero
2F94:333F  4B					dec	bx
2F94:3340  4B					dec	bx
2F94:3341  8B B7 68E0				mov	si,[line_offsets_table][bx]	; (2F94:68E0=0)
2F94:3345  03 F1				add	si,cx
2F94:3347  26: F7 04 AAAA			test	word ptr es:[si],0AAAAh
2F94:334C  75 0F				jnz	loc_252			; Jump if not zero
2F94:334E  26: F7 44 02 AAAA			test	word ptr es:[si+2],0AAAAh
2F94:3354  75 07				jnz	loc_252			; Jump if not zero
2F94:3356  C6 06 2B0D 01			mov	[check_move_result],1	; (2F94:2B0D=0)
2F94:335B  FE CA				dec	dl
2F94:335D			loc_252:					;  xref 2F94:331C, 3323, 3335, 333D
										;            334C, 3354, 3365
2F94:335D  33 F6				xor	si,si			; Zero register
2F94:335F  8A F1				mov	dh,cl
2F94:3361  C3					retn
2F94:3362			loc_253:					;  xref 2F94:331E
2F94:3362  80 FA A8				cmp	dl,0A8h
2F94:3365  77 F6				ja	loc_252			; Jump if above
2F94:3367  8B DA				mov	bx,dx
2F94:3369  83 C3 08				add	bx,8
2F94:336C  D1 E3				shl	bx,1			; Shift w/zeros fill
2F94:336E  8B B7 68E0				mov	si,[line_offsets_table][bx]	; (2F94:68E0=0)
2F94:3372  03 F1				add	si,cx
2F94:3374  26: F7 04 AAAA			test	word ptr es:[si],0AAAAh
2F94:3379  75 26				jnz	loc_254			; Jump if not zero
2F94:337B  26: F7 44 02 AAAA			test	word ptr es:[si+2],0AAAAh
2F94:3381  75 1E				jnz	loc_254			; Jump if not zero
2F94:3383  43					inc	bx
2F94:3384  43					inc	bx
2F94:3385  8B B7 68E0				mov	si,[line_offsets_table][bx]	; (2F94:68E0=0)
2F94:3389  03 F1				add	si,cx
2F94:338B  26: F7 04 AAAA			test	word ptr es:[si],0AAAAh
2F94:3390  75 0F				jnz	loc_254			; Jump if not zero
2F94:3392  26: F7 44 02 AAAA			test	word ptr es:[si+2],0AAAAh
2F94:3398  75 07				jnz	loc_254			; Jump if not zero
2F94:339A  C6 06 2B0D 02			mov	[check_move_result],2	; (2F94:2B0D=0)
2F94:339F  FE C2				inc	dl
2F94:33A1			loc_254:					;  xref 2F94:3379, 3381, 3390, 3398
2F94:33A1  33 F6				xor	si,si			; Zero register
2F94:33A3  8A F1				mov	dh,cl
2F94:33A5  C3					retn
				check_move	endp

2F94:33A6  000A[00]				db	10 dup (0)
2F94:33B0  00			data_168	db	0			;  xref 2F94:33B9, 33D3

           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 95

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          print_level_num
				;
				;         Called from:   2F94:0880
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:33B1			print_level_num	proc	near
2F94:33B1  50					push	ax
2F94:33B2  53					push	bx
2F94:33B3  51					push	cx
2F94:33B4  52					push	dx
2F94:33B5  57					push	di
2F94:33B6  55					push	bp
2F94:33B7  33 ED				xor	bp,bp			; Zero register
2F94:33B9  A2 33B0				mov	[data_168],al		; (2F94:33B0=0)
2F94:33BC  3C 64				cmp	al,64h			; 'd'
2F94:33BE  72 13				jb	loc_256			; Jump if below
2F94:33C0			loc_255:					;  xref 2F94:33C6
2F94:33C0  45					inc	bp
2F94:33C1  45					inc	bp
2F94:33C2  2C 64				sub	al,64h			; 'd'
2F94:33C4  3C 64				cmp	al,64h			; 'd'
2F94:33C6  73 F8				jae	loc_255			; Jump if above or =
2F94:33C8  3E: 8B BE 0154			mov	di,ds:[digit_glyph_table][bp]	; (2F94:0154=6E20h)
2F94:33CD  BB 1803				mov	bx,1803h
2F94:33D0  E8 E0F7				call	draw_sprite_v2		; (14CA)
2F94:33D3			loc_256:					;  xref 2F94:33BE
2F94:33D3  80 3E 33B0 0A			cmp	[data_168],0Ah		; (2F94:33B0=0)
2F94:33D8  72 1C				jb	loc_259			; Jump if below
2F94:33DA  33 ED				xor	bp,bp			; Zero register
2F94:33DC  3C 0A				cmp	al,0Ah
2F94:33DE  72 08				jb	loc_258			; Jump if below
2F94:33E0			loc_257:					;  xref 2F94:33E6
2F94:33E0  45					inc	bp
2F94:33E1  45					inc	bp
2F94:33E2  2C 0A				sub	al,0Ah
2F94:33E4  3C 0A				cmp	al,0Ah
2F94:33E6  73 F8				jae	loc_257			; Jump if above or =
2F94:33E8			loc_258:					;  xref 2F94:33DE
2F94:33E8  3E: 8B BE 0154			mov	di,ds:[digit_glyph_table][bp]	; (2F94:0154=6E20h)
2F94:33ED  BB 1803				mov	bx,1803h
2F94:33F0  83 C1 04				add	cx,4
2F94:33F3  E8 E0D4				call	draw_sprite_v2		; (14CA)
2F94:33F6			loc_259:					;  xref 2F94:33D8
2F94:33F6  98					cbw				; Convrt byte to word
2F94:33F7  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:33F9  8B E8				mov	bp,ax
2F94:33FB  3E: 8B BE 0154			mov	di,ds:[digit_glyph_table][bp]	; (2F94:0154=6E20h)
2F94:3400  83 C1 04				add	cx,4
2F94:3403  BB 1803				mov	bx,1803h
2F94:3406  E8 E0C1				call	draw_sprite_v2		; (14CA)
2F94:3409  5D					pop	bp
2F94:340A  5F					pop	di
2F94:340B  5A					pop	dx
2F94:340C  59					pop	cx
2F94:340D  5B					pop	bx
2F94:340E  58					pop	ax
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 96

2F94:340F  C3					retn
				print_level_num	endp

2F94:3410  00					db	0
2F94:3411  00			prev_room_num	db	0			;  xref 2F94:37B0, 37C6, 37FE, 3814
										;            3845, 385B, 388E, 38A4
2F94:3412  1388			freq_3412	dw	1388h			;  xref 2F94:35D4, 35D8, 35ED
2F94:3414  6710			sprite_ptr	dw	6710h			;  xref 2F94:2980, 298D, 35AD, 3604
										;            360A, 363F, 3648, 366A
										;            3673, 36A2, 36AB, 36CA
										;            36D3, 36F2, 36FB, 372B
										;            3734, 3757, 3760, 3790
										;            3799, 37E5, 3832, 387B
										;            38C3, 4D14, 4DA6, 77D9
										;            77EF, 7827, 7840, 7865
										;            787E, 78A3, 78BC, 78E1
										;            7906, 791C, 793E, 7954
										;            7976, 798C, 79AE, 7AD0
										;            7BA0, 7BCB, 7CDF
2F94:3416  3601			switch_3416	dw	offset sw_case_0	; Data table (indexed access)
										;  xref 2F94:35FD
2F94:3418  3615			data_169	dw	offset playerwalk_nw	;  xref 2F94:35FD
2F94:341A  3651			data_170	dw	offset playerwalk_n	;  xref 2F94:35FD
2F94:341C  367C			data_171	dw	offset playerwalk_ne	;  xref 2F94:35FD
2F94:341E  36B4			data_172	dw	offset playerwalk_w	;  xref 2F94:35FD
2F94:3420  36DC			data_173	dw	offset playerwalk_e	;  xref 2F94:35FD
2F94:3422  3704			data_174	dw	offset playerwalk_sw	;  xref 2F94:35FD
2F94:3424  373D			data_175	dw	offset playerwalk_s	;  xref 2F94:35FD
2F94:3426  3769			data_176	dw	offset playerwalk_se	;  xref 2F94:35FD
2F94:3428  3472			switch_3428	dw	offset sw_case_9	; switch on player direction
										;  xref 2F94:346E, 35FD
2F94:342A  348B			data_177	dw	offset sw_case_A	;  xref 2F94:346E, 35FD
2F94:342C  34AE			data_178	dw	offset sw_case_B	;  xref 2F94:346E, 35FD
2F94:342E  34D1			data_179	dw	offset sw_case_C	;  xref 2F94:346E, 35FD
2F94:3430  34F4			data_180	dw	offset sw_case_D	;  xref 2F94:346E, 35FD
2F94:3432  3517			data_181	dw	offset sw_case_E	;  xref 2F94:346E, 35FD
2F94:3434  353A			data_182	dw	offset sw_case_F	;  xref 2F94:346E, 35FD
2F94:3436  355D			data_183	dw	offset sw_case_G	;  xref 2F94:346E, 35FD
2F94:3438  3580			data_184	dw	offset sw_case_H	;  xref 2F94:346E, 35FD
2F94:343A  0001 0002 0003	table_243a	dw	1, 2, 3			; index is player_dir*2
										;  xref 2F94:347E, 34A1, 34C4, 34E7
										;            350A, 352D, 3550, 3573
										;            3596
2F94:3440  FFFF 0004 FFFF			dw	0FFFFh, 4, 0FFFFh
2F94:3446  0005 FFFF 0006			dw	5, 0FFFFh, 6
2F94:344C  0007 0008 FFFF			dw	7, 8, 0FFFFh
2F94:3452  FFFF					dw	0FFFFh
2F94:3454  0000			player_dir	dw	0			; shamus walking direction
										;  xref 2F94:036C, 03F9, 044D, 3468
										;            3487, 3493, 34AA, 34B6
										;            34CD, 34D9, 34F0, 34FC
										;            3513, 351F, 3536, 3542
										;            3559, 3565, 357C, 3588
										;            359F, 35B4, 35F7, 3D63
										;            3D71, 5FE7, 7AD3, 7BA6
										;            7BDD, 7CD9

           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 97

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         ax = player dir, dispatch
				;
				;         Called from:   2F94:0395, 0408, 044A
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:3456			set_player_dir	proc	near
2F94:3456  F6 06 012F 01			test	[data_33],1		; (2F94:012F=0)
2F94:345B  74 0B				jz	loc_260			; Jump if zero
2F94:345D  F6 06 0132 01			test	[joystick_selected],1	; (2F94:0132=0)
2F94:3462  75 04				jnz	loc_260			; Jump if not zero
2F94:3464  E8 088B				call	scancode_to_joy_and_player_dir	; (3CF2)
2F94:3467  C3					retn
2F94:3468			loc_260:					;  xref 2F94:345B, 3462
2F94:3468  8B 36 3454				mov	si,[player_dir]		; (2F94:3454=0)
2F94:346C  D1 E6				shl	si,1			; Shift w/zeros fill
2F94:346E  FF A4 3428				jmp	word ptr [switch_3428][si]	;*(2F94:3428=3472h)  9 entries

				;ФФФФФ Indexed Entry Point ФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФ

2F94:3472			sw_case_9:					;  xref 2F94:3428, 346E, 35FD
2F94:3472  A8 80				test	al,80h
2F94:3474  74 01				jz	loc_261			; Jump if zero
2F94:3476  C3					retn
2F94:3477			loc_261:					;  xref 2F94:3474
2F94:3477  2C 47				sub	al,47h			; 'G'
2F94:3479  98					cbw				; Convrt byte to word
2F94:347A  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:347C  8B F0				mov	si,ax
2F94:347E  8B 84 343A				mov	ax,[table_243a][si]	; (2F94:343A=1)
2F94:3482  3D 0000				cmp	ax,0
2F94:3485  7C 03				jl	loc_ret_262		; Jump if <
2F94:3487  A3 3454				mov	[player_dir],ax		; (2F94:3454=0)

2F94:348A			loc_ret_262:					;  xref 2F94:3485
2F94:348A  C3					retn

				;ФФФФФ Indexed Entry Point ФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФ

2F94:348B			sw_case_A:					;  xref 2F94:342A, 346E, 35FD
2F94:348B  A8 80				test	al,80h
2F94:348D  74 0B				jz	loc_264			; Jump if zero
2F94:348F  3C C7				cmp	al,0C7h
2F94:3491  75 06				jne	loc_ret_263		; Jump if not equal
2F94:3493  C7 06 3454 0000			mov	[player_dir],0		; (2F94:3454=0)

2F94:3499			loc_ret_263:					;  xref 2F94:3491
2F94:3499  C3					retn
2F94:349A			loc_264:					;  xref 2F94:348D
2F94:349A  2C 47				sub	al,47h			; 'G'
2F94:349C  98					cbw				; Convrt byte to word
2F94:349D  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:349F  8B F0				mov	si,ax
2F94:34A1  8B 84 343A				mov	ax,[table_243a][si]	; (2F94:343A=1)
2F94:34A5  3D 0000				cmp	ax,0
2F94:34A8  7C 03				jl	loc_ret_265		; Jump if <
2F94:34AA  A3 3454				mov	[player_dir],ax		; (2F94:3454=0)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 98


2F94:34AD			loc_ret_265:					;  xref 2F94:34A8
2F94:34AD  C3					retn

				;ФФФФФ Indexed Entry Point ФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФ

2F94:34AE			sw_case_B:					;  xref 2F94:342C, 346E, 35FD
2F94:34AE  A8 80				test	al,80h
2F94:34B0  74 0B				jz	loc_267			; Jump if zero
2F94:34B2  3C C8				cmp	al,0C8h
2F94:34B4  75 06				jne	loc_ret_266		; Jump if not equal
2F94:34B6  C7 06 3454 0000			mov	[player_dir],0		; (2F94:3454=0)

2F94:34BC			loc_ret_266:					;  xref 2F94:34B4
2F94:34BC  C3					retn
2F94:34BD			loc_267:					;  xref 2F94:34B0
2F94:34BD  2C 47				sub	al,47h			; 'G'
2F94:34BF  98					cbw				; Convrt byte to word
2F94:34C0  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:34C2  8B F0				mov	si,ax
2F94:34C4  8B 84 343A				mov	ax,[table_243a][si]	; (2F94:343A=1)
2F94:34C8  3D 0000				cmp	ax,0
2F94:34CB  7C 03				jl	loc_ret_268		; Jump if <
2F94:34CD  A3 3454				mov	[player_dir],ax		; (2F94:3454=0)

2F94:34D0			loc_ret_268:					;  xref 2F94:34CB
2F94:34D0  C3					retn

				;ФФФФФ Indexed Entry Point ФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФ

2F94:34D1			sw_case_C:					;  xref 2F94:342E, 346E, 35FD
2F94:34D1  A8 80				test	al,80h
2F94:34D3  74 0B				jz	loc_270			; Jump if zero
2F94:34D5  3C C9				cmp	al,0C9h
2F94:34D7  75 06				jne	loc_ret_269		; Jump if not equal
2F94:34D9  C7 06 3454 0000			mov	[player_dir],0		; (2F94:3454=0)

2F94:34DF			loc_ret_269:					;  xref 2F94:34D7
2F94:34DF  C3					retn
2F94:34E0			loc_270:					;  xref 2F94:34D3
2F94:34E0  2C 47				sub	al,47h			; 'G'
2F94:34E2  98					cbw				; Convrt byte to word
2F94:34E3  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:34E5  8B F0				mov	si,ax
2F94:34E7  8B 84 343A				mov	ax,[table_243a][si]	; (2F94:343A=1)
2F94:34EB  3D 0000				cmp	ax,0
2F94:34EE  7C 03				jl	loc_ret_271		; Jump if <
2F94:34F0  A3 3454				mov	[player_dir],ax		; (2F94:3454=0)

2F94:34F3			loc_ret_271:					;  xref 2F94:34EE
2F94:34F3  C3					retn

				;ФФФФФ Indexed Entry Point ФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФ

2F94:34F4			sw_case_D:					;  xref 2F94:3430, 346E, 35FD
2F94:34F4  A8 80				test	al,80h
2F94:34F6  74 0B				jz	loc_273			; Jump if zero
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 99

2F94:34F8  3C CB				cmp	al,0CBh
2F94:34FA  75 06				jne	loc_ret_272		; Jump if not equal
2F94:34FC  C7 06 3454 0000			mov	[player_dir],0		; (2F94:3454=0)

2F94:3502			loc_ret_272:					;  xref 2F94:34FA
2F94:3502  C3					retn
2F94:3503			loc_273:					;  xref 2F94:34F6
2F94:3503  2C 47				sub	al,47h			; 'G'
2F94:3505  98					cbw				; Convrt byte to word
2F94:3506  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:3508  8B F0				mov	si,ax
2F94:350A  8B 84 343A				mov	ax,[table_243a][si]	; (2F94:343A=1)
2F94:350E  3D 0000				cmp	ax,0
2F94:3511  7C 03				jl	loc_ret_274		; Jump if <
2F94:3513  A3 3454				mov	[player_dir],ax		; (2F94:3454=0)

2F94:3516			loc_ret_274:					;  xref 2F94:3511
2F94:3516  C3					retn

				;ФФФФФ Indexed Entry Point ФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФ

2F94:3517			sw_case_E:					;  xref 2F94:3432, 346E, 35FD
2F94:3517  A8 80				test	al,80h
2F94:3519  74 0B				jz	loc_276			; Jump if zero
2F94:351B  3C CD				cmp	al,0CDh
2F94:351D  75 06				jne	loc_ret_275		; Jump if not equal
2F94:351F  C7 06 3454 0000			mov	[player_dir],0		; (2F94:3454=0)

2F94:3525			loc_ret_275:					;  xref 2F94:351D
2F94:3525  C3					retn
2F94:3526			loc_276:					;  xref 2F94:3519
2F94:3526  2C 47				sub	al,47h			; 'G'
2F94:3528  98					cbw				; Convrt byte to word
2F94:3529  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:352B  8B F0				mov	si,ax
2F94:352D  8B 84 343A				mov	ax,[table_243a][si]	; (2F94:343A=1)
2F94:3531  3D 0000				cmp	ax,0
2F94:3534  7C 03				jl	loc_ret_277		; Jump if <
2F94:3536  A3 3454				mov	[player_dir],ax		; (2F94:3454=0)

2F94:3539			loc_ret_277:					;  xref 2F94:3534
2F94:3539  C3					retn

				;ФФФФФ Indexed Entry Point ФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФ

2F94:353A			sw_case_F:					;  xref 2F94:3434, 346E, 35FD
2F94:353A  A8 80				test	al,80h
2F94:353C  74 0B				jz	loc_279			; Jump if zero
2F94:353E  3C CF				cmp	al,0CFh
2F94:3540  75 06				jne	loc_ret_278		; Jump if not equal
2F94:3542  C7 06 3454 0000			mov	[player_dir],0		; (2F94:3454=0)

2F94:3548			loc_ret_278:					;  xref 2F94:3540
2F94:3548  C3					retn
2F94:3549			loc_279:					;  xref 2F94:353C
2F94:3549  2C 47				sub	al,47h			; 'G'
2F94:354B  98					cbw				; Convrt byte to word
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 100

2F94:354C  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:354E  8B F0				mov	si,ax
2F94:3550  8B 84 343A				mov	ax,[table_243a][si]	; (2F94:343A=1)
2F94:3554  3D 0000				cmp	ax,0
2F94:3557  7C 03				jl	loc_ret_280		; Jump if <
2F94:3559  A3 3454				mov	[player_dir],ax		; (2F94:3454=0)

2F94:355C			loc_ret_280:					;  xref 2F94:3557
2F94:355C  C3					retn

				;ФФФФФ Indexed Entry Point ФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФ

2F94:355D			sw_case_G:					;  xref 2F94:3436, 346E, 35FD
2F94:355D  A8 80				test	al,80h
2F94:355F  74 0B				jz	loc_282			; Jump if zero
2F94:3561  3C D0				cmp	al,0D0h
2F94:3563  75 06				jne	loc_ret_281		; Jump if not equal
2F94:3565  C7 06 3454 0000			mov	[player_dir],0		; (2F94:3454=0)

2F94:356B			loc_ret_281:					;  xref 2F94:3563
2F94:356B  C3					retn
2F94:356C			loc_282:					;  xref 2F94:355F
2F94:356C  2C 47				sub	al,47h			; 'G'
2F94:356E  98					cbw				; Convrt byte to word
2F94:356F  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:3571  8B F0				mov	si,ax
2F94:3573  8B 84 343A				mov	ax,[table_243a][si]	; (2F94:343A=1)
2F94:3577  3D 0000				cmp	ax,0
2F94:357A  7C 03				jl	loc_ret_283		; Jump if <
2F94:357C  A3 3454				mov	[player_dir],ax		; (2F94:3454=0)

2F94:357F			loc_ret_283:					;  xref 2F94:357A
2F94:357F  C3					retn

				;ФФФФФ Indexed Entry Point ФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФ

2F94:3580			sw_case_H:					;  xref 2F94:3438, 346E, 35FD
2F94:3580  A8 80				test	al,80h
2F94:3582  74 0B				jz	loc_285			; Jump if zero
2F94:3584  3C D1				cmp	al,0D1h
2F94:3586  75 06				jne	loc_ret_284		; Jump if not equal
2F94:3588  C7 06 3454 0000			mov	[player_dir],0		; (2F94:3454=0)

2F94:358E			loc_ret_284:					;  xref 2F94:3586
2F94:358E  C3					retn
2F94:358F			loc_285:					;  xref 2F94:3582
2F94:358F  2C 47				sub	al,47h			; 'G'
2F94:3591  98					cbw				; Convrt byte to word
2F94:3592  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:3594  8B F0				mov	si,ax
2F94:3596  8B 84 343A				mov	ax,[table_243a][si]	; (2F94:343A=1)
2F94:359A  3D 0000				cmp	ax,0
2F94:359D  7C 03				jl	loc_ret_286		; Jump if <
2F94:359F  A3 3454				mov	[player_dir],ax		; (2F94:3454=0)

2F94:35A2			loc_ret_286:					;  xref 2F94:359D
2F94:35A2  C3					retn
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 101

				set_player_dir	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          player_walk
				;
				;         Called from:   2F94:0398
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:35A3			player_walk	proc	near
2F94:35A3  8A 16 0136				mov	dl,[player_y]		; (2F94:0136=0)
2F94:35A7  32 F6				xor	dh,dh			; Zero register
2F94:35A9  8B 0E 0134				mov	cx,[player_x]		; (2F94:0134=0)
2F94:35AD  8B 3E 3414				mov	di,[sprite_ptr]		; (2F94:3414=6710h)
2F94:35B1  BB 0C04				mov	bx,0C04h
2F94:35B4  83 3E 3454 00			cmp	[player_dir],0		; (2F94:3454=0)
2F94:35B9  74 3C				je	loc_287			; Jump if equal
2F94:35BB  F7 06 014B 0001			test	[data_38],1		; (2F94:014B=0)
2F94:35C1  74 34				jz	loc_287			; Jump if zero
2F94:35C3  80 3E 014A 00			cmp	[data_37],0		; (2F94:014A=0)
2F94:35C8  75 2D				jne	loc_287			; Jump if not equal
2F94:35CA  83 3E 4582 00			cmp	[data_233],0		; (2F94:4582=0)
2F94:35CF  75 26				jne	loc_287			; Jump if not equal
2F94:35D1  B8 2AF8				mov	ax,2AF8h
2F94:35D4  2B 06 3412				sub	ax,[freq_3412]		; (2F94:3412=1388h)
2F94:35D8  A3 3412				mov	[freq_3412],ax		; (2F94:3412=1388h)
2F94:35DB  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:35E0  74 15				jz	loc_287			; Jump if zero
2F94:35E2  50					push	ax
2F94:35E3  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:35E5  0C 03				or	al,3
2F94:35E7  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:35E9  B0 B6				mov	al,0B6h
2F94:35EB  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:35ED  A1 3412				mov	ax,[freq_3412]		; (2F94:3412=1388h)
2F94:35F0  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:35F2  8A C4				mov	al,ah
2F94:35F4  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:35F6  58					pop	ax
2F94:35F7			loc_287:					;  xref 2F94:35B9, 35C1, 35C8, 35CF
										;            35E0
2F94:35F7  8B 36 3454				mov	si,[player_dir]		; (2F94:3454=0)
2F94:35FB  D1 E6				shl	si,1			; Shift w/zeros fill
2F94:35FD  FF A4 3416				jmp	word ptr [switch_3416][si]	;*(2F94:3416=3601h)  18 entries

				;ФФФФФ Indexed Entry Point ФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФ

2F94:3601			sw_case_0:					; 6710h = shamus sprite
										;  xref 2F94:3416, 35FD
2F94:3601  E8 DF2D				call	draw_sprite_xor_v1	; (1531)
2F94:3604 .C7 06 3414 6710			mov	[sprite_ptr],offset [spr_shamus_0]	; (2F94:3414=6710h)
2F94:360A  8B 3E 3414				mov	di,[sprite_ptr]		; (2F94:3414=6710h)
2F94:360E  BB 0C04				mov	bx,0C04h
2F94:3611  E8 DD63				call	draw_sprite_xor_check_wall	; (1377)
2F94:3614  C3					retn

				;ФФФФФ Indexed Entry Point ФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФ
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 102


2F94:3615			playerwalk_nw:					;  xref 2F94:3418, 35FD
2F94:3615  83 FA 03				cmp	dx,3
2F94:3618  7D 03				jge	loc_288			; Jump if > or =
2F94:361A  E9 0185				jmp	next_room_going_north	; (37A2)
2F94:361D			loc_288:					;  xref 2F94:3618
2F94:361D  83 F9 01				cmp	cx,1
2F94:3620  7D 03				jge	loc_289			; Jump if > or =
2F94:3622  E9 0218				jmp	next_room_going_west	; (383D)
2F94:3625			loc_289:					;  xref 2F94:3620
2F94:3625  E8 DF09				call	draw_sprite_xor_v1	; (1531)
2F94:3628  8A 16 0136				mov	dl,[player_y]		; (2F94:0136=0)
2F94:362C  FE CA				dec	dl
2F94:362E  FE CA				dec	dl
2F94:3630  88 16 0136				mov	[player_y],dl		; (2F94:0136=0)
2F94:3634  49					dec	cx
2F94:3635  89 0E 0134				mov	[player_x],cx		; (2F94:0134=0)
2F94:3639  BB 0C04				mov	bx,0C04h
2F94:363C .B8 6800				mov	ax,offset spr_shamus_5	; (2F94:6800=0)
2F94:363F  3B 06 3414				cmp	ax,[sprite_ptr]		; (2F94:3414=6710h)
2F94:3643  75 03				jne	loc_290			; Jump if not equal
2F94:3645 .B8 6830				mov	ax,offset spr_shamus_6	; (2F94:6830=0)
2F94:3648			loc_290:					;  xref 2F94:3643
2F94:3648  A3 3414				mov	[sprite_ptr],ax		; (2F94:3414=6710h)
2F94:364B  8B F8				mov	di,ax
2F94:364D  E8 DD27				call	draw_sprite_xor_check_wall	; (1377)
2F94:3650  C3					retn

				;ФФФФФ Indexed Entry Point ФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФ

2F94:3651			playerwalk_n:					;  xref 2F94:341A, 35FD
2F94:3651  83 FA 02				cmp	dx,2
2F94:3654  7D 03				jge	loc_291			; Jump if > or =
2F94:3656  E9 0149				jmp	next_room_going_north	; (37A2)
2F94:3659			loc_291:					;  xref 2F94:3654
2F94:3659  E8 DED5				call	draw_sprite_xor_v1	; (1531)
2F94:365C  FE CA				dec	dl
2F94:365E  FE CA				dec	dl
2F94:3660  88 16 0136				mov	[player_y],dl		; (2F94:0136=0)
2F94:3664  BB 0C04				mov	bx,0C04h
2F94:3667 .B8 6740				mov	ax,offset spr_shamus_1	; (2F94:6740=0)
2F94:366A  3B 06 3414				cmp	ax,[sprite_ptr]		; (2F94:3414=6710h)
2F94:366E  75 03				jne	loc_292			; Jump if not equal
2F94:3670 .B8 6770				mov	ax,offset spr_shamus_2	; (2F94:6770=0)
2F94:3673			loc_292:					;  xref 2F94:366E
2F94:3673  A3 3414				mov	[sprite_ptr],ax		; (2F94:3414=6710h)
2F94:3676  8B F8				mov	di,ax
2F94:3678  E8 DCFC				call	draw_sprite_xor_check_wall	; (1377)
2F94:367B  C3					retn

				;ФФФФФ Indexed Entry Point ФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФ

2F94:367C			playerwalk_ne:					;  xref 2F94:341C, 35FD
2F94:367C  83 FA 03				cmp	dx,3
2F94:367F  7D 03				jge	loc_293			; Jump if > or =
2F94:3681  E9 011E				jmp	next_room_going_north	; (37A2)
2F94:3684			loc_293:					;  xref 2F94:367F
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 103

2F94:3684  83 F9 4C				cmp	cx,4Ch
2F94:3687  7C 03				jl	loc_294			; Jump if <
2F94:3689  E9 01FA				jmp	next_room_going_east	; (3886)
2F94:368C			loc_294:					;  xref 2F94:3687
2F94:368C  E8 DEA2				call	draw_sprite_xor_v1	; (1531)
2F94:368F  FE CA				dec	dl
2F94:3691  FE CA				dec	dl
2F94:3693  88 16 0136				mov	[player_y],dl		; (2F94:0136=0)
2F94:3697  41					inc	cx
2F94:3698  89 0E 0134				mov	[player_x],cx		; (2F94:0134=0)
2F94:369C  BB 0C04				mov	bx,0C04h
2F94:369F .B8 6860				mov	ax,offset spr_shamus_7	; (2F94:6860=0)
2F94:36A2  3B 06 3414				cmp	ax,[sprite_ptr]		; (2F94:3414=6710h)
2F94:36A6  75 03				jne	loc_295			; Jump if not equal
2F94:36A8 .B8 6890				mov	ax,offset spr_shamus_8	; (2F94:6890=0)
2F94:36AB			loc_295:					;  xref 2F94:36A6
2F94:36AB  A3 3414				mov	[sprite_ptr],ax		; (2F94:3414=6710h)
2F94:36AE  8B F8				mov	di,ax
2F94:36B0  E8 DCC4				call	draw_sprite_xor_check_wall	; (1377)
2F94:36B3  C3					retn

				;ФФФФФ Indexed Entry Point ФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФ

2F94:36B4			playerwalk_w:					;  xref 2F94:341E, 35FD
2F94:36B4  83 F9 01				cmp	cx,1
2F94:36B7  7D 03				jge	loc_296			; Jump if > or =
2F94:36B9  E9 0181				jmp	next_room_going_west	; (383D)
2F94:36BC			loc_296:					;  xref 2F94:36B7
2F94:36BC  E8 DE72				call	draw_sprite_xor_v1	; (1531)
2F94:36BF  49					dec	cx
2F94:36C0  89 0E 0134				mov	[player_x],cx		; (2F94:0134=0)
2F94:36C4  BB 0C04				mov	bx,0C04h
2F94:36C7 .B8 6800				mov	ax,offset spr_shamus_5	; (2F94:6800=0)
2F94:36CA  3B 06 3414				cmp	ax,[sprite_ptr]		; (2F94:3414=6710h)
2F94:36CE  75 03				jne	loc_297			; Jump if not equal
2F94:36D0 .B8 6830				mov	ax,offset spr_shamus_6	; (2F94:6830=0)
2F94:36D3			loc_297:					;  xref 2F94:36CE
2F94:36D3  A3 3414				mov	[sprite_ptr],ax		; (2F94:3414=6710h)
2F94:36D6  8B F8				mov	di,ax
2F94:36D8  E8 DC9C				call	draw_sprite_xor_check_wall	; (1377)
2F94:36DB  C3					retn

				;ФФФФФ Indexed Entry Point ФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФ

2F94:36DC			playerwalk_e:					;  xref 2F94:3420, 35FD
2F94:36DC  83 F9 4C				cmp	cx,4Ch
2F94:36DF  7C 03				jl	loc_298			; Jump if <
2F94:36E1  E9 01A2				jmp	next_room_going_east	; (3886)
2F94:36E4			loc_298:					;  xref 2F94:36DF
2F94:36E4  E8 DE4A				call	draw_sprite_xor_v1	; (1531)
2F94:36E7  41					inc	cx
2F94:36E8  89 0E 0134				mov	[player_x],cx		; (2F94:0134=0)
2F94:36EC  BB 0C04				mov	bx,0C04h
2F94:36EF .B8 6860				mov	ax,offset spr_shamus_7	; (2F94:6860=0)
2F94:36F2  3B 06 3414				cmp	ax,[sprite_ptr]		; (2F94:3414=6710h)
2F94:36F6  75 03				jne	loc_299			; Jump if not equal
2F94:36F8 .B8 6890				mov	ax,offset spr_shamus_8	; (2F94:6890=0)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 104

2F94:36FB			loc_299:					;  xref 2F94:36F6
2F94:36FB  A3 3414				mov	[sprite_ptr],ax		; (2F94:3414=6710h)
2F94:36FE  8B F8				mov	di,ax
2F94:3700  E8 DC74				call	draw_sprite_xor_check_wall	; (1377)
2F94:3703  C3					retn

				;ФФФФФ Indexed Entry Point ФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФ

2F94:3704			playerwalk_sw:					;  xref 2F94:3422, 35FD
2F94:3704  81 FA 00A2				cmp	dx,0A2h
2F94:3708  7E 03				jle	loc_300			; Jump if < or =
2F94:370A  E9 00E3				jmp	next_room_going_south	; (37F0)
2F94:370D			loc_300:					;  xref 2F94:3708
2F94:370D  83 F9 01				cmp	cx,1
2F94:3710  7D 03				jge	loc_301			; Jump if > or =
2F94:3712  E9 0128				jmp	next_room_going_west	; (383D)
2F94:3715			loc_301:					;  xref 2F94:3710
2F94:3715  E8 DE19				call	draw_sprite_xor_v1	; (1531)
2F94:3718  FE C2				inc	dl
2F94:371A  FE C2				inc	dl
2F94:371C  88 16 0136				mov	[player_y],dl		; (2F94:0136=0)
2F94:3720  49					dec	cx
2F94:3721  89 0E 0134				mov	[player_x],cx		; (2F94:0134=0)
2F94:3725  BB 0C04				mov	bx,0C04h
2F94:3728 .B8 6800				mov	ax,offset spr_shamus_5	; (2F94:6800=0)
2F94:372B  3B 06 3414				cmp	ax,[sprite_ptr]		; (2F94:3414=6710h)
2F94:372F  75 03				jne	loc_302			; Jump if not equal
2F94:3731 .B8 6830				mov	ax,offset spr_shamus_6	; (2F94:6830=0)
2F94:3734			loc_302:					;  xref 2F94:372F
2F94:3734  A3 3414				mov	[sprite_ptr],ax		; (2F94:3414=6710h)
2F94:3737  8B F8				mov	di,ax
2F94:3739  E8 DC3B				call	draw_sprite_xor_check_wall	; (1377)
2F94:373C  C3					retn

				;ФФФФФ Indexed Entry Point ФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФ

2F94:373D			playerwalk_s:					;  xref 2F94:3424, 35FD
2F94:373D  81 FA 00A2				cmp	dx,0A2h
2F94:3741  7E 03				jle	loc_303			; Jump if < or =
2F94:3743  E9 00AA				jmp	next_room_going_south	; (37F0)
2F94:3746			loc_303:					;  xref 2F94:3741
2F94:3746  E8 DDE8				call	draw_sprite_xor_v1	; (1531)
2F94:3749  FE C2				inc	dl
2F94:374B  FE C2				inc	dl
2F94:374D  88 16 0136				mov	[player_y],dl		; (2F94:0136=0)
2F94:3751  BB 0C04				mov	bx,0C04h
2F94:3754 .B8 67A0				mov	ax,offset spr_shamus_3	; (2F94:67A0=0)
2F94:3757  3B 06 3414				cmp	ax,[sprite_ptr]		; (2F94:3414=6710h)
2F94:375B  75 03				jne	loc_304			; Jump if not equal
2F94:375D .B8 67D0				mov	ax,offset spr_shamus_4	; (2F94:67D0=0)
2F94:3760			loc_304:					;  xref 2F94:375B
2F94:3760  A3 3414				mov	[sprite_ptr],ax		; (2F94:3414=6710h)
2F94:3763  8B F8				mov	di,ax
2F94:3765  E8 DC0F				call	draw_sprite_xor_check_wall	; (1377)
2F94:3768  C3					retn

				;ФФФФФ Indexed Entry Point ФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФ
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 105


2F94:3769			playerwalk_se:					;  xref 2F94:3426, 35FD
2F94:3769  81 FA 00A2				cmp	dx,0A2h
2F94:376D  7E 03				jle	loc_305			; Jump if < or =
2F94:376F  EB 7F				jmp	short next_room_going_south	; (37F0)
2F94:3771  90					db	90h
2F94:3772			loc_305:					;  xref 2F94:376D
2F94:3772  83 F9 4C				cmp	cx,4Ch
2F94:3775  7C 03				jl	loc_306			; Jump if <
2F94:3777  E9 010C				jmp	next_room_going_east	; (3886)
2F94:377A			loc_306:					;  xref 2F94:3775
2F94:377A  E8 DDB4				call	draw_sprite_xor_v1	; (1531)
2F94:377D  FE C2				inc	dl
2F94:377F  FE C2				inc	dl
2F94:3781  88 16 0136				mov	[player_y],dl		; (2F94:0136=0)
2F94:3785  41					inc	cx
2F94:3786  89 0E 0134				mov	[player_x],cx		; (2F94:0134=0)
2F94:378A  BB 0C04				mov	bx,0C04h
2F94:378D .B8 6860				mov	ax,offset spr_shamus_7	; (2F94:6860=0)
2F94:3790  3B 06 3414				cmp	ax,[sprite_ptr]		; (2F94:3414=6710h)
2F94:3794  75 03				jne	loc_307			; Jump if not equal
2F94:3796 .B8 6890				mov	ax,offset spr_shamus_8	; (2F94:6890=0)
2F94:3799			loc_307:					;  xref 2F94:3794
2F94:3799  A3 3414				mov	[sprite_ptr],ax		; (2F94:3414=6710h)
2F94:379C  8B F8				mov	di,ax
2F94:379E  E8 DBD6				call	draw_sprite_xor_check_wall	; (1377)
2F94:37A1  C3					retn
2F94:37A2			next_room_going_north:				;  xref 2F94:361A, 3656, 3681
2F94:37A2  8A 0E 013B				mov	cl,[room_num]		; (2F94:013B=0)
2F94:37A6 .BB 6C70				mov	bx,offset room_link_table	; (2F94:6C70=0)
2F94:37A9  A0 013B				mov	al,[room_num]		; (2F94:013B=0)
2F94:37AC  D7					xlat				; al=[al+[bx]] table
2F94:37AD  A2 013B				mov	[room_num],al		; (2F94:013B=0)
2F94:37B0  8A 2E 3411				mov	ch,[prev_room_num]	; (2F94:3411=0)
2F94:37B4  3A 2E 013B				cmp	ch,[room_num]		; (2F94:013B=0)
2F94:37B8  75 07				jne	loc_308			; Jump if not equal
2F94:37BA  FE 06 012E				inc	[goback_num]		; (2F94:012E=0FFh)
2F94:37BE  EB 06				jmp	short loc_309		; (37C6)
2F94:37C0  90					db	90h
2F94:37C1			loc_308:					;  xref 2F94:37B8
2F94:37C1  C6 06 012E 01			mov	[goback_num],1		; (2F94:012E=0FFh)
2F94:37C6			loc_309:					;  xref 2F94:37BE
2F94:37C6  88 0E 3411				mov	[prev_room_num],cl	; (2F94:3411=0)
2F94:37CA  C6 06 0139 A4			mov	[player_y2],0A4h	; (2F94:0139=0)
2F94:37CF  8B 0E 0134				mov	cx,[player_x]		; (2F94:0134=0)
2F94:37D3  89 0E 0137				mov	[player_x2],cx		; (2F94:0137=0)
2F94:37D7  E8 CC81				call	sub_1			; (045B)
2F94:37DA  BA 00A4				mov	dx,0A4h
2F94:37DD  88 16 0136				mov	[player_y],dl		; (2F94:0136=0)
2F94:37E1  8B 0E 0134				mov	cx,[player_x]		; (2F94:0134=0)
2F94:37E5  8B 3E 3414				mov	di,[sprite_ptr]		; (2F94:3414=6710h)
2F94:37E9  BB 0C04				mov	bx,0C04h
2F94:37EC  E8 DB88				call	draw_sprite_xor_check_wall	; (1377)
2F94:37EF  C3					retn
2F94:37F0			next_room_going_south:				;  xref 2F94:370A, 3743, 376F
2F94:37F0  8A 0E 013B				mov	cl,[room_num]		; (2F94:013B=0)
2F94:37F4 .BB 6C70				mov	bx,offset room_link_table	; (2F94:6C70=0)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 106

2F94:37F7  A0 013B				mov	al,[room_num]		; (2F94:013B=0)
2F94:37FA  D7					xlat				; al=[al+[bx]] table
2F94:37FB  A2 013B				mov	[room_num],al		; (2F94:013B=0)
2F94:37FE  8A 2E 3411				mov	ch,[prev_room_num]	; (2F94:3411=0)
2F94:3802  3A 2E 013B				cmp	ch,[room_num]		; (2F94:013B=0)
2F94:3806  75 07				jne	loc_310			; Jump if not equal
2F94:3808  FE 06 012E				inc	[goback_num]		; (2F94:012E=0FFh)
2F94:380C  EB 06				jmp	short loc_311		; (3814)
2F94:380E  90					db	90h
2F94:380F			loc_310:					;  xref 2F94:3806
2F94:380F  C6 06 012E 01			mov	[goback_num],1		; (2F94:012E=0FFh)
2F94:3814			loc_311:					;  xref 2F94:380C
2F94:3814  88 0E 3411				mov	[prev_room_num],cl	; (2F94:3411=0)
2F94:3818  C6 06 0139 00			mov	[player_y2],0		; (2F94:0139=0)
2F94:381D  8B 0E 0134				mov	cx,[player_x]		; (2F94:0134=0)
2F94:3821  89 0E 0137				mov	[player_x2],cx		; (2F94:0137=0)
2F94:3825  E8 CC33				call	sub_1			; (045B)
2F94:3828  33 D2				xor	dx,dx			; Zero register
2F94:382A  88 16 0136				mov	[player_y],dl		; (2F94:0136=0)
2F94:382E  8B 0E 0134				mov	cx,[player_x]		; (2F94:0134=0)
2F94:3832  8B 3E 3414				mov	di,[sprite_ptr]		; (2F94:3414=6710h)
2F94:3836  BB 0C04				mov	bx,0C04h
2F94:3839  E8 DB3B				call	draw_sprite_xor_check_wall	; (1377)
2F94:383C  C3					retn
2F94:383D			next_room_going_west:				;  xref 2F94:3622, 36B9, 3712
2F94:383D  8A 0E 013B				mov	cl,[room_num]		; (2F94:013B=0)
2F94:3841  FE 0E 013B				dec	[room_num]		; (2F94:013B=0)
2F94:3845  8A 2E 3411				mov	ch,[prev_room_num]	; (2F94:3411=0)
2F94:3849  3A 2E 013B				cmp	ch,[room_num]		; (2F94:013B=0)
2F94:384D  75 07				jne	loc_312			; Jump if not equal
2F94:384F  FE 06 012E				inc	[goback_num]		; (2F94:012E=0FFh)
2F94:3853  EB 06				jmp	short loc_313		; (385B)
2F94:3855  90					db	90h
2F94:3856			loc_312:					;  xref 2F94:384D
2F94:3856  C6 06 012E 01			mov	[goback_num],1		; (2F94:012E=0FFh)
2F94:385B			loc_313:					;  xref 2F94:3853
2F94:385B  88 0E 3411				mov	[prev_room_num],cl	; (2F94:3411=0)
2F94:385F  C7 06 0137 004C			mov	[player_x2],4Ch		; (2F94:0137=0)
2F94:3865  8A 16 0136				mov	dl,[player_y]		; (2F94:0136=0)
2F94:3869  88 16 0139				mov	[player_y2],dl		; (2F94:0139=0)
2F94:386D  E8 CBEB				call	sub_1			; (045B)
2F94:3870  B9 004C				mov	cx,4Ch
2F94:3873  89 0E 0134				mov	[player_x],cx		; (2F94:0134=0)
2F94:3877  8A 16 0136				mov	dl,[player_y]		; (2F94:0136=0)
2F94:387B  8B 3E 3414				mov	di,[sprite_ptr]		; (2F94:3414=6710h)
2F94:387F  BB 0C04				mov	bx,0C04h
2F94:3882  E8 DAF2				call	draw_sprite_xor_check_wall	; (1377)
2F94:3885  C3					retn
2F94:3886			next_room_going_east:				;  xref 2F94:3689, 36E1, 3777
2F94:3886  8A 0E 013B				mov	cl,[room_num]		; (2F94:013B=0)
2F94:388A  FE 06 013B				inc	[room_num]		; (2F94:013B=0)
2F94:388E  8A 2E 3411				mov	ch,[prev_room_num]	; (2F94:3411=0)
2F94:3892  3A 2E 013B				cmp	ch,[room_num]		; (2F94:013B=0)
2F94:3896  75 07				jne	loc_314			; Jump if not equal
2F94:3898  FE 06 012E				inc	[goback_num]		; (2F94:012E=0FFh)
2F94:389C  EB 06				jmp	short loc_315		; (38A4)
2F94:389E  90					db	90h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 107

2F94:389F			loc_314:					;  xref 2F94:3896
2F94:389F  C6 06 012E 01			mov	[goback_num],1		; (2F94:012E=0FFh)
2F94:38A4			loc_315:					;  xref 2F94:389C
2F94:38A4  88 0E 3411				mov	[prev_room_num],cl	; (2F94:3411=0)
2F94:38A8  C7 06 0137 0000			mov	[player_x2],0		; (2F94:0137=0)
2F94:38AE  8A 16 0136				mov	dl,[player_y]		; (2F94:0136=0)
2F94:38B2  88 16 0139				mov	[player_y2],dl		; (2F94:0139=0)
2F94:38B6  E8 CBA2				call	sub_1			; (045B)
2F94:38B9  33 C9				xor	cx,cx			; Zero register
2F94:38BB  89 0E 0134				mov	[player_x],cx		; (2F94:0134=0)
2F94:38BF  8A 16 0136				mov	dl,[player_y]		; (2F94:0136=0)
2F94:38C3  8B 3E 3414				mov	di,[sprite_ptr]		; (2F94:3414=6710h)
2F94:38C7  BB 0C04				mov	bx,0C04h
2F94:38CA  E8 DAAA				call	draw_sprite_xor_check_wall	; (1377)
2F94:38CD  C3					retn
				player_walk	endp

2F94:38CE  00 00				db	0, 0
2F94:38D0  00			data_186	db	0			;  xref 2F94:3989, 39E9
2F94:38D1  00 00 00 00 03 C0			db	 00h, 00h, 00h, 00h, 03h,0C0h
2F94:38D7  00 00 3C 3C 00 00			db	 00h, 00h, 3Ch, 3Ch, 00h, 00h
2F94:38DD  F2 8F 00 00 F2 8F			db	0F2h, 8Fh, 00h, 00h,0F2h, 8Fh
2F94:38E3  00 00 3C 3C 00 00			db	 00h, 00h, 3Ch, 3Ch, 00h, 00h
2F94:38E9  03 C0 00 00 00 00			db	 03h,0C0h, 00h, 00h, 00h, 00h
2F94:38EF  00					db	 00h
2F94:38F0  A0			data_187	db	0A0h			;  xref 2F94:39F5, 3A58
2F94:38F1  3C 3C 0A 3C 03 C0			db	 3Ch, 3Ch, 0Ah, 3Ch, 03h,0C0h
2F94:38F7  3C 02 80 02 80 F0			db	 3Ch, 02h, 80h, 02h, 80h,0F0h
2F94:38FD  00 00 0F 03 C0 03			db	 00h, 00h, 0Fh, 03h,0C0h, 03h
2F94:3903  C0 3C 00 00 3C 02			db	0C0h, 3Ch, 00h, 00h, 3Ch, 02h
2F94:3909  83 C2 80 A0				db	 83h,0C2h, 80h,0A0h
2F94:390D  3C 3C 0A				db	 3Ch, 3Ch, 0Ah
2F94:3910  00			data_188	db	0			;  xref 2F94:3A75, 3B05
2F94:3911  00 00 00 3C 00 00			db	 00h, 00h, 00h, 3Ch, 00h, 00h
2F94:3917  FF 00 03 D7 C0 03			db	0FFh, 00h, 03h,0D7h,0C0h, 03h
2F94:391D  D7 C0 00 FF 00 00			db	0D7h,0C0h, 00h,0FFh, 00h, 00h
2F94:3923  3C 00 00 00 00			db	 3Ch, 00h, 00h, 00h, 00h
2F94:3928  52			data_189	db	52h			;  xref 2F94:3B0E, 3B19
2F94:3929  3C 85 3C 00 3C 80			db	 3Ch, 85h, 3Ch, 00h, 3Ch, 80h
2F94:392F  00 02 F0 00 0F 80			db	 00h, 02h,0F0h, 00h, 0Fh, 80h
2F94:3935  00 02 3C 00 3C 20			db	 00h, 02h, 3Ch, 00h, 3Ch, 20h
2F94:393B  00 04 54 3C 25 00			db	 00h, 04h, 54h, 3Ch, 25h, 00h
2F94:3941  00 00 00 00				db	 00h, 00h, 00h, 00h

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                              SUBROUTINE
				;
				;         Called from:   2F94:2E09
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:3945			sub_5		proc	near
2F94:3945  3C 14				cmp	al,14h
2F94:3947  73 69				jae	loc_319			; Jump if above or =
2F94:3949  A1 2B03				mov	ax,[systick_2b03]	; (2F94:2B03=0)
2F94:394C  25 007F				and	ax,7Fh
2F94:394F  05 0122				add	ax,122h
2F94:3952  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 108

2F94:3957  74 14				jz	loc_316			; Jump if zero
2F94:3959  50					push	ax
2F94:395A  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:395C  0C 03				or	al,3
2F94:395E  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:3960  B0 B6				mov	al,0B6h
2F94:3962  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:3964  8B C0				mov	ax,ax
2F94:3966  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:3968  8A C4				mov	al,ah
2F94:396A  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:396C  58					pop	ax
2F94:396D			loc_316:					;  xref 2F94:3957
2F94:396D  53					push	bx
2F94:396E  8B 1E 3B70				mov	bx,[data_198]		; (2F94:3B70=0)
2F94:3972  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:3976  5B					pop	bx
2F94:3977  FE 0E 2B01				dec	[num_monsters]		; (2F94:2B01=0)
2F94:397B  75 03				jnz	loc_317			; Jump if not zero
2F94:397D  E8 D38E				call	convert_score_2		; (0D0E)
2F94:3980			loc_317:					;  xref 2F94:397B
2F94:3980  E8 D360				call	convert_score_1		; (0CE3)
2F94:3983  E8 D2D3				call	display_score		; (0C59)
2F94:3986  BB 0804				mov	bx,804h
2F94:3989 .BE 38D0				mov	si,offset data_186	; (2F94:38D0=0)
2F94:398C  E8 2762				call	xor_to_screen_60f1	; (60F1)
2F94:398F  C6 45 FA 14				mov	byte ptr [di-6],14h
2F94:3993  05 125C				add	ax,125Ch
2F94:3996  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:399B  74 14				jz	loc_ret_318		; Jump if zero
2F94:399D  50					push	ax
2F94:399E  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:39A0  0C 03				or	al,3
2F94:39A2  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:39A4  B0 B6				mov	al,0B6h
2F94:39A6  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:39A8  8B C0				mov	ax,ax
2F94:39AA  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:39AC  8A C4				mov	al,ah
2F94:39AE  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:39B0  58					pop	ax

2F94:39B1			loc_ret_318:					;  xref 2F94:399B
2F94:39B1  C3					retn
2F94:39B2			loc_319:					;  xref 2F94:3947
2F94:39B2  3C 1E				cmp	al,1Eh
2F94:39B4  73 69				jae	loc_322			; Jump if above or =
2F94:39B6  8B 0E 2B03				mov	cx,[systick_2b03]	; (2F94:2B03=0)
2F94:39BA  D1 C9				ror	cx,1			; Rotate
2F94:39BC  81 E1 007F				and	cx,7Fh
2F94:39C0  81 C1 012C				add	cx,12Ch
2F94:39C4  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:39C9  74 14				jz	loc_320			; Jump if zero
2F94:39CB  50					push	ax
2F94:39CC  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:39CE  0C 03				or	al,3
2F94:39D0  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 109

2F94:39D2  B0 B6				mov	al,0B6h
2F94:39D4  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:39D6  8B C1				mov	ax,cx
2F94:39D8  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:39DA  8A C4				mov	al,ah
2F94:39DC  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:39DE  58					pop	ax
2F94:39DF			loc_320:					;  xref 2F94:39C9
2F94:39DF  53					push	bx
2F94:39E0  8B 1E 3B70				mov	bx,[data_198]		; (2F94:3B70=0)
2F94:39E4  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:39E8  5B					pop	bx
2F94:39E9 .BE 38D0				mov	si,offset data_186	; (2F94:38D0=0)
2F94:39EC  BB 0804				mov	bx,804h
2F94:39EF  E8 26FF				call	xor_to_screen_60f1	; (60F1)
2F94:39F2  BB 0804				mov	bx,804h
2F94:39F5 .BE 38F0				mov	si,offset data_187	; (2F94:38F0=0A0h)
2F94:39F8  E8 26F6				call	xor_to_screen_60f1	; (60F1)
2F94:39FB  C6 45 FA 1E				mov	byte ptr [di-6],1Eh
2F94:39FF  81 C1 0CE4				add	cx,0CE4h
2F94:3A03  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:3A08  74 14				jz	loc_ret_321		; Jump if zero
2F94:3A0A  50					push	ax
2F94:3A0B  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:3A0D  0C 03				or	al,3
2F94:3A0F  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:3A11  B0 B6				mov	al,0B6h
2F94:3A13  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:3A15  8B C1				mov	ax,cx
2F94:3A17  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:3A19  8A C4				mov	al,ah
2F94:3A1B  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:3A1D  58					pop	ax

2F94:3A1E			loc_ret_321:					;  xref 2F94:3A08
2F94:3A1E  C3					retn
2F94:3A1F			loc_322:					;  xref 2F94:39B4
2F94:3A1F  3C 28				cmp	al,28h			; '('
2F94:3A21  73 4B				jae	loc_324			; Jump if above or =
2F94:3A23  8B 0E 2B03				mov	cx,[systick_2b03]	; (2F94:2B03=0)
2F94:3A27  D1 C9				ror	cx,1			; Rotate
2F94:3A29  D1 C9				ror	cx,1			; Rotate
2F94:3A2B  81 E1 00FF				and	cx,0FFh
2F94:3A2F  81 C1 00C8				add	cx,0C8h
2F94:3A33  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:3A38  74 14				jz	loc_323			; Jump if zero
2F94:3A3A  50					push	ax
2F94:3A3B  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:3A3D  0C 03				or	al,3
2F94:3A3F  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:3A41  B0 B6				mov	al,0B6h
2F94:3A43  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:3A45  8B C1				mov	ax,cx
2F94:3A47  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:3A49  8A C4				mov	al,ah
2F94:3A4B  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:3A4D  58					pop	ax
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 110

2F94:3A4E			loc_323:					;  xref 2F94:3A38
2F94:3A4E  53					push	bx
2F94:3A4F  8B 1E 3B70				mov	bx,[data_198]		; (2F94:3B70=0)
2F94:3A53  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:3A57  5B					pop	bx
2F94:3A58 .BE 38F0				mov	si,offset data_187	; (2F94:38F0=0A0h)
2F94:3A5B  BB 0804				mov	bx,804h
2F94:3A5E  E8 2690				call	xor_to_screen_60f1	; (60F1)
2F94:3A61  C6 45 FF 00				mov	byte ptr [di-1],0
2F94:3A65  50					push	ax
2F94:3A66  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:3A68  24 FC				and	al,0FCh
2F94:3A6A  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:3A6C  58					pop	ax
2F94:3A6D  C3					retn
2F94:3A6E			loc_324:					;  xref 2F94:3A21
2F94:3A6E  3C 32				cmp	al,32h			; '2'
2F94:3A70  73 3B				jae	loc_326			; Jump if above or =
2F94:3A72  BB 0803				mov	bx,803h
2F94:3A75 .BE 3910				mov	si,offset data_188	; (2F94:3910=0)
2F94:3A78  E8 2676				call	xor_to_screen_60f1	; (60F1)
2F94:3A7B  C6 45 FA 32				mov	byte ptr [di-6],32h	; '2'
2F94:3A7F  8B 0E 2B03				mov	cx,[systick_2b03]	; (2F94:2B03=0)
2F94:3A83  D1 C9				ror	cx,1			; Rotate
2F94:3A85  89 0E 2B03				mov	[systick_2b03],cx	; (2F94:2B03=0)
2F94:3A89  81 E1 007F				and	cx,7Fh
2F94:3A8D  81 C1 0190				add	cx,190h
2F94:3A91  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:3A96  74 14				jz	loc_ret_325		; Jump if zero
2F94:3A98  50					push	ax
2F94:3A99  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:3A9B  0C 03				or	al,3
2F94:3A9D  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:3A9F  B0 B6				mov	al,0B6h
2F94:3AA1  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:3AA3  8B C1				mov	ax,cx
2F94:3AA5  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:3AA7  8A C4				mov	al,ah
2F94:3AA9  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:3AAB  58					pop	ax

2F94:3AAC			loc_ret_325:					;  xref 2F94:3A96
2F94:3AAC  C3					retn
2F94:3AAD			loc_326:					;  xref 2F94:3A70
2F94:3AAD  3C 32				cmp	al,32h			; '2'
2F94:3AAF  77 68				ja	loc_330			; Jump if above
2F94:3AB1  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:3AB6  74 15				jz	loc_327			; Jump if zero
2F94:3AB8  50					push	ax
2F94:3AB9  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:3ABB  0C 03				or	al,3
2F94:3ABD  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:3ABF  B0 B6				mov	al,0B6h
2F94:3AC1  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:3AC3  B8 1770				mov	ax,1770h
2F94:3AC6  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:3AC8  8A C4				mov	al,ah
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 111

2F94:3ACA  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:3ACC  58					pop	ax
2F94:3ACD			loc_327:					;  xref 2F94:3AB6
2F94:3ACD  53					push	bx
2F94:3ACE  8B 1E 3B72				mov	bx,[data_199]		; (2F94:3B72=0)
2F94:3AD2  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:3AD6  5B					pop	bx
2F94:3AD7  FE 0E 2B01				dec	[num_monsters]		; (2F94:2B01=0)
2F94:3ADB  75 03				jnz	loc_328			; Jump if not zero
2F94:3ADD  E8 D22E				call	convert_score_2		; (0D0E)
2F94:3AE0			loc_328:					;  xref 2F94:3ADB
2F94:3AE0  E8 D200				call	convert_score_1		; (0CE3)
2F94:3AE3  E8 D173				call	display_score		; (0C59)
2F94:3AE6  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:3AEB  74 15				jz	loc_329			; Jump if zero
2F94:3AED  50					push	ax
2F94:3AEE  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:3AF0  0C 03				or	al,3
2F94:3AF2  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:3AF4  B0 B6				mov	al,0B6h
2F94:3AF6  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:3AF8  B8 0186				mov	ax,186h
2F94:3AFB  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:3AFD  8A C4				mov	al,ah
2F94:3AFF  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:3B01  58					pop	ax
2F94:3B02			loc_329:					;  xref 2F94:3AEB
2F94:3B02  BB 0803				mov	bx,803h
2F94:3B05 .BE 3910				mov	si,offset data_188	; (2F94:3910=0)
2F94:3B08  E8 25E6				call	xor_to_screen_60f1	; (60F1)
2F94:3B0B  BB 0803				mov	bx,803h
2F94:3B0E .BE 3928				mov	si,offset data_189	; (2F94:3928=52h)
2F94:3B11  E8 25DD				call	xor_to_screen_60f1	; (60F1)
2F94:3B14  C6 45 FA 3C				mov	byte ptr [di-6],3Ch	; '<'
2F94:3B18  C3					retn
2F94:3B19			loc_330:					;  xref 2F94:3AAF
2F94:3B19 .BE 3928				mov	si,offset data_189	; (2F94:3928=52h)
2F94:3B1C  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:3B21  74 15				jz	loc_331			; Jump if zero
2F94:3B23  50					push	ax
2F94:3B24  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:3B26  0C 03				or	al,3
2F94:3B28  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:3B2A  B0 B6				mov	al,0B6h
2F94:3B2C  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:3B2E  B8 015E				mov	ax,15Eh
2F94:3B31  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:3B33  8A C4				mov	al,ah
2F94:3B35  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:3B37  58					pop	ax
2F94:3B38			loc_331:					;  xref 2F94:3B21
2F94:3B38  53					push	bx
2F94:3B39  8B 1E 3B72				mov	bx,[data_199]		; (2F94:3B72=0)
2F94:3B3D  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:3B41  5B					pop	bx
2F94:3B42  BB 0803				mov	bx,803h
2F94:3B45  E8 25A9				call	xor_to_screen_60f1	; (60F1)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 112

2F94:3B48  C6 06 2B09 00			mov	[data_161],0		; (2F94:2B09=0)
2F94:3B4D  C6 45 FF 00				mov	byte ptr [di-1],0
2F94:3B51  50					push	ax
2F94:3B52  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:3B54  24 FC				and	al,0FCh
2F94:3B56  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:3B58  58					pop	ax
2F94:3B59  C3					retn
				sub_5		endp

2F94:3B5A  00 00 00 00 00 00			db	0, 0, 0, 0, 0, 0
2F94:3B60  1F40			data_190	dw	1F40h			;  xref 2F94:3BA1, 3C04, 518E
2F94:3B62  4268			data_191	dw	4268h			;  xref 2F94:3BA7, 3C0A, 51CB
2F94:3B64  1770			data_192	dw	1770h			;  xref 2F94:3BAD, 3C10, 5210
2F94:3B66  00 00		data_193	db	0, 0			;  xref 2F94:3BB3, 3C16, 4342
2F94:3B68  0000			data_194	dw	0			;  xref 2F94:3BB9, 3C1C, 4536, 455A
2F94:3B6A  0000			data_195	dw	0			;  xref 2F94:2A9E, 3BC5, 3C22
2F94:3B6C  0000			data_196	dw	0			;  xref 2F94:2AC4, 3BCB, 3C28
2F94:3B6E  0000			data_197	dw	0			;  xref 2F94:3BBF, 3C2E, 5441
2F94:3B70  0000			data_198	dw	0			;  xref 2F94:396E, 39E0, 3A4F, 3BD1
										;            3C34
2F94:3B72  0000			data_199	dw	0			;  xref 2F94:3ACE, 3B39, 3BD7, 3C3A
2F94:3B74  0000			data_200	dw	0			;  xref 2F94:3BDD, 3C40, 585A, 5880
										;            58A6, 58B0, 5BDB
2F94:3B76  0000			data_201	dw	0			;  xref 2F94:3BE3, 3C46, 5962
2F94:3B78  0000			data_202	dw	0			;  xref 2F94:3BE9, 3C4C, 5931
2F94:3B7A  0000			data_203	dw	0			;  xref 2F94:3BEF, 3C52, 59FB
2F94:3B7C  0000			data_204	dw	0			;  xref 2F94:3BF5, 3C58, 5B4F, 5E34
2F94:3B7E  0000			data_205	dw	0			;  xref 2F94:2D12, 2D4C, 3BFB, 3C5E
										;            3CCD, 3CD2
2F94:3B80  0000			data_206	dw	0			;  xref 2F94:3C64, 3C8D
2F94:3B82  12			data_207	db	12h			;  xref 2F94:2C0C, 2CDB, 3C6A, 3C88
2F94:3B83  0006[3030]		data_208	dw	6 dup (3030h)		;  xref 2F94:3C98
2F94:3B8F  30			data_209	db	30h			;  xref 2F94:3CA6
2F94:3B90  00 30 00 30 00			db	 00h, 30h, 00h, 30h, 00h
2F94:3B95  00			data_210	db	0			;  xref 2F94:3C6F, 3CB5
2F94:3B96  0040			data_211	dw	40h			;  xref 2F94:3C74, 3CBA
2F94:3B98  000A			keyboard_buf_len	dw	0Ah			;  xref 2F94:10D3, 1160, 122D, 3C7A
										;            3CC0

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          init_variables
				;
				;         Called from:   2F94:01B1
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:3B9A			init_variables	proc	near
2F94:3B9A  80 3E 0132 01			cmp	[joystick_selected],1	; (2F94:0132=0)
2F94:3B9F  74 63				je	loc_332			; Jump if equal
2F94:3BA1  C7 06 3B60 0002			mov	[data_190],2		; (2F94:3B60=1F40h)
2F94:3BA7  C7 06 3B62 0007			mov	[data_191],7		; (2F94:3B62=4268h)
2F94:3BAD  C7 06 3B64 0002			mov	[data_192],2		; (2F94:3B64=1770h)
2F94:3BB3  C7 06 3B66 0001			mov	word ptr [data_193],1	; (2F94:3B66=0)
2F94:3BB9  C7 06 3B68 0001			mov	[data_194],1		; (2F94:3B68=0)
2F94:3BBF  C7 06 3B6E 0001			mov	[data_197],1		; (2F94:3B6E=0)
2F94:3BC5  C7 06 3B6A 0001			mov	[data_195],1		; (2F94:3B6A=0)
2F94:3BCB  C7 06 3B6C 0001			mov	[data_196],1		; (2F94:3B6C=0)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 113

2F94:3BD1  C7 06 3B70 0005			mov	[data_198],5		; (2F94:3B70=0)
2F94:3BD7  C7 06 3B72 0004			mov	[data_199],4		; (2F94:3B72=0)
2F94:3BDD  C7 06 3B74 000A			mov	[data_200],0Ah		; (2F94:3B74=0)
2F94:3BE3  C7 06 3B76 0028			mov	[data_201],28h		; (2F94:3B76=0)
2F94:3BE9  C7 06 3B78 3ADA			mov	[data_202],3ADAh	; (2F94:3B78=0)
2F94:3BEF  C7 06 3B7A 0005			mov	[data_203],5		; (2F94:3B7A=0)
2F94:3BF5  C7 06 3B7C 0032			mov	[data_204],32h		; (2F94:3B7C=0)
2F94:3BFB  C7 06 3B7E 0002			mov	[data_205],2		; (2F94:3B7E=0)
2F94:3C01  EB 7D				jmp	short loc_333		; (3C80)
2F94:3C03  90					db	90h
2F94:3C04			loc_332:					;  xref 2F94:3B9F
2F94:3C04  C7 06 3B60 1F40			mov	[data_190],1F40h	; (2F94:3B60=1F40h)
2F94:3C0A  C7 06 3B62 4268			mov	[data_191],4268h	; (2F94:3B62=4268h)
2F94:3C10  C7 06 3B64 1770			mov	[data_192],1770h	; (2F94:3B64=1770h)
2F94:3C16  C7 06 3B66 03E8			mov	word ptr [data_193],3E8h	; (2F94:3B66=0)
2F94:3C1C  C7 06 3B68 04B0			mov	[data_194],4B0h		; (2F94:3B68=0)
2F94:3C22  C7 06 3B6A 03E8			mov	[data_195],3E8h		; (2F94:3B6A=0)
2F94:3C28  C7 06 3B6C 03E8			mov	[data_196],3E8h		; (2F94:3B6C=0)
2F94:3C2E  C7 06 3B6E 02BC			mov	[data_197],2BCh		; (2F94:3B6E=0)
2F94:3C34  C7 06 3B70 0FF0			mov	[data_198],0FF0h	; (2F94:3B70=0)
2F94:3C3A  C7 06 3B72 0FF0			mov	[data_199],0FF0h	; (2F94:3B72=0)
2F94:3C40  C7 06 3B74 07D0			mov	[data_200],7D0h		; (2F94:3B74=0)
2F94:3C46  C7 06 3B76 1F40			mov	[data_201],1F40h	; (2F94:3B76=0)
2F94:3C4C  C7 06 3B78 3ADA			mov	[data_202],3ADAh	; (2F94:3B78=0)
2F94:3C52  C7 06 3B7A 03E8			mov	[data_203],3E8h		; (2F94:3B7A=0)
2F94:3C58  C7 06 3B7C 2710			mov	[data_204],2710h	; (2F94:3B7C=0)
2F94:3C5E  C7 06 3B7E 1805			mov	[data_205],1805h	; (2F94:3B7E=0)
2F94:3C64  C7 06 3B80 0001			mov	[data_206],1		; (2F94:3B80=0)
2F94:3C6A  C6 06 3B82 12			mov	[data_207],12h		; (2F94:3B82=12h)
2F94:3C6F  C6 06 3B95 00			mov	[data_210],0		; (2F94:3B95=0)
2F94:3C74  C7 06 3B96 0040			mov	[data_211],40h		; (2F94:3B96=40h)
2F94:3C7A  C7 06 3B98 000A			mov	[keyboard_buf_len],0Ah	; (2F94:3B98=0Ah)
2F94:3C80			loc_333:					;  xref 2F94:3C01
2F94:3C80  F6 06 012F 01			test	[data_33],1		; (2F94:012F=0)
2F94:3C85  75 01				jnz	loc_334			; Jump if not zero
2F94:3C87  C3					retn
2F94:3C88			loc_334:					;  xref 2F94:3C85
2F94:3C88  C6 06 3B82 0D			mov	[data_207],0Dh		; (2F94:3B82=12h)
2F94:3C8D  C7 06 3B80 0000			mov	[data_206],0		; (2F94:3B80=0)
2F94:3C93  06					push	es
2F94:3C94  8C D8				mov	ax,ds
2F94:3C96  8E C0				mov	es,ax
2F94:3C98 .BE 3B83				mov	si,offset data_208	; (2F94:3B83=30h)
2F94:3C9B .BF 0C26				mov	di,offset narrow_digit_zero_2x10	; (2F94:0C26=0Fh)
2F94:3C9E  83 C7 04				add	di,4
2F94:3CA1  B9 000C				mov	cx,0Ch
2F94:3CA4  F3/ A4				rep	movsb			; Rep when cx >0 Mov [si] to es:[di]
2F94:3CA6 .BE 3B8F				mov	si,offset data_209	; (2F94:3B8F=30h)
2F94:3CA9 .BF 0BC2				mov	di,offset narrow_digits_2x10+50h	; (2F94:0BC2=0FFh)
2F94:3CAC  83 C7 02				add	di,2
2F94:3CAF  B9 0006				mov	cx,6
2F94:3CB2  F3/ A4				rep	movsb			; Rep when cx >0 Mov [si] to es:[di]
2F94:3CB4  07					pop	es
2F94:3CB5  C6 06 3B95 40			mov	[data_210],40h		; (2F94:3B95=0) '@'
2F94:3CBA  C7 06 3B96 0041			mov	[data_211],41h		; (2F94:3B96=40h)
2F94:3CC0  C7 06 3B98 000F			mov	[keyboard_buf_len],0Fh	; (2F94:3B98=0Ah)
2F94:3CC6  80 3E 0132 01			cmp	[joystick_selected],1	; (2F94:0132=0)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 114

2F94:3CCB  74 05				je	loc_335			; Jump if equal
2F94:3CCD  FF 06 3B7E				inc	[data_205]		; (2F94:3B7E=0)
2F94:3CD1  C3					retn
2F94:3CD2			loc_335:					;  xref 2F94:3CCB
2F94:3CD2  81 06 3B7E 00C8			add	[data_205],0C8h		; (2F94:3B7E=0)
2F94:3CD8  C3					retn
				init_variables	endp

2F94:3CD9  0007[00]				db	7 dup (0)
2F94:3CE0  00			joy_to_player_dir	db	0			;  xref 2F94:3D57
2F94:3CE1  04 07 06 05 05 08			db	4, 7, 6, 5, 5, 8
2F94:3CE7  08 02 01 02 06 03			db	8, 2, 1, 2, 6, 3
2F94:3CED  03 08 03 00				db	3, 8, 3, 0
2F94:3CF1  00			joy_dir		db	0			; 8 = up, 4 = right, 2 = down,
										;  1 = left
										;  xref 2F94:0475, 3CFC, 3D08, 3D14
										;            3D20, 3D2C, 3D38, 3D44
										;            3D50, 3D5C

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          scancode_to_joy_and_player_dir
				;
				;         Called from:   2F94:3464
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:3CF2			scancode_to_joy_and_player_dir	proc	near
2F94:3CF2  B1 02				mov	cl,2
2F94:3CF4			is_make_or_break:				;  xref 2F94:3D6F
2F94:3CF4 њA8 80				test	al,80h
2F94:3CF6  75 30				jnz	break_code_to_joy	; Jump if not zero
2F94:3CF8  3C 48				cmp	al,48h			; 'H'
2F94:3CFA  75 08				jne	loc_336			; Jump if not equal
2F94:3CFC  80 0E 3CF1 08			or	[joy_dir],8		; (2F94:3CF1=0)
2F94:3D01  EB 52				jmp	short loc_342		; (3D55)
2F94:3D03  90					db	90h
2F94:3D04			loc_336:					;  xref 2F94:3CFA
2F94:3D04  3C 4D				cmp	al,4Dh			; 'M'
2F94:3D06  75 08				jne	loc_337			; Jump if not equal
2F94:3D08  80 0E 3CF1 04			or	[joy_dir],4		; (2F94:3CF1=0)
2F94:3D0D  EB 46				jmp	short loc_342		; (3D55)
2F94:3D0F  90					db	90h
2F94:3D10			loc_337:					;  xref 2F94:3D06
2F94:3D10  3C 50				cmp	al,50h			; 'P'
2F94:3D12  75 08				jne	loc_338			; Jump if not equal
2F94:3D14  80 0E 3CF1 02			or	[joy_dir],2		; (2F94:3CF1=0)
2F94:3D19  EB 3A				jmp	short loc_342		; (3D55)
2F94:3D1B  90					db	90h
2F94:3D1C			loc_338:					;  xref 2F94:3D12
2F94:3D1C  3C 4B				cmp	al,4Bh			; 'K'
2F94:3D1E  75 35				jne	loc_342			; Jump if not equal
2F94:3D20  80 0E 3CF1 01			or	[joy_dir],1		; (2F94:3CF1=0)
2F94:3D25  EB 2E				jmp	short loc_342		; (3D55)
2F94:3D27  90					db	90h
2F94:3D28			break_code_to_joy:				;  xref 2F94:3CF6
2F94:3D28  3C C8				cmp	al,0C8h
2F94:3D2A  75 08				jne	loc_339			; Jump if not equal
2F94:3D2C  80 26 3CF1 07			and	[joy_dir],7		; (2F94:3CF1=0)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 115

2F94:3D31  EB 22				jmp	short loc_342		; (3D55)
2F94:3D33  90					db	90h
2F94:3D34			loc_339:					;  xref 2F94:3D2A
2F94:3D34  3C CD				cmp	al,0CDh
2F94:3D36  75 08				jne	loc_340			; Jump if not equal
2F94:3D38  80 26 3CF1 0B			and	[joy_dir],0Bh		; (2F94:3CF1=0)
2F94:3D3D  EB 16				jmp	short loc_342		; (3D55)
2F94:3D3F  90					db	90h
2F94:3D40			loc_340:					;  xref 2F94:3D36
2F94:3D40  3C D0				cmp	al,0D0h
2F94:3D42  75 08				jne	loc_341			; Jump if not equal
2F94:3D44  80 26 3CF1 0D			and	[joy_dir],0Dh		; (2F94:3CF1=0)
2F94:3D49  EB 0A				jmp	short loc_342		; (3D55)
2F94:3D4B  90					db	90h
2F94:3D4C			loc_341:					;  xref 2F94:3D42
2F94:3D4C  3C CB				cmp	al,0CBh
2F94:3D4E  75 05				jne	loc_342			; Jump if not equal
2F94:3D50  80 26 3CF1 0E			and	[joy_dir],0Eh		; (2F94:3CF1=0)
2F94:3D55			loc_342:					;  xref 2F94:3D01, 3D0D, 3D19, 3D1E
										;            3D25, 3D31, 3D3D, 3D49
										;            3D4E
2F94:3D55  50					push	ax
2F94:3D56  57					push	di
2F94:3D57 .BF 3CE0				mov	di,offset joy_to_player_dir	; (2F94:3CE0=0)
2F94:3D5A  32 E4				xor	ah,ah			; Zero register
2F94:3D5C  A0 3CF1				mov	al,[joy_dir]		; (2F94:3CF1=0)
2F94:3D5F  03 F8				add	di,ax
2F94:3D61  8A 05				mov	al,[di]
2F94:3D63  A3 3454				mov	[player_dir],ax		; (2F94:3454=0)
2F94:3D66  5F					pop	di
2F94:3D67  58					pop	ax
2F94:3D68  FE C9				dec	cl
2F94:3D6A  74 05				jz	loc_343			; Jump if zero
2F94:3D6C  E8 D409				call	check_stick		; (1178)
2F94:3D6F  EB 83				jmp	short is_make_or_break	; (3CF4)
2F94:3D71			loc_343:					;  xref 2F94:3D6A
2F94:3D71  A1 3454				mov	ax,[player_dir]		; (2F94:3454=0)
2F94:3D74  C3					retn
				scancode_to_joy_and_player_dir	endp

2F94:3D75  000B[00]				db	11 dup (0)
2F94:3D80  0000			data_214	dw	0			;  xref 2F94:3E0F, 3E41
2F94:3D82  0000			data_215	dw	0			;  xref 2F94:3DAD, 3DDF
2F94:3D84  25			data_216	db	25h			;  xref 2F94:3E60, 3E6A, 5FD8
2F94:3D85  6B			data_217	db	6Bh			;  xref 2F94:3E64, 3E6E, 5FDE
2F94:3D86  26			data_218	db	26h			;  xref 2F94:3E72, 3E7C, 5FBD
2F94:3D87  6F			data_219	db	6Fh			;  xref 2F94:3E76, 3E80, 5FC3

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          joy_poll_v2
				;
				;         Called from:   2F94:278E
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:3D88			joy_poll_v2	proc	near
2F94:3D88  B0 36				mov	al,36h			; '6'
2F94:3D8A  E6 43				out	43h,al			; port 43h, 8253 timer control
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 116

2F94:3D8C  B0 FF				mov	al,0FFh
2F94:3D8E  E6 40				out	40h,al			; port 40h, 8253 timer 0 clock
2F94:3D90  E6 40				out	40h,al			; port 40h, 8253 timer 0 clock
2F94:3D92  BA 0201				mov	dx,201h
2F94:3D95  EE					out	dx,al			; port 201h, start game 1-shots
2F94:3D96			loc_344:					;  xref 2F94:3D9D
2F94:3D96  EC					in	al,dx			; port 201h, start game 1-shots
2F94:3D97  A8 01				test	al,1
2F94:3D99  74 66				jz	loc_348			; Jump if zero
2F94:3D9B  A8 02				test	al,2
2F94:3D9D  75 F7				jnz	loc_344			; Jump if not zero
2F94:3D9F  B0 06				mov	al,6
2F94:3DA1  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:3DA3  E4 40				in	al,40h			; port 40h, 8253 timer 0 clock
2F94:3DA5  8A C8				mov	cl,al
2F94:3DA7  E4 40				in	al,40h			; port 40h, 8253 timer 0 clock
2F94:3DA9  8A E8				mov	ch,al
2F94:3DAB  F7 D1				not	cx
2F94:3DAD  89 0E 3D82				mov	[data_215],cx		; (2F94:3D82=0)
2F94:3DB1			loc_345:					;  xref 2F94:3DB4
2F94:3DB1  EC					in	al,dx			; port 201h, start game 1-shots
2F94:3DB2  A8 01				test	al,1
2F94:3DB4  75 FB				jnz	loc_345			; Jump if not zero
2F94:3DB6  B0 06				mov	al,6
2F94:3DB8  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:3DBA  E4 40				in	al,40h			; port 40h, 8253 timer 0 clock
2F94:3DBC  8A C8				mov	cl,al
2F94:3DBE  E4 40				in	al,40h			; port 40h, 8253 timer 0 clock
2F94:3DC0  8A E8				mov	ch,al
2F94:3DC2  F7 D1				not	cx
2F94:3DC4  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3DC6  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3DC8  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3DCA  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3DCC  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3DCE  81 F9 00CC				cmp	cx,0CCh
2F94:3DD2  76 03				jbe	loc_346			; Jump if below or =
2F94:3DD4  B9 00CC				mov	cx,0CCh
2F94:3DD7			loc_346:					;  xref 2F94:3DD2
2F94:3DD7  8A D9				mov	bl,cl
2F94:3DD9  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3DDB  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3DDD  02 D9				add	bl,cl
2F94:3DDF  8B 0E 3D82				mov	cx,[data_215]		; (2F94:3D82=0)
2F94:3DE3  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3DE5  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3DE7  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3DE9  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3DEB  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3DED  81 F9 00CC				cmp	cx,0CCh
2F94:3DF1  76 03				jbe	loc_347			; Jump if below or =
2F94:3DF3  B9 00CC				mov	cx,0CCh
2F94:3DF6			loc_347:					;  xref 2F94:3DF1
2F94:3DF6  8A F9				mov	bh,cl
2F94:3DF8  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3DFA  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3DFC  02 F9				add	bh,cl
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 117

2F94:3DFE  EB 60				jmp	short loc_352		; (3E60)
2F94:3E00  90					db	90h
2F94:3E01			loc_348:					;  xref 2F94:3D99
2F94:3E01  B0 06				mov	al,6
2F94:3E03  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:3E05  E4 40				in	al,40h			; port 40h, 8253 timer 0 clock
2F94:3E07  8A C8				mov	cl,al
2F94:3E09  E4 40				in	al,40h			; port 40h, 8253 timer 0 clock
2F94:3E0B  8A E8				mov	ch,al
2F94:3E0D  F7 D1				not	cx
2F94:3E0F  89 0E 3D80				mov	[data_214],cx		; (2F94:3D80=0)
2F94:3E13			loc_349:					;  xref 2F94:3E16
2F94:3E13  EC					in	al,dx			; port 201h, start game 1-shots
2F94:3E14  A8 02				test	al,2
2F94:3E16  75 FB				jnz	loc_349			; Jump if not zero
2F94:3E18  B0 06				mov	al,6
2F94:3E1A  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:3E1C  E4 40				in	al,40h			; port 40h, 8253 timer 0 clock
2F94:3E1E  8A C8				mov	cl,al
2F94:3E20  E4 40				in	al,40h			; port 40h, 8253 timer 0 clock
2F94:3E22  8A E8				mov	ch,al
2F94:3E24  F7 D1				not	cx
2F94:3E26  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3E28  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3E2A  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3E2C  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3E2E  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3E30  81 F9 00CC				cmp	cx,0CCh
2F94:3E34  76 03				jbe	loc_350			; Jump if below or =
2F94:3E36  B9 00CC				mov	cx,0CCh
2F94:3E39			loc_350:					;  xref 2F94:3E34
2F94:3E39  8A F9				mov	bh,cl
2F94:3E3B  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3E3D  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3E3F  02 F9				add	bh,cl
2F94:3E41  8B 0E 3D80				mov	cx,[data_214]		; (2F94:3D80=0)
2F94:3E45  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3E47  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3E49  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3E4B  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3E4D  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3E4F  81 F9 00CC				cmp	cx,0CCh
2F94:3E53  76 03				jbe	loc_351			; Jump if below or =
2F94:3E55  B9 00CC				mov	cx,0CCh
2F94:3E58			loc_351:					;  xref 2F94:3E53
2F94:3E58  8A D9				mov	bl,cl
2F94:3E5A  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3E5C  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:3E5E  02 D9				add	bl,cl
2F94:3E60			loc_352:					;  xref 2F94:3DFE
2F94:3E60  88 1E 3D84				mov	[data_216],bl		; (2F94:3D84=25h)
2F94:3E64  88 1E 3D85				mov	[data_217],bl		; (2F94:3D85=6Bh)
2F94:3E68  D0 EB				shr	bl,1			; Shift w/zeros fill
2F94:3E6A  28 1E 3D84				sub	[data_216],bl		; (2F94:3D84=25h)
2F94:3E6E  00 1E 3D85				add	[data_217],bl		; (2F94:3D85=6Bh)
2F94:3E72  88 3E 3D86				mov	[data_218],bh		; (2F94:3D86=26h)
2F94:3E76  88 3E 3D87				mov	[data_219],bh		; (2F94:3D87=6Fh)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 118

2F94:3E7A  D0 EF				shr	bh,1			; Shift w/zeros fill
2F94:3E7C  28 3E 3D86				sub	[data_218],bh		; (2F94:3D86=26h)
2F94:3E80  00 3E 3D87				add	[data_219],bh		; (2F94:3D87=6Fh)
2F94:3E84  C3					retn
				joy_poll_v2	endp

2F94:3E85  000C[00]				db	12 dup (0)

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         di=struct with ofs, si=sprite, dx=coords, bx=size
				;
				;         Called from:   2F94:2D80
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:3E91			sub_18		proc	near
2F94:3E91  BB 0803				mov	bx,803h
2F94:3E94  E8 37F9				call	draw_sprite_xor_check_collision	; (7690)
2F94:3E97  80 3E 1330 00			cmp	[collision_1330],0	; (2F94:1330=0)
2F94:3E9C  74 04				je	loc_353			; Jump if equal
2F94:3E9E  C6 45 FA 28				mov	byte ptr [di-6],28h	; '('
2F94:3EA2			loc_353:					;  xref 2F94:3E9C
2F94:3EA2  FE C2				inc	dl
2F94:3EA4  33 DB				xor	bx,bx			; Zero register
2F94:3EA6  8A 1E 2B0B				mov	bl,[data_163]		; (2F94:2B0B=0)
2F94:3EAA  33 C0				xor	ax,ax			; Zero register
2F94:3EAC  8A 87 71E5				mov	al,[snapjumper_eye_table][bx]	; (2F94:71E5=36h)
2F94:3EB0 .BE 71A6				mov	si,offset spr_snapjumper_eyes_3b	; (2F94:71A6=14h)
2F94:3EB3  03 F0				add	si,ax
2F94:3EB5  BB 0303				mov	bx,303h
2F94:3EB8  E8 2236				call	xor_to_screen_60f1	; (60F1)
2F94:3EBB  FE CA				dec	dl
2F94:3EBD  80 3E 1330 00			cmp	[collision_1330],0	; (2F94:1330=0)
2F94:3EC2  74 01				je	loc_354			; Jump if equal
2F94:3EC4  C3					retn
2F94:3EC5			loc_354:					;  xref 2F94:3EC2
2F94:3EC5  A0 2B09				mov	al,[data_161]		; (2F94:2B09=0)
2F94:3EC8  A8 01				test	al,1
2F94:3ECA  75 03				jnz	loc_355			; Jump if not zero
2F94:3ECC  EB 3D				jmp	short loc_359		; (3F0B)
2F94:3ECE  90					db	90h
2F94:3ECF			loc_355:					;  xref 2F94:3ECA
2F94:3ECF  80 3E 2B09 07			cmp	[data_161],7		; (2F94:2B09=0)
2F94:3ED4  75 03				jne	loc_356			; Jump if not equal
2F94:3ED6  E8 0398				call	sub_9			; (4271)
2F94:3ED9			loc_356:					;  xref 2F94:3ED4
2F94:3ED9  33 C9				xor	cx,cx			; Zero register
2F94:3EDB  8A CE				mov	cl,dh
2F94:3EDD  32 F6				xor	dh,dh			; Zero register
2F94:3EDF  C6 06 2B0D 00			mov	[check_move_result],0	; (2F94:2B0D=0)
2F94:3EE4  A1 2B03				mov	ax,[systick_2b03]	; (2F94:2B03=0)
2F94:3EE7  F6 C4 01				test	ah,1
2F94:3EEA  74 10				jz	loc_357			; Jump if zero
2F94:3EEC  E8 0064				call	sub_6			; (3F53)
2F94:3EEF  80 3E 2B0D 00			cmp	[check_move_result],0	; (2F94:2B0D=0)
2F94:3EF4  77 13				ja	loc_358			; Jump if above
2F94:3EF6  E8 028B				call	sub_7			; (4184)
2F94:3EF9  EB 0E				jmp	short loc_358		; (3F09)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 119

2F94:3EFB  90					db	90h
2F94:3EFC			loc_357:					;  xref 2F94:3EEA
2F94:3EFC  E8 0285				call	sub_7			; (4184)
2F94:3EFF  80 3E 2B0D 00			cmp	[check_move_result],0	; (2F94:2B0D=0)
2F94:3F04  77 03				ja	loc_358			; Jump if above
2F94:3F06  E8 004A				call	sub_6			; (3F53)
2F94:3F09			loc_358:					;  xref 2F94:3EF4, 3EF9, 3F04
2F94:3F09  8A F1				mov	dh,cl
2F94:3F0B			loc_359:					;  xref 2F94:3ECC
2F94:3F0B .BE 718E				mov	si,offset spr_snapjumper_3b	; (2F94:718E=0FFh)
2F94:3F0E  BB 0803				mov	bx,803h
2F94:3F11  E8 21DD				call	xor_to_screen_60f1	; (60F1)
2F94:3F14  FE 0E 2B09				dec	[data_161]		; (2F94:2B09=0)
2F94:3F18  75 1B				jnz	loc_360			; Jump if not zero
2F94:3F1A  A0 2B03				mov	al,byte ptr [systick_2b03]	; (2F94:2B03=0)
2F94:3F1D  24 07				and	al,7
2F94:3F1F  04 05				add	al,5
2F94:3F21  A2 2B09				mov	[data_161],al		; (2F94:2B09=0)
2F94:3F24  8B 1E 2B03				mov	bx,[systick_2b03]	; (2F94:2B03=0)
2F94:3F28  D1 CB				ror	bx,1			; Rotate
2F94:3F2A  89 1E 2B03				mov	[systick_2b03],bx	; (2F94:2B03=0)
2F94:3F2E  80 E3 0F				and	bl,0Fh
2F94:3F31  88 1E 2B0B				mov	[data_163],bl		; (2F94:2B0B=0)
2F94:3F35			loc_360:					;  xref 2F94:3F18
2F94:3F35  33 DB				xor	bx,bx			; Zero register
2F94:3F37  8A 1E 2B0B				mov	bl,[data_163]		; (2F94:2B0B=0)
2F94:3F3B  FE C2				inc	dl
2F94:3F3D  33 C0				xor	ax,ax			; Zero register
2F94:3F3F  8A 87 71E5				mov	al,[snapjumper_eye_table][bx]	; (2F94:71E5=36h)
2F94:3F43 .BE 71A6				mov	si,offset spr_snapjumper_eyes_3b	; (2F94:71A6=14h)
2F94:3F46  03 F0				add	si,ax
2F94:3F48  BB 0303				mov	bx,303h
2F94:3F4B  E8 21A3				call	xor_to_screen_60f1	; (60F1)
2F94:3F4E  FE CA				dec	dl
2F94:3F50  33 C0				xor	ax,ax			; Zero register
2F94:3F52  C3					retn
				sub_18		endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                              SUBROUTINE
				;
				;         Called from:   2F94:3EEC, 3F06
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:3F53			sub_6		proc	near
2F94:3F53  8B F2				mov	si,dx
2F94:3F55  E8 030B				call	sub_8			; (4263)
2F94:3F58  FE C8				dec	al
2F94:3F5A  3A 0E 2B07				cmp	cl,[data_159]		; (2F94:2B07=0)
2F94:3F5E  77 06				ja	loc_362			; Jump if above
2F94:3F60  72 01				jc	loc_361			; Jump if carry Set
2F94:3F62  C3					retn
2F94:3F63			loc_361:					;  xref 2F94:3F60
2F94:3F63  E9 010D				jmp	loc_371			; (4073)
2F94:3F66			loc_362:					;  xref 2F94:3F5E
2F94:3F66  D1 E6				shl	si,1			; Shift w/zeros fill
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 120

2F94:3F68  8B 9C 68E0				mov	bx,[line_offsets_table][si]	; (2F94:68E0=0)
2F94:3F6C  03 D9				add	bx,cx
2F94:3F6E  3C 01				cmp	al,1
2F94:3F70  72 09				jb	loc_ret_363		; Jump if below
2F94:3F72  74 08				jz	loc_364			; Jump if zero
2F94:3F74  3C 02				cmp	al,2
2F94:3F76  74 51				je	loc_366			; Jump if equal
2F94:3F78  E9 00A2				jmp	loc_368			; (401D)

2F94:3F7B			loc_ret_363:					;  xref 2F94:3F70
2F94:3F7B  C3					retn
2F94:3F7C			loc_364:					;  xref 2F94:3F72
2F94:3F7C  FE CB				dec	bl
2F94:3F7E  FE CB				dec	bl
2F94:3F80  26: F7 07 0AAA			test	word ptr es:[bx],0AAAh
2F94:3F85  75 41				jnz	loc_ret_365		; Jump if not zero
2F94:3F87  26: F7 47 50 0AAA			test	word ptr es:[bx+50h],0AAAh
2F94:3F8D  75 39				jnz	loc_ret_365		; Jump if not zero
2F94:3F8F  26: F7 87 00A0 0AAA			test	word ptr es:[data_20e][bx],0AAAh	; (2F94:00A0=0)
2F94:3F96  75 30				jnz	loc_ret_365		; Jump if not zero
2F94:3F98  26: F7 87 00F0 0AAA			test	word ptr es:[data_24e][bx],0AAAh	; (2F94:00F0=0)
2F94:3F9F  75 27				jnz	loc_ret_365		; Jump if not zero
2F94:3FA1  8B F2				mov	si,dx
2F94:3FA3  46					inc	si
2F94:3FA4  D1 E6				shl	si,1			; Shift w/zeros fill
2F94:3FA6  8B 9C 68E0				mov	bx,[line_offsets_table][si]	; (2F94:68E0=0)
2F94:3FAA  03 D9				add	bx,cx
2F94:3FAC  26: F7 47 FE 0AAA			test	word ptr es:[bx-2],0AAAh
2F94:3FB2  75 14				jnz	loc_ret_365		; Jump if not zero
2F94:3FB4  26: F7 87 00EE 0AAA			test	word ptr es:[data_23e][bx],0AAAh	; (2F94:00EE=0)
2F94:3FBB  75 0B				jnz	loc_ret_365		; Jump if not zero
2F94:3FBD  2A C8				sub	cl,al
2F94:3FBF  79 07				jns	loc_ret_365		; Jump if not sign
2F94:3FC1  32 C9				xor	cl,cl			; Zero register
2F94:3FC3  C6 06 2B0D 03			mov	[check_move_result],3	; (2F94:2B0D=0)

2F94:3FC8			loc_ret_365:					;  xref 2F94:3F85, 3F8D, 3F96, 3F9F
										;            3FB2, 3FBB, 3FBF
2F94:3FC8  C3					retn
2F94:3FC9			loc_366:					;  xref 2F94:3F76
2F94:3FC9  FE CB				dec	bl
2F94:3FCB  2A D8				sub	bl,al
2F94:3FCD  26: F7 07 0AAA			test	word ptr es:[bx],0AAAh
2F94:3FD2  75 48				jnz	loc_ret_367		; Jump if not zero
2F94:3FD4  26: F7 47 50 0AAA			test	word ptr es:[bx+50h],0AAAh
2F94:3FDA  75 40				jnz	loc_ret_367		; Jump if not zero
2F94:3FDC  26: F7 87 00A0 0AAA			test	word ptr es:[data_20e][bx],0AAAh	; (2F94:00A0=0)
2F94:3FE3  75 37				jnz	loc_ret_367		; Jump if not zero
2F94:3FE5  26: F7 87 00F0 0AAA			test	word ptr es:[data_24e][bx],0AAAh	; (2F94:00F0=0)
2F94:3FEC  75 2E				jnz	loc_ret_367		; Jump if not zero
2F94:3FEE  8B F2				mov	si,dx
2F94:3FF0  46					inc	si
2F94:3FF1  D1 E6				shl	si,1			; Shift w/zeros fill
2F94:3FF3  8B 9C 68E0				mov	bx,[line_offsets_table][si]	; (2F94:68E0=0)
2F94:3FF7  03 D9				add	bx,cx
2F94:3FF9  26: F7 47 FD 0AAA			test	word ptr es:[bx-3],0AAAh
2F94:3FFF  75 1B				jnz	loc_ret_367		; Jump if not zero
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 121

2F94:4001  26: F6 47 FF AA			test	byte ptr es:[bx-1],0AAh
2F94:4006  75 14				jnz	loc_ret_367		; Jump if not zero
2F94:4008  26: F7 87 00ED 0AAA			test	word ptr es:[data_21e+1][bx],0AAAh	; (2F94:00ED=0)
2F94:400F  75 0B				jnz	loc_ret_367		; Jump if not zero
2F94:4011  2A C8				sub	cl,al
2F94:4013  79 07				jns	loc_ret_367		; Jump if not sign
2F94:4015  32 C9				xor	cl,cl			; Zero register
2F94:4017  C6 06 2B0D 03			mov	[check_move_result],3	; (2F94:2B0D=0)

2F94:401C			loc_ret_367:					;  xref 2F94:3FD2, 3FDA, 3FE3, 3FEC
										;            3FFF, 4006, 400F, 4013
2F94:401C  C3					retn
2F94:401D			loc_368:					;  xref 2F94:3F78
2F94:401D  FE CB				dec	bl
2F94:401F  2A D8				sub	bl,al
2F94:4021  26: F7 07 0AAA			test	word ptr es:[bx],0AAAh
2F94:4026  75 49				jnz	loc_ret_369		; Jump if not zero
2F94:4028  26: F7 47 50 0AAA			test	word ptr es:[bx+50h],0AAAh
2F94:402E  75 41				jnz	loc_ret_369		; Jump if not zero
2F94:4030  26: F7 87 00A0 0AAA			test	word ptr es:[data_20e][bx],0AAAh	; (2F94:00A0=0)
2F94:4037  75 38				jnz	loc_ret_369		; Jump if not zero
2F94:4039  26: F7 87 00F0 0AAA			test	word ptr es:[data_24e][bx],0AAAh	; (2F94:00F0=0)
2F94:4040  75 2F				jnz	loc_ret_369		; Jump if not zero
2F94:4042  8B F2				mov	si,dx
2F94:4044  46					inc	si
2F94:4045  D1 E6				shl	si,1			; Shift w/zeros fill
2F94:4047  8B 9C 68E0				mov	bx,[line_offsets_table][si]	; (2F94:68E0=0)
2F94:404B  03 D9				add	bx,cx
2F94:404D  26: F7 47 FC 0AAA			test	word ptr es:[bx-4],0AAAh
2F94:4053  75 1C				jnz	loc_ret_369		; Jump if not zero
2F94:4055  26: F7 47 FE 0AAA			test	word ptr es:[bx-2],0AAAh
2F94:405B  75 14				jnz	loc_ret_369		; Jump if not zero
2F94:405D  26: F7 87 00EC 0AAA			test	word ptr es:[data_21e][bx],0AAAh	; (2F94:00EC=0)
2F94:4064  75 0B				jnz	loc_ret_369		; Jump if not zero
2F94:4066  2A C8				sub	cl,al
2F94:4068  79 07				jns	loc_ret_369		; Jump if not sign
2F94:406A  32 C9				xor	cl,cl			; Zero register
2F94:406C  C6 06 2B0D 03			mov	[check_move_result],3	; (2F94:2B0D=0)

2F94:4071			loc_ret_369:					;  xref 2F94:4026, 402E, 4037, 4040
										;            4053, 405B, 4064, 4068
2F94:4071  C3					retn

2F94:4072			loc_ret_370:					;  xref 2F94:407D, 4095, 409D, 40A6
										;            40AF, 40C2, 40CB, 40D7
2F94:4072  C3					retn
2F94:4073			loc_371:					;  xref 2F94:3F63
2F94:4073  D1 E6				shl	si,1			; Shift w/zeros fill
2F94:4075  8B 9C 68E0				mov	bx,[line_offsets_table][si]	; (2F94:68E0=0)
2F94:4079  03 D9				add	bx,cx
2F94:407B  3C 01				cmp	al,1
2F94:407D  72 F3				jb	loc_ret_370		; Jump if below
2F94:407F  74 0C				jz	loc_372			; Jump if zero
2F94:4081  83 C3 04				add	bx,4
2F94:4084  3C 02				cmp	al,2
2F94:4086  7C 05				jl	loc_372			; Jump if <
2F94:4088  74 52				jz	loc_373			; Jump if zero
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 122

2F94:408A  E9 00A2				jmp	loc_375			; (412F)
2F94:408D			loc_372:					;  xref 2F94:407F, 4086
2F94:408D  83 C3 03				add	bx,3
2F94:4090  26: F7 07 AAA0			test	word ptr es:[bx],0AAA0h
2F94:4095  75 DB				jnz	loc_ret_370		; Jump if not zero
2F94:4097  26: F7 47 50 AAA0			test	word ptr es:[bx+50h],0AAA0h
2F94:409D  75 D3				jnz	loc_ret_370		; Jump if not zero
2F94:409F  26: F7 87 00A0 AAA0			test	word ptr es:[data_20e][bx],0AAA0h	; (2F94:00A0=0)
2F94:40A6  75 CA				jnz	loc_ret_370		; Jump if not zero
2F94:40A8  26: F7 87 00F0 AAA0			test	word ptr es:[data_24e][bx],0AAA0h	; (2F94:00F0=0)
2F94:40AF  75 C1				jnz	loc_ret_370		; Jump if not zero
2F94:40B1  8B F2				mov	si,dx
2F94:40B3  46					inc	si
2F94:40B4  D1 E6				shl	si,1			; Shift w/zeros fill
2F94:40B6  8B 9C 68E0				mov	bx,[line_offsets_table][si]	; (2F94:68E0=0)
2F94:40BA  03 D9				add	bx,cx
2F94:40BC  26: F7 47 03 AAA0			test	word ptr es:[bx+3],0AAA0h
2F94:40C2  75 AE				jnz	loc_ret_370		; Jump if not zero
2F94:40C4  26: F7 87 00F3 AAA0			test	word ptr es:[data_25e][bx],0AAA0h	; (2F94:00F3=0)
2F94:40CB  75 A5				jnz	loc_ret_370		; Jump if not zero
2F94:40CD  C6 06 2B0D 04			mov	[check_move_result],4	; (2F94:2B0D=0)
2F94:40D2  02 C8				add	cl,al
2F94:40D4  80 F9 4D				cmp	cl,4Dh			; 'M'
2F94:40D7  76 99				jbe	loc_ret_370		; Jump if below or =
2F94:40D9  B1 4D				mov	cl,4Dh			; 'M'
2F94:40DB  C3					retn
2F94:40DC			loc_373:					;  xref 2F94:4088
2F94:40DC  26: F7 07 AAA0			test	word ptr es:[bx],0AAA0h
2F94:40E1  75 4B				jnz	loc_ret_374		; Jump if not zero
2F94:40E3  26: F7 47 50 AAA0			test	word ptr es:[bx+50h],0AAA0h
2F94:40E9  75 43				jnz	loc_ret_374		; Jump if not zero
2F94:40EB  26: F7 87 00A0 AAA0			test	word ptr es:[data_20e][bx],0AAA0h	; (2F94:00A0=0)
2F94:40F2  75 3A				jnz	loc_ret_374		; Jump if not zero
2F94:40F4  26: F7 87 00F0 AAA0			test	word ptr es:[data_24e][bx],0AAA0h	; (2F94:00F0=0)
2F94:40FB  75 31				jnz	loc_ret_374		; Jump if not zero
2F94:40FD  8B F2				mov	si,dx
2F94:40FF  46					inc	si
2F94:4100  D1 E6				shl	si,1			; Shift w/zeros fill
2F94:4102  8B 9C 68E0				mov	bx,[line_offsets_table][si]	; (2F94:68E0=0)
2F94:4106  03 D9				add	bx,cx
2F94:4108  26: F7 47 04 AAA0			test	word ptr es:[bx+4],0AAA0h
2F94:410E  75 1E				jnz	loc_ret_374		; Jump if not zero
2F94:4110  26: F6 47 03 AA			test	byte ptr es:[bx+3],0AAh
2F94:4115  75 17				jnz	loc_ret_374		; Jump if not zero
2F94:4117  26: F7 87 00F4 AAA0			test	word ptr es:[data_25e+1][bx],0AAA0h	; (2F94:00F4=0)
2F94:411E  75 0E				jnz	loc_ret_374		; Jump if not zero
2F94:4120  C6 06 2B0D 04			mov	[check_move_result],4	; (2F94:2B0D=0)
2F94:4125  02 C8				add	cl,al
2F94:4127  80 F9 4D				cmp	cl,4Dh			; 'M'
2F94:412A  76 02				jbe	loc_ret_374		; Jump if below or =
2F94:412C  B1 4D				mov	cl,4Dh			; 'M'

2F94:412E			loc_ret_374:					;  xref 2F94:40E1, 40E9, 40F2, 40FB
										;            410E, 4115, 411E, 412A
										;            4135, 413D, 4146, 414F
										;            4162, 416A, 4173, 417F
2F94:412E  C3					retn
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 123

2F94:412F			loc_375:					;  xref 2F94:408A
2F94:412F  43					inc	bx
2F94:4130  26: F7 07 AAA0			test	word ptr es:[bx],0AAA0h
2F94:4135  75 F7				jnz	loc_ret_374		; Jump if not zero
2F94:4137  26: F7 47 50 AAA0			test	word ptr es:[bx+50h],0AAA0h
2F94:413D  75 EF				jnz	loc_ret_374		; Jump if not zero
2F94:413F  26: F7 87 00A0 AAA0			test	word ptr es:[data_20e][bx],0AAA0h	; (2F94:00A0=0)
2F94:4146  75 E6				jnz	loc_ret_374		; Jump if not zero
2F94:4148  26: F7 87 00F0 AAA0			test	word ptr es:[data_24e][bx],0AAA0h	; (2F94:00F0=0)
2F94:414F  75 DD				jnz	loc_ret_374		; Jump if not zero
2F94:4151  8B F2				mov	si,dx
2F94:4153  46					inc	si
2F94:4154  D1 E6				shl	si,1			; Shift w/zeros fill
2F94:4156  8B 9C 68E0				mov	bx,[line_offsets_table][si]	; (2F94:68E0=0)
2F94:415A  03 D9				add	bx,cx
2F94:415C  26: F7 47 05 AAA0			test	word ptr es:data_8e[bx],0AAA0h	; (2F94:0005=0)
2F94:4162  75 CA				jnz	loc_ret_374		; Jump if not zero
2F94:4164  26: F7 47 03 AAAA			test	word ptr es:[bx+3],0AAAAh
2F94:416A  75 C2				jnz	loc_ret_374		; Jump if not zero
2F94:416C  26: F7 87 00F5 AAA0			test	word ptr es:[data_27e][bx],0AAA0h	; (2F94:00F5=0)
2F94:4173  75 B9				jnz	loc_ret_374		; Jump if not zero
2F94:4175  C6 06 2B0D 04			mov	[check_move_result],4	; (2F94:2B0D=0)
2F94:417A  02 C8				add	cl,al
2F94:417C  80 F9 4D				cmp	cl,4Dh			; 'M'
2F94:417F  76 AD				jbe	loc_ret_374		; Jump if below or =
2F94:4181  B1 4D				mov	cl,4Dh			; 'M'
2F94:4183  C3					retn
				sub_6		endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                              SUBROUTINE
				;
				;         Called from:   2F94:3EF6, 3EFC
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:4184			sub_7		proc	near
2F94:4184  8B F2				mov	si,dx
2F94:4186  E8 00DA				call	sub_8			; (4263)
2F94:4189  D0 E0				shl	al,1			; Shift w/zeros fill
2F94:418B  3A 16 2B08				cmp	dl,[data_160]		; (2F94:2B08=0)
2F94:418F  72 69				jb	loc_384			; Jump if below
2F94:4191  77 01				ja	loc_376			; Jump if above
2F94:4193  C3					retn
2F94:4194			loc_376:					;  xref 2F94:4191
2F94:4194  2B F0				sub	si,ax
2F94:4196  D1 E6				shl	si,1			; Shift w/zeros fill
2F94:4198  8B 9C 68E0				mov	bx,[line_offsets_table][si]	; (2F94:68E0=0)
2F94:419C  03 D9				add	bx,cx
2F94:419E  26: F6 47 FF AA			test	byte ptr es:[bx-1],0AAh
2F94:41A3  74 03				jz	loc_377			; Jump if zero
2F94:41A5  E9 00BA				jmp	loc_ret_391		; (4262)
2F94:41A8			loc_377:					;  xref 2F94:41A3
2F94:41A8  26: F7 07 AAAA			test	word ptr es:[bx],0AAAAh
2F94:41AD  74 03				jz	loc_378			; Jump if zero
2F94:41AF  E9 00B0				jmp	loc_ret_391		; (4262)
2F94:41B2			loc_378:					;  xref 2F94:41AD
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 124

2F94:41B2  26: F7 47 02 AAAA			test	word ptr es:[bx+2],0AAAAh
2F94:41B8  74 03				jz	loc_379			; Jump if zero
2F94:41BA  E9 00A5				jmp	loc_ret_391		; (4262)
2F94:41BD			loc_379:					;  xref 2F94:41B8
2F94:41BD  8B F2				mov	si,dx
2F94:41BF  2B F0				sub	si,ax
2F94:41C1  46					inc	si
2F94:41C2  D1 E6				shl	si,1			; Shift w/zeros fill
2F94:41C4  8B 9C 68E0				mov	bx,[line_offsets_table][si]	; (2F94:68E0=0)
2F94:41C8  03 D9				add	bx,cx
2F94:41CA  26: F6 47 FF AA			test	byte ptr es:[bx-1],0AAh
2F94:41CF  74 03				jz	loc_380			; Jump if zero
2F94:41D1  E9 008E				jmp	loc_ret_391		; (4262)
2F94:41D4			loc_380:					;  xref 2F94:41CF
2F94:41D4  26: F7 07 AAAA			test	word ptr es:[bx],0AAAAh
2F94:41D9  74 03				jz	loc_381			; Jump if zero
2F94:41DB  E9 0084				jmp	loc_ret_391		; (4262)
2F94:41DE			loc_381:					;  xref 2F94:41D9
2F94:41DE  26: F7 47 02 AAAA			test	word ptr es:[bx+2],0AAAAh
2F94:41E4  74 03				jz	loc_382			; Jump if zero
2F94:41E6  EB 7A				jmp	short loc_ret_391	; (4262)
2F94:41E8  90					db	90h
2F94:41E9			loc_382:					;  xref 2F94:41E4
2F94:41E9  C6 06 2B0D 01			mov	[check_move_result],1	; (2F94:2B0D=0)
2F94:41EE  2B D0				sub	dx,ax
2F94:41F0  78 03				js	loc_383			; Jump if sign=1
2F94:41F2  EB 6E				jmp	short loc_ret_391	; (4262)
2F94:41F4  90					db	90h
2F94:41F5			loc_383:					;  xref 2F94:41F0
2F94:41F5  33 D2				xor	dx,dx			; Zero register
2F94:41F7  EB 69				jmp	short loc_ret_391	; (4262)
2F94:41F9  90					db	90h
2F94:41FA			loc_384:					;  xref 2F94:418F
2F94:41FA  83 C6 08				add	si,8
2F94:41FD  03 F0				add	si,ax
2F94:41FF  D1 E6				shl	si,1			; Shift w/zeros fill
2F94:4201  8B 9C 68E0				mov	bx,[line_offsets_table][si]	; (2F94:68E0=0)
2F94:4205  03 D9				add	bx,cx
2F94:4207  26: F6 47 FF AA			test	byte ptr es:[bx-1],0AAh
2F94:420C  74 03				jz	loc_385			; Jump if zero
2F94:420E  EB 52				jmp	short loc_ret_391	; (4262)
2F94:4210  90					db	90h
2F94:4211			loc_385:					;  xref 2F94:420C
2F94:4211  26: F7 07 AAAA			test	word ptr es:[bx],0AAAAh
2F94:4216  74 03				jz	loc_386			; Jump if zero
2F94:4218  EB 48				jmp	short loc_ret_391	; (4262)
2F94:421A  90					db	90h
2F94:421B			loc_386:					;  xref 2F94:4216
2F94:421B  26: F7 47 02 AAAA			test	word ptr es:[bx+2],0AAAAh
2F94:4221  74 03				jz	loc_387			; Jump if zero
2F94:4223  EB 3D				jmp	short loc_ret_391	; (4262)
2F94:4225  90					db	90h
2F94:4226			loc_387:					;  xref 2F94:4221
2F94:4226  8B F2				mov	si,dx
2F94:4228  83 C6 07				add	si,7
2F94:422B  03 F0				add	si,ax
2F94:422D  D1 E6				shl	si,1			; Shift w/zeros fill
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 125

2F94:422F  8B 9C 68E0				mov	bx,[line_offsets_table][si]	; (2F94:68E0=0)
2F94:4233  03 D9				add	bx,cx
2F94:4235  26: F6 47 FF AA			test	byte ptr es:[bx-1],0AAh
2F94:423A  74 03				jz	loc_388			; Jump if zero
2F94:423C  EB 24				jmp	short loc_ret_391	; (4262)
2F94:423E  90					db	90h
2F94:423F			loc_388:					;  xref 2F94:423A
2F94:423F  26: F7 07 AAAA			test	word ptr es:[bx],0AAAAh
2F94:4244  74 03				jz	loc_389			; Jump if zero
2F94:4246  EB 1A				jmp	short loc_ret_391	; (4262)
2F94:4248  90					db	90h
2F94:4249			loc_389:					;  xref 2F94:4244
2F94:4249  26: F7 47 02 AAAA			test	word ptr es:[bx+2],0AAAAh
2F94:424F  74 03				jz	loc_390			; Jump if zero
2F94:4251  EB 0F				jmp	short loc_ret_391	; (4262)
2F94:4253  90					db	90h
2F94:4254			loc_390:					;  xref 2F94:424F
2F94:4254  C6 06 2B0D 02			mov	[check_move_result],2	; (2F94:2B0D=0)
2F94:4259  02 D0				add	dl,al
2F94:425B  80 FA AA				cmp	dl,0AAh
2F94:425E  76 02				jbe	loc_ret_391		; Jump if below or =
2F94:4260  B2 AA				mov	dl,0AAh

2F94:4262			loc_ret_391:					;  xref 2F94:41A5, 41AF, 41BA, 41D1
										;            41DB, 41E6, 41F2, 41F7
										;            420E, 4218, 4223, 423C
										;            4246, 4251, 425E
2F94:4262  C3					retn
				sub_7		endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                              SUBROUTINE
				;
				;         Called from:   2F94:3F55, 4186
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:4263			sub_8		proc	near
2F94:4263  A1 2B03				mov	ax,[systick_2b03]	; (2F94:2B03=0)
2F94:4266  D1 C8				ror	ax,1			; Rotate
2F94:4268  A3 2B03				mov	[systick_2b03],ax	; (2F94:2B03=0)
2F94:426B  25 0003				and	ax,3
2F94:426E  FE C0				inc	al
2F94:4270  C3					retn
				sub_8		endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                              SUBROUTINE
				;
				;         Called from:   2F94:3ED6
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:4271			sub_9		proc	near
2F94:4271  8B 1E 2B03				mov	bx,[systick_2b03]	; (2F94:2B03=0)
2F94:4275  D0 CF				ror	bh,1			; Rotate
2F94:4277  D0 CF				ror	bh,1			; Rotate
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 126

2F94:4279  89 1E 2B03				mov	[systick_2b03],bx	; (2F94:2B03=0)
2F94:427D  80 E7 03				and	bh,3
2F94:4280  80 FF 01				cmp	bh,1
2F94:4283  74 0D				je	loc_392			; Jump if equal
2F94:4285  77 16				ja	loc_393			; Jump if above
2F94:4287  C6 06 2B07 00			mov	[data_159],0		; (2F94:2B07=0)
2F94:428C  C6 06 2B08 00			mov	[data_160],0		; (2F94:2B08=0)
2F94:4291  C3					retn
2F94:4292			loc_392:					;  xref 2F94:4283
2F94:4292  C6 06 2B07 64			mov	[data_159],64h		; (2F94:2B07=0) 'd'
2F94:4297  C6 06 2B08 00			mov	[data_160],0		; (2F94:2B08=0)
2F94:429C  C3					retn
2F94:429D			loc_393:					;  xref 2F94:4285
2F94:429D  80 FF 02				cmp	bh,2
2F94:42A0  77 0B				ja	loc_394			; Jump if above
2F94:42A2  C6 06 2B07 00			mov	[data_159],0		; (2F94:2B07=0)
2F94:42A7  C6 06 2B08 C8			mov	[data_160],0C8h		; (2F94:2B08=0)
2F94:42AC  C3					retn
2F94:42AD			loc_394:					;  xref 2F94:42A0
2F94:42AD  C6 06 2B07 64			mov	[data_159],64h		; (2F94:2B07=0) 'd'
2F94:42B2  C6 06 2B08 C8			mov	[data_160],0C8h		; (2F94:2B08=0)
2F94:42B7  C3					retn
				sub_9		endp

2F94:42B8  0008[00]				db	8 dup (0)
2F94:42C0  0000			shiv_pitch	dw	0			;  xref 2F94:4309, 453A
2F94:42C2  00			data_222	db	0			;  xref 2F94:42DD, 451E
2F94:42C3  451E			shiv_jumptab_42C3	dw	offset shiv_next	; Data table (indexed access)
										;  xref 2F94:434D
2F94:42C5  4351			data_223	dw	offset shiv_dir_1	;  xref 2F94:434D
2F94:42C7  438D			data_224	dw	offset shiv_dir_2	;  xref 2F94:434D
2F94:42C9  43BF			data_225	dw	offset shiv_dir_3	;  xref 2F94:434D
2F94:42CB  43FB			data_226	dw	offset shiv_dir_4	;  xref 2F94:434D
2F94:42CD  4429			data_227	dw	offset shiv_dir_5	;  xref 2F94:434D
2F94:42CF  4457			data_228	dw	offset shiv_dir_6	;  xref 2F94:434D
2F94:42D1  4493			data_229	dw	offset shiv_dir_7	;  xref 2F94:434D
2F94:42D3  44C5			data_230	dw	offset shiv_dir_8	;  xref 2F94:434D

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          process_shivs
				;
				;         Called from:   2F94:0242
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:42D5			process_shivs	proc	near
2F94:42D5  80 3E 293B 00			cmp	[num_shivs],0		; (2F94:293B=0)
2F94:42DA  77 01				ja	loc_395			; Jump if above
2F94:42DC  C3					retn
2F94:42DD			loc_395:					;  xref 2F94:42DA
2F94:42DD  C6 06 42C2 02			mov	[data_222],2		; (2F94:42C2=0)
2F94:42E2 .BE 2930				mov	si,offset shivs_data	; (2F94:2930=0)
2F94:42E5			loc_396:					;  xref 2F94:4564
2F94:42E5 њ80 3C 01				cmp	byte ptr [si],1
2F94:42E8  74 03				je	loc_397			; Jump if equal
2F94:42EA  E9 0231				jmp	shiv_next		; (451E)
2F94:42ED			loc_397:					;  xref 2F94:42E8
2F94:42ED  33 D2				xor	dx,dx			; Zero register
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 127

2F94:42EF  33 C9				xor	cx,cx			; Zero register
2F94:42F1  8A 4C 01				mov	cl,[si+1]
2F94:42F4  8A 54 02				mov	dl,[si+2]
2F94:42F7  8A 44 03				mov	al,[si+3]
2F94:42FA  8A 5C 04				mov	bl,[si+4]
2F94:42FD  32 FF				xor	bh,bh			; Zero register
2F94:42FF  80 C3 06				add	bl,6
2F94:4302  88 5C 04				mov	[si+4],bl
2F94:4305  D1 E3				shl	bx,1			; Shift w/zeros fill
2F94:4307  D1 E3				shl	bx,1			; Shift w/zeros fill
2F94:4309  89 1E 42C0				mov	[shiv_pitch],bx		; (2F94:42C0=0)
2F94:430D  98					cbw				; Convrt byte to word
2F94:430E  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:4310  3D 0010				cmp	ax,10h
2F94:4313  76 03				jbe	loc_398			; Jump if below or =
2F94:4315  E9 0206				jmp	shiv_next		; (451E)
2F94:4318			loc_398:					;  xref 2F94:4313
2F94:4318  83 3E 4582 00			cmp	[data_233],0		; (2F94:4582=0)
2F94:431D  75 2C				jne	loc_400			; Jump if not equal
2F94:431F  80 3E 014A 00			cmp	[data_37],0		; (2F94:014A=0)
2F94:4324  75 25				jne	loc_400			; Jump if not equal
2F94:4326  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:432B  74 14				jz	loc_399			; Jump if zero
2F94:432D  50					push	ax
2F94:432E  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:4330  0C 03				or	al,3
2F94:4332  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:4334  B0 B6				mov	al,0B6h
2F94:4336  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:4338  8B C3				mov	ax,bx
2F94:433A  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:433C  8A C4				mov	al,ah
2F94:433E  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:4340  58					pop	ax
2F94:4341			loc_399:					;  xref 2F94:432B
2F94:4341  53					push	bx
2F94:4342  8B 1E 3B66				mov	bx,word ptr [data_193]	; (2F94:3B66=0)
2F94:4346  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:434A  5B					pop	bx
2F94:434B			loc_400:					;  xref 2F94:431D, 4324
2F94:434B  8B D8				mov	bx,ax
2F94:434D  FF A7 42C3				jmp	word ptr [shiv_jumptab_42C3][bx]	;*(2F94:42C3=451Eh)  9 entries

				;ФФФФФ Indexed Entry Point ФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФ

2F94:4351			shiv_dir_1:					;  xref 2F94:42C5, 434D
2F94:4351 .BF 7E70				mov	di,offset shiv_SE	; (2F94:7E70=0Fh)
2F94:4354  BB 0C02				mov	bx,0C02h
2F94:4357  E8 D12B				call	draw_sprite_xor_v3_check_wall	; (1485)
2F94:435A  80 3E 1330 00			cmp	[collision_1330],0	; (2F94:1330=0)
2F94:435F  74 03				je	loc_401			; Jump if equal
2F94:4361  E9 019D				jmp	shiv_wall		; (4501)
2F94:4364			loc_401:					;  xref 2F94:435F
2F94:4364  80 F9 01				cmp	cl,1
2F94:4367  7C 05				jl	loc_402			; Jump if <
2F94:4369  80 FA 04				cmp	dl,4
2F94:436C  73 03				jae	shiv_fly_se		; Jump if above or =
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 128

2F94:436E			loc_402:					;  xref 2F94:4367
2F94:436E  E9 0190				jmp	shiv_wall		; (4501)
2F94:4371			shiv_fly_se:					;  xref 2F94:436C
2F94:4371  FE C9				dec	cl
2F94:4373  FE CA				dec	dl
2F94:4375  FE CA				dec	dl
2F94:4377  FE CA				dec	dl
2F94:4379  FE CA				dec	dl
2F94:437B  88 4C 01				mov	[si+1],cl
2F94:437E  88 54 02				mov	[si+2],dl
2F94:4381  BB 0C02				mov	bx,0C02h
2F94:4384 .BF 7E70				mov	di,offset shiv_SE	; (2F94:7E70=0Fh)
2F94:4387  E8 D0C6				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:438A  E9 0191				jmp	shiv_next		; (451E)

				;ФФФФФ Indexed Entry Point ФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФ

2F94:438D			shiv_dir_2:					;  xref 2F94:42C7, 434D
2F94:438D .BF 7E7C				mov	di,offset shiv_N	; (2F94:7E7C=0)
2F94:4390  BB 0E02				mov	bx,0E02h
2F94:4393  E8 D0EF				call	draw_sprite_xor_v3_check_wall	; (1485)
2F94:4396  80 3E 1330 00			cmp	[collision_1330],0	; (2F94:1330=0)
2F94:439B  74 03				je	loc_403			; Jump if equal
2F94:439D  E9 0161				jmp	shiv_wall		; (4501)
2F94:43A0			loc_403:					;  xref 2F94:439B
2F94:43A0  80 FA 04				cmp	dl,4
2F94:43A3  73 03				jae	shiv_fly_n		; Jump if above or =
2F94:43A5  E9 0159				jmp	shiv_wall		; (4501)
2F94:43A8			shiv_fly_n:					;  xref 2F94:43A3
2F94:43A8  FE CA				dec	dl
2F94:43AA  FE CA				dec	dl
2F94:43AC  FE CA				dec	dl
2F94:43AE  FE CA				dec	dl
2F94:43B0  88 54 02				mov	[si+2],dl
2F94:43B3  BB 0E02				mov	bx,0E02h
2F94:43B6 .BF 7E7C				mov	di,offset shiv_N	; (2F94:7E7C=0)
2F94:43B9  E8 D094				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:43BC  E9 015F				jmp	shiv_next		; (451E)

				;ФФФФФ Indexed Entry Point ФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФ

2F94:43BF			shiv_dir_3:					;  xref 2F94:42C9, 434D
2F94:43BF .BF 7E8A				mov	di,offset shiv_SW	; (2F94:7E8A=0)
2F94:43C2  BB 0C02				mov	bx,0C02h
2F94:43C5  E8 D0BD				call	draw_sprite_xor_v3_check_wall	; (1485)
2F94:43C8  80 3E 1330 00			cmp	[collision_1330],0	; (2F94:1330=0)
2F94:43CD  74 03				je	loc_404			; Jump if equal
2F94:43CF  E9 012F				jmp	shiv_wall		; (4501)
2F94:43D2			loc_404:					;  xref 2F94:43CD
2F94:43D2  80 F9 4C				cmp	cl,4Ch			; 'L'
2F94:43D5  77 05				ja	loc_405			; Jump if above
2F94:43D7  80 FA 04				cmp	dl,4
2F94:43DA  73 03				jae	shiv_fly_sw		; Jump if above or =
2F94:43DC			loc_405:					;  xref 2F94:43D5
2F94:43DC  E9 0122				jmp	shiv_wall		; (4501)
2F94:43DF			shiv_fly_sw:					;  xref 2F94:43DA
2F94:43DF  FE C1				inc	cl
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 129

2F94:43E1  FE CA				dec	dl
2F94:43E3  FE CA				dec	dl
2F94:43E5  FE CA				dec	dl
2F94:43E7  FE CA				dec	dl
2F94:43E9  88 4C 01				mov	[si+1],cl
2F94:43EC  88 54 02				mov	[si+2],dl
2F94:43EF  BB 0C02				mov	bx,0C02h
2F94:43F2 .BF 7E8A				mov	di,offset shiv_SW	; (2F94:7E8A=0)
2F94:43F5  E8 D058				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:43F8  E9 0123				jmp	shiv_next		; (451E)

				;ФФФФФ Indexed Entry Point ФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФ

2F94:43FB			shiv_dir_4:					;  xref 2F94:42CB, 434D
2F94:43FB .BF 7E96				mov	di,offset shiv_E	; (2F94:7E96=0)
2F94:43FE  BB 0A02				mov	bx,0A02h
2F94:4401  E8 D081				call	draw_sprite_xor_v3_check_wall	; (1485)
2F94:4404  80 3E 1330 00			cmp	[collision_1330],0	; (2F94:1330=0)
2F94:4409  74 03				je	loc_406			; Jump if equal
2F94:440B  E9 00F3				jmp	shiv_wall		; (4501)
2F94:440E			loc_406:					;  xref 2F94:4409
2F94:440E  80 F9 02				cmp	cl,2
2F94:4411  73 03				jae	shiv_fly_e		; Jump if above or =
2F94:4413  E9 00EB				jmp	shiv_wall		; (4501)
2F94:4416			shiv_fly_e:					;  xref 2F94:4411
2F94:4416  FE C9				dec	cl
2F94:4418  FE C9				dec	cl
2F94:441A  88 4C 01				mov	[si+1],cl
2F94:441D  BB 0A02				mov	bx,0A02h
2F94:4420 .BF 7E96				mov	di,offset shiv_E	; (2F94:7E96=0)
2F94:4423  E8 D02A				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:4426  E9 00F5				jmp	shiv_next		; (451E)

				;ФФФФФ Indexed Entry Point ФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФ

2F94:4429			shiv_dir_5:					;  xref 2F94:42CD, 434D
2F94:4429 .BF 7EA0				mov	di,offset shiv_W	; (2F94:7EA0=0Ch)
2F94:442C  BB 0A02				mov	bx,0A02h
2F94:442F  E8 D053				call	draw_sprite_xor_v3_check_wall	; (1485)
2F94:4432  80 3E 1330 00			cmp	[collision_1330],0	; (2F94:1330=0)
2F94:4437  74 03				je	loc_407			; Jump if equal
2F94:4439  E9 00C5				jmp	shiv_wall		; (4501)
2F94:443C			loc_407:					;  xref 2F94:4437
2F94:443C  80 F9 4C				cmp	cl,4Ch			; 'L'
2F94:443F  76 03				jbe	shiv_fly_w		; Jump if below or =
2F94:4441  E9 00BD				jmp	shiv_wall		; (4501)
2F94:4444			shiv_fly_w:					;  xref 2F94:443F
2F94:4444  FE C1				inc	cl
2F94:4446  FE C1				inc	cl
2F94:4448  88 4C 01				mov	[si+1],cl
2F94:444B  BB 0A02				mov	bx,0A02h
2F94:444E .BF 7EA0				mov	di,offset shiv_W	; (2F94:7EA0=0Ch)
2F94:4451  E8 CFFC				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:4454  E9 00C7				jmp	shiv_next		; (451E)

				;ФФФФФ Indexed Entry Point ФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФ

           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 130

2F94:4457			shiv_dir_6:					;  xref 2F94:42CF, 434D
2F94:4457 .BF 7EAA				mov	di,offset shiv_NE	; (2F94:7EAA=0)
2F94:445A  BB 0C02				mov	bx,0C02h
2F94:445D  E8 D025				call	draw_sprite_xor_v3_check_wall	; (1485)
2F94:4460  80 3E 1330 00			cmp	[collision_1330],0	; (2F94:1330=0)
2F94:4465  74 03				je	loc_408			; Jump if equal
2F94:4467  E9 0097				jmp	shiv_wall		; (4501)
2F94:446A			loc_408:					;  xref 2F94:4465
2F94:446A  80 F9 01				cmp	cl,1
2F94:446D  7C 05				jl	loc_409			; Jump if <
2F94:446F  80 FA A8				cmp	dl,0A8h
2F94:4472  76 03				jbe	shiv_fly_ne		; Jump if below or =
2F94:4474			loc_409:					;  xref 2F94:446D
2F94:4474  E9 008A				jmp	shiv_wall		; (4501)
2F94:4477			shiv_fly_ne:					;  xref 2F94:4472
2F94:4477  FE C9				dec	cl
2F94:4479  FE C2				inc	dl
2F94:447B  FE C2				inc	dl
2F94:447D  FE C2				inc	dl
2F94:447F  FE C2				inc	dl
2F94:4481  88 4C 01				mov	[si+1],cl
2F94:4484  88 54 02				mov	[si+2],dl
2F94:4487  BB 0C02				mov	bx,0C02h
2F94:448A .BF 7EAA				mov	di,offset shiv_NE	; (2F94:7EAA=0)
2F94:448D  E8 CFC0				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:4490  E9 008B				jmp	shiv_next		; (451E)

				;ФФФФФ Indexed Entry Point ФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФ

2F94:4493			shiv_dir_7:					;  xref 2F94:42D1, 434D
2F94:4493 .BF 7EB6				mov	di,offset shiv_S	; (2F94:7EB6=3)
2F94:4496  BB 0E02				mov	bx,0E02h
2F94:4499  E8 CFE9				call	draw_sprite_xor_v3_check_wall	; (1485)
2F94:449C  80 3E 1330 00			cmp	[collision_1330],0	; (2F94:1330=0)
2F94:44A1  74 03				je	loc_410			; Jump if equal
2F94:44A3  EB 5C				jmp	short shiv_wall		; (4501)
2F94:44A5  90					db	90h
2F94:44A6			loc_410:					;  xref 2F94:44A1
2F94:44A6  80 FA A8				cmp	dl,0A8h
2F94:44A9  76 03				jbe	shiv_fly_s		; Jump if below or =
2F94:44AB  EB 54				jmp	short shiv_wall		; (4501)
2F94:44AD  90					db	90h
2F94:44AE			shiv_fly_s:					;  xref 2F94:44A9
2F94:44AE  FE C2				inc	dl
2F94:44B0  FE C2				inc	dl
2F94:44B2  FE C2				inc	dl
2F94:44B4  FE C2				inc	dl
2F94:44B6  88 54 02				mov	[si+2],dl
2F94:44B9  BB 0E02				mov	bx,0E02h
2F94:44BC .BF 7EB6				mov	di,offset shiv_S	; (2F94:7EB6=3)
2F94:44BF  E8 CF8E				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:44C2  EB 5A				jmp	short shiv_next		; (451E)
2F94:44C4  90					db	90h

				;ФФФФФ Indexed Entry Point ФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФ

2F94:44C5			shiv_dir_8:					;  xref 2F94:42D3, 434D
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 131

2F94:44C5 .BF 7EC4				mov	di,offset shiv_NW	; (2F94:7EC4=0C3h)
2F94:44C8  BB 0C02				mov	bx,0C02h
2F94:44CB  E8 CFB7				call	draw_sprite_xor_v3_check_wall	; (1485)
2F94:44CE  80 3E 1330 00			cmp	[collision_1330],0	; (2F94:1330=0)
2F94:44D3  74 03				je	loc_411			; Jump if equal
2F94:44D5  EB 2A				jmp	short shiv_wall		; (4501)
2F94:44D7  90					db	90h
2F94:44D8			loc_411:					;  xref 2F94:44D3
2F94:44D8  80 F9 4C				cmp	cl,4Ch			; 'L'
2F94:44DB  77 05				ja	loc_412			; Jump if above
2F94:44DD  80 FA A8				cmp	dl,0A8h
2F94:44E0  76 03				jbe	shiv_fly_sw		; Jump if below or =
2F94:44E2			loc_412:					;  xref 2F94:44DB
2F94:44E2  EB 1D				jmp	short shiv_wall		; (4501)
2F94:44E4  90					db	90h
2F94:44E5			shiv_fly_sw:					;  xref 2F94:44E0
2F94:44E5  FE C1				inc	cl
2F94:44E7  FE C2				inc	dl
2F94:44E9  FE C2				inc	dl
2F94:44EB  FE C2				inc	dl
2F94:44ED  FE C2				inc	dl
2F94:44EF  88 4C 01				mov	[si+1],cl
2F94:44F2  88 54 02				mov	[si+2],dl
2F94:44F5  BB 0C02				mov	bx,0C02h
2F94:44F8 .BF 7EC4				mov	di,offset shiv_NW	; (2F94:7EC4=0C3h)
2F94:44FB  E8 CF52				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:44FE  EB 1E				jmp	short shiv_next		; (451E)
2F94:4500  90					db	90h
2F94:4501			shiv_wall:					;  xref 2F94:4361, 436E, 439D, 43A5
										;            43CF, 43DC, 440B, 4413
										;            4439, 4441, 4467, 4474
										;            44A3, 44AB, 44D5, 44E2
2F94:4501  C6 04 00				mov	byte ptr [si],0
2F94:4504  FE 0E 293B				dec	[num_shivs]		; (2F94:293B=0)
2F94:4508  83 3E 4582 00			cmp	[data_233],0		; (2F94:4582=0)
2F94:450D  75 0F				jne	shiv_next		; Jump if not equal
2F94:450F  80 3E 014A 00			cmp	[data_37],0		; (2F94:014A=0)
2F94:4514  75 08				jne	shiv_next		; Jump if not equal
2F94:4516  50					push	ax
2F94:4517  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:4519  24 FC				and	al,0FCh
2F94:451B  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
										;  al = 0, speaker off
2F94:451D  58					pop	ax

				;ФФФФФ Indexed Entry Point ФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФФ

2F94:451E			shiv_next:					;  xref 2F94:42C3, 42EA, 4315, 434D
										;            438A, 43BC, 43F8, 4426
										;            4454, 4490, 44C2, 44FE
										;            450D, 4514
2F94:451E  FE 0E 42C2				dec	[data_222]		; (2F94:42C2=0)
2F94:4522  74 43				jz	loc_415			; Jump if zero
2F94:4524  83 C6 05				add	si,5
2F94:4527  83 3E 4582 00			cmp	[data_233],0		; (2F94:4582=0)
2F94:452C  75 36				jne	loc_414			; Jump if not equal
2F94:452E  80 3E 014A 00			cmp	[data_37],0		; (2F94:014A=0)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 132

2F94:4533  75 2F				jne	loc_414			; Jump if not equal
2F94:4535  51					push	cx
2F94:4536  8B 0E 3B68				mov	cx,[data_194]		; (2F94:3B68=0)
2F94:453A  2B 0E 42C0				sub	cx,[shiv_pitch]		; (2F94:42C0=0)
2F94:453E  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:4543  74 14				jz	loc_413			; Jump if zero
2F94:4545  50					push	ax
2F94:4546  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:4548  0C 03				or	al,3
2F94:454A  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:454C  B0 B6				mov	al,0B6h
2F94:454E  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:4550  8B C1				mov	ax,cx
2F94:4552  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:4554  8A C4				mov	al,ah
2F94:4556  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:4558  58					pop	ax
2F94:4559			loc_413:					;  xref 2F94:4543
2F94:4559  53					push	bx
2F94:455A  8B 1E 3B68				mov	bx,[data_194]		; (2F94:3B68=0)
2F94:455E  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:4562  5B					pop	bx
2F94:4563  59					pop	cx
2F94:4564			loc_414:					;  xref 2F94:452C, 4533
2F94:4564  E9 FD7E				jmp	loc_396			; (42E5)
2F94:4567			loc_415:					;  xref 2F94:4522
2F94:4567  83 3E 4582 00			cmp	[data_233],0		; (2F94:4582=0)
2F94:456C  75 0F				jne	loc_ret_416		; Jump if not equal
2F94:456E  80 3E 014A 00			cmp	[data_37],0		; (2F94:014A=0)
2F94:4573  75 08				jne	loc_ret_416		; Jump if not equal
2F94:4575  50					push	ax
2F94:4576  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:4578  24 FC				and	al,0FCh
2F94:457A  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
										;  al = 0, speaker off
2F94:457C  58					pop	ax

2F94:457D			loc_ret_416:					;  xref 2F94:456C, 4573
2F94:457D  C3					retn
				process_shivs	endp

2F94:457E  00 00				db	0, 0
2F94:4580  0000			data_232	dw	0			;  xref 2F94:4685, 639E
2F94:4582  0000			data_233	dw	0			;  xref 2F94:03B9, 041B, 0494, 29C8
										;            2A73, 2ADD, 35CA, 4318
										;            4508, 4527, 4567, 4766
										;            4886, 491B, 49E9, 534C
										;            5416, 549B, 553B, 61F8
										;            61FD, 6219, 6240, 6267
										;            628C, 62B3, 62DA, 62FF
										;            6326, 634D, 6372, 6376
										;            63A4
2F94:4584  0000			data_234	dw	0			;  xref 2F94:49EF, 637D, 6394
2F94:4586  00			data_235	db	0			;  xref 2F94:03D9, 0422, 4761, 4881
										;            4916, 49E4, 61F0, 620D
2F94:4587  00					db	0
2F94:4588  00			powerup_x	db	0			;  xref 2F94:2DA5, 45C5, 4618, 46EE
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 133

										;            479E, 483A, 5735
2F94:4589  00			powerup_y	db	0			;  xref 2F94:2DAD, 45C9, 461C, 46EA
										;            4797, 483E, 5739
2F94:458A  00			data_236	db	0			;  xref 2F94:46F2, 46FC, 4701, 472A
										;            481E, 48F8, 49A1
2F94:458B  00			data_237	db	0			;  xref 2F94:4664, 46B9, 46D1, 46E0
										;            4708, 47FF, 48D9, 4C38
										;            4CB2, 573D, 5746
2F94:458C  00			powerup_animation_offset	db	0			; adds to sprite base addr
										;  xref 2F94:4620, 4652, 46A7, 46CC
										;            474B, 47A7, 47C0, 47C9
										;            47D6, 47E3, 47F2, 4847
										;            4855, 4859, 4875, 48D5
										;            4940, 4C2F, 572D
2F94:458D  05			powerup_animation_delay	db	5			;  xref 2F94:478B, 4792, 482E, 4835
2F94:458E  04			lives_remaining	db	4			;  xref 2F94:29A5, 29B1, 475A, 48B9
										;            4A51, 4A5E, 79E2, 7CA2
2F94:458F  0F			data_238	db	0Fh			;  xref 2F94:4696
2F94:4590  00 25 27 28 00 2F			db	 00h, 25h, 27h, 28h, 00h, 2Fh
2F94:4596  4E 37 27 5C 00 62			db	 4Eh, 37h, 27h, 5Ch, 00h, 62h
2F94:459C  27 7B 00				db	 27h, 7Bh, 00h
2F94:459F  6C 4E				db	 6Ch, 4Eh
2F94:45A1  02			data_239	db	2			;  xref 2F94:4641
2F94:45A2  00 06 00 12 30 3A			db	 00h, 06h, 00h, 12h, 30h, 3Ah
2F94:45A8  00 20 60 2C 30 4F			db	 00h, 20h, 60h, 2Ch, 30h, 4Fh
2F94:45AE  00 76 30 69 60 70			db	 00h, 76h, 30h, 69h, 60h, 70h
2F94:45B4  00					db	 00h
2F94:45B5  FF			found_keys	db	0FFh			; ff=no key
										;  xref 2F94:08B8, 493D, 49AE, 7C94
2F94:45B6  FF FF				db	0FFh,0FFh
2F94:45B8  0000			data_240	dw	0			;  xref 2F94:49C3, 49CE, 49D9, 4A23

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          place_powerup
				;
				;         Called from:   2F94:08AC
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:45BA			place_powerup	proc	near
2F94:45BA  F6 C4 02				test	ah,2
2F94:45BD  74 11				jz	loc_417			; Jump if zero
2F94:45BF  BA 0050				mov	dx,50h
2F94:45C2  B9 0027				mov	cx,27h
2F94:45C5  88 0E 4588				mov	[powerup_x],cl		; (2F94:4588=0)
2F94:45C9  88 16 4589				mov	[powerup_y],dl		; (2F94:4589=0)
2F94:45CD  EB 58				jmp	short loc_420		; (4627)
2F94:45CF  90					db	90h
2F94:45D0			loc_417:					;  xref 2F94:45BD
2F94:45D0  50					push	ax
2F94:45D1  A1 2B03				mov	ax,[systick_2b03]	; (2F94:2B03=0)
2F94:45D4  8B F0				mov	si,ax
2F94:45D6  81 E6 000F				and	si,0Fh
2F94:45DA  8A CC				mov	cl,ah
2F94:45DC  81 E1 0001				and	cx,1
2F94:45E0  03 F1				add	si,cx
2F94:45E2  81 E6 00FE				and	si,0FEh
2F94:45E6  33 D2				xor	dx,dx			; Zero register
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 134

2F94:45E8  8A 94 7523				mov	dl,[data_301][si]	; (2F94:7523=8)
2F94:45EC  46					inc	si
2F94:45ED  8A 8C 7523				mov	cl,[data_301][si]	; (2F94:7523=8)
2F94:45F1			loc_418:					;  xref 2F94:460E, 4612
2F94:45F1 њ52					push	dx
2F94:45F2  02 97 7535				add	dl,[placement_offset][bx]	; (2F94:7535=0)
2F94:45F6  43					inc	bx
2F94:45F7  8B FA				mov	di,dx
2F94:45F9  D1 E7				shl	di,1			; Shift w/zeros fill
2F94:45FB  8B B5 68E0				mov	si,[line_offsets_table][di]	; (2F94:68E0=0)
2F94:45FF  03 F1				add	si,cx
2F94:4601  26: F6 84 0191 FF			test	byte ptr es:[191h][si],0FFh	; (2F94:0191=7Ch)
2F94:4607  74 0B				jz	loc_419			; Jump if zero
2F94:4609  5A					pop	dx
2F94:460A  43					inc	bx
2F94:460B  83 FB 22				cmp	bx,22h
2F94:460E  7E E1				jle	loc_418			; Jump if < or =
2F94:4610  33 DB				xor	bx,bx			; Zero register
2F94:4612  EB DD				jmp	short loc_418		; (45F1)
2F94:4614			loc_419:					;  xref 2F94:4607
2F94:4614  02 8F 7535				add	cl,[placement_offset][bx]	; (2F94:7535=0)
2F94:4618  88 0E 4588				mov	[powerup_x],cl		; (2F94:4588=0)
2F94:461C  88 16 4589				mov	[powerup_y],dl		; (2F94:4589=0)
2F94:4620  C6 06 458C 00			mov	[powerup_animation_offset],0	; (2F94:458C=0)
2F94:4625  58					pop	ax
2F94:4626  58					pop	ax
2F94:4627			loc_420:					;  xref 2F94:45CD
2F94:4627  24 03				and	al,3
2F94:4629  3C 02				cmp	al,2
2F94:462B  77 03				ja	loc_421			; Jump if above
2F94:462D  E9 008F				jmp	loc_430			; (46BF)
2F94:4630			loc_421:					;  xref 2F94:462B
2F94:4630  A0 013B				mov	al,[room_num]		; (2F94:013B=0)
2F94:4633  51					push	cx
2F94:4634  B9 0009				mov	cx,9
2F94:4637 .BB 7559				mov	bx,offset data_302	; (2F94:7559='{lb\7/(%')

2F94:463A			locloop_422:					;  xref 2F94:463F
2F94:463A  3A 07				cmp	al,[bx]
2F94:463C  74 2C				je	loc_425			; Jump if equal
2F94:463E  43					inc	bx
2F94:463F  E2 F9				loop	locloop_422		; Loop if cx > 0

2F94:4641 .BE 45A1				mov	si,offset data_239	; (2F94:45A1=2)
2F94:4644  B9 000A				mov	cx,0Ah

2F94:4647			locloop_423:					;  xref 2F94:464D
2F94:4647  3A 04				cmp	al,[si]
2F94:4649  74 04				je	loc_424			; Jump if equal
2F94:464B  46					inc	si
2F94:464C  46					inc	si
2F94:464D  E2 F8				loop	locloop_423		; Loop if cx > 0

2F94:464F			loc_424:					;  xref 2F94:4649
2F94:464F  46					inc	si
2F94:4650  8A 0C				mov	cl,[si]
2F94:4652  88 0E 458C				mov	[powerup_animation_offset],cl	; (2F94:458C=0)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 135

2F94:4656  32 ED				xor	ch,ch			; Zero register
2F94:4658 .BF 7315				mov	di,offset spr_key_4b	; (2F94:7315=55h)
2F94:465B  03 F9				add	di,cx
2F94:465D  59					pop	cx
2F94:465E  BB 3004				mov	bx,3004h
2F94:4661  E8 CDEC				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:4664  C6 06 458B 03			mov	[data_237],3		; (2F94:458B=0)
2F94:4669  C3					retn
2F94:466A			loc_425:					;  xref 2F94:463C
2F94:466A  52					push	dx
2F94:466B  B2 40				mov	dl,40h			; '@'
2F94:466D  8B 0E 0137				mov	cx,[player_x2]		; (2F94:0137=0)
2F94:4671  83 3E 0137 0A			cmp	[player_x2],0Ah		; (2F94:0137=0)
2F94:4676  72 05				jb	loc_426			; Jump if below
2F94:4678  33 C9				xor	cx,cx			; Zero register
2F94:467A  EB 04				jmp	short loc_427		; (4680)
2F94:467C  90					db	90h
2F94:467D			loc_426:					;  xref 2F94:4676
2F94:467D  B9 004E				mov	cx,4Eh
2F94:4680			loc_427:					;  xref 2F94:467A
2F94:4680  C6 06 63C5 06			mov	byte ptr [repspr_count],6	; (2F94:63C5=0)
2F94:4685  89 0E 4580				mov	[data_232],cx		; (2F94:4580=0)
2F94:4689  8B 36 6006				mov	si,[pattern_b]		; (2F94:6006=0)
2F94:468D  BB 0802				mov	bx,802h
2F94:4690  8A F1				mov	dh,cl
2F94:4692  E8 C3FE				call	horz_rep_sprite		; (0A93)
2F94:4695  5A					pop	dx
2F94:4696 .BE 458F				mov	si,offset data_238	; (2F94:458F=0Fh)
2F94:4699  B9 0009				mov	cx,9

2F94:469C			locloop_428:					;  xref 2F94:46A2
2F94:469C  3A 04				cmp	al,[si]
2F94:469E  74 04				je	loc_429			; Jump if equal
2F94:46A0  46					inc	si
2F94:46A1  46					inc	si
2F94:46A2  E2 F8				loop	locloop_428		; Loop if cx > 0

2F94:46A4			loc_429:					;  xref 2F94:469E
2F94:46A4  46					inc	si
2F94:46A5  8A 0C				mov	cl,[si]
2F94:46A7  88 0E 458C				mov	[powerup_animation_offset],cl	; (2F94:458C=0)
2F94:46AB  32 ED				xor	ch,ch			; Zero register
2F94:46AD .BF 73A5				mov	di,offset spr_keyhole_3b	; (2F94:73A5=5)
2F94:46B0  03 F9				add	di,cx
2F94:46B2  BB 2703				mov	bx,2703h
2F94:46B5  59					pop	cx
2F94:46B6  E8 CD97				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:46B9  C6 06 458B 04			mov	[data_237],4		; (2F94:458B=0)
2F94:46BE  C3					retn
2F94:46BF			loc_430:					;  xref 2F94:462D
2F94:46BF  3C 01				cmp	al,1
2F94:46C1  77 14				ja	loc_431			; Jump if above
2F94:46C3 .BF 72CD				mov	di,offset spr_extralife_3b	; (2F94:72CD=1)
2F94:46C6  BB 2403				mov	bx,2403h
2F94:46C9  E8 CD84				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:46CC  C6 06 458C 12			mov	[powerup_animation_offset],12h	; (2F94:458C=0)
2F94:46D1  C6 06 458B 01			mov	[data_237],1		; (2F94:458B=0)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 136

2F94:46D6  C3					retn
2F94:46D7			loc_431:					;  xref 2F94:46C1
2F94:46D7 .BF 7285				mov	di,offset spr_mystery_3b	; (2F94:7285=1)
2F94:46DA  BB 2403				mov	bx,2403h
2F94:46DD  E8 CD70				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:46E0  C6 06 458B 02			mov	[data_237],2		; (2F94:458B=0)
2F94:46E5  C3					retn
				place_powerup	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         check if picked up extralife,	animate powerup	sprite
				;
				;         Called from:   2F94:025D
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:46E6			process_extralife	proc	near
2F94:46E6  33 C9				xor	cx,cx			; Zero register
2F94:46E8  33 D2				xor	dx,dx			; Zero register
2F94:46EA  8A 16 4589				mov	dl,[powerup_y]		; (2F94:4589=0)
2F94:46EE  8A 0E 4588				mov	cl,[powerup_x]		; (2F94:4588=0)
2F94:46F2  C6 06 458A 0B			mov	[data_236],0Bh		; (2F94:458A=0)
2F94:46F7  80 FA 08				cmp	dl,8
2F94:46FA  77 05				ja	loc_432			; Jump if above
2F94:46FC  C6 06 458A 08			mov	[data_236],8		; (2F94:458A=0)
2F94:4701			loc_432:					;  xref 2F94:46FA
2F94:4701  2A 16 458A				sub	dl,[data_236]		; (2F94:458A=0)
2F94:4705  80 E9 04				sub	cl,4
2F94:4708  80 3E 458B 01			cmp	[data_237],1		; (2F94:458B=0)
2F94:470D  74 03				je	loc_433			; Jump if equal
2F94:470F  E9 00ED				jmp	loc_441			; (47FF)
2F94:4712			loc_433:					;  xref 2F94:470D
2F94:4712  39 0E 0134				cmp	[player_x],cx		; (2F94:0134=0)
2F94:4716  7F 03				jg	loc_434			; Jump if >
2F94:4718  EB 71				jmp	short loc_436		; (478B)
2F94:471A  90					db	90h
2F94:471B			loc_434:					;  xref 2F94:4716
2F94:471B  38 16 0136				cmp	[player_y],dl		; (2F94:0136=0)
2F94:471F  76 6A				jbe	loc_436			; Jump if below or =
2F94:4721  80 C1 07				add	cl,7
2F94:4724  39 0E 0134				cmp	[player_x],cx		; (2F94:0134=0)
2F94:4728  73 61				jae	loc_436			; Jump if above or =
2F94:472A  02 16 458A				add	dl,[data_236]		; (2F94:458A=0)
2F94:472E  80 C2 0C				add	dl,0Ch
2F94:4731  38 16 0136				cmp	[player_y],dl		; (2F94:0136=0)
2F94:4735  73 54				jae	loc_436			; Jump if above or =
2F94:4737  80 E9 03				sub	cl,3
2F94:473A  80 EA 0C				sub	dl,0Ch
2F94:473D  BB 1203				mov	bx,1203h
2F94:4740 .BF 72CD				mov	di,offset spr_extralife_3b	; (2F94:72CD=1)
2F94:4743  E8 CD0A				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:4746 .BF 72CD				mov	di,offset spr_extralife_3b	; (2F94:72CD=1)
2F94:4749  33 DB				xor	bx,bx			; Zero register
2F94:474B  8A 1E 458C				mov	bl,[powerup_animation_offset]	; (2F94:458C=0)
2F94:474F  03 FB				add	di,bx
2F94:4751  80 C2 06				add	dl,6
2F94:4754  BB 1203				mov	bx,1203h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 137

2F94:4757  E8 CCF6				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:475A  FE 06 458E				inc	[lives_remaining]	; (2F94:458E=4)
2F94:475E  E8 02F0				call	draw_lives		; (4A51)
2F94:4761  C6 06 4586 01			mov	[data_235],1		; (2F94:4586=0)
2F94:4766  C7 06 4582 0028			mov	[data_233],28h		; (2F94:4582=0)
2F94:476C  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:4771  74 15				jz	loc_435			; Jump if zero
2F94:4773  50					push	ax
2F94:4774  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:4776  0C 03				or	al,3
2F94:4778  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:477A  B0 B6				mov	al,0B6h
2F94:477C  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:477E  B8 27BF				mov	ax,27BFh
2F94:4781  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:4783  8A C4				mov	al,ah
2F94:4785  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:4787  58					pop	ax
2F94:4788			loc_435:					;  xref 2F94:4771
2F94:4788  E9 02B0				jmp	loc_462			; (4A3B)
2F94:478B			loc_436:					;  xref 2F94:4718, 471F, 4728, 4735
2F94:478B  FE 0E 458D				dec	[powerup_animation_delay]	; (2F94:458D=5)
2F94:478F  74 01				jz	loc_437			; Jump if zero
2F94:4791  C3					retn
2F94:4792			loc_437:					;  xref 2F94:478F
2F94:4792  C6 06 458D 04			mov	[powerup_animation_delay],4	; (2F94:458D=5)
2F94:4797  8A 16 4589				mov	dl,[powerup_y]		; (2F94:4589=0)
2F94:479B  80 C2 06				add	dl,6
2F94:479E  8A 0E 4588				mov	cl,[powerup_x]		; (2F94:4588=0)
2F94:47A2 .BF 72CD				mov	di,offset spr_extralife_3b	; (2F94:72CD=1)
2F94:47A5  33 DB				xor	bx,bx			; Zero register
2F94:47A7  8A 1E 458C				mov	bl,[powerup_animation_offset]	; (2F94:458C=0)
2F94:47AB  03 FB				add	di,bx
2F94:47AD  BB 1203				mov	bx,1203h
2F94:47B0  E8 CC9D				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:47B3  A1 2B03				mov	ax,[systick_2b03]	; (2F94:2B03=0)
2F94:47B6  D1 C8				ror	ax,1			; Rotate
2F94:47B8  A3 2B03				mov	[systick_2b03],ax	; (2F94:2B03=0)
2F94:47BB  24 55				and	al,55h			; 'U'
2F94:47BD .BF 72CD				mov	di,offset spr_extralife_3b	; (2F94:72CD=1)
2F94:47C0  80 3E 458C 24			cmp	[powerup_animation_offset],24h	; (2F94:458C=0) '$'
2F94:47C5  72 0F				jb	loc_438			; Jump if below
2F94:47C7  77 1A				ja	loc_439			; Jump if above
2F94:47C9  C6 06 458C 36			mov	[powerup_animation_offset],36h	; (2F94:458C=0) '6'
2F94:47CE .BB 003A				mov	bx,data_18e		; (2F94:003A=0)
2F94:47D1  88 01				mov	[bx+di],al
2F94:47D3  EB 18				jmp	short loc_440		; (47ED)
2F94:47D5  90					db	90h
2F94:47D6			loc_438:					;  xref 2F94:47C5
2F94:47D6  C6 06 458C 24			mov	[powerup_animation_offset],24h	; (2F94:458C=0) '$'
2F94:47DB .BB 002B				mov	bx,data_17e		; (2F94:002B=0)
2F94:47DE  88 01				mov	[bx+di],al
2F94:47E0  EB 0B				jmp	short loc_440		; (47ED)
2F94:47E2  90					db	90h
2F94:47E3			loc_439:					;  xref 2F94:47C7
2F94:47E3  C6 06 458C 12			mov	[powerup_animation_offset],12h	; (2F94:458C=0)
2F94:47E8 .BB 001C				mov	bx,data_14e		; (2F94:001C=0)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 138

2F94:47EB  88 01				mov	[bx+di],al
2F94:47ED			loc_440:					;  xref 2F94:47D3, 47E0
2F94:47ED .BF 72CD				mov	di,offset spr_extralife_3b	; (2F94:72CD=1)
2F94:47F0  33 DB				xor	bx,bx			; Zero register
2F94:47F2  8A 1E 458C				mov	bl,[powerup_animation_offset]	; (2F94:458C=0)
2F94:47F6  03 FB				add	di,bx
2F94:47F8  BB 1203				mov	bx,1203h
2F94:47FB  E8 CC52				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:47FE  C3					retn
2F94:47FF			loc_441:					;  xref 2F94:470F
2F94:47FF  80 3E 458B 02			cmp	[data_237],2		; (2F94:458B=0)
2F94:4804  74 03				je	loc_442			; Jump if equal
2F94:4806  E9 00CC				jmp	loc_450			; (48D5)
2F94:4809			loc_442:					;  xref 2F94:4804
2F94:4809  39 0E 0134				cmp	[player_x],cx		; (2F94:0134=0)
2F94:480D  7E 1F				jle	loc_443			; Jump if < or =
2F94:480F  38 16 0136				cmp	[player_y],dl		; (2F94:0136=0)
2F94:4813  76 19				jbe	loc_443			; Jump if below or =
2F94:4815  80 C1 07				add	cl,7
2F94:4818  39 0E 0134				cmp	[player_x],cx		; (2F94:0134=0)
2F94:481C  73 10				jae	loc_443			; Jump if above or =
2F94:481E  02 16 458A				add	dl,[data_236]		; (2F94:458A=0)
2F94:4822  80 C2 0C				add	dl,0Ch
2F94:4825  38 16 0136				cmp	[player_y],dl		; (2F94:0136=0)
2F94:4829  73 03				jae	loc_443			; Jump if above or =
2F94:482B  EB 3D				jmp	short loc_445		; (486A)
2F94:482D  90					db	90h
2F94:482E			loc_443:					;  xref 2F94:480D, 4813, 481C, 4829
2F94:482E  FE 0E 458D				dec	[powerup_animation_delay]	; (2F94:458D=5)
2F94:4832  74 01				jz	loc_444			; Jump if zero
2F94:4834  C3					retn
2F94:4835			loc_444:					;  xref 2F94:4832
2F94:4835  C6 06 458D 05			mov	[powerup_animation_delay],5	; (2F94:458D=5)
2F94:483A  8A 0E 4588				mov	cl,[powerup_x]		; (2F94:4588=0)
2F94:483E  8A 16 4589				mov	dl,[powerup_y]		; (2F94:4589=0)
2F94:4842 .BF 7285				mov	di,offset spr_mystery_3b	; (2F94:7285=1)
2F94:4845  33 DB				xor	bx,bx			; Zero register
2F94:4847  8A 1E 458C				mov	bl,[powerup_animation_offset]	; (2F94:458C=0)
2F94:484B  03 FB				add	di,bx
2F94:484D  BB 2403				mov	bx,2403h
2F94:4850  E8 CBFD				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:4853  B0 24				mov	al,24h			; '$'
2F94:4855  2A 06 458C				sub	al,[powerup_animation_offset]	; (2F94:458C=0)
2F94:4859  A2 458C				mov	[powerup_animation_offset],al	; (2F94:458C=0)
2F94:485C .BF 7285				mov	di,offset spr_mystery_3b	; (2F94:7285=1)
2F94:485F  32 E4				xor	ah,ah			; Zero register
2F94:4861  03 F8				add	di,ax
2F94:4863  BB 2403				mov	bx,2403h
2F94:4866  E8 CBE7				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:4869  C3					retn
2F94:486A			loc_445:					;  xref 2F94:482B
2F94:486A  80 E9 03				sub	cl,3
2F94:486D  80 EA 0C				sub	dl,0Ch
2F94:4870 .BF 7285				mov	di,offset spr_mystery_3b	; (2F94:7285=1)
2F94:4873  33 DB				xor	bx,bx			; Zero register
2F94:4875  8A 1E 458C				mov	bl,[powerup_animation_offset]	; (2F94:458C=0)
2F94:4879  03 FB				add	di,bx
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 139

2F94:487B  BB 2403				mov	bx,2403h
2F94:487E  E8 CBCF				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:4881  C6 06 4586 02			mov	[data_235],2		; (2F94:4586=0)
2F94:4886  C7 06 4582 0028			mov	[data_233],28h		; (2F94:4582=0)
2F94:488C  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:4891  74 15				jz	loc_446			; Jump if zero
2F94:4893  50					push	ax
2F94:4894  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:4896  0C 03				or	al,3
2F94:4898  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:489A  B0 B6				mov	al,0B6h
2F94:489C  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:489E  B8 27BF				mov	ax,27BFh
2F94:48A1  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:48A3  8A C4				mov	al,ah
2F94:48A5  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:48A7  58					pop	ax
2F94:48A8			loc_446:					;  xref 2F94:4891
2F94:48A8  E8 C491				call	convert_score_3		; (0D3C)
2F94:48AB  E8 C3AB				call	display_score		; (0C59)
2F94:48AE  A1 2B03				mov	ax,[systick_2b03]	; (2F94:2B03=0)
2F94:48B1  25 0303				and	ax,303h
2F94:48B4  80 FC 00				cmp	ah,0
2F94:48B7  75 07				jne	loc_447			; Jump if not equal
2F94:48B9  FE 06 458E				inc	[lives_remaining]	; (2F94:458E=4)
2F94:48BD  E8 0191				call	draw_lives		; (4A51)
2F94:48C0			loc_447:					;  xref 2F94:48B7
2F94:48C0  3C 00				cmp	al,0
2F94:48C2  75 0D				jne	loc_448			; Jump if not equal
2F94:48C4  83 3E 014B 64			cmp	[data_38],64h		; (2F94:014B=0)
2F94:48C9  76 06				jbe	loc_448			; Jump if below or =
2F94:48CB  C7 06 014B 0064			mov	[data_38],64h		; (2F94:014B=0)
2F94:48D1			loc_448:					;  xref 2F94:48C2, 48C9
2F94:48D1  E9 0167				jmp	loc_462			; (4A3B)

2F94:48D4			loc_ret_449:					;  xref 2F94:48E7, 48ED, 48F6, 4903
2F94:48D4  C3					retn
2F94:48D5			loc_450:					;  xref 2F94:4806
2F94:48D5  A0 458C				mov	al,[powerup_animation_offset]	; (2F94:458C=0)
2F94:48D8  98					cbw				; Convrt byte to word
2F94:48D9  80 3E 458B 03			cmp	[data_237],3		; (2F94:458B=0)
2F94:48DE  74 03				je	loc_451			; Jump if equal
2F94:48E0  E9 00A9				jmp	loc_456			; (498C)
2F94:48E3			loc_451:					;  xref 2F94:48DE
2F94:48E3  39 0E 0134				cmp	[player_x],cx		; (2F94:0134=0)
2F94:48E7  7E EB				jle	loc_ret_449		; Jump if < or =
2F94:48E9  38 16 0136				cmp	[player_y],dl		; (2F94:0136=0)
2F94:48ED  76 E5				jbe	loc_ret_449		; Jump if below or =
2F94:48EF  80 C1 07				add	cl,7
2F94:48F2  39 0E 0134				cmp	[player_x],cx		; (2F94:0134=0)
2F94:48F6  73 DC				jae	loc_ret_449		; Jump if above or =
2F94:48F8  02 16 458A				add	dl,[data_236]		; (2F94:458A=0)
2F94:48FC  80 C2 0C				add	dl,0Ch
2F94:48FF  38 16 0136				cmp	[player_y],dl		; (2F94:0136=0)
2F94:4903  73 CF				jae	loc_ret_449		; Jump if above or =
2F94:4905  80 E9 03				sub	cl,3
2F94:4908  80 EA 0C				sub	dl,0Ch
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 140

2F94:490B  BB 3004				mov	bx,3004h
2F94:490E .BF 7315				mov	di,offset spr_key_4b	; (2F94:7315=55h)
2F94:4911  03 F8				add	di,ax
2F94:4913  E8 CB3A				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:4916  C6 06 4586 03			mov	[data_235],3		; (2F94:4586=0)
2F94:491B  C7 06 4582 0020			mov	[data_233],20h		; (2F94:4582=0)
2F94:4921  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:4926  74 15				jz	paint_keys		; Jump if zero
2F94:4928  50					push	ax
2F94:4929  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:492B  0C 03				or	al,3
2F94:492D  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:492F  B0 B6				mov	al,0B6h
2F94:4931  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:4933  B8 27BF				mov	ax,27BFh
2F94:4936  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:4938  8A C4				mov	al,ah
2F94:493A  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:493C  58					pop	ax
2F94:493D			paint_keys:					;  xref 2F94:4926
2F94:493D .BE 45B5				mov	si,offset found_keys	; (2F94:45B5=0FFh)
2F94:4940  8A 0E 458C				mov	cl,[powerup_animation_offset]	; (2F94:458C=0)
2F94:4944  BA 00B2				mov	dx,0B2h
2F94:4947  BB 3004				mov	bx,3004h
2F94:494A  80 3C 00				cmp	byte ptr [si],0
2F94:494D  7D 10				jge	loc_452			; Jump if > or =
2F94:494F  88 0C				mov	[si],cl
2F94:4951  B9 003F				mov	cx,3Fh
2F94:4954 .BF 7315				mov	di,offset spr_key_4b	; (2F94:7315=55h)
2F94:4957  03 F8				add	di,ax
2F94:4959  E8 CAF4				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:495C  E9 00DC				jmp	loc_462			; (4A3B)
2F94:495F			loc_452:					;  xref 2F94:494D
2F94:495F  46					inc	si
2F94:4960  80 3C 00				cmp	byte ptr [si],0
2F94:4963  7D 10				jge	loc_453			; Jump if > or =
2F94:4965  88 0C				mov	[si],cl
2F94:4967  B9 0044				mov	cx,44h
2F94:496A .BF 7315				mov	di,offset spr_key_4b	; (2F94:7315=55h)
2F94:496D  03 F8				add	di,ax
2F94:496F  E8 CADE				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:4972  E9 00C6				jmp	loc_462			; (4A3B)
2F94:4975			loc_453:					;  xref 2F94:4963
2F94:4975  46					inc	si
2F94:4976  80 3C 00				cmp	byte ptr [si],0
2F94:4979  7D 0D				jge	loc_454			; Jump if > or =
2F94:497B  88 0C				mov	[si],cl
2F94:497D  B9 0049				mov	cx,49h
2F94:4980 .BF 7315				mov	di,offset spr_key_4b	; (2F94:7315=55h)
2F94:4983  03 F8				add	di,ax
2F94:4985  E8 CAC8				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:4988			loc_454:					;  xref 2F94:4979
2F94:4988  E9 00B0				jmp	loc_462			; (4A3B)

2F94:498B			loc_ret_455:					;  xref 2F94:4990, 4996, 499F, 49AC
2F94:498B  C3					retn
2F94:498C			loc_456:					;  xref 2F94:48E0
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 141

2F94:498C  39 0E 0134				cmp	[player_x],cx		; (2F94:0134=0)
2F94:4990  7E F9				jle	loc_ret_455		; Jump if < or =
2F94:4992  38 16 0136				cmp	[player_y],dl		; (2F94:0136=0)
2F94:4996  76 F3				jbe	loc_ret_455		; Jump if below or =
2F94:4998  80 C1 07				add	cl,7
2F94:499B  39 0E 0134				cmp	[player_x],cx		; (2F94:0134=0)
2F94:499F  7D EA				jge	loc_ret_455		; Jump if > or =
2F94:49A1  02 16 458A				add	dl,[data_236]		; (2F94:458A=0)
2F94:49A5  80 C2 0D				add	dl,0Dh
2F94:49A8  38 16 0136				cmp	[player_y],dl		; (2F94:0136=0)
2F94:49AC  73 DD				jae	loc_ret_455		; Jump if above or =
2F94:49AE .BE 45B5				mov	si,offset found_keys	; (2F94:45B5=0FFh)
2F94:49B1  3C 27				cmp	al,27h			; '''
2F94:49B3  74 07				je	loc_457			; Jump if equal
2F94:49B5  77 0A				ja	loc_458			; Jump if above
2F94:49B7  B4 00				mov	ah,0
2F94:49B9  EB 08				jmp	short loc_459		; (49C3)
2F94:49BB  90					db	90h
2F94:49BC			loc_457:					;  xref 2F94:49B3
2F94:49BC  B4 30				mov	ah,30h			; '0'
2F94:49BE  EB 03				jmp	short loc_459		; (49C3)
2F94:49C0  90					db	90h
2F94:49C1			loc_458:					;  xref 2F94:49B5
2F94:49C1  B4 60				mov	ah,60h			; '`'
2F94:49C3			loc_459:					;  xref 2F94:49B9, 49BE
2F94:49C3  C7 06 45B8 003F			mov	[data_240],3Fh		; (2F94:45B8=0)
2F94:49C9  38 24				cmp	[si],ah
2F94:49CB  74 17				je	loc_460			; Jump if equal
2F94:49CD  46					inc	si
2F94:49CE  C7 06 45B8 0044			mov	[data_240],44h		; (2F94:45B8=0)
2F94:49D4  38 24				cmp	[si],ah
2F94:49D6  74 0C				je	loc_460			; Jump if equal
2F94:49D8  46					inc	si
2F94:49D9  C7 06 45B8 0049			mov	[data_240],49h		; (2F94:45B8=0)
2F94:49DF  38 24				cmp	[si],ah
2F94:49E1  74 01				je	loc_460			; Jump if equal
2F94:49E3  C3					retn
2F94:49E4			loc_460:					;  xref 2F94:49CB, 49D6, 49E1
2F94:49E4  C6 06 4586 04			mov	[data_235],4		; (2F94:4586=0)
2F94:49E9  C7 06 4582 0018			mov	[data_233],18h		; (2F94:4582=0)
2F94:49EF  C7 06 4584 01F4			mov	[data_234],1F4h		; (2F94:4584=0)
2F94:49F5  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:49FA  74 15				jz	loc_461			; Jump if zero
2F94:49FC  50					push	ax
2F94:49FD  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:49FF  0C 03				or	al,3
2F94:4A01  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:4A03  B0 B6				mov	al,0B6h
2F94:4A05  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:4A07  B8 01F4				mov	ax,1F4h
2F94:4A0A  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:4A0C  8A C4				mov	al,ah
2F94:4A0E  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:4A10  58					pop	ax
2F94:4A11			loc_461:					;  xref 2F94:49FA
2F94:4A11  80 E9 03				sub	cl,3
2F94:4A14  80 EA 0D				sub	dl,0Dh
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 142

2F94:4A17  BB 2703				mov	bx,2703h
2F94:4A1A .BF 73A5				mov	di,offset spr_keyhole_3b	; (2F94:73A5=5)
2F94:4A1D  98					cbw				; Convrt byte to word
2F94:4A1E  03 F8				add	di,ax
2F94:4A20  E8 CA2D				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:4A23  8B 0E 45B8				mov	cx,[data_240]		; (2F94:45B8=0)
2F94:4A27  BA 00B2				mov	dx,0B2h
2F94:4A2A  BB 3004				mov	bx,3004h
2F94:4A2D  8A 04				mov	al,[si]
2F94:4A2F  98					cbw				; Convrt byte to word
2F94:4A30 .BF 7315				mov	di,offset spr_key_4b	; (2F94:7315=55h)
2F94:4A33  03 F8				add	di,ax
2F94:4A35  E8 CA18				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:4A38  C6 04 FF				mov	byte ptr [si],0FFh
2F94:4A3B			loc_462:					;  xref 2F94:4788, 48D1, 495C, 4972
										;            4988
2F94:4A3B  33 DB				xor	bx,bx			; Zero register
2F94:4A3D  8A 1E 013B				mov	bl,[room_num]		; (2F94:013B=0)
2F94:4A41  80 A7 6B70 FC			and	byte ptr [gamestate_a][bx],0FCh	; (2F94:6B70=52h)
2F94:4A46  C6 06 014D 00			mov	[powerup_present],0	; (2F94:014D=0)
2F94:4A4B  80 A7 6A70 FD			and	byte ptr [gamestate_b][bx],0FDh	; (2F94:6A70=49h)
2F94:4A50  C3					retn
				process_extralife	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         draw remaining shamii	
				;
				;         Called from:   2F94:05B4, 0716, 475E, 48BD
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:4A51			draw_lives	proc	near
2F94:4A51  80 3E 458E 00			cmp	[lives_remaining],0	; (2F94:458E=4)
2F94:4A56  7F 01				jg	loc_463			; Jump if >
2F94:4A58  C3					retn
2F94:4A59			loc_463:					;  xref 2F94:4A56
2F94:4A59  50					push	ax
2F94:4A5A  53					push	bx
2F94:4A5B  51					push	cx
2F94:4A5C  52					push	dx
2F94:4A5D  57					push	di
2F94:4A5E  A0 458E				mov	al,[lives_remaining]	; (2F94:458E=4)
2F94:4A61 .BF 68C0				mov	di,offset spr_shamus_nohat	; (2F94:68C0=1)
2F94:4A64  BB 2004				mov	bx,2004h
2F94:4A67  33 C9				xor	cx,cx			; Zero register
2F94:4A69  33 D2				xor	dx,dx			; Zero register
2F94:4A6B  B1 44				mov	cl,44h			; 'D'
2F94:4A6D  E8 CA5A				call	draw_sprite_v2		; (14CA)
2F94:4A70  FE C8				dec	al
2F94:4A72  74 48				jz	loc_464			; Jump if zero
2F94:4A74  B1 48				mov	cl,48h			; 'H'
2F94:4A76  E8 CA51				call	draw_sprite_v2		; (14CA)
2F94:4A79  FE C8				dec	al
2F94:4A7B  74 3F				jz	loc_464			; Jump if zero
2F94:4A7D  B1 4C				mov	cl,4Ch			; 'L'
2F94:4A7F  E8 CA48				call	draw_sprite_v2		; (14CA)
2F94:4A82  FE C8				dec	al
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 143

2F94:4A84  74 36				jz	loc_464			; Jump if zero
2F94:4A86  B1 44				mov	cl,44h			; 'D'
2F94:4A88  B2 08				mov	dl,8
2F94:4A8A  E8 CA3D				call	draw_sprite_v2		; (14CA)
2F94:4A8D  FE C8				dec	al
2F94:4A8F  74 2B				jz	loc_464			; Jump if zero
2F94:4A91  B1 48				mov	cl,48h			; 'H'
2F94:4A93  E8 CA34				call	draw_sprite_v2		; (14CA)
2F94:4A96  FE C8				dec	al
2F94:4A98  74 22				jz	loc_464			; Jump if zero
2F94:4A9A  B1 4C				mov	cl,4Ch			; 'L'
2F94:4A9C  E8 CA2B				call	draw_sprite_v2		; (14CA)
2F94:4A9F  FE C8				dec	al
2F94:4AA1  74 19				jz	loc_464			; Jump if zero
2F94:4AA3  B1 44				mov	cl,44h			; 'D'
2F94:4AA5  B2 10				mov	dl,10h
2F94:4AA7  E8 CA20				call	draw_sprite_v2		; (14CA)
2F94:4AAA  FE C8				dec	al
2F94:4AAC  74 0E				jz	loc_464			; Jump if zero
2F94:4AAE  B1 48				mov	cl,48h			; 'H'
2F94:4AB0  E8 CA17				call	draw_sprite_v2		; (14CA)
2F94:4AB3  FE C8				dec	al
2F94:4AB5  74 05				jz	loc_464			; Jump if zero
2F94:4AB7  B1 4C				mov	cl,4Ch			; 'L'
2F94:4AB9  E8 CA0E				call	draw_sprite_v2		; (14CA)
2F94:4ABC			loc_464:					;  xref 2F94:4A72, 4A7B, 4A84, 4A8F
										;            4A98, 4AA1, 4AAC, 4AB5
2F94:4ABC  5F					pop	di
2F94:4ABD  5A					pop	dx
2F94:4ABE  59					pop	cx
2F94:4ABF  5B					pop	bx
2F94:4AC0  58					pop	ax
2F94:4AC1  C3					retn
				draw_lives	endp

2F94:4AC2  000E[00]				db	14 dup (0)
2F94:4AD0  05					db	5
2F94:4AD1  00			data_242	db	0			;  xref 2F94:4C33, 4C51, 4C6B, 4C9F
										;            4CCB, 4CF0, 4D00
2F94:4AD2  00			data_243	db	0			;  xref 2F94:07EF, 4AD3, 4AD7, 4ADE
										;            4AE3, 4AEF, 4B52

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         a crazy sub that draws stripes but we don't know when	
				;
				;         Called from:   2F94:0236
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:4AD3			sub_21		proc	near
2F94:4AD3  FE 06 4AD2				inc	[data_243]		; (2F94:4AD2=0)
2F94:4AD7  80 3E 4AD2 B1			cmp	[data_243],0B1h		; (2F94:4AD2=0)
2F94:4ADC  76 05				jbe	loc_465			; Jump if below or =
2F94:4ADE  C6 06 4AD2 08			mov	[data_243],8		; (2F94:4AD2=0)
2F94:4AE3			loc_465:					;  xref 2F94:4ADC
2F94:4AE3  8A 16 4AD2				mov	dl,[data_243]		; (2F94:4AD2=0)
2F94:4AE7  B6 1F				mov	dh,1Fh
2F94:4AE9 .BE 66DA				mov	si,offset pat4x8_vstripes	; (2F94:66DA=0CCh)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 144

2F94:4AEC  BB 0104				mov	bx,104h
2F94:4AEF  80 3E 4AD2 A7			cmp	[data_243],0A7h		; (2F94:4AD2=0)
2F94:4AF4  76 03				jbe	loc_466			; Jump if below or =
2F94:4AF6  E9 00C3				jmp	loc_468			; (4BBC)
2F94:4AF9			loc_466:					;  xref 2F94:4AF4
2F94:4AF9  50					push	ax
2F94:4AFA  52					push	dx
2F94:4AFB  8A C2				mov	al,dl
2F94:4AFD  32 E4				xor	ah,ah			; Zero register
2F94:4AFF  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:4B01  8B F8				mov	di,ax
2F94:4B03  8A C6				mov	al,dh
2F94:4B05  32 E4				xor	ah,ah			; Zero register
2F94:4B07  03 85 68E0				add	ax,[line_offsets_table][di]	; (2F94:68E0=0)
2F94:4B0B  8B F8				mov	di,ax
2F94:4B0D  AC					lodsb				; String [si] to al
2F94:4B0E  26: 30 05				xor	es:[di],al
2F94:4B11  47					inc	di
2F94:4B12  AC					lodsb				; String [si] to al
2F94:4B13  26: 30 05				xor	es:[di],al
2F94:4B16  47					inc	di
2F94:4B17  AC					lodsb				; String [si] to al
2F94:4B18  26: 30 05				xor	es:[di],al
2F94:4B1B  47					inc	di
2F94:4B1C  AC					lodsb				; String [si] to al
2F94:4B1D  26: 30 05				xor	es:[di],al
2F94:4B20  47					inc	di
2F94:4B21  5A					pop	dx
2F94:4B22  58					pop	ax
2F94:4B23  B6 2F				mov	dh,2Fh			; '/'
2F94:4B25 .BE 66DA				mov	si,offset pat4x8_vstripes	; (2F94:66DA=0CCh)
2F94:4B28  50					push	ax
2F94:4B29  52					push	dx
2F94:4B2A  8A C2				mov	al,dl
2F94:4B2C  32 E4				xor	ah,ah			; Zero register
2F94:4B2E  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:4B30  8B F8				mov	di,ax
2F94:4B32  8A C6				mov	al,dh
2F94:4B34  32 E4				xor	ah,ah			; Zero register
2F94:4B36  03 85 68E0				add	ax,[line_offsets_table][di]	; (2F94:68E0=0)
2F94:4B3A  8B F8				mov	di,ax
2F94:4B3C  AC					lodsb				; String [si] to al
2F94:4B3D  26: 30 05				xor	es:[di],al
2F94:4B40  47					inc	di
2F94:4B41  AC					lodsb				; String [si] to al
2F94:4B42  26: 30 05				xor	es:[di],al
2F94:4B45  47					inc	di
2F94:4B46  AC					lodsb				; String [si] to al
2F94:4B47  26: 30 05				xor	es:[di],al
2F94:4B4A  47					inc	di
2F94:4B4B  AC					lodsb				; String [si] to al
2F94:4B4C  26: 30 05				xor	es:[di],al
2F94:4B4F  47					inc	di
2F94:4B50  5A					pop	dx
2F94:4B51  58					pop	ax
2F94:4B52  80 3E 4AD2 11			cmp	[data_243],11h		; (2F94:4AD2=0)
2F94:4B57  77 01				ja	loc_467			; Jump if above
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 145

2F94:4B59  C3					retn
2F94:4B5A			loc_467:					;  xref 2F94:4B57
2F94:4B5A  80 EA 0A				sub	dl,0Ah
2F94:4B5D  B6 1F				mov	dh,1Fh
2F94:4B5F .BE 66DA				mov	si,offset pat4x8_vstripes	; (2F94:66DA=0CCh)
2F94:4B62  50					push	ax
2F94:4B63  52					push	dx
2F94:4B64  8A C2				mov	al,dl
2F94:4B66  32 E4				xor	ah,ah			; Zero register
2F94:4B68  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:4B6A  8B F8				mov	di,ax
2F94:4B6C  8A C6				mov	al,dh
2F94:4B6E  32 E4				xor	ah,ah			; Zero register
2F94:4B70  03 85 68E0				add	ax,[line_offsets_table][di]	; (2F94:68E0=0)
2F94:4B74  8B F8				mov	di,ax
2F94:4B76  AC					lodsb				; String [si] to al
2F94:4B77  26: 30 05				xor	es:[di],al
2F94:4B7A  47					inc	di
2F94:4B7B  AC					lodsb				; String [si] to al
2F94:4B7C  26: 30 05				xor	es:[di],al
2F94:4B7F  47					inc	di
2F94:4B80  AC					lodsb				; String [si] to al
2F94:4B81  26: 30 05				xor	es:[di],al
2F94:4B84  47					inc	di
2F94:4B85  AC					lodsb				; String [si] to al
2F94:4B86  26: 30 05				xor	es:[di],al
2F94:4B89  47					inc	di
2F94:4B8A  5A					pop	dx
2F94:4B8B  58					pop	ax
2F94:4B8C  B6 2F				mov	dh,2Fh			; '/'
2F94:4B8E .BE 66DA				mov	si,offset pat4x8_vstripes	; (2F94:66DA=0CCh)
2F94:4B91  50					push	ax
2F94:4B92  52					push	dx
2F94:4B93  8A C2				mov	al,dl
2F94:4B95  32 E4				xor	ah,ah			; Zero register
2F94:4B97  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:4B99  8B F8				mov	di,ax
2F94:4B9B  8A C6				mov	al,dh
2F94:4B9D  32 E4				xor	ah,ah			; Zero register
2F94:4B9F  03 85 68E0				add	ax,[line_offsets_table][di]	; (2F94:68E0=0)
2F94:4BA3  8B F8				mov	di,ax
2F94:4BA5  AC					lodsb				; String [si] to al
2F94:4BA6  26: 30 05				xor	es:[di],al
2F94:4BA9  47					inc	di
2F94:4BAA  AC					lodsb				; String [si] to al
2F94:4BAB  26: 30 05				xor	es:[di],al
2F94:4BAE  47					inc	di
2F94:4BAF  AC					lodsb				; String [si] to al
2F94:4BB0  26: 30 05				xor	es:[di],al
2F94:4BB3  47					inc	di
2F94:4BB4  AC					lodsb				; String [si] to al
2F94:4BB5  26: 30 05				xor	es:[di],al
2F94:4BB8  47					inc	di
2F94:4BB9  5A					pop	dx
2F94:4BBA  58					pop	ax
2F94:4BBB  C3					retn
2F94:4BBC			loc_468:					;  xref 2F94:4AF6
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 146

2F94:4BBC  80 EA 0A				sub	dl,0Ah
2F94:4BBF  50					push	ax
2F94:4BC0  52					push	dx
2F94:4BC1  8A C2				mov	al,dl
2F94:4BC3  32 E4				xor	ah,ah			; Zero register
2F94:4BC5  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:4BC7  8B F8				mov	di,ax
2F94:4BC9  8A C6				mov	al,dh
2F94:4BCB  32 E4				xor	ah,ah			; Zero register
2F94:4BCD  03 85 68E0				add	ax,[line_offsets_table][di]	; (2F94:68E0=0)
2F94:4BD1  8B F8				mov	di,ax
2F94:4BD3  AC					lodsb				; String [si] to al
2F94:4BD4  26: 30 05				xor	es:[di],al
2F94:4BD7  47					inc	di
2F94:4BD8  AC					lodsb				; String [si] to al
2F94:4BD9  26: 30 05				xor	es:[di],al
2F94:4BDC  47					inc	di
2F94:4BDD  AC					lodsb				; String [si] to al
2F94:4BDE  26: 30 05				xor	es:[di],al
2F94:4BE1  47					inc	di
2F94:4BE2  AC					lodsb				; String [si] to al
2F94:4BE3  26: 30 05				xor	es:[di],al
2F94:4BE6  47					inc	di
2F94:4BE7  5A					pop	dx
2F94:4BE8  58					pop	ax
2F94:4BE9  B6 2F				mov	dh,2Fh			; '/'
2F94:4BEB .BE 66DA				mov	si,offset pat4x8_vstripes	; (2F94:66DA=0CCh)
2F94:4BEE  50					push	ax
2F94:4BEF  52					push	dx
2F94:4BF0  8A C2				mov	al,dl
2F94:4BF2  32 E4				xor	ah,ah			; Zero register
2F94:4BF4  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:4BF6  8B F8				mov	di,ax
2F94:4BF8  8A C6				mov	al,dh
2F94:4BFA  32 E4				xor	ah,ah			; Zero register
2F94:4BFC  03 85 68E0				add	ax,[line_offsets_table][di]	; (2F94:68E0=0)
2F94:4C00  8B F8				mov	di,ax
2F94:4C02  AC					lodsb				; String [si] to al
2F94:4C03  26: 30 05				xor	es:[di],al
2F94:4C06  47					inc	di
2F94:4C07  AC					lodsb				; String [si] to al
2F94:4C08  26: 30 05				xor	es:[di],al
2F94:4C0B  47					inc	di
2F94:4C0C  AC					lodsb				; String [si] to al
2F94:4C0D  26: 30 05				xor	es:[di],al
2F94:4C10  47					inc	di
2F94:4C11  AC					lodsb				; String [si] to al
2F94:4C12  26: 30 05				xor	es:[di],al
2F94:4C15  47					inc	di
2F94:4C16  5A					pop	dx
2F94:4C17  58					pop	ax
2F94:4C18  C3					retn
				sub_21		endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                              SUBROUTINE
           shamus.lst						Sourcer	v8.01  20-Dec-2023  2:31 am   Page 147

				;
				;         Called from:   2F94:0239
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:4C19			sub_10		proc	near
2F94:4C19  83 3E 014B 00			cmp	[data_38],0		; (2F94:014B=0)
2F94:4C1E  77 01				ja	loc_469			; Jump if above
2F94:4C20  C3					retn
2F94:4C21			loc_469:					;  xref 2F94:4C1E
2F94:4C21  F6 06 014D 01			test	[powerup_present],1	; (2F94:014D=0)
2F94:4C26  75 01				jnz	loc_470			; Jump if not zero
2F94:4C28  C3					retn
2F94:4C29			loc_470:					;  xref 2F94:4C26
2F94:4C29  BA 0050				mov	dx,50h
2F94:4C2C  B9 0027				mov	cx,27h
2F94:4C2F  A0 458C				mov	al,[powerup_animation_offset]	; (2F94:458C=0)
2F94:4C32  98					cbw				; Convrt byte to word
2F94:4C33  C6 06 4AD1 00			mov	[data_242],0		; (2F94:4AD1=0)
2F94:4C38  80 3E 458B 02			cmp	[data_237],2		; (2F94:458B=0)
2F94:4C3D  77 73				ja	loc_475			; Jump if above
2F94:4C3F  74 4C				jz	loc_473			; Jump if zero
2F94:4C41  BB 0603				mov	bx,603h
2F94:4C44 .BF 72CD				mov	di,offset spr_extralife_3b	; (2F94:72CD=1)
2F94:4C47  E8 C72D				call	draw_sprite_xor_check_wall	; (1377)
2F94:4C4A  80 3E 1330 00			cmp	[collision_1330],0	; (2F94:1330=0)
2F94:4C4F  74 05				je	loc_471			; Jump if equal
2F94:4C51  C6 06 4AD1 01			mov	[data_242],1		; (2F94:4AD1=0)
2F94:4C56			loc_471:					;  xref 2F94:4C4F
2F94:4C56 .BF 72CD				mov	di,offset spr_extralife_3b	; (2F94:72CD=1)
2F94:4C59  03 F8				add	di,ax
2F94:4C5B  80 C2 06				add	dl,6
2F94:4C5E  BB 0603				mov	bx,603h
2F94:4C61  E8 C713				call	draw_sprite_xor_check_wall	; (1377)
2F94:4C64  80 3E 1330 00			cmp	[collision_1330],0	; (2F94:1330=0)
2F94:4C69  74 05				je	loc_472			; Jump if equal
2F94:4C6B  C6 06 4AD1 01			mov	[data_242],1		; (2F94:4AD1=0)
2F94:4C70			loc_472:					;  xref 2F94:4C69
2F94:4C70 .BF 72CD				mov	di,offset spr_extralife_3b	; (2F94:72CD=1)
2F94:4C73  BB 0603				mov	bx,603h
2F94:4C76  80 EA 06				sub	dl,6
2F94:4C79  E8 C8B5				call	draw_sprite_xor_v1	; (1531)
2F94:4C7C .BF 72CD				mov	di,offset spr_extralife_3b	; (2F94:72CD=1)
2F94:4C7F  03 F8				add	di,ax
2F94:4C81  BB 0603				mov	bx,603h
2F94:4C84  80 C2 06				add	dl,6
2F94:4C87  E8 C8A7				call	draw_sprite_xor_v1	; (1531)
2F94:4C8A  EB 74				jmp	short loc_479		; (4D00)
2F94:4C8C  90					db	90h
2F94:4C8D			loc_473:					;  xref 2F94:4C3F
2F94:4C8D .BF 7285				mov	di,offset spr_mystery_3b	; (2F94:7285=1)
2F94:4C90  03 F8				add	di,ax
2F94:4C92  BB 0C03				mov	bx,0C03h
2F94:4C95  E8 C6DF				call	draw_sprite_xor_check_wall	; (1377)
2F94:4C98  80 3E 1330 00			cmp	[collision_1330],0	; (2F94:1330=0)
2F94:4C9D  74 05				je	loc_474			; Jump if equal
2F94:4C9F  C6 06 4AD1 01			mov	[data_242],1		; (2F94:4AD1=0)
2F94:4CA4			loc_474:					;  xref 2F94:4C9D
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 148

2F94:4CA4 .BF 7285				mov	di,offset spr_mystery_3b	; (2F94:7285=1)
2F94:4CA7  03 F8				add	di,ax
2F94:4CA9  BB 0C03				mov	bx,0C03h
2F94:4CAC  E8 C882				call	draw_sprite_xor_v1	; (1531)
2F94:4CAF  EB 4F				jmp	short loc_479		; (4D00)
2F94:4CB1  90					db	90h
2F94:4CB2			loc_475:					;  xref 2F94:4C3D
2F94:4CB2  80 3E 458B 03			cmp	[data_237],3		; (2F94:458B=0)
2F94:4CB7  77 25				ja	loc_477			; Jump if above
2F94:4CB9  BB 0C04				mov	bx,0C04h
2F94:4CBC .BF 7315				mov	di,offset spr_key_4b	; (2F94:7315=55h)
2F94:4CBF  03 F8				add	di,ax
2F94:4CC1  E8 C6B3				call	draw_sprite_xor_check_wall	; (1377)
2F94:4CC4  80 3E 1330 00			cmp	[collision_1330],0	; (2F94:1330=0)
2F94:4CC9  74 05				je	loc_476			; Jump if equal
2F94:4CCB  C6 06 4AD1 01			mov	[data_242],1		; (2F94:4AD1=0)
2F94:4CD0			loc_476:					;  xref 2F94:4CC9
2F94:4CD0 .BF 7315				mov	di,offset spr_key_4b	; (2F94:7315=55h)
2F94:4CD3  03 F8				add	di,ax
2F94:4CD5  BB 0C04				mov	bx,0C04h
2F94:4CD8  E8 C856				call	draw_sprite_xor_v1	; (1531)
2F94:4CDB  EB 23				jmp	short loc_479		; (4D00)
2F94:4CDD  90					db	90h
2F94:4CDE			loc_477:					;  xref 2F94:4CB7
2F94:4CDE .BF 73A5				mov	di,offset spr_keyhole_3b	; (2F94:73A5=5)
2F94:4CE1  03 F8				add	di,ax
2F94:4CE3  BB 0D03				mov	bx,0D03h
2F94:4CE6  E8 C68E				call	draw_sprite_xor_check_wall	; (1377)
2F94:4CE9  80 3E 1330 00			cmp	[collision_1330],0	; (2F94:1330=0)
2F94:4CEE  74 05				je	loc_478			; Jump if equal
2F94:4CF0  C6 06 4AD1 01			mov	[data_242],1		; (2F94:4AD1=0)
2F94:4CF5			loc_478:					;  xref 2F94:4CEE
2F94:4CF5 .BF 73A5				mov	di,offset spr_keyhole_3b	; (2F94:73A5=5)
2F94:4CF8  03 F8				add	di,ax
2F94:4CFA  BB 0D03				mov	bx,0D03h
2F94:4CFD  E8 C831				call	draw_sprite_xor_v1	; (1531)
2F94:4D00			loc_479:					;  xref 2F94:4C8A, 4CAF, 4CDB
2F94:4D00  80 3E 4AD1 00			cmp	[data_242],0		; (2F94:4AD1=0)
2F94:4D05  75 01				jne	loc_480			; Jump if not equal
2F94:4D07  C3					retn
2F94:4D08			loc_480:					;  xref 2F94:4D05
2F94:4D08  8A 0E 0134				mov	cl,byte ptr [player_x]	; (2F94:0134=0)
2F94:4D0C  8A 16 0136				mov	dl,[player_y]		; (2F94:0136=0)
2F94:4D10  32 ED				xor	ch,ch			; Zero register
2F94:4D12  32 F6				xor	dh,dh			; Zero register
2F94:4D14  8B 3E 3414				mov	di,[sprite_ptr]		; (2F94:3414=6710h)
2F94:4D18  BB 0C04				mov	bx,0C04h
2F94:4D1B  E8 C813				call	draw_sprite_xor_v1	; (1531)
2F94:4D1E .BE 2930				mov	si,offset shivs_data	; (2F94:2930=0)
2F94:4D21  80 3C 00				cmp	byte ptr [si],0
2F94:4D24  74 23				je	loc_481			; Jump if equal
2F94:4D26  C6 04 00				mov	byte ptr [si],0
2F94:4D29  33 C9				xor	cx,cx			; Zero register
2F94:4D2B  33 D2				xor	dx,dx			; Zero register
2F94:4D2D  8A 4C 01				mov	cl,[si+1]
2F94:4D30  8A 54 02				mov	dl,[si+2]
2F94:4D33  8A 44 03				mov	al,[si+3]
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 149

2F94:4D36  98					cbw				; Convrt byte to word
2F94:4D37  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:4D39  8B F8				mov	di,ax
2F94:4D3B  8B 9D 2950				mov	bx,[data_155][di]	; (2F94:2950=0)
2F94:4D3F  8B BD 2962				mov	di,[data_156][di]	; (2F94:2962=2ADDh)
2F94:4D43  E8 C70A				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:4D46 .BE 2930				mov	si,offset shivs_data	; (2F94:2930=0)
2F94:4D49			loc_481:					;  xref 2F94:4D24
2F94:4D49  83 C6 05				add	si,5
2F94:4D4C  80 3C 00				cmp	byte ptr [si],0
2F94:4D4F  74 20				je	loc_482			; Jump if equal
2F94:4D51  C6 04 00				mov	byte ptr [si],0
2F94:4D54  33 C9				xor	cx,cx			; Zero register
2F94:4D56  33 D2				xor	dx,dx			; Zero register
2F94:4D58  8A 4C 01				mov	cl,[si+1]
2F94:4D5B  8A 54 02				mov	dl,[si+2]
2F94:4D5E  8A 44 03				mov	al,[si+3]
2F94:4D61  98					cbw				; Convrt byte to word
2F94:4D62  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:4D64  8B F8				mov	di,ax
2F94:4D66  8B 9D 2950				mov	bx,[data_155][di]	; (2F94:2950=0)
2F94:4D6A  8B BD 2962				mov	di,[data_156][di]	; (2F94:2962=2ADDh)
2F94:4D6E  E8 C6DF				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:4D71			loc_482:					;  xref 2F94:4D4F
2F94:4D71  C6 06 293B 00			mov	[num_shivs],0		; (2F94:293B=0)
2F94:4D76  B2 08				mov	dl,8
2F94:4D78  B6 1F				mov	dh,1Fh
2F94:4D7A  C6 06 63C5 14			mov	byte ptr [repspr_count],14h	; (2F94:63C5=0)
2F94:4D7F .BE 6D08				mov	si,offset clear_bitmap	; (2F94:6D08=0)
2F94:4D82  BB 0804				mov	bx,804h
2F94:4D85  E8 BD0B				call	horz_rep_sprite		; (0A93)
2F94:4D88  B2 08				mov	dl,8
2F94:4D8A .BE 6D08				mov	si,offset clear_bitmap	; (2F94:6D08=0)
2F94:4D8D  B6 2F				mov	dh,2Fh			; '/'
2F94:4D8F  C6 06 63C5 14			mov	byte ptr [repspr_count],14h	; (2F94:63C5=0)
2F94:4D94  BB 0804				mov	bx,804h
2F94:4D97  E8 BCF9				call	horz_rep_sprite		; (0A93)
2F94:4D9A  33 C9				xor	cx,cx			; Zero register
2F94:4D9C  33 D2				xor	dx,dx			; Zero register
2F94:4D9E  8A 0E 0134				mov	cl,byte ptr [player_x]	; (2F94:0134=0)
2F94:4DA2  8A 16 0136				mov	dl,[player_y]		; (2F94:0136=0)
2F94:4DA6  8B 3E 3414				mov	di,[sprite_ptr]		; (2F94:3414=6710h)
2F94:4DAA  BB 0C04				mov	bx,0C04h
2F94:4DAD  E8 C781				call	draw_sprite_xor_v1	; (1531)
2F94:4DB0  B8 0300				mov	ax,300h
2F94:4DB3  E8 DD69				call	spawn_monsters		; (2B1F)
2F94:4DB6  C6 06 014F 00			mov	[data_39],0		; (2F94:014F=0)
2F94:4DBB  C3					retn
				sub_10		endp

2F94:4DBC  00 00 00 00				db	0, 0, 0, 0
2F94:4DC0  82			march_pitches	db	82h			;  xref 2F94:019D, 0313
2F94:4DC1  00 06 01 FE FF 06			db	 00h, 06h, 01h,0FEh,0FFh, 06h
2F94:4DC7  01 FE FF 06 01 F7			db	 01h,0FEh,0FFh, 06h, 01h,0F7h
2F94:4DCD  00 DC 00 F7 00 FE			db	 00h,0DCh, 00h,0F7h, 00h,0FEh
2F94:4DD3  FF 06 01 27 01 FE			db	0FFh, 06h, 01h, 27h, 01h,0FEh
2F94:4DD9  FF 82 00 FE FF 06			db	0FFh, 82h, 00h,0FEh,0FFh, 06h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 150

2F94:4DDF  01 FE FF 06 01 F7			db	 01h,0FEh,0FFh, 06h, 01h,0F7h
2F94:4DE5  00 DC 00 F7 00 FE			db	 00h,0DCh, 00h,0F7h, 00h,0FEh
2F94:4DEB  FF 06 01 27 01 C4			db	0FFh, 06h, 01h, 27h, 01h,0C4h
2F94:4DF1  00 06 01 FE FF 37			db	 00h, 06h, 01h,0FEh,0FFh, 37h
2F94:4DF7  01 88 01 5D 01 37			db	 01h, 88h, 01h, 5Dh, 01h, 37h
2F94:4DFD  01 FE FF 88 01 D2			db	 01h,0FEh,0FFh, 88h, 01h,0D2h
2F94:4E03  01 9F 01 88 01 FE			db	 01h, 9Fh, 01h, 88h, 01h,0FEh
2F94:4E09  FF D2 01 4B 02 0B			db	0FFh,0D2h, 01h, 4Bh, 02h, 0Bh
2F94:4E0F  02 EE 01 9F 01 88			db	 02h,0EEh, 01h, 9Fh, 01h, 88h
2F94:4E15  01 5D 01 37 01 88			db	 01h, 5Dh, 01h, 37h, 01h, 88h
2F94:4E1B  01 06 01 FE FF 06			db	 01h, 06h, 01h,0FEh,0FFh, 06h
2F94:4E21  01 FE FF 06 01 F7			db	 01h,0FEh,0FFh, 06h, 01h,0F7h
2F94:4E27  00 DC 00 F7 00 FE			db	 00h,0DCh, 00h,0F7h, 00h,0FEh
2F94:4E2D  FF 06 01 27 01 FE			db	0FFh, 06h, 01h, 27h, 01h,0FEh
2F94:4E33  FF 82 00 FE FF 06			db	0FFh, 82h, 00h,0FEh,0FFh, 06h
2F94:4E39  01 FE FF 06 01 F7			db	 01h,0FEh,0FFh, 06h, 01h,0F7h
2F94:4E3F  00 DC 00 F7 00 FE			db	 00h,0DCh, 00h,0F7h, 00h,0FEh
2F94:4E45  FF 06 01 27 01 C4			db	0FFh, 06h, 01h, 27h, 01h,0C4h
2F94:4E4B  00 06 01 FE FF 37			db	 00h, 06h, 01h,0FEh,0FFh, 37h
2F94:4E51  01 88 01 5D 01 37			db	 01h, 88h, 01h, 5Dh, 01h, 37h
2F94:4E57  01 FE FF 88 01 D2			db	 01h,0FEh,0FFh, 88h, 01h,0D2h
2F94:4E5D  01 9F 01 88 01 5D			db	 01h, 9Fh, 01h, 88h, 01h, 5Dh
2F94:4E63  01 37 01 15 01 5D			db	 01h, 37h, 01h, 15h, 01h, 5Dh
2F94:4E69  01 9F 01 06 01 F7			db	 01h, 9Fh, 01h, 06h, 01h,0F7h
2F94:4E6F  00 06 01 27 01 FE			db	 00h, 06h, 01h, 27h, 01h,0FEh
2F94:4E75  FF 37 01 27 01 06			db	0FFh, 37h, 01h, 27h, 01h, 06h
2F94:4E7B  01 FE FF 88 01 FE			db	 01h,0FEh,0FFh, 88h, 01h,0FEh
2F94:4E81  FF 88 01 FE FF 88			db	0FFh, 88h, 01h,0FEh,0FFh, 88h
2F94:4E87  01 72 01 88 01 EE			db	 01h, 72h, 01h, 88h, 01h,0EEh
2F94:4E8D  01 B8 01 88 01 72			db	 01h,0B8h, 01h, 88h, 01h, 72h
2F94:4E93  01 88 01 FE FF 88			db	 01h, 88h, 01h,0FEh,0FFh, 88h
2F94:4E99  01 FE FF 88 01 72			db	 01h,0FEh,0FFh, 88h, 01h, 72h
2F94:4E9F  01 88 01 EE 01 B8			db	 01h, 88h, 01h,0EEh, 01h,0B8h
2F94:4EA5  01 88 01 72 01 88			db	 01h, 88h, 01h, 72h, 01h, 88h
2F94:4EAB  01 FE FF 88 01 9F			db	 01h,0FEh,0FFh, 88h, 01h, 9Fh
2F94:4EB1  01 D2 01 0B 02 48			db	 01h,0D2h, 01h, 0Bh, 02h, 48h
2F94:4EB7  02 88 01 9F 01 D2			db	 02h, 88h, 01h, 9Fh, 01h,0D2h
2F94:4EBD  01 0B 02 48 02 88			db	 01h, 0Bh, 02h, 48h, 02h, 88h
2F94:4EC3  01 FE FF 88 01 5D			db	 01h,0FEh,0FFh, 88h, 01h, 5Dh
2F94:4EC9  01 37 01 5D 01 37			db	 01h, 37h, 01h, 5Dh, 01h, 37h
2F94:4ECF  01 5D 01 88 01 9F			db	 01h, 5Dh, 01h, 88h, 01h, 9Fh
2F94:4ED5  01 88 01 5D 01 37			db	 01h, 88h, 01h, 5Dh, 01h, 37h
2F94:4EDB  01 C4 00 D0 00 DC			db	 01h,0C4h, 00h,0D0h, 00h,0DCh
2F94:4EE1  00 E9 00 F7 00 06			db	 00h,0E9h, 00h,0F7h, 00h, 06h
2F94:4EE7  01 FE FF 06 01 FE			db	 01h,0FEh,0FFh, 06h, 01h,0FEh
2F94:4EED  FF 06 01 27 01 06			db	0FFh, 06h, 01h, 27h, 01h, 06h
2F94:4EF3  01 F7 00 DC 00 F7			db	 01h,0F7h, 00h,0DCh, 00h,0F7h
2F94:4EF9  00 C4 00 F7 00 06			db	 00h,0C4h, 00h,0F7h, 00h, 06h
2F94:4EFF  01 27 01 C4 00 D0			db	 01h, 27h, 01h,0C4h, 00h,0D0h
2F94:4F05  00 DC 00 E9 00 F7			db	 00h,0DCh, 00h,0E9h, 00h,0F7h
2F94:4F0B  00 06 01 FE FF 06			db	 00h, 06h, 01h,0FEh,0FFh, 06h
2F94:4F11  01 FE FF 06 01 27			db	 01h,0FEh,0FFh, 06h, 01h, 27h
2F94:4F17  01 06 01 F7 00 DC			db	 01h, 06h, 01h,0F7h, 00h,0DCh
2F94:4F1D  00 F7 00 C4 00 F7			db	 00h,0F7h, 00h,0C4h, 00h,0F7h
2F94:4F23  00 06 01 27 01 C4			db	 00h, 06h, 01h, 27h, 01h,0C4h
2F94:4F29  00 06 01 FE FF 37			db	 00h, 06h, 01h,0FEh,0FFh, 37h
2F94:4F2F  01 88 01 5D 01 37			db	 01h, 88h, 01h, 5Dh, 01h, 37h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 151

2F94:4F35  01 FE FF 88 01 D2			db	 01h,0FEh,0FFh, 88h, 01h,0D2h
2F94:4F3B  01 9F 01 88 01 FE			db	 01h, 9Fh, 01h, 88h, 01h,0FEh
2F94:4F41  FF D2 01 4B 02 0B			db	0FFh,0D2h, 01h, 4Bh, 02h, 0Bh
2F94:4F47  02 EE 01 9F 01 88			db	 02h,0EEh, 01h, 9Fh, 01h, 88h
2F94:4F4D  01 5D 01 37 01 88			db	 01h, 5Dh, 01h, 37h, 01h, 88h
2F94:4F53  01 06 01 C4 00 D0			db	 01h, 06h, 01h,0C4h, 00h,0D0h
2F94:4F59  00 DC 00 E9 00 F7			db	 00h,0DCh, 00h,0E9h, 00h,0F7h
2F94:4F5F  00 06 01 FE FF 0B			db	 00h, 06h, 01h,0FEh,0FFh, 0Bh
2F94:4F65  02 FF FF				db	 02h,0FFh,0FFh
2F94:4F68  14			march_durations	db	14h			;  xref 2F94:01A0, 0316
2F94:4F69  00 14 00 14 00 12			db	 00h, 14h, 00h, 14h, 00h, 12h
2F94:4F6F  00 02 00 14 00 14			db	 00h, 02h, 00h, 14h, 00h, 14h
2F94:4F75  00 14 00 14 00 14			db	 00h, 14h, 00h, 14h, 00h, 14h
2F94:4F7B  00 14 00 28 00 14			db	 00h, 14h, 00h, 28h, 00h, 14h
2F94:4F81  00 14 00 14 00 12			db	 00h, 14h, 00h, 14h, 00h, 12h
2F94:4F87  00 02 00 14 00 14			db	 00h, 02h, 00h, 14h, 00h, 14h
2F94:4F8D  00 14 00 14 00 14			db	 00h, 14h, 00h, 14h, 00h, 14h
2F94:4F93  00 14 00 28 00 14			db	 00h, 14h, 00h, 28h, 00h, 14h
2F94:4F99  00 14 00 14 00 14			db	 00h, 14h, 00h, 14h, 00h, 14h
2F94:4F9F  00 28 00 14 00 14			db	 00h, 28h, 00h, 14h, 00h, 14h
2F94:4FA5  00 14 00 14 00 28			db	 00h, 14h, 00h, 14h, 00h, 28h
2F94:4FAB  00 14 00 14 00 14			db	 00h, 14h, 00h, 14h, 00h, 14h
2F94:4FB1  00 14 00 28 00 14			db	 00h, 14h, 00h, 28h, 00h, 14h
2F94:4FB7  00 14 00 14 00 14			db	 00h, 14h, 00h, 14h, 00h, 14h
2F94:4FBD  00 14 00 14 00 14			db	 00h, 14h, 00h, 14h, 00h, 14h
2F94:4FC3  00 14 00 14 00 12			db	 00h, 14h, 00h, 14h, 00h, 12h
2F94:4FC9  00 02 00 14 00 14			db	 00h, 02h, 00h, 14h, 00h, 14h
2F94:4FCF  00 14 00 14 00 14			db	 00h, 14h, 00h, 14h, 00h, 14h
2F94:4FD5  00 14 00 28 00 14			db	 00h, 14h, 00h, 28h, 00h, 14h
2F94:4FDB  00 14 00 14 00 12			db	 00h, 14h, 00h, 14h, 00h, 12h
2F94:4FE1  00 02 00 14 00 14			db	 00h, 02h, 00h, 14h, 00h, 14h
2F94:4FE7  00 14 00 14 00 14			db	 00h, 14h, 00h, 14h, 00h, 14h
2F94:4FED  00 14 00 28 00 14			db	 00h, 14h, 00h, 28h, 00h, 14h
2F94:4FF3  00 14 00 14 00 14			db	 00h, 14h, 00h, 14h, 00h, 14h
2F94:4FF9  00 28 00 14 00 14			db	 00h, 28h, 00h, 14h, 00h, 14h
2F94:4FFF  00 14 00 14 00 28			db	 00h, 14h, 00h, 14h, 00h, 28h
2F94:5005  00 14 00 14 00 14			db	 00h, 14h, 00h, 14h, 00h, 14h
2F94:500B  00 14 00 14 00 14			db	 00h, 14h, 00h, 14h, 00h, 14h
2F94:5011  00 14 00 14 00 14			db	 00h, 14h, 00h, 14h, 00h, 14h
2F94:5017  00 14 00 14 00 14			db	 00h, 14h, 00h, 14h, 00h, 14h
2F94:501D  00 14 00 3C 00 14			db	 00h, 14h, 00h, 3Ch, 00h, 14h
2F94:5023  00 28 00 26 00 02			db	 00h, 28h, 00h, 26h, 00h, 02h
2F94:5029  00 12 00 02 00 14			db	 00h, 12h, 00h, 02h, 00h, 14h
2F94:502F  00 14 00 14 00 28			db	 00h, 14h, 00h, 14h, 00h, 28h
2F94:5035  00 14 00 28 00 14			db	 00h, 14h, 00h, 28h, 00h, 14h
2F94:503B  00 26 00 02 00 12			db	 00h, 26h, 00h, 02h, 00h, 12h
2F94:5041  00 02 00 14 00 14			db	 00h, 02h, 00h, 14h, 00h, 14h
2F94:5047  00 14 00 28 00 14			db	 00h, 14h, 00h, 28h, 00h, 14h
2F94:504D  00 28 00 14 00 23			db	 00h, 28h, 00h, 14h, 00h, 23h
2F94:5053  00 05 00 14 00 1E			db	 00h, 05h, 00h, 14h, 00h, 1Eh
2F94:5059  00 0A 00 14 00 28			db	 00h, 0Ah, 00h, 14h, 00h, 28h
2F94:505F  00 14 00 1E 00 0A			db	 00h, 14h, 00h, 1Eh, 00h, 0Ah
2F94:5065  00 14 00 28 00 12			db	 00h, 14h, 00h, 28h, 00h, 12h
2F94:506B  00 02 00 1E 00 0A			db	 00h, 02h, 00h, 1Eh, 00h, 0Ah
2F94:5071  00 14 00 14 00 14			db	 00h, 14h, 00h, 14h, 00h, 14h
2F94:5077  00 14 00 14 00 14			db	 00h, 14h, 00h, 14h, 00h, 14h
2F94:507D  00 14 00 14 00 14			db	 00h, 14h, 00h, 14h, 00h, 14h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 152

2F94:5083  00 04 00 04 00 04			db	 00h, 04h, 00h, 04h, 00h, 04h
2F94:5089  00 04 00 04 00 14			db	 00h, 04h, 00h, 04h, 00h, 14h
2F94:508F  00 14 00 12 00 02			db	 00h, 14h, 00h, 12h, 00h, 02h
2F94:5095  00 07 00 06 00 07			db	 00h, 07h, 00h, 06h, 00h, 07h
2F94:509B  00 14 00 14 00 0A			db	 00h, 14h, 00h, 14h, 00h, 0Ah
2F94:50A1  00 0A 00 14 00 14			db	 00h, 0Ah, 00h, 14h, 00h, 14h
2F94:50A7  00 28 00 04 00 04			db	 00h, 28h, 00h, 04h, 00h, 04h
2F94:50AD  00 04 00 04 00 04			db	 00h, 04h, 00h, 04h, 00h, 04h
2F94:50B3  00 14 00 14 00 12			db	 00h, 14h, 00h, 14h, 00h, 12h
2F94:50B9  00 02 00 07 00 06			db	 00h, 02h, 00h, 07h, 00h, 06h
2F94:50BF  00 07 00 14 00 14			db	 00h, 07h, 00h, 14h, 00h, 14h
2F94:50C5  00 0A 00 0A 00 14			db	 00h, 0Ah, 00h, 0Ah, 00h, 14h
2F94:50CB  00 14 00 28 00 14			db	 00h, 14h, 00h, 28h, 00h, 14h
2F94:50D1  00 14 00 14 00 14			db	 00h, 14h, 00h, 14h, 00h, 14h
2F94:50D7  00 28 00 14 00 14			db	 00h, 28h, 00h, 14h, 00h, 14h
2F94:50DD  00 14 00 14 00 28			db	 00h, 14h, 00h, 14h, 00h, 28h
2F94:50E3  00 14 00 14 00 14			db	 00h, 14h, 00h, 14h, 00h, 14h
2F94:50E9  00 14 00 28 00 14			db	 00h, 14h, 00h, 28h, 00h, 14h
2F94:50EF  00 14 00 14 00 14			db	 00h, 14h, 00h, 14h, 00h, 14h
2F94:50F5  00 14 00 14 00 14			db	 00h, 14h, 00h, 14h, 00h, 14h
2F94:50FB  00 14 00 14 00 14			db	 00h, 14h, 00h, 14h, 00h, 14h
2F94:5101  00 14 00 14 00 14			db	 00h, 14h, 00h, 14h, 00h, 14h
2F94:5107  00 14 00 28 00 14			db	 00h, 14h, 00h, 28h, 00h, 14h
2F94:510D  00					db	 00h
2F94:510E  40			data_244	db	40h			;  xref 2F94:5155
2F94:510F  1F 58 1B 88 13 64			db	 1Fh, 58h, 1Bh, 88h, 13h, 64h
2F94:5115  00 00 F0 78 00 00			db	 00h, 00h,0F0h, 78h, 00h, 00h
2F94:511B  F0 78 00 FF FF 01			db	0F0h, 78h, 00h,0FFh,0FFh, 01h
2F94:5121  00 01 00 02 00 02			db	 00h, 01h, 00h, 02h, 00h, 02h
2F94:5127  00 01 00 01 00 01			db	 00h, 01h, 00h, 01h, 00h, 01h
2F94:512D  00 01 00				db	 00h, 01h, 00h

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         data in si and bp
				;
				;         Called from:   2F94:01A3, 0319
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:5130			play_march	proc	near
2F94:5130  53					push	bx
2F94:5131  57					push	di
2F94:5132  56					push	si
2F94:5133  55					push	bp
2F94:5134			loc_483:					;  xref 2F94:5149
2F94:5134  8B 3C				mov	di,[si]
2F94:5136  81 FF FFFF				cmp	di,0FFFFh
2F94:513A  74 0F				je	loc_484			; Jump if equal
2F94:513C  3E: 8B 5E 00				mov	bx,ds:[bp]
2F94:5140  E8 0068				call	play_note		; (51AB)
2F94:5143  83 C6 02				add	si,2
2F94:5146  83 C5 02				add	bp,2
2F94:5149  75 E9				jnz	loc_483			; Jump if not zero
2F94:514B			loc_484:					;  xref 2F94:513A
2F94:514B  5D					pop	bp
2F94:514C  5E					pop	si
2F94:514D  5F					pop	di
2F94:514E  5B					pop	bx
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 153

2F94:514F  C3					retn
				play_march	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                              SUBROUTINE
				;
				;         Called from:   2F94:7831, 786F, 78AD, 78EB, 7910, 7951, 7980
				;                             79B8
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:5150			sub_11		proc	near
2F94:5150  50					push	ax
2F94:5151  53					push	bx
2F94:5152  51					push	cx
2F94:5153  57					push	di
2F94:5154  56					push	si
2F94:5155 .BE 510E				mov	si,offset data_244	; (2F94:510E=40h)
2F94:5158  B9 5120				mov	cx,5120h
2F94:515B			loc_485:					;  xref 2F94:51A3
2F94:515B  8B 3C				mov	di,[si]
2F94:515D  81 FF FFFF				cmp	di,0FFFFh
2F94:5161  74 42				je	loc_489			; Jump if equal
2F94:5163  A1 2B03				mov	ax,[systick_2b03]	; (2F94:2B03=0)
2F94:5166  D1 C8				ror	ax,1			; Rotate
2F94:5168  A3 2B03				mov	[systick_2b03],ax	; (2F94:2B03=0)
2F94:516B  25 00FF				and	ax,0FFh
2F94:516E  03 F8				add	di,ax
2F94:5170  8B D9				mov	bx,cx
2F94:5172  8B 1F				mov	bx,[bx]
2F94:5174  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:5179  75 1F				jnz	loc_487			; Jump if not zero
2F94:517B  F6 06 0132 01			test	[joystick_selected],1	; (2F94:0132=0)
2F94:5180  75 0B				jnz	loc_486			; Jump if not zero
2F94:5182  53					push	bx
2F94:5183  BB 0002				mov	bx,2
2F94:5186  E8 2487				call	wait_interrupt		; (7610)
2F94:5189  5B					pop	bx
2F94:518A  EB 11				jmp	short loc_488		; (519D)
2F94:518C  90					db	90h
2F94:518D			loc_486:					;  xref 2F94:5180
2F94:518D  53					push	bx
2F94:518E  8B 1E 3B60				mov	bx,[data_190]		; (2F94:3B60=1F40h)
2F94:5192  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:5196  5B					pop	bx
2F94:5197  EB 04				jmp	short loc_488		; (519D)
2F94:5199  90					db	90h
2F94:519A			loc_487:					;  xref 2F94:5179
2F94:519A  E8 0053				call	sub_12			; (51F0)
2F94:519D			loc_488:					;  xref 2F94:518A, 5197
2F94:519D  83 C6 02				add	si,2
2F94:51A0  83 C1 02				add	cx,2
2F94:51A3  75 B6				jnz	loc_485			; Jump if not zero
2F94:51A5			loc_489:					;  xref 2F94:5161
2F94:51A5  5E					pop	si
2F94:51A6  5F					pop	di
2F94:51A7  59					pop	cx
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 154

2F94:51A8  5B					pop	bx
2F94:51A9  58					pop	ax
2F94:51AA  C3					retn
				sub_11		endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          play_note
				;
				;         Called from:   2F94:5140
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:51AB			play_note	proc	near
2F94:51AB  50					push	ax
2F94:51AC  53					push	bx
2F94:51AD  51					push	cx
2F94:51AE  52					push	dx
2F94:51AF  57					push	di
2F94:51B0  B0 B6				mov	al,0B6h
2F94:51B2  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:51B4  BA 0014				mov	dx,14h
2F94:51B7  B8 4F38				mov	ax,4F38h
2F94:51BA  F7 F7				div	di			; ax,dx rem=dx:ax/reg
2F94:51BC  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:51BE  8A C4				mov	al,ah
2F94:51C0  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:51C2  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:51C4  8A E0				mov	ah,al
2F94:51C6  0C 03				or	al,3
2F94:51C8  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
										;  al = 4Fh, speaker on
2F94:51CA			loc_490:					;  xref 2F94:51E4
2F94:51CA  53					push	bx
2F94:51CB  8B 1E 3B62				mov	bx,[data_191]		; (2F94:3B62=4268h)
2F94:51CF  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:51D3  5B					pop	bx
2F94:51D4  50					push	ax
2F94:51D5  E8 BFA0				call	check_stick		; (1178)
2F94:51D8  3C 00				cmp	al,0
2F94:51DA  58					pop	ax
2F94:51DB  74 06				jz	loc_491			; Jump if zero
2F94:51DD  BD FFFE				mov	bp,0FFFEh
2F94:51E0  BB 0001				mov	bx,1
2F94:51E3			loc_491:					;  xref 2F94:51DB
2F94:51E3  4B					dec	bx
2F94:51E4  75 E4				jnz	loc_490			; Jump if not zero
2F94:51E6  8A C4				mov	al,ah
2F94:51E8  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
										;  al = 4Fh, speaker on
2F94:51EA  5F					pop	di
2F94:51EB  5A					pop	dx
2F94:51EC  59					pop	cx
2F94:51ED  5B					pop	bx
2F94:51EE  58					pop	ax
2F94:51EF  C3					retn
				play_note	endp

           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 155


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                              SUBROUTINE
				;
				;         Called from:   2F94:519A
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:51F0			sub_12		proc	near
2F94:51F0  50					push	ax
2F94:51F1  53					push	bx
2F94:51F2  51					push	cx
2F94:51F3  52					push	dx
2F94:51F4  57					push	di
2F94:51F5  B0 B6				mov	al,0B6h
2F94:51F7  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:51F9  BA 0014				mov	dx,14h
2F94:51FC  B8 4F38				mov	ax,4F38h
2F94:51FF  F7 F7				div	di			; ax,dx rem=dx:ax/reg
2F94:5201  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:5203  8A C4				mov	al,ah
2F94:5205  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:5207  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:5209  8A E0				mov	ah,al
2F94:520B  0C 03				or	al,3
2F94:520D  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
										;  al = 4Fh, speaker on
2F94:520F			loc_492:					;  xref 2F94:521A
2F94:520F  53					push	bx
2F94:5210  8B 1E 3B64				mov	bx,[data_192]		; (2F94:3B64=1770h)
2F94:5214  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:5218  5B					pop	bx
2F94:5219  4B					dec	bx
2F94:521A  75 F3				jnz	loc_492			; Jump if not zero
2F94:521C  8A C4				mov	al,ah
2F94:521E  24 FC				and	al,0FCh
2F94:5220  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
										;  al = 4Ch, enable keyboard
2F94:5222  5F					pop	di
2F94:5223  5A					pop	dx
2F94:5224  59					pop	cx
2F94:5225  5B					pop	bx
2F94:5226  58					pop	ax
2F94:5227  C3					retn
				sub_12		endp

2F94:5228  0008[00]				db	8 dup (0)

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                              SUBROUTINE
				;
				;         Called from:   2F94:30A2
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:5230			sub_13		proc	near
2F94:5230  52					push	dx
2F94:5231  51					push	cx
2F94:5232  D1 E1				shl	cx,1			; Shift w/zeros fill
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 156

2F94:5234  D1 E1				shl	cx,1			; Shift w/zeros fill
2F94:5236  A0 0134				mov	al,byte ptr [player_x]	; (2F94:0134=0)
2F94:5239  98					cbw				; Convrt byte to word
2F94:523A  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:523C  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:523E  F7 D9				neg	cx
2F94:5240  03 C8				add	cx,ax
2F94:5242  32 E4				xor	ah,ah			; Zero register
2F94:5244  A0 0136				mov	al,[player_y]		; (2F94:0136=0)
2F94:5247  F7 DA				neg	dx
2F94:5249  03 D0				add	dx,ax
2F94:524B  0B C9				or	cx,cx			; Zero ?
2F94:524D  75 07				jnz	loc_493			; Jump if not zero
2F94:524F  0B D2				or	dx,dx			; Zero ?
2F94:5251  75 03				jnz	loc_493			; Jump if not zero
2F94:5253  32 C0				xor	al,al			; Zero register
2F94:5255  C3					retn
2F94:5256			loc_493:					;  xref 2F94:524D, 5251
2F94:5256  83 F9 00				cmp	cx,0
2F94:5259  7F 45				jg	loc_499			; Jump if >
2F94:525B  83 FA 00				cmp	dx,0
2F94:525E  7F 21				jg	loc_496			; Jump if >
2F94:5260  F7 D9				neg	cx
2F94:5262  F7 DA				neg	dx
2F94:5264  D1 E1				shl	cx,1			; Shift w/zeros fill
2F94:5266  3B D1				cmp	dx,cx
2F94:5268  7E 05				jle	loc_494			; Jump if < or =
2F94:526A  B0 02				mov	al,2
2F94:526C  EB 6F				jmp	short loc_505		; (52DD)
2F94:526E  90					db	90h
2F94:526F			loc_494:					;  xref 2F94:5268
2F94:526F  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5271  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5273  3B D1				cmp	dx,cx
2F94:5275  7F 05				jg	loc_495			; Jump if >
2F94:5277  B0 04				mov	al,4
2F94:5279  EB 62				jmp	short loc_505		; (52DD)
2F94:527B  90					db	90h
2F94:527C			loc_495:					;  xref 2F94:5275
2F94:527C  B0 01				mov	al,1
2F94:527E  EB 5D				jmp	short loc_505		; (52DD)
2F94:5280  90					db	90h
2F94:5281			loc_496:					;  xref 2F94:525E
2F94:5281  F7 D9				neg	cx
2F94:5283  D1 E1				shl	cx,1			; Shift w/zeros fill
2F94:5285  3B D1				cmp	dx,cx
2F94:5287  7E 05				jle	loc_497			; Jump if < or =
2F94:5289  B0 07				mov	al,7
2F94:528B  EB 50				jmp	short loc_505		; (52DD)
2F94:528D  90					db	90h
2F94:528E			loc_497:					;  xref 2F94:5287
2F94:528E  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5290  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5292  3B D1				cmp	dx,cx
2F94:5294  7F 05				jg	loc_498			; Jump if >
2F94:5296  B0 04				mov	al,4
2F94:5298  EB 43				jmp	short loc_505		; (52DD)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 157

2F94:529A  90					db	90h
2F94:529B			loc_498:					;  xref 2F94:5294
2F94:529B  B0 06				mov	al,6
2F94:529D  EB 3E				jmp	short loc_505		; (52DD)
2F94:529F  90					db	90h
2F94:52A0			loc_499:					;  xref 2F94:5259
2F94:52A0  83 FA 00				cmp	dx,0
2F94:52A3  7F 1F				jg	loc_502			; Jump if >
2F94:52A5  F7 DA				neg	dx
2F94:52A7  D1 E1				shl	cx,1			; Shift w/zeros fill
2F94:52A9  3B D1				cmp	dx,cx
2F94:52AB  7E 05				jle	loc_500			; Jump if < or =
2F94:52AD  B0 02				mov	al,2
2F94:52AF  EB 2C				jmp	short loc_505		; (52DD)
2F94:52B1  90					db	90h
2F94:52B2			loc_500:					;  xref 2F94:52AB
2F94:52B2  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:52B4  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:52B6  3B D1				cmp	dx,cx
2F94:52B8  7F 05				jg	loc_501			; Jump if >
2F94:52BA  B0 05				mov	al,5
2F94:52BC  EB 1F				jmp	short loc_505		; (52DD)
2F94:52BE  90					db	90h
2F94:52BF			loc_501:					;  xref 2F94:52B8
2F94:52BF  B0 03				mov	al,3
2F94:52C1  EB 1A				jmp	short loc_505		; (52DD)
2F94:52C3  90					db	90h
2F94:52C4			loc_502:					;  xref 2F94:52A3
2F94:52C4  D1 E1				shl	cx,1			; Shift w/zeros fill
2F94:52C6  3B D1				cmp	dx,cx
2F94:52C8  7E 04				jle	loc_503			; Jump if < or =
2F94:52CA  B0 07				mov	al,7
2F94:52CC  7F 0F				jg	loc_505			; Jump if >
2F94:52CE			loc_503:					;  xref 2F94:52C8
2F94:52CE  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:52D0  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:52D2  3B D1				cmp	dx,cx
2F94:52D4  7F 05				jg	loc_504			; Jump if >
2F94:52D6  B0 05				mov	al,5
2F94:52D8  EB 03				jmp	short loc_505		; (52DD)
2F94:52DA  90					db	90h
2F94:52DB			loc_504:					;  xref 2F94:52D4
2F94:52DB  B0 08				mov	al,8
2F94:52DD			loc_505:					;  xref 2F94:526C, 5279, 527E, 528B
										;            5298, 529D, 52AF, 52BC
										;            52C1, 52CC, 52D8
2F94:52DD  59					pop	cx
2F94:52DE  5A					pop	dx
2F94:52DF  C3					retn
				sub_13		endp

2F94:52E0  0019[0000]		data_246	dw	25 dup (0)		;  xref 2F94:537D, 53ED, 54CC
2F94:5312  00					db	0
2F94:5313  00			data_247	db	0			;  xref 2F94:03C0, 04D3, 533F, 53D0
										;            53DF, 5466, 5475, 5494
										;            5528, 5530, 5536
2F94:5314  03			data_248	db	3			;  xref 2F94:5378, 53E9, 5490, 552C
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 158

2F94:5315  00			data_249	db	0			;  xref 2F94:54F5
2F94:5316  00 FF FD 01 FD 04			db	 00h,0FFh,0FDh, 01h,0FDh, 04h
2F94:531C  FD FF 02 04 02 FF			db	0FDh,0FFh, 02h, 04h, 02h,0FFh
2F94:5322  08 02 08 04				db	 08h, 02h, 08h, 04h
2F94:5326  08					db	8
2F94:5327  0000			data_250	dw	0			;  xref 2F94:5347, 536C, 53CA, 547C
										;            54C5
2F94:5329  30			data_251	db	30h			;  xref 2F94:53BE, 5403, 5517
2F94:532A  FC 30 00				db	0FCh, 30h, 00h
2F94:532D  00			data_252	db	0			;  xref 2F94:5399
2F94:532E  00 FF FC 00 FC 01			db	 00h,0FFh,0FCh, 00h,0FCh, 01h
2F94:5334  FC FF 00 01 00 FF			db	0FCh,0FFh, 00h, 01h, 00h,0FFh
2F94:533A  04 00 04 01 04			db	 04h, 00h, 04h, 01h, 04h

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                              SUBROUTINE
				;
				;         Called from:   2F94:0245, 0253
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:533F			sub_14		proc	near
2F94:533F  80 3E 5313 00			cmp	[data_247],0		; (2F94:5313=0)
2F94:5344  77 01				ja	loc_506			; Jump if above
2F94:5346  C3					retn
2F94:5347			loc_506:					;  xref 2F94:5344
2F94:5347  83 06 5327 1E			add	[data_250],1Eh		; (2F94:5327=0)
2F94:534C  83 3E 4582 00			cmp	[data_233],0		; (2F94:4582=0)
2F94:5351  7F 23				jg	loc_507			; Jump if >
2F94:5353  80 3E 014A 00			cmp	[data_37],0		; (2F94:014A=0)
2F94:5358  7F 1C				jg	loc_507			; Jump if >
2F94:535A  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:535F  74 15				jz	loc_507			; Jump if zero
2F94:5361  50					push	ax
2F94:5362  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:5364  0C 03				or	al,3
2F94:5366  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:5368  B0 B6				mov	al,0B6h
2F94:536A  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:536C  A1 5327				mov	ax,[data_250]		; (2F94:5327=0)
2F94:536F  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:5371  8A C4				mov	al,ah
2F94:5373  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:5375  58					pop	ax
2F94:5376			loc_507:					;  xref 2F94:5351, 5358, 535F
2F94:5376  33 C9				xor	cx,cx			; Zero register
2F94:5378  8A 0E 5314				mov	cl,[data_248]		; (2F94:5314=3)
2F94:537C  56					push	si
2F94:537D .BE 52E0				mov	si,offset data_246	; (2F94:52E0=0)
2F94:5380			loc_508:					;  xref 2F94:53DB
2F94:5380 њ51					push	cx
2F94:5381  80 3C 01				cmp	byte ptr [si],1
2F94:5384  74 03				je	loc_509			; Jump if equal
2F94:5386  EB 4C				jmp	short loc_511		; (53D4)
2F94:5388  90					db	90h
2F94:5389			loc_509:					;  xref 2F94:5384
2F94:5389  33 D2				xor	dx,dx			; Zero register
2F94:538B  33 C9				xor	cx,cx			; Zero register
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 159

2F94:538D  8A 4C 01				mov	cl,[si+1]
2F94:5390  8A 54 02				mov	dl,[si+2]
2F94:5393  8A 44 03				mov	al,[si+3]
2F94:5396  98					cbw				; Convrt byte to word
2F94:5397  D0 E0				shl	al,1			; Shift w/zeros fill
2F94:5399 .BB 532D				mov	bx,offset data_252	; (2F94:532D=0)
2F94:539C  03 D8				add	bx,ax
2F94:539E  02 0F				add	cl,[bx]
2F94:53A0  02 57 01				add	dl,[bx+1]
2F94:53A3  0A C9				or	cl,cl			; Zero ?
2F94:53A5  74 20				jz	loc_510			; Jump if zero
2F94:53A7  0A D2				or	dl,dl			; Zero ?
2F94:53A9  74 1C				jz	loc_510			; Jump if zero
2F94:53AB  80 F9 4E				cmp	cl,4Eh			; 'N'
2F94:53AE  77 17				ja	loc_510			; Jump if above
2F94:53B0  80 FA AA				cmp	dl,0AAh
2F94:53B3  77 12				ja	loc_510			; Jump if above
2F94:53B5  88 4C 01				mov	[si+1],cl
2F94:53B8  88 54 02				mov	[si+2],dl
2F94:53BB  BB 0301				mov	bx,301h
2F94:53BE .BF 5329				mov	di,offset data_251	; (2F94:5329=30h)
2F94:53C1  E8 C08C				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:53C4  EB 0E				jmp	short loc_511		; (53D4)
2F94:53C6  90					db	90h
2F94:53C7			loc_510:					;  xref 2F94:53A5, 53A9, 53AE, 53B3
2F94:53C7  C6 04 00				mov	byte ptr [si],0
2F94:53CA  C7 06 5327 0000			mov	[data_250],0		; (2F94:5327=0)
2F94:53D0  FE 0E 5313				dec	[data_247]		; (2F94:5313=0)
2F94:53D4			loc_511:					;  xref 2F94:5386, 53C4
2F94:53D4  59					pop	cx
2F94:53D5  83 C6 05				add	si,5
2F94:53D8  49					dec	cx
2F94:53D9  74 02				jz	loc_512			; Jump if zero
2F94:53DB  EB A3				jmp	short loc_508		; (5380)
2F94:53DD			loc_512:					;  xref 2F94:53D9
2F94:53DD  5E					pop	si
2F94:53DE  C3					retn
				sub_14		endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                              SUBROUTINE
				;
				;         Called from:   2F94:023F, 0250
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:53DF			sub_15		proc	near
2F94:53DF  80 3E 5313 00			cmp	[data_247],0		; (2F94:5313=0)
2F94:53E4  77 01				ja	loc_513			; Jump if above
2F94:53E6  C3					retn
2F94:53E7			loc_513:					;  xref 2F94:53E4
2F94:53E7  33 C9				xor	cx,cx			; Zero register
2F94:53E9  8A 0E 5314				mov	cl,[data_248]		; (2F94:5314=3)
2F94:53ED .BE 52E0				mov	si,offset data_246	; (2F94:52E0=0)
2F94:53F0			loc_514:					;  xref 2F94:5472
2F94:53F0 њ51					push	cx
2F94:53F1  80 3C 01				cmp	byte ptr [si],1
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 160

2F94:53F4  74 03				je	loc_515			; Jump if equal
2F94:53F6  EB 72				jmp	short loc_518		; (546A)
2F94:53F8  90					db	90h
2F94:53F9			loc_515:					;  xref 2F94:53F4
2F94:53F9  33 D2				xor	dx,dx			; Zero register
2F94:53FB  33 C9				xor	cx,cx			; Zero register
2F94:53FD  8A 4C 01				mov	cl,[si+1]
2F94:5400  8A 54 02				mov	dl,[si+2]
2F94:5403 .BF 5329				mov	di,offset data_251	; (2F94:5329=30h)
2F94:5406  BB 0301				mov	bx,301h
2F94:5409  E8 C079				call	draw_sprite_xor_v3_check_wall	; (1485)
2F94:540C  80 3E 1330 00			cmp	[collision_1330],0	; (2F94:1330=0)
2F94:5411  74 57				je	loc_518			; Jump if equal
2F94:5413  C6 04 00				mov	byte ptr [si],0
2F94:5416  83 3E 4582 00			cmp	[data_233],0		; (2F94:4582=0)
2F94:541B  7F 49				jg	loc_517			; Jump if >
2F94:541D  80 3E 014A 00			cmp	[data_37],0		; (2F94:014A=0)
2F94:5422  7F 42				jg	loc_517			; Jump if >
2F94:5424  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:5429  74 15				jz	loc_516			; Jump if zero
2F94:542B  50					push	ax
2F94:542C  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:542E  0C 03				or	al,3
2F94:5430  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:5432  B0 B6				mov	al,0B6h
2F94:5434  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:5436  B8 03E8				mov	ax,3E8h
2F94:5439  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:543B  8A C4				mov	al,ah
2F94:543D  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:543F  58					pop	ax
2F94:5440			loc_516:					;  xref 2F94:5429
2F94:5440  53					push	bx
2F94:5441  8B 1E 3B6E				mov	bx,[data_197]		; (2F94:3B6E=0)
2F94:5445  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:5449  5B					pop	bx
2F94:544A  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:544F  74 15				jz	loc_517			; Jump if zero
2F94:5451  50					push	ax
2F94:5452  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:5454  0C 03				or	al,3
2F94:5456  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:5458  B0 B6				mov	al,0B6h
2F94:545A  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:545C  B8 07D0				mov	ax,7D0h
2F94:545F  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:5461  8A C4				mov	al,ah
2F94:5463  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:5465  58					pop	ax
2F94:5466			loc_517:					;  xref 2F94:541B, 5422, 544F
2F94:5466  FE 0E 5313				dec	[data_247]		; (2F94:5313=0)
2F94:546A			loc_518:					;  xref 2F94:53F6, 5411
2F94:546A  83 C6 05				add	si,5
2F94:546D  59					pop	cx
2F94:546E  FE C9				dec	cl
2F94:5470  74 03				jz	loc_519			; Jump if zero
2F94:5472  E9 FF7B				jmp	loc_514			; (53F0)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 161

2F94:5475			loc_519:					;  xref 2F94:5470
2F94:5475  80 3E 5313 00			cmp	[data_247],0		; (2F94:5313=0)
2F94:547A  7F 06				jg	loc_520			; Jump if >
2F94:547C  C7 06 5327 0000			mov	[data_250],0		; (2F94:5327=0)
2F94:5482			loc_520:					;  xref 2F94:547A
2F94:5482  50					push	ax
2F94:5483  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:5485  24 FC				and	al,0FCh
2F94:5487  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
										;  al = 0, speaker off
2F94:5489  58					pop	ax
2F94:548A  C3					retn
				sub_15		endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                              SUBROUTINE
				;
				;         Called from:   2F94:30A5
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:548B			sub_16		proc	near
2F94:548B  3C 00				cmp	al,0
2F94:548D  75 01				jne	loc_521			; Jump if not equal
2F94:548F  C3					retn
2F94:5490			loc_521:					;  xref 2F94:548D
2F94:5490  8A 26 5314				mov	ah,[data_248]		; (2F94:5314=3)
2F94:5494  3A 26 5313				cmp	ah,[data_247]		; (2F94:5313=0)
2F94:5498  77 01				ja	loc_522			; Jump if above
2F94:549A  C3					retn
2F94:549B			loc_522:					;  xref 2F94:5498
2F94:549B  83 3E 4582 00			cmp	[data_233],0		; (2F94:4582=0)
2F94:54A0  7F 29				jg	loc_524			; Jump if >
2F94:54A2  80 3E 014A 00			cmp	[data_37],0		; (2F94:014A=0)
2F94:54A7  7F 22				jg	loc_524			; Jump if >
2F94:54A9  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:54AE  74 15				jz	loc_523			; Jump if zero
2F94:54B0  50					push	ax
2F94:54B1  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:54B3  0C 03				or	al,3
2F94:54B5  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:54B7  B0 B6				mov	al,0B6h
2F94:54B9  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:54BB  B8 00FA				mov	ax,0FAh
2F94:54BE  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:54C0  8A C4				mov	al,ah
2F94:54C2  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:54C4  58					pop	ax
2F94:54C5			loc_523:					;  xref 2F94:54AE
2F94:54C5  C7 06 5327 00FA			mov	[data_250],0FAh		; (2F94:5327=0)
2F94:54CB			loc_524:					;  xref 2F94:54A0, 54A7
2F94:54CB  56					push	si
2F94:54CC .BE 52E0				mov	si,offset data_246	; (2F94:52E0=0)
2F94:54CF  80 3C 00				cmp	byte ptr [si],0
2F94:54D2  74 1B				je	loc_525			; Jump if equal
2F94:54D4  83 C6 05				add	si,5
2F94:54D7  80 3C 00				cmp	byte ptr [si],0
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 162

2F94:54DA  74 13				je	loc_525			; Jump if equal
2F94:54DC  83 C6 05				add	si,5
2F94:54DF  80 3C 00				cmp	byte ptr [si],0
2F94:54E2  74 0B				je	loc_525			; Jump if equal
2F94:54E4  83 C6 05				add	si,5
2F94:54E7  80 3C 00				cmp	byte ptr [si],0
2F94:54EA  74 03				je	loc_525			; Jump if equal
2F94:54EC  83 C6 05				add	si,5
2F94:54EF			loc_525:					;  xref 2F94:54D2, 54DA, 54E2, 54EA
2F94:54EF  88 44 03				mov	[si+3],al
2F94:54F2  98					cbw				; Convrt byte to word
2F94:54F3  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:54F5 .BB 5315				mov	bx,offset data_249	; (2F94:5315=0)
2F94:54F8  03 D8				add	bx,ax
2F94:54FA  02 0F				add	cl,[bx]
2F94:54FC  02 57 01				add	dl,[bx+1]
2F94:54FF  0A C9				or	cl,cl			; Zero ?
2F94:5501  74 37				jz	loc_526			; Jump if zero
2F94:5503  0A D2				or	dl,dl			; Zero ?
2F94:5505  74 33				jz	loc_526			; Jump if zero
2F94:5507  80 F9 4E				cmp	cl,4Eh			; 'N'
2F94:550A  77 2E				ja	loc_526			; Jump if above
2F94:550C  80 FA AA				cmp	dl,0AAh
2F94:550F  77 29				ja	loc_526			; Jump if above
2F94:5511  88 4C 01				mov	[si+1],cl
2F94:5514  88 54 02				mov	[si+2],dl
2F94:5517 .BF 5329				mov	di,offset data_251	; (2F94:5329=30h)
2F94:551A  BB 0301				mov	bx,301h
2F94:551D  E8 BF30				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:5520  C6 04 01				mov	byte ptr [si],1
2F94:5523  C6 06 012D 00			mov	[data_32],0		; (2F94:012D=0)
2F94:5528  FE 06 5313				inc	[data_247]		; (2F94:5313=0)
2F94:552C  8A 26 5314				mov	ah,[data_248]		; (2F94:5314=3)
2F94:5530  38 26 5313				cmp	[data_247],ah		; (2F94:5313=0)
2F94:5534  76 04				jbe	loc_526			; Jump if below or =
2F94:5536  88 26 5313				mov	[data_247],ah		; (2F94:5313=0)
2F94:553A			loc_526:					;  xref 2F94:5501, 5505, 550A, 550F
										;            5534
2F94:553A  5E					pop	si
2F94:553B  83 3E 4582 00			cmp	[data_233],0		; (2F94:4582=0)
2F94:5540  7F 0F				jg	loc_ret_527		; Jump if >
2F94:5542  80 3E 014A 00			cmp	[data_37],0		; (2F94:014A=0)
2F94:5547  7F 08				jg	loc_ret_527		; Jump if >
2F94:5549  50					push	ax
2F94:554A  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:554C  24 FC				and	al,0FCh
2F94:554E  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
										;  al = 0, speaker off
2F94:5550  58					pop	ax

2F94:5551			loc_ret_527:					;  xref 2F94:5540, 5547
2F94:5551  C3					retn
				sub_16		endp

2F94:5552  000E[00]				db	14 dup (0)
2F94:5560  00			data_254	db	0			;  xref 2F94:049F, 5590, 5597, 559B
										;            560D, 5614, 5789, 5816
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 163

										;            5E87
2F94:5561  00			data_255	db	0			;  xref 2F94:5E4C, 5E92
2F94:5562  00			data_256	db	0			; Data table (indexed access)
										;  xref 2F94:5E74, 5E7F
2F94:5563  06 07 06 05 05 06			db	6, 7, 6, 5, 5, 6
2F94:5569  07 06				db	7, 6
2F94:556B  0000			data_257	dw	0			;  xref 2F94:55DE, 563A, 563E, 5664
										;            566B, 5693
2F94:556D  00			data_258	db	0			;  xref 2F94:5DFC, 5E1A, 5E29
2F94:556E  00			data_259	db	0			;  xref 2F94:04A4, 55E6, 5635
2F94:556F  00			data_260	db	0			;  xref 2F94:55AE, 55FE, 5710, 57A2
										;            57A6, 5820, 596E, 59A4
										;            5A0C, 5A1A, 5AD3
2F94:5570  00			data_261	db	0			;  xref 2F94:55A6, 55F3, 56CD, 56DA
										;            56EC, 56F4, 5702, 57BA
										;            57BE, 57C9, 57CD, 597B
										;            5BFD
2F94:5571  0000			data_262	dw	0			;  xref 2F94:5C79, 5C7D, 5CAE, 5CB2
										;            5CE8, 5CEC, 5D16, 5D1A
										;            5D44, 5D48, 5D7E, 5D82
										;            5DAC, 5DB0, 5DE6, 5DEA
										;            5E0C, 5E10, 5EB9
2F94:5573  0000			data_263	dw	0			;  xref 2F94:5935, 59B6, 59D9, 5A3E
										;            5A55, 5A5D, 5A68, 5A70
										;            5A7A, 5A81, 5AA0, 5AB2
										;            5AB7, 5BDE, 5C26, 5C3D
2F94:5575  0000			data_264	dw	0			;  xref 2F94:5AE6, 5B06, 5B26, 5B46
										;            5B55, 5B75, 5B95, 5BB5
										;            5DF3
2F94:5577  0000			data_265	dw	0			;  xref 2F94:59BD, 59CD
2F94:5579  0000			data_266	dw	0			;  xref 2F94:59C2, 5A32
2F94:557B  00			data_267	db	0			;  xref 2F94:55AA, 55F7, 56D2, 56DF
										;            56E7, 56F9, 5706, 57DD
										;            57E1, 57E5, 57E9, 57F8
										;            57FC, 5800, 5804, 597F
										;            5C02
2F94:557C  0000			data_268	dw	0			;  xref 2F94:593F, 5998, 5A04
2F94:557E  0000			data_269	dw	0			;  xref 2F94:02F1, 5939, 7C3C
2F94:5580  00			data_270	db	0			; Data table (indexed access)
										;  xref 2F94:5C0E, 5C47, 5C4E, 5C56
										;            5C5E, 5CA2, 5CAA, 5CBD
										;            5CC4, 5CC9, 5CD0, 5CF7
										;            5CFE, 5D06, 5D0E, 5D25
										;            5D2C, 5D31, 5D38, 5D53
										;            5D5A, 5D62, 5D6A, 5D9D
										;            5DA4, 5DBB, 5DC2, 5DC7
										;            5DCE, 5E04
2F94:5581  00			data_271	db	0			; Data table (indexed access)
										;  xref 2F94:5C12, 5C62, 5C69, 5C70
										;            5C75, 5C88, 5C8F, 5C96
										;            5C9B, 5CD8, 5CDF, 5CE4
										;            5D12, 5D40, 5D6E, 5D75
										;            5D7A, 5D8D, 5D94, 5D99
										;            5DD6, 5DDD, 5DE2, 5E08
2F94:5582  000E[00]				db	14 dup (0)

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 164

				;                              SUBROUTINE
				;
				;         Called from:   2F94:02EE
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:5590			sub_17		proc	near
2F94:5590  80 3E 5560 00			cmp	[data_254],0		; (2F94:5560=0)
2F94:5595  7E 4F				jle	loc_530			; Jump if < or =
2F94:5597  FE 0E 5560				dec	[data_254]		; (2F94:5560=0)
2F94:559B  FE 0E 5560				dec	[data_254]		; (2F94:5560=0)
2F94:559F  74 01				jz	loc_528			; Jump if zero
2F94:55A1  C3					retn
2F94:55A2			loc_528:					;  xref 2F94:559F
2F94:55A2  33 C9				xor	cx,cx			; Zero register
2F94:55A4  33 D2				xor	dx,dx			; Zero register
2F94:55A6  8A 0E 5570				mov	cl,[data_261]		; (2F94:5570=0)
2F94:55AA  8A 16 557B				mov	dl,[data_267]		; (2F94:557B=0)
2F94:55AE  A0 556F				mov	al,[data_260]		; (2F94:556F=0)
2F94:55B1 .BF 723D				mov	di,offset spr_shadow3_3b	; (2F94:723D=3Fh)
2F94:55B4  98					cbw				; Convrt byte to word
2F94:55B5  03 F8				add	di,ax
2F94:55B7  BB 2403				mov	bx,2403h
2F94:55BA  E8 BEC8				call	draw_sprite_xor_v3_check_wall	; (1485)
2F94:55BD  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:55C2  74 15				jz	loc_529			; Jump if zero
2F94:55C4  50					push	ax
2F94:55C5  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:55C7  0C 03				or	al,3
2F94:55C9  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:55CB  B0 B6				mov	al,0B6h
2F94:55CD  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:55CF  B8 32C8				mov	ax,32C8h
2F94:55D2  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:55D4  8A C4				mov	al,ah
2F94:55D6  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:55D8  58					pop	ax
2F94:55D9			loc_529:					;  xref 2F94:55C2
2F94:55D9  C6 06 014A 01			mov	[data_37],1		; (2F94:014A=0)
2F94:55DE  C6 06 556B 0C			mov	byte ptr [data_257],0Ch	; (2F94:556B=0)
2F94:55E3  E9 01BA				jmp	loc_548			; (57A0)
2F94:55E6			loc_530:					;  xref 2F94:5595
2F94:55E6  FE 0E 556E				dec	[data_259]		; (2F94:556E=0)
2F94:55EA  75 03				jnz	loc_531			; Jump if not zero
2F94:55EC  EB 47				jmp	short loc_533		; (5635)
2F94:55EE  90					db	90h
2F94:55EF			loc_531:					;  xref 2F94:55EA
2F94:55EF  33 C9				xor	cx,cx			; Zero register
2F94:55F1  33 D2				xor	dx,dx			; Zero register
2F94:55F3  8A 0E 5570				mov	cl,[data_261]		; (2F94:5570=0)
2F94:55F7  8A 16 557B				mov	dl,[data_267]		; (2F94:557B=0)
2F94:55FB  BB 2403				mov	bx,2403h
2F94:55FE  A0 556F				mov	al,[data_260]		; (2F94:556F=0)
2F94:5601  98					cbw				; Convrt byte to word
2F94:5602 .BF 71F5				mov	di,offset spr_shadow2_3b	; (2F94:71F5=2Ah)
2F94:5605  03 F8				add	di,ax
2F94:5607  E8 BE7B				call	draw_sprite_xor_v3_check_wall	; (1485)
2F94:560A  E8 0831				call	sub_19			; (5E3E)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 165

2F94:560D  80 3E 5560 1E			cmp	[data_254],1Eh		; (2F94:5560=0)
2F94:5612  75 15				jne	loc_532			; Jump if not equal
2F94:5614  C6 06 5560 1E			mov	[data_254],1Eh		; (2F94:5560=0)
2F94:5619  32 F6				xor	dh,dh			; Zero register
2F94:561B .BF 723D				mov	di,offset spr_shadow3_3b	; (2F94:723D=3Fh)
2F94:561E  03 F8				add	di,ax
2F94:5620  BB 2403				mov	bx,2403h
2F94:5623  E8 BE2A				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:5626  E9 0214				jmp	loc_554			; (583D)
2F94:5629			loc_532:					;  xref 2F94:5612
2F94:5629 .BF 71F5				mov	di,offset spr_shadow2_3b	; (2F94:71F5=2Ah)
2F94:562C  03 F8				add	di,ax
2F94:562E  BB 2403				mov	bx,2403h
2F94:5631  E8 BE51				call	draw_sprite_xor_v3_check_wall	; (1485)
2F94:5634  C3					retn
2F94:5635			loc_533:					;  xref 2F94:55EC
2F94:5635  C6 06 556E 03			mov	[data_259],3		; (2F94:556E=0)
2F94:563A  FE 0E 556B				dec	byte ptr [data_257]	; (2F94:556B=0)
2F94:563E  80 3E 556B 0A			cmp	byte ptr [data_257],0Ah	; (2F94:556B=0)
2F94:5643  75 1F				jne	loc_535			; Jump if not equal
2F94:5645  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:564A  74 15				jz	loc_534			; Jump if zero
2F94:564C  50					push	ax
2F94:564D  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:564F  0C 03				or	al,3
2F94:5651  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:5653  B0 B6				mov	al,0B6h
2F94:5655  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:5657  B8 4268				mov	ax,4268h
2F94:565A  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:565C  8A C4				mov	al,ah
2F94:565E  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:5660  58					pop	ax
2F94:5661			loc_534:					;  xref 2F94:564A
2F94:5661  EB 29				jmp	short loc_536		; (568C)
2F94:5663  90					db	90h
2F94:5664			loc_535:					;  xref 2F94:5643
2F94:5664  80 3E 556B 08			cmp	byte ptr [data_257],8	; (2F94:556B=0)
2F94:5669  7F 21				jg	loc_536			; Jump if >
2F94:566B  C6 06 556B 0C			mov	byte ptr [data_257],0Ch	; (2F94:556B=0)
2F94:5670  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:5675  74 15				jz	loc_536			; Jump if zero
2F94:5677  50					push	ax
2F94:5678  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:567A  0C 03				or	al,3
2F94:567C  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:567E  B0 B6				mov	al,0B6h
2F94:5680  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:5682  B8 32C8				mov	ax,32C8h
2F94:5685  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:5687  8A C4				mov	al,ah
2F94:5689  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:568B  58					pop	ax
2F94:568C			loc_536:					;  xref 2F94:5661, 5669, 5675
2F94:568C  83 3E 014B 00			cmp	[data_38],0		; (2F94:014B=0)
2F94:5691  75 6B				jne	loc_541			; Jump if not equal
2F94:5693  C6 06 556B 0C			mov	byte ptr [data_257],0Ch	; (2F94:556B=0)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 166

2F94:5698  C6 06 014A 01			mov	[data_37],1		; (2F94:014A=0)
2F94:569D  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:56A2  74 15				jz	loc_537			; Jump if zero
2F94:56A4  50					push	ax
2F94:56A5  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:56A7  0C 03				or	al,3
2F94:56A9  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:56AB  B0 B6				mov	al,0B6h
2F94:56AD  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:56AF  B8 32C8				mov	ax,32C8h
2F94:56B2  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:56B4  8A C4				mov	al,ah
2F94:56B6  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:56B8  58					pop	ax
2F94:56B9			loc_537:					;  xref 2F94:56A2
2F94:56B9  33 C9				xor	cx,cx			; Zero register
2F94:56BB  33 D2				xor	dx,dx			; Zero register
2F94:56BD  A1 2B03				mov	ax,[systick_2b03]	; (2F94:2B03=0)
2F94:56C0  25 0003				and	ax,3
2F94:56C3  3C 01				cmp	al,1
2F94:56C5  72 13				jb	loc_538			; Jump if below
2F94:56C7  74 1E				jz	loc_539			; Jump if zero
2F94:56C9  3C 02				cmp	al,2
2F94:56CB  74 27				je	loc_540			; Jump if equal
2F94:56CD  C6 06 5570 4C			mov	[data_261],4Ch		; (2F94:5570=0) 'L'
2F94:56D2  C6 06 557B B4			mov	[data_267],0B4h		; (2F94:557B=0)
2F94:56D7  EB 25				jmp	short loc_541		; (56FE)
2F94:56D9  90					db	90h
2F94:56DA			loc_538:					;  xref 2F94:56C5
2F94:56DA  C6 06 5570 00			mov	[data_261],0		; (2F94:5570=0)
2F94:56DF  C6 06 557B 00			mov	[data_267],0		; (2F94:557B=0)
2F94:56E4  EB 18				jmp	short loc_541		; (56FE)
2F94:56E6  90					db	90h
2F94:56E7			loc_539:					;  xref 2F94:56C7
2F94:56E7  C6 06 557B 00			mov	[data_267],0		; (2F94:557B=0)
2F94:56EC  C6 06 5570 4C			mov	[data_261],4Ch		; (2F94:5570=0) 'L'
2F94:56F1  EB 0B				jmp	short loc_541		; (56FE)
2F94:56F3  90					db	90h
2F94:56F4			loc_540:					;  xref 2F94:56CB
2F94:56F4  C6 06 5570 00			mov	[data_261],0		; (2F94:5570=0)
2F94:56F9  C6 06 557B B4			mov	[data_267],0B4h		; (2F94:557B=0)
2F94:56FE			loc_541:					;  xref 2F94:5691, 56D7, 56E4, 56F1
2F94:56FE  33 D2				xor	dx,dx			; Zero register
2F94:5700  33 C9				xor	cx,cx			; Zero register
2F94:5702  8A 0E 5570				mov	cl,[data_261]		; (2F94:5570=0)
2F94:5706  8A 16 557B				mov	dl,[data_267]		; (2F94:557B=0)
2F94:570A .BF 71F5				mov	di,offset spr_shadow2_3b	; (2F94:71F5=2Ah)
2F94:570D  BB 2403				mov	bx,2403h
2F94:5710  A0 556F				mov	al,[data_260]		; (2F94:556F=0)
2F94:5713  98					cbw				; Convrt byte to word
2F94:5714  03 F8				add	di,ax
2F94:5716  E8 BD6C				call	draw_sprite_xor_v3_check_wall	; (1485)
2F94:5719  83 3E 014B 00			cmp	[data_38],0		; (2F94:014B=0)
2F94:571E  75 66				jne	loc_547			; Jump if not equal
2F94:5720  80 3E 014D 01			cmp	[powerup_present],1	; (2F94:014D=0)
2F94:5725  74 01				je	loc_542			; Jump if equal
2F94:5727  C3					retn
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 167

2F94:5728			loc_542:					;  xref 2F94:5725
2F94:5728  C6 06 014D 00			mov	[powerup_present],0	; (2F94:014D=0)
2F94:572D  A0 458C				mov	al,[powerup_animation_offset]	; (2F94:458C=0)
2F94:5730  98					cbw				; Convrt byte to word
2F94:5731  33 C9				xor	cx,cx			; Zero register
2F94:5733  33 D2				xor	dx,dx			; Zero register
2F94:5735  8A 0E 4588				mov	cl,[powerup_x]		; (2F94:4588=0)
2F94:5739  8A 16 4589				mov	dl,[powerup_y]		; (2F94:4589=0)
2F94:573D  80 3E 458B 02			cmp	[data_237],2		; (2F94:458B=0)
2F94:5742  72 14				jb	loc_543			; Jump if below
2F94:5744  74 29				jz	loc_544			; Jump if zero
2F94:5746  80 3E 458B 03			cmp	[data_237],3		; (2F94:458B=0)
2F94:574B  77 2D				ja	loc_545			; Jump if above
2F94:574D  BF 7315				mov	di,7315h
2F94:5750  03 F8				add	di,ax
2F94:5752  BB 3004				mov	bx,3004h
2F94:5755  EB 2B				jmp	short loc_546		; (5782)
2F94:5757  90					db	90h
2F94:5758			loc_543:					;  xref 2F94:5742
2F94:5758 .BF 72CD				mov	di,offset spr_extralife_3b	; (2F94:72CD=1)
2F94:575B  BB 1203				mov	bx,1203h
2F94:575E  E8 BCEF				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:5761  BF 72CD				mov	di,72CDh
2F94:5764  03 F8				add	di,ax
2F94:5766  80 C2 06				add	dl,6
2F94:5769  BB 1203				mov	bx,1203h
2F94:576C  EB 14				jmp	short loc_546		; (5782)
2F94:576E  90					db	90h
2F94:576F			loc_544:					;  xref 2F94:5744
2F94:576F  BF 7285				mov	di,7285h
2F94:5772  03 F8				add	di,ax
2F94:5774  BB 2403				mov	bx,2403h
2F94:5777  EB 09				jmp	short loc_546		; (5782)
2F94:5779  90					db	90h
2F94:577A			loc_545:					;  xref 2F94:574B
2F94:577A .BF 73A5				mov	di,offset spr_keyhole_3b	; (2F94:73A5=5)
2F94:577D  03 F8				add	di,ax
2F94:577F  BB 2703				mov	bx,2703h
2F94:5782			loc_546:					;  xref 2F94:5755, 576C, 5777
2F94:5782  E8 BCCB				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:5785  C3					retn
2F94:5786			loc_547:					;  xref 2F94:571E
2F94:5786  E8 06B5				call	sub_19			; (5E3E)
2F94:5789  80 3E 5560 1E			cmp	[data_254],1Eh		; (2F94:5560=0)
2F94:578E  75 10				jne	loc_548			; Jump if not equal
2F94:5790  32 F6				xor	dh,dh			; Zero register
2F94:5792 .BF 723D				mov	di,offset spr_shadow3_3b	; (2F94:723D=3Fh)
2F94:5795  03 F8				add	di,ax
2F94:5797  BB 2403				mov	bx,2403h
2F94:579A  E8 BCB3				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:579D  E9 009D				jmp	loc_554			; (583D)
2F94:57A0			loc_548:					;  xref 2F94:55E3, 578E
2F94:57A0  B0 24				mov	al,24h			; '$'
2F94:57A2  2A 06 556F				sub	al,[data_260]		; (2F94:556F=0)
2F94:57A6  A2 556F				mov	[data_260],al		; (2F94:556F=0)
2F94:57A9 .BF 71F5				mov	di,offset spr_shadow2_3b	; (2F94:71F5=2Ah)
2F94:57AC  98					cbw				; Convrt byte to word
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 168

2F94:57AD  03 F8				add	di,ax
2F94:57AF  BB 2403				mov	bx,2403h
2F94:57B2  3B 0E 0134				cmp	cx,[player_x]		; (2F94:0134=0)
2F94:57B6  72 11				jb	loc_549			; Jump if below
2F94:57B8  74 1B				jz	loc_550			; Jump if zero
2F94:57BA  FE 0E 5570				dec	[data_261]		; (2F94:5570=0)
2F94:57BE  FE 0E 5570				dec	[data_261]		; (2F94:5570=0)
2F94:57C2  FE C9				dec	cl
2F94:57C4  FE C9				dec	cl
2F94:57C6  EB 0D				jmp	short loc_550		; (57D5)
2F94:57C8  90					db	90h
2F94:57C9			loc_549:					;  xref 2F94:57B6
2F94:57C9  FE 06 5570				inc	[data_261]		; (2F94:5570=0)
2F94:57CD  FE 06 5570				inc	[data_261]		; (2F94:5570=0)
2F94:57D1  FE C1				inc	cl
2F94:57D3  FE C1				inc	cl
2F94:57D5			loc_550:					;  xref 2F94:57B8, 57C6
2F94:57D5  3A 16 0136				cmp	dl,[player_y]		; (2F94:0136=0)
2F94:57D9  72 1D				jb	loc_551			; Jump if below
2F94:57DB  74 33				jz	loc_552			; Jump if zero
2F94:57DD  FE 0E 557B				dec	[data_267]		; (2F94:557B=0)
2F94:57E1  FE 0E 557B				dec	[data_267]		; (2F94:557B=0)
2F94:57E5  FE 0E 557B				dec	[data_267]		; (2F94:557B=0)
2F94:57E9  FE 0E 557B				dec	[data_267]		; (2F94:557B=0)
2F94:57ED  FE CA				dec	dl
2F94:57EF  FE CA				dec	dl
2F94:57F1  FE CA				dec	dl
2F94:57F3  FE CA				dec	dl
2F94:57F5  EB 19				jmp	short loc_552		; (5810)
2F94:57F7  90					db	90h
2F94:57F8			loc_551:					;  xref 2F94:57D9
2F94:57F8  FE 06 557B				inc	[data_267]		; (2F94:557B=0)
2F94:57FC  FE 06 557B				inc	[data_267]		; (2F94:557B=0)
2F94:5800  FE 06 557B				inc	[data_267]		; (2F94:557B=0)
2F94:5804  FE 06 557B				inc	[data_267]		; (2F94:557B=0)
2F94:5808  FE C2				inc	dl
2F94:580A  FE C2				inc	dl
2F94:580C  FE C2				inc	dl
2F94:580E  FE C2				inc	dl
2F94:5810			loc_552:					;  xref 2F94:57DB, 57F5
2F94:5810  E8 BC72				call	draw_sprite_xor_v3_check_wall	; (1485)
2F94:5813  E8 0628				call	sub_19			; (5E3E)
2F94:5816  80 3E 5560 1E			cmp	[data_254],1Eh		; (2F94:5560=0)
2F94:581B  75 1F				jne	loc_ret_553		; Jump if not equal
2F94:581D .BF 71F5				mov	di,offset spr_shadow2_3b	; (2F94:71F5=2Ah)
2F94:5820  A0 556F				mov	al,[data_260]		; (2F94:556F=0)
2F94:5823  98					cbw				; Convrt byte to word
2F94:5824  03 F8				add	di,ax
2F94:5826  BB 2403				mov	bx,2403h
2F94:5829  E8 BC24				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:582C  32 F6				xor	dh,dh			; Zero register
2F94:582E .BF 723D				mov	di,offset spr_shadow3_3b	; (2F94:723D=3Fh)
2F94:5831  03 F8				add	di,ax
2F94:5833  BB 2403				mov	bx,2403h
2F94:5836  E8 BC17				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:5839  EB 02				jmp	short loc_554		; (583D)
2F94:583B  90					db	90h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 169


2F94:583C			loc_ret_553:					;  xref 2F94:581B, 58CD
2F94:583C њC3					retn
2F94:583D			loc_554:					;  xref 2F94:5626, 579D, 5839
2F94:583D  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:5842  74 15				jz	loc_555			; Jump if zero
2F94:5844  50					push	ax
2F94:5845  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:5847  0C 03				or	al,3
2F94:5849  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:584B  B0 B6				mov	al,0B6h
2F94:584D  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:584F  B8 00BE				mov	ax,0BEh
2F94:5852  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:5854  8A C4				mov	al,ah
2F94:5856  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:5858  58					pop	ax
2F94:5859			loc_555:					;  xref 2F94:5842
2F94:5859  53					push	bx
2F94:585A  8B 1E 3B74				mov	bx,[data_200]		; (2F94:3B74=0)
2F94:585E  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:5862  5B					pop	bx
2F94:5863  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:5868  74 15				jz	loc_556			; Jump if zero
2F94:586A  50					push	ax
2F94:586B  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:586D  0C 03				or	al,3
2F94:586F  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:5871  B0 B6				mov	al,0B6h
2F94:5873  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:5875  B8 00E6				mov	ax,0E6h
2F94:5878  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:587A  8A C4				mov	al,ah
2F94:587C  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:587E  58					pop	ax
2F94:587F			loc_556:					;  xref 2F94:5868
2F94:587F  53					push	bx
2F94:5880  8B 1E 3B74				mov	bx,[data_200]		; (2F94:3B74=0)
2F94:5884  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:5888  5B					pop	bx
2F94:5889  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:588E  74 15				jz	loc_557			; Jump if zero
2F94:5890  50					push	ax
2F94:5891  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:5893  0C 03				or	al,3
2F94:5895  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:5897  B0 B6				mov	al,0B6h
2F94:5899  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:589B  B8 00FA				mov	ax,0FAh
2F94:589E  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:58A0  8A C4				mov	al,ah
2F94:58A2  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:58A4  58					pop	ax
2F94:58A5			loc_557:					;  xref 2F94:588E
2F94:58A5  53					push	bx
2F94:58A6  8B 1E 3B74				mov	bx,[data_200]		; (2F94:3B74=0)
2F94:58AA  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 170

2F94:58AE  5B					pop	bx
2F94:58AF  53					push	bx
2F94:58B0  8B 1E 3B74				mov	bx,[data_200]		; (2F94:3B74=0)
2F94:58B4  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:58B8  5B					pop	bx
2F94:58B9  C6 06 014A 00			mov	[data_37],0		; (2F94:014A=0)
2F94:58BE  50					push	ax
2F94:58BF  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:58C1  24 FC				and	al,0FCh
2F94:58C3  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
										;  al = 0, speaker off
2F94:58C5  58					pop	ax
2F94:58C6  80 3E 013B 7F			cmp	[room_num],7Fh		; (2F94:013B=0)
2F94:58CB  74 03				je	loc_558			; Jump if equal
2F94:58CD  E9 FF6C				jmp	loc_ret_553		; (583C)
2F94:58D0			loc_558:					;  xref 2F94:58CB
2F94:58D0  E8 B469				call	convert_score_3		; (0D3C)
2F94:58D3  E8 B466				call	convert_score_3		; (0D3C)
2F94:58D6  E8 B380				call	display_score		; (0C59)
2F94:58D9 .BE 2930				mov	si,offset shivs_data	; (2F94:2930=0)
2F94:58DC  80 3C 00				cmp	byte ptr [si],0
2F94:58DF  74 23				je	loc_559			; Jump if equal
2F94:58E1  C6 04 00				mov	byte ptr [si],0
2F94:58E4  33 C9				xor	cx,cx			; Zero register
2F94:58E6  33 D2				xor	dx,dx			; Zero register
2F94:58E8  8A 4C 01				mov	cl,[si+1]
2F94:58EB  8A 54 02				mov	dl,[si+2]
2F94:58EE  8A 44 03				mov	al,[si+3]
2F94:58F1  98					cbw				; Convrt byte to word
2F94:58F2  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:58F4  8B F8				mov	di,ax
2F94:58F6  8B 9D 2950				mov	bx,[data_155][di]	; (2F94:2950=0)
2F94:58FA  8B BD 2962				mov	di,[data_156][di]	; (2F94:2962=2ADDh)
2F94:58FE  E8 BB4F				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:5901 .BE 2930				mov	si,offset shivs_data	; (2F94:2930=0)
2F94:5904			loc_559:					;  xref 2F94:58DF
2F94:5904  83 C6 05				add	si,5
2F94:5907  80 3C 00				cmp	byte ptr [si],0
2F94:590A  74 20				je	loc_560			; Jump if equal
2F94:590C  C6 04 00				mov	byte ptr [si],0
2F94:590F  33 C9				xor	cx,cx			; Zero register
2F94:5911  33 D2				xor	dx,dx			; Zero register
2F94:5913  8A 4C 01				mov	cl,[si+1]
2F94:5916  8A 54 02				mov	dl,[si+2]
2F94:5919  8A 44 03				mov	al,[si+3]
2F94:591C  98					cbw				; Convrt byte to word
2F94:591D  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:591F  8B F8				mov	di,ax
2F94:5921  8B 9D 2950				mov	bx,[data_155][di]	; (2F94:2950=0)
2F94:5925  8B BD 2962				mov	di,[data_156][di]	; (2F94:2962=2ADDh)
2F94:5929  E8 BB24				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:592C			loc_560:					;  xref 2F94:590A
2F94:592C  C6 06 293B 00			mov	[num_shivs],0		; (2F94:293B=0)
2F94:5931  8B 16 3B78				mov	dx,[data_202]		; (2F94:3B78=0)
2F94:5935  89 16 5573				mov	[data_263],dx		; (2F94:5573=0)
2F94:5939  C7 06 557E 4268			mov	[data_269],4268h	; (2F94:557E=0)
2F94:593F  C7 06 557C 32C8			mov	[data_268],32C8h	; (2F94:557C=0)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 171

2F94:5945  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:594A  74 15				jz	loc_561			; Jump if zero
2F94:594C  50					push	ax
2F94:594D  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:594F  0C 03				or	al,3
2F94:5951  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:5953  B0 B6				mov	al,0B6h
2F94:5955  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:5957  B8 00E1				mov	ax,0E1h
2F94:595A  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:595C  8A C4				mov	al,ah
2F94:595E  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:5960  58					pop	ax
2F94:5961			loc_561:					;  xref 2F94:594A
2F94:5961  53					push	bx
2F94:5962  8B 1E 3B76				mov	bx,[data_201]		; (2F94:3B76=0)
2F94:5966  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:596A  5B					pop	bx
2F94:596B			loc_562:					;  xref 2F94:5A65, 5A77, 5AAF, 5AC5
2F94:596B .BF 723D				mov	di,offset spr_shadow3_3b	; (2F94:723D=3Fh)
2F94:596E  A0 556F				mov	al,[data_260]		; (2F94:556F=0)
2F94:5971  98					cbw				; Convrt byte to word
2F94:5972  03 F8				add	di,ax
2F94:5974  BB 2403				mov	bx,2403h
2F94:5977  33 D2				xor	dx,dx			; Zero register
2F94:5979  33 C9				xor	cx,cx			; Zero register
2F94:597B  8A 0E 5570				mov	cl,[data_261]		; (2F94:5570=0)
2F94:597F  8A 16 557B				mov	dl,[data_267]		; (2F94:557B=0)
2F94:5983  E8 BACA				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:5986  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:598B  74 15				jz	loc_563			; Jump if zero
2F94:598D  50					push	ax
2F94:598E  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:5990  0C 03				or	al,3
2F94:5992  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:5994  B0 B6				mov	al,0B6h
2F94:5996  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:5998  A1 557C				mov	ax,[data_268]		; (2F94:557C=0)
2F94:599B  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:599D  8A C4				mov	al,ah
2F94:599F  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:59A1  58					pop	ax
2F94:59A2			loc_563:					;  xref 2F94:598B
2F94:59A2  B0 24				mov	al,24h			; '$'
2F94:59A4  2A 06 556F				sub	al,[data_260]		; (2F94:556F=0)
2F94:59A8 .BF 723D				mov	di,offset spr_shadow3_3b	; (2F94:723D=3Fh)
2F94:59AB  98					cbw				; Convrt byte to word
2F94:59AC  03 F8				add	di,ax
2F94:59AE  BB 2403				mov	bx,2403h
2F94:59B1  E8 BA9C				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:59B4  50					push	ax
2F94:59B5  51					push	cx
2F94:59B6  A1 5573				mov	ax,[data_263]		; (2F94:5573=0)
2F94:59B9  B1 07				mov	cl,7
2F94:59BB  D3 E8				shr	ax,cl			; Shift w/zeros fill
2F94:59BD  A3 5577				mov	[data_265],ax		; (2F94:5577=0)
2F94:59C0  D1 E8				shr	ax,1			; Shift w/zeros fill
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 172

2F94:59C2  A3 5579				mov	[data_266],ax		; (2F94:5579=0)
2F94:59C5  80 3E 0132 01			cmp	[joystick_selected],1	; (2F94:0132=0)
2F94:59CA  74 0D				je	loc_564			; Jump if equal
2F94:59CC  53					push	bx
2F94:59CD  8B 1E 5577				mov	bx,[data_265]		; (2F94:5577=0)
2F94:59D1  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:59D5  5B					pop	bx
2F94:59D6  EB 18				jmp	short loc_566		; (59F0)
2F94:59D8  90					db	90h
2F94:59D9			loc_564:					;  xref 2F94:59CA
2F94:59D9  A1 5573				mov	ax,[data_263]		; (2F94:5573=0)
2F94:59DC  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:59DE  3D 0000				cmp	ax,0
2F94:59E1  7F 03				jg	loc_565			; Jump if >
2F94:59E3  B8 01F4				mov	ax,1F4h
2F94:59E6			loc_565:					;  xref 2F94:59E1
2F94:59E6  51					push	cx
2F94:59E7  8B D8				mov	bx,ax
2F94:59E9  B9 0003				mov	cx,3
2F94:59EC  E8 1C65				call	wait_timer_bx_cx	; (7654)
2F94:59EF  59					pop	cx
2F94:59F0			loc_566:					;  xref 2F94:59D6
2F94:59F0  50					push	ax
2F94:59F1  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:59F3  24 FC				and	al,0FCh
2F94:59F5  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:59F7  58					pop	ax
2F94:59F8  59					pop	cx
2F94:59F9  58					pop	ax
2F94:59FA  53					push	bx
2F94:59FB  8B 1E 3B7A				mov	bx,[data_203]		; (2F94:3B7A=0)
2F94:59FF  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:5A03  5B					pop	bx
2F94:5A04  83 2E 557C 2A			sub	[data_268],2Ah		; (2F94:557C=0)
2F94:5A09 .BF 723D				mov	di,offset spr_shadow3_3b	; (2F94:723D=3Fh)
2F94:5A0C  A0 556F				mov	al,[data_260]		; (2F94:556F=0)
2F94:5A0F  98					cbw				; Convrt byte to word
2F94:5A10  03 F8				add	di,ax
2F94:5A12  BB 2403				mov	bx,2403h
2F94:5A15  E8 BA38				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:5A18  B0 24				mov	al,24h			; '$'
2F94:5A1A  2A 06 556F				sub	al,[data_260]		; (2F94:556F=0)
2F94:5A1E .BF 723D				mov	di,offset spr_shadow3_3b	; (2F94:723D=3Fh)
2F94:5A21  98					cbw				; Convrt byte to word
2F94:5A22  03 F8				add	di,ax
2F94:5A24  BB 2403				mov	bx,2403h
2F94:5A27  E8 BA26				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:5A2A  80 3E 0132 01			cmp	[joystick_selected],1	; (2F94:0132=0)
2F94:5A2F  74 0D				je	loc_567			; Jump if equal
2F94:5A31  53					push	bx
2F94:5A32  8B 1E 5579				mov	bx,[data_266]		; (2F94:5579=0)
2F94:5A36  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:5A3A  5B					pop	bx
2F94:5A3B  EB 18				jmp	short loc_569		; (5A55)
2F94:5A3D  90					db	90h
2F94:5A3E			loc_567:					;  xref 2F94:5A2F
2F94:5A3E  A1 5573				mov	ax,[data_263]		; (2F94:5573=0)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 173

2F94:5A41  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:5A43  3D 0000				cmp	ax,0
2F94:5A46  7F 03				jg	loc_568			; Jump if >
2F94:5A48  B8 0064				mov	ax,64h
2F94:5A4B			loc_568:					;  xref 2F94:5A46
2F94:5A4B  51					push	cx
2F94:5A4C  8B D8				mov	bx,ax
2F94:5A4E  B9 0003				mov	cx,3
2F94:5A51  E8 1C00				call	wait_timer_bx_cx	; (7654)
2F94:5A54  59					pop	cx
2F94:5A55			loc_569:					;  xref 2F94:5A3B
2F94:5A55  81 3E 5573 0BB8			cmp	[data_263],0BB8h	; (2F94:5573=0)
2F94:5A5B  72 0B				jb	loc_570			; Jump if below
2F94:5A5D  81 2E 5573 0097			sub	[data_263],97h		; (2F94:5573=0)
2F94:5A63  78 63				js	loc_574			; Jump if sign=1
2F94:5A65  E9 FF03				jmp	loc_562			; (596B)
2F94:5A68			loc_570:					;  xref 2F94:5A5B
2F94:5A68  81 3E 5573 01F4			cmp	[data_263],1F4h		; (2F94:5573=0)
2F94:5A6E  72 0A				jb	loc_571			; Jump if below
2F94:5A70  83 2E 5573 33			sub	[data_263],33h		; (2F94:5573=0)
2F94:5A75  78 51				js	loc_574			; Jump if sign=1
2F94:5A77  E9 FEF1				jmp	loc_562			; (596B)
2F94:5A7A			loc_571:					;  xref 2F94:5A6E
2F94:5A7A  83 3E 5573 64			cmp	[data_263],64h		; (2F94:5573=0)
2F94:5A7F  72 31				jb	loc_573			; Jump if below
2F94:5A81  F7 06 5573 0001			test	[data_263],1		; (2F94:5573=0)
2F94:5A87  74 17				jz	loc_572			; Jump if zero
2F94:5A89  50					push	ax
2F94:5A8A  53					push	bx
2F94:5A8B  B0 01				mov	al,1
2F94:5A8D  2A 06 013C				sub	al,[data_35]		; (2F94:013C=0)
2F94:5A91  A2 013C				mov	[data_35],al		; (2F94:013C=0)
2F94:5A94  B4 0B				mov	ah,0Bh
2F94:5A96  8A 1E 013C				mov	bl,[data_35]		; (2F94:013C=0)
2F94:5A9A  B7 01				mov	bh,1
2F94:5A9C  CD 10				int	10h			; Video display   ah=functn 0Bh
										;  set color from bx (CGA modes)
2F94:5A9E  5B					pop	bx
2F94:5A9F  58					pop	ax
2F94:5AA0			loc_572:					;  xref 2F94:5A87
2F94:5AA0  83 2E 5573 06			sub	[data_263],6		; (2F94:5573=0)
2F94:5AA5  50					push	ax
2F94:5AA6  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:5AA8  24 FC				and	al,0FCh
2F94:5AAA  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:5AAC  58					pop	ax
2F94:5AAD  78 19				js	loc_574			; Jump if sign=1
2F94:5AAF  E9 FEB9				jmp	loc_562			; (596B)
2F94:5AB2			loc_573:					;  xref 2F94:5A7F
2F94:5AB2  83 2E 5573 01			sub	[data_263],1		; (2F94:5573=0)
2F94:5AB7  A1 5573				mov	ax,[data_263]		; (2F94:5573=0)
2F94:5ABA  25 000F				and	ax,0Fh
2F94:5ABD  B4 0B				mov	ah,0Bh
2F94:5ABF  8B D8				mov	bx,ax
2F94:5AC1  CD 10				int	10h			; Video display   ah=functn 0Bh
										;  set color from bx (CGA modes)
2F94:5AC3  78 03				js	loc_574			; Jump if sign=1
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 174

2F94:5AC5  E9 FEA3				jmp	loc_562			; (596B)
2F94:5AC8			loc_574:					;  xref 2F94:5A63, 5A75, 5AAD, 5AC3
2F94:5AC8  50					push	ax
2F94:5AC9  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:5ACB  24 FC				and	al,0FCh
2F94:5ACD  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
										;  al = 0, speaker off
2F94:5ACF  58					pop	ax
2F94:5AD0 .BF 723D				mov	di,offset spr_shadow3_3b	; (2F94:723D=3Fh)
2F94:5AD3  A0 556F				mov	al,[data_260]		; (2F94:556F=0)
2F94:5AD6  98					cbw				; Convrt byte to word
2F94:5AD7  03 F8				add	di,ax
2F94:5AD9  BB 2403				mov	bx,2403h
2F94:5ADC  E8 B971				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:5ADF  80 3E 0132 01			cmp	[joystick_selected],1	; (2F94:0132=0)
2F94:5AE4  74 69				je	loc_575			; Jump if equal
2F94:5AE6  C7 06 5575 0002			mov	[data_264],2		; (2F94:5575=0)
2F94:5AEC  E8 00EC				call	sub_18			; (5BDB)
2F94:5AEF  50					push	ax
2F94:5AF0  53					push	bx
2F94:5AF1  B0 01				mov	al,1
2F94:5AF3  2A 06 013C				sub	al,[data_35]		; (2F94:013C=0)
2F94:5AF7  A2 013C				mov	[data_35],al		; (2F94:013C=0)
2F94:5AFA  B4 0B				mov	ah,0Bh
2F94:5AFC  8A 1E 013C				mov	bl,[data_35]		; (2F94:013C=0)
2F94:5B00  B7 01				mov	bh,1
2F94:5B02  CD 10				int	10h			; Video display   ah=functn 0Bh
										;  set color from bx (CGA modes)
2F94:5B04  5B					pop	bx
2F94:5B05  58					pop	ax
2F94:5B06  C7 06 5575 0005			mov	[data_264],5		; (2F94:5575=0)
2F94:5B0C  E8 00CC				call	sub_18			; (5BDB)
2F94:5B0F  50					push	ax
2F94:5B10  53					push	bx
2F94:5B11  B0 01				mov	al,1
2F94:5B13  2A 06 013C				sub	al,[data_35]		; (2F94:013C=0)
2F94:5B17  A2 013C				mov	[data_35],al		; (2F94:013C=0)
2F94:5B1A  B4 0B				mov	ah,0Bh
2F94:5B1C  8A 1E 013C				mov	bl,[data_35]		; (2F94:013C=0)
2F94:5B20  B7 01				mov	bh,1
2F94:5B22  CD 10				int	10h			; Video display   ah=functn 0Bh
										;  set color from bx (CGA modes)
2F94:5B24  5B					pop	bx
2F94:5B25  58					pop	ax
2F94:5B26  C7 06 5575 000A			mov	[data_264],0Ah		; (2F94:5575=0)
2F94:5B2C  E8 00AC				call	sub_18			; (5BDB)
2F94:5B2F  50					push	ax
2F94:5B30  53					push	bx
2F94:5B31  B0 01				mov	al,1
2F94:5B33  2A 06 013C				sub	al,[data_35]		; (2F94:013C=0)
2F94:5B37  A2 013C				mov	[data_35],al		; (2F94:013C=0)
2F94:5B3A  B4 0B				mov	ah,0Bh
2F94:5B3C  8A 1E 013C				mov	bl,[data_35]		; (2F94:013C=0)
2F94:5B40  B7 01				mov	bh,1
2F94:5B42  CD 10				int	10h			; Video display   ah=functn 0Bh
										;  set color from bx (CGA modes)
2F94:5B44  5B					pop	bx
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 175

2F94:5B45  58					pop	ax
2F94:5B46  C7 06 5575 0019			mov	[data_264],19h		; (2F94:5575=0)
2F94:5B4C  EB 6D				jmp	short loc_576		; (5BBB)
2F94:5B4E  90					db	90h
2F94:5B4F			loc_575:					;  xref 2F94:5AE4
2F94:5B4F  C7 06 3B7C 9C40			mov	[data_204],9C40h	; (2F94:3B7C=0)
2F94:5B55  C7 06 5575 2710			mov	[data_264],2710h	; (2F94:5575=0)
2F94:5B5B  E8 007D				call	sub_18			; (5BDB)
2F94:5B5E  50					push	ax
2F94:5B5F  53					push	bx
2F94:5B60  B0 01				mov	al,1
2F94:5B62  2A 06 013C				sub	al,[data_35]		; (2F94:013C=0)
2F94:5B66  A2 013C				mov	[data_35],al		; (2F94:013C=0)
2F94:5B69  B4 0B				mov	ah,0Bh
2F94:5B6B  8A 1E 013C				mov	bl,[data_35]		; (2F94:013C=0)
2F94:5B6F  B7 01				mov	bh,1
2F94:5B71  CD 10				int	10h			; Video display   ah=functn 0Bh
										;  set color from bx (CGA modes)
2F94:5B73  5B					pop	bx
2F94:5B74  58					pop	ax
2F94:5B75  C7 06 5575 4E20			mov	[data_264],4E20h	; (2F94:5575=0)
2F94:5B7B  E8 005D				call	sub_18			; (5BDB)
2F94:5B7E  50					push	ax
2F94:5B7F  53					push	bx
2F94:5B80  B0 01				mov	al,1
2F94:5B82  2A 06 013C				sub	al,[data_35]		; (2F94:013C=0)
2F94:5B86  A2 013C				mov	[data_35],al		; (2F94:013C=0)
2F94:5B89  B4 0B				mov	ah,0Bh
2F94:5B8B  8A 1E 013C				mov	bl,[data_35]		; (2F94:013C=0)
2F94:5B8F  B7 01				mov	bh,1
2F94:5B91  CD 10				int	10h			; Video display   ah=functn 0Bh
										;  set color from bx (CGA modes)
2F94:5B93  5B					pop	bx
2F94:5B94  58					pop	ax
2F94:5B95  C7 06 5575 9C40			mov	[data_264],9C40h	; (2F94:5575=0)
2F94:5B9B  E8 003D				call	sub_18			; (5BDB)
2F94:5B9E  50					push	ax
2F94:5B9F  53					push	bx
2F94:5BA0  B0 01				mov	al,1
2F94:5BA2  2A 06 013C				sub	al,[data_35]		; (2F94:013C=0)
2F94:5BA6  A2 013C				mov	[data_35],al		; (2F94:013C=0)
2F94:5BA9  B4 0B				mov	ah,0Bh
2F94:5BAB  8A 1E 013C				mov	bl,[data_35]		; (2F94:013C=0)
2F94:5BAF  B7 01				mov	bh,1
2F94:5BB1  CD 10				int	10h			; Video display   ah=functn 0Bh
										;  set color from bx (CGA modes)
2F94:5BB3  5B					pop	bx
2F94:5BB4  58					pop	ax
2F94:5BB5  C7 06 5575 FDE8			mov	[data_264],0FDE8h	; (2F94:5575=0)
2F94:5BBB			loc_576:					;  xref 2F94:5B4C
2F94:5BBB  E8 001D				call	sub_18			; (5BDB)
2F94:5BBE  50					push	ax
2F94:5BBF  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:5BC1  24 FC				and	al,0FCh
2F94:5BC3  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
										;  al = 0, speaker off
2F94:5BC5  58					pop	ax
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 176

2F94:5BC6  C6 06 013C 00			mov	[data_35],0		; (2F94:013C=0)
2F94:5BCB  B4 0B				mov	ah,0Bh
2F94:5BCD  B3 00				mov	bl,0
2F94:5BCF  B7 01				mov	bh,1
2F94:5BD1  CD 10				int	10h			; Video display   ah=functn 0Bh
										;  set color from bx (CGA modes)
2F94:5BD3  B4 0B				mov	ah,0Bh
2F94:5BD5  BB 0000				mov	bx,0
2F94:5BD8  CD 10				int	10h			; Video display   ah=functn 0Bh
										;  set color from bx (CGA modes)
2F94:5BDA  C3					retn
				sub_17		endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                              SUBROUTINE
				;
				;         Called from:   2F94:5AEC, 5B0C, 5B2C, 5B5B, 5B7B, 5B9B, 5BBB
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:5BDB			sub_18		proc	near
2F94:5BDB  A1 3B74				mov	ax,[data_200]		; (2F94:3B74=0)
2F94:5BDE  A3 5573				mov	[data_263],ax		; (2F94:5573=0)
2F94:5BE1  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:5BE6  74 15				jz	loc_577			; Jump if zero
2F94:5BE8  50					push	ax
2F94:5BE9  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:5BEB  0C 03				or	al,3
2F94:5BED  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:5BEF  B0 B6				mov	al,0B6h
2F94:5BF1  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:5BF3  B8 00C8				mov	ax,0C8h
2F94:5BF6  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:5BF8  8A C4				mov	al,ah
2F94:5BFA  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:5BFC  58					pop	ax
2F94:5BFD			loc_577:					;  xref 2F94:5BE6
2F94:5BFD  A0 5570				mov	al,[data_261]		; (2F94:5570=0)
2F94:5C00  04 01				add	al,1
2F94:5C02  8A 26 557B				mov	ah,[data_267]		; (2F94:557B=0)
2F94:5C06  80 C4 04				add	ah,4
2F94:5C09  33 FF				xor	di,di			; Zero register
2F94:5C0B  B9 0008				mov	cx,8

2F94:5C0E			locloop_578:					;  xref 2F94:5C19
2F94:5C0E  88 85 5580				mov	[data_270][di],al	; (2F94:5580=0)
2F94:5C12  88 A5 5581				mov	[data_271][di],ah	; (2F94:5581=0)
2F94:5C16  83 C7 02				add	di,2
2F94:5C19  E2 F3				loop	locloop_578		; Loop if cx > 0

2F94:5C1B  B0 FF				mov	al,0FFh
2F94:5C1D  B9 0001				mov	cx,1
2F94:5C20  33 DB				xor	bx,bx			; Zero register
2F94:5C22  33 D2				xor	dx,dx			; Zero register
2F94:5C24			loc_579:					;  xref 2F94:5E30
2F94:5C24 њ33 FF				xor	di,di			; Zero register
2F94:5C26  83 06 5573 64			add	[data_263],64h		; (2F94:5573=0)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 177

2F94:5C2B  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:5C30  74 15				jz	loc_580			; Jump if zero
2F94:5C32  50					push	ax
2F94:5C33  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:5C35  0C 03				or	al,3
2F94:5C37  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:5C39  B0 B6				mov	al,0B6h
2F94:5C3B  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:5C3D  A1 5573				mov	ax,[data_263]		; (2F94:5573=0)
2F94:5C40  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:5C42  8A C4				mov	al,ah
2F94:5C44  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:5C46  58					pop	ax
2F94:5C47			loc_580:					;  xref 2F94:5C30
2F94:5C47  80 BD 5580 02			cmp	[data_270][di],2	; (2F94:5580=0)
2F94:5C4C  7C 08				jl	loc_581			; Jump if <
2F94:5C4E  80 AD 5580 02			sub	[data_270][di],2	; (2F94:5580=0)
2F94:5C53  EB 09				jmp	short loc_582		; (5C5E)
2F94:5C55  90					db	90h
2F94:5C56			loc_581:					;  xref 2F94:5C4C, 5C67, 5C6E
2F94:5C56  C6 85 5580 C8			mov	[data_270][di],0C8h	; (2F94:5580=0)
2F94:5C5B  EB 28				jmp	short loc_583		; (5C85)
2F94:5C5D  90					db	90h
2F94:5C5E			loc_582:					;  xref 2F94:5C53
2F94:5C5E  8A 9D 5580				mov	bl,[data_270][di]	; (2F94:5580=0)
2F94:5C62  80 BD 5581 04			cmp	[data_271][di],4	; (2F94:5581=0)
2F94:5C67  72 ED				jb	loc_581			; Jump if below
2F94:5C69  80 BD 5581 B4			cmp	[data_271][di],0B4h	; (2F94:5581=0)
2F94:5C6E  77 E6				ja	loc_581			; Jump if above
2F94:5C70  80 AD 5581 04			sub	[data_271][di],4	; (2F94:5581=0)
2F94:5C75  8A 95 5581				mov	dl,[data_271][di]	; (2F94:5581=0)
2F94:5C79  89 16 5571				mov	[data_262],dx		; (2F94:5571=0)
2F94:5C7D  83 06 5571 03			add	[data_262],3		; (2F94:5571=0)
2F94:5C82  E8 0216				call	sub_20			; (5E9B)
2F94:5C85			loc_583:					;  xref 2F94:5C5B
2F94:5C85  83 C7 02				add	di,2
2F94:5C88  80 BD 5581 04			cmp	[data_271][di],4	; (2F94:5581=0)
2F94:5C8D  72 13				jb	loc_584			; Jump if below
2F94:5C8F  80 BD 5581 B4			cmp	[data_271][di],0B4h	; (2F94:5581=0)
2F94:5C94  77 0C				ja	loc_584			; Jump if above
2F94:5C96  80 AD 5581 04			sub	[data_271][di],4	; (2F94:5581=0)
2F94:5C9B  8A 95 5581				mov	dl,[data_271][di]	; (2F94:5581=0)
2F94:5C9F  EB 09				jmp	short loc_585		; (5CAA)
2F94:5CA1  90					db	90h
2F94:5CA2			loc_584:					;  xref 2F94:5C8D, 5C94
2F94:5CA2  C6 85 5580 C8			mov	[data_270][di],0C8h	; (2F94:5580=0)
2F94:5CA7  EB 11				jmp	short loc_586		; (5CBA)
2F94:5CA9  90					db	90h
2F94:5CAA			loc_585:					;  xref 2F94:5C9F
2F94:5CAA  8A 9D 5580				mov	bl,[data_270][di]	; (2F94:5580=0)
2F94:5CAE  89 16 5571				mov	[data_262],dx		; (2F94:5571=0)
2F94:5CB2  83 06 5571 03			add	[data_262],3		; (2F94:5571=0)
2F94:5CB7  E8 01E1				call	sub_20			; (5E9B)
2F94:5CBA			loc_586:					;  xref 2F94:5CA7
2F94:5CBA  83 C7 02				add	di,2
2F94:5CBD  80 BD 5580 4C			cmp	[data_270][di],4Ch	; (2F94:5580=0) 'L'
2F94:5CC2  77 0C				ja	loc_587			; Jump if above
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 178

2F94:5CC4  80 85 5580 02			add	[data_270][di],2	; (2F94:5580=0)
2F94:5CC9  8A 9D 5580				mov	bl,[data_270][di]	; (2F94:5580=0)
2F94:5CCD  EB 09				jmp	short loc_588		; (5CD8)
2F94:5CCF  90					db	90h
2F94:5CD0			loc_587:					;  xref 2F94:5CC2, 5CDD
2F94:5CD0  C6 85 5580 C8			mov	[data_270][di],0C8h	; (2F94:5580=0)
2F94:5CD5  EB 1D				jmp	short loc_589		; (5CF4)
2F94:5CD7  90					db	90h
2F94:5CD8			loc_588:					;  xref 2F94:5CCD
2F94:5CD8  80 BD 5581 04			cmp	[data_271][di],4	; (2F94:5581=0)
2F94:5CDD  72 F1				jb	loc_587			; Jump if below
2F94:5CDF  80 AD 5581 04			sub	[data_271][di],4	; (2F94:5581=0)
2F94:5CE4  8A 95 5581				mov	dl,[data_271][di]	; (2F94:5581=0)
2F94:5CE8  89 16 5571				mov	[data_262],dx		; (2F94:5571=0)
2F94:5CEC  83 06 5571 03			add	[data_262],3		; (2F94:5571=0)
2F94:5CF1  E8 01A7				call	sub_20			; (5E9B)
2F94:5CF4			loc_589:					;  xref 2F94:5CD5
2F94:5CF4  83 C7 02				add	di,2
2F94:5CF7  80 BD 5580 02			cmp	[data_270][di],2	; (2F94:5580=0)
2F94:5CFC  7C 08				jl	loc_590			; Jump if <
2F94:5CFE  80 AD 5580 02			sub	[data_270][di],2	; (2F94:5580=0)
2F94:5D03  EB 09				jmp	short loc_591		; (5D0E)
2F94:5D05  90					db	90h
2F94:5D06			loc_590:					;  xref 2F94:5CFC
2F94:5D06  C6 85 5580 C8			mov	[data_270][di],0C8h	; (2F94:5580=0)
2F94:5D0B  EB 15				jmp	short loc_592		; (5D22)
2F94:5D0D  90					db	90h
2F94:5D0E			loc_591:					;  xref 2F94:5D03
2F94:5D0E  8A 9D 5580				mov	bl,[data_270][di]	; (2F94:5580=0)
2F94:5D12  8A 95 5581				mov	dl,[data_271][di]	; (2F94:5581=0)
2F94:5D16  89 16 5571				mov	[data_262],dx		; (2F94:5571=0)
2F94:5D1A  83 06 5571 03			add	[data_262],3		; (2F94:5571=0)
2F94:5D1F  E8 0179				call	sub_20			; (5E9B)
2F94:5D22			loc_592:					;  xref 2F94:5D0B
2F94:5D22  83 C7 02				add	di,2
2F94:5D25  80 BD 5580 4C			cmp	[data_270][di],4Ch	; (2F94:5580=0) 'L'
2F94:5D2A  77 0C				ja	loc_593			; Jump if above
2F94:5D2C  80 85 5580 02			add	[data_270][di],2	; (2F94:5580=0)
2F94:5D31  8A 9D 5580				mov	bl,[data_270][di]	; (2F94:5580=0)
2F94:5D35  EB 09				jmp	short loc_594		; (5D40)
2F94:5D37  90					db	90h
2F94:5D38			loc_593:					;  xref 2F94:5D2A
2F94:5D38  C6 85 5580 C8			mov	[data_270][di],0C8h	; (2F94:5580=0)
2F94:5D3D  EB 11				jmp	short loc_595		; (5D50)
2F94:5D3F  90					db	90h
2F94:5D40			loc_594:					;  xref 2F94:5D35
2F94:5D40  8A 95 5581				mov	dl,[data_271][di]	; (2F94:5581=0)
2F94:5D44  89 16 5571				mov	[data_262],dx		; (2F94:5571=0)
2F94:5D48  83 06 5571 03			add	[data_262],3		; (2F94:5571=0)
2F94:5D4D  E8 014B				call	sub_20			; (5E9B)
2F94:5D50			loc_595:					;  xref 2F94:5D3D
2F94:5D50  83 C7 02				add	di,2
2F94:5D53  80 BD 5580 02			cmp	[data_270][di],2	; (2F94:5580=0)
2F94:5D58  7C 08				jl	loc_596			; Jump if <
2F94:5D5A  80 AD 5580 02			sub	[data_270][di],2	; (2F94:5580=0)
2F94:5D5F  EB 09				jmp	short loc_597		; (5D6A)
2F94:5D61  90					db	90h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 179

2F94:5D62			loc_596:					;  xref 2F94:5D58, 5D73
2F94:5D62  C6 85 5580 C8			mov	[data_270][di],0C8h	; (2F94:5580=0)
2F94:5D67  EB 21				jmp	short loc_598		; (5D8A)
2F94:5D69  90					db	90h
2F94:5D6A			loc_597:					;  xref 2F94:5D5F
2F94:5D6A  8A 9D 5580				mov	bl,[data_270][di]	; (2F94:5580=0)
2F94:5D6E  80 BD 5581 B2			cmp	[data_271][di],0B2h	; (2F94:5581=0)
2F94:5D73  77 ED				ja	loc_596			; Jump if above
2F94:5D75  80 85 5581 04			add	[data_271][di],4	; (2F94:5581=0)
2F94:5D7A  8A 95 5581				mov	dl,[data_271][di]	; (2F94:5581=0)
2F94:5D7E  89 16 5571				mov	[data_262],dx		; (2F94:5571=0)
2F94:5D82  83 06 5571 03			add	[data_262],3		; (2F94:5571=0)
2F94:5D87  E8 0111				call	sub_20			; (5E9B)
2F94:5D8A			loc_598:					;  xref 2F94:5D67
2F94:5D8A  83 C7 02				add	di,2
2F94:5D8D  80 BD 5581 B2			cmp	[data_271][di],0B2h	; (2F94:5581=0)
2F94:5D92  77 10				ja	loc_599			; Jump if above
2F94:5D94  80 85 5581 04			add	[data_271][di],4	; (2F94:5581=0)
2F94:5D99  8A 95 5581				mov	dl,[data_271][di]	; (2F94:5581=0)
2F94:5D9D  8A 9D 5580				mov	bl,[data_270][di]	; (2F94:5580=0)
2F94:5DA1  EB 09				jmp	short loc_600		; (5DAC)
2F94:5DA3  90					db	90h
2F94:5DA4			loc_599:					;  xref 2F94:5D92
2F94:5DA4  C6 85 5580 C8			mov	[data_270][di],0C8h	; (2F94:5580=0)
2F94:5DA9  EB 0D				jmp	short loc_601		; (5DB8)
2F94:5DAB  90					db	90h
2F94:5DAC			loc_600:					;  xref 2F94:5DA1
2F94:5DAC  89 16 5571				mov	[data_262],dx		; (2F94:5571=0)
2F94:5DB0  83 06 5571 03			add	[data_262],3		; (2F94:5571=0)
2F94:5DB5  E8 00E3				call	sub_20			; (5E9B)
2F94:5DB8			loc_601:					;  xref 2F94:5DA9
2F94:5DB8  83 C7 02				add	di,2
2F94:5DBB  80 BD 5580 4C			cmp	[data_270][di],4Ch	; (2F94:5580=0) 'L'
2F94:5DC0  77 0C				ja	loc_602			; Jump if above
2F94:5DC2  80 85 5580 02			add	[data_270][di],2	; (2F94:5580=0)
2F94:5DC7  8A 9D 5580				mov	bl,[data_270][di]	; (2F94:5580=0)
2F94:5DCB  EB 09				jmp	short loc_603		; (5DD6)
2F94:5DCD  90					db	90h
2F94:5DCE			loc_602:					;  xref 2F94:5DC0, 5DDB
2F94:5DCE  C6 85 5580 C8			mov	[data_270][di],0C8h	; (2F94:5580=0)
2F94:5DD3  EB 1D				jmp	short loc_604		; (5DF2)
2F94:5DD5  90					db	90h
2F94:5DD6			loc_603:					;  xref 2F94:5DCB
2F94:5DD6  80 BD 5581 B2			cmp	[data_271][di],0B2h	; (2F94:5581=0)
2F94:5DDB  77 F1				ja	loc_602			; Jump if above
2F94:5DDD  80 85 5581 04			add	[data_271][di],4	; (2F94:5581=0)
2F94:5DE2  8A 95 5581				mov	dl,[data_271][di]	; (2F94:5581=0)
2F94:5DE6  89 16 5571				mov	[data_262],dx		; (2F94:5571=0)
2F94:5DEA  83 06 5571 03			add	[data_262],3		; (2F94:5571=0)
2F94:5DEF  E8 00A9				call	sub_20			; (5E9B)
2F94:5DF2			loc_604:					;  xref 2F94:5DD3
2F94:5DF2  53					push	bx
2F94:5DF3  8B 1E 5575				mov	bx,[data_264]		; (2F94:5575=0)
2F94:5DF7  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:5DFB  5B					pop	bx
2F94:5DFC  C6 06 556D 00			mov	[data_258],0		; (2F94:556D=0)
2F94:5E01 .BF 0000				mov	di,data_7e		; (2F94:0000=0)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 180

2F94:5E04			loc_605:					;  xref 2F94:5E27
2F94:5E04  8A 9D 5580				mov	bl,[data_270][di]	; (2F94:5580=0)
2F94:5E08  8A 95 5581				mov	dl,[data_271][di]	; (2F94:5581=0)
2F94:5E0C  89 16 5571				mov	[data_262],dx		; (2F94:5571=0)
2F94:5E10  83 06 5571 03			add	[data_262],3		; (2F94:5571=0)
2F94:5E15  80 FB 00				cmp	bl,0
2F94:5E18  7C 07				jl	loc_606			; Jump if <
2F94:5E1A  FE 06 556D				inc	[data_258]		; (2F94:556D=0)
2F94:5E1E  E8 007A				call	sub_20			; (5E9B)
2F94:5E21			loc_606:					;  xref 2F94:5E18
2F94:5E21  83 C7 02				add	di,2
2F94:5E24  83 FF 10				cmp	di,10h
2F94:5E27  72 DB				jb	loc_605			; Jump if below
2F94:5E29  80 3E 556D 00			cmp	[data_258],0		; (2F94:556D=0)
2F94:5E2E  74 03				je	loc_607			; Jump if equal
2F94:5E30  E9 FDF1				jmp	loc_579			; (5C24)
2F94:5E33			loc_607:					;  xref 2F94:5E2E
2F94:5E33  53					push	bx
2F94:5E34  8B 1E 3B7C				mov	bx,[data_204]		; (2F94:3B7C=0)
2F94:5E38  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:5E3C  5B					pop	bx
2F94:5E3D  C3					retn
				sub_18		endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                              SUBROUTINE
				;
				;         Called from:   2F94:560A, 5786, 5813
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:5E3E			sub_19		proc	near
2F94:5E3E  80 3E 1330 00			cmp	[collision_1330],0	; (2F94:1330=0)
2F94:5E43  74 49				je	loc_ret_609		; Jump if equal
2F94:5E45  80 3E 293B 00			cmp	[num_shivs],0		; (2F94:293B=0)
2F94:5E4A  74 42				je	loc_ret_609		; Jump if equal
2F94:5E4C  C6 06 5561 02			mov	[data_255],2		; (2F94:5561=0)
2F94:5E51 .BE 2930				mov	si,offset shivs_data	; (2F94:2930=0)
2F94:5E54			loc_608:					;  xref 2F94:5E96
2F94:5E54  80 3C 00				cmp	byte ptr [si],0
2F94:5E57  74 36				je	loc_610			; Jump if equal
2F94:5E59  8A 74 01				mov	dh,[si+1]
2F94:5E5C  FE C6				inc	dh
2F94:5E5E  3A F1				cmp	dh,cl
2F94:5E60  72 2D				jb	loc_610			; Jump if below
2F94:5E62  80 EE 03				sub	dh,3
2F94:5E65  3A F1				cmp	dh,cl
2F94:5E67  77 26				ja	loc_610			; Jump if above
2F94:5E69  8A 74 02				mov	dh,[si+2]
2F94:5E6C  50					push	ax
2F94:5E6D  8A 44 03				mov	al,[si+3]
2F94:5E70  98					cbw				; Convrt byte to word
2F94:5E71  8B F8				mov	di,ax
2F94:5E73  58					pop	ax
2F94:5E74  02 B5 5562				add	dh,[data_256][di]	; (2F94:5562=0)
2F94:5E78  3A F2				cmp	dh,dl
2F94:5E7A  76 13				jbe	loc_610			; Jump if below or =
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 181

2F94:5E7C  80 EE 0C				sub	dh,0Ch
2F94:5E7F  2A B5 5562				sub	dh,[data_256][di]	; (2F94:5562=0)
2F94:5E83  3A F2				cmp	dh,dl
2F94:5E85  73 08				jae	loc_610			; Jump if above or =
2F94:5E87  C6 06 5560 1E			mov	[data_254],1Eh		; (2F94:5560=0)
2F94:5E8C  32 F6				xor	dh,dh			; Zero register

2F94:5E8E			loc_ret_609:					;  xref 2F94:5E43, 5E4A
2F94:5E8E  C3					retn
2F94:5E8F			loc_610:					;  xref 2F94:5E57, 5E60, 5E67, 5E7A
										;            5E85
2F94:5E8F  83 C6 05				add	si,5
2F94:5E92  FE 0E 5561				dec	[data_255]		; (2F94:5561=0)
2F94:5E96  75 BC				jnz	loc_608			; Jump if not zero
2F94:5E98  32 F6				xor	dh,dh			; Zero register
2F94:5E9A  C3					retn
				sub_19		endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                              SUBROUTINE
				;
				;         Called from:   2F94:5C82, 5CB7, 5CF1, 5D1F, 5D4D, 5D87, 5DB5
				;                             5DEF, 5E1E
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:5E9B			sub_20		proc	near
2F94:5E9B  50					push	ax
2F94:5E9C  53					push	bx
2F94:5E9D  51					push	cx
2F94:5E9E  52					push	dx
2F94:5E9F  8A E0				mov	ah,al
2F94:5EA1			loc_611:					;  xref 2F94:5EBD
2F94:5EA1  8B F2				mov	si,dx
2F94:5EA3  D1 E6				shl	si,1			; Shift w/zeros fill
2F94:5EA5  8B B4 68E0				mov	si,[line_offsets_table][si]	; (2F94:68E0=0)
2F94:5EA9  03 F3				add	si,bx
2F94:5EAB  51					push	cx

2F94:5EAC			locloop_612:					;  xref 2F94:5EB5
2F94:5EAC  26: 32 04				xor	al,es:[si]
2F94:5EAF  26: 88 04				mov	es:[si],al
2F94:5EB2  8A C4				mov	al,ah
2F94:5EB4  46					inc	si
2F94:5EB5  E2 F5				loop	locloop_612		; Loop if cx > 0

2F94:5EB7  59					pop	cx
2F94:5EB8  42					inc	dx
2F94:5EB9  3B 16 5571				cmp	dx,[data_262]		; (2F94:5571=0)
2F94:5EBD  76 E2				jbe	loc_611			; Jump if below or =
2F94:5EBF  5A					pop	dx
2F94:5EC0  59					pop	cx
2F94:5EC1  5B					pop	bx
2F94:5EC2  58					pop	ax
2F94:5EC3  C3					retn
				sub_20		endp

           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 182

2F94:5EC4  000C[00]				db	12 dup (0)
2F94:5ED0  47 48 49 4B 00 4D			db	 47h, 48h, 49h, 4Bh, 00h, 4Dh
2F94:5ED6  4F			data_275	db	4Fh			;  xref 2F94:5FD5
2F94:5ED7  50 51				db	 50h, 51h
2F94:5ED9  0000			data_276	dw	0			;  xref 2F94:5F64, 5F96
2F94:5EDB  0000			data_277	dw	0			;  xref 2F94:5F02, 5F34

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                              SUBROUTINE
				;
				;         Called from:   2F94:0354
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:5EDD			sub_21		proc	near
2F94:5EDD  B0 36				mov	al,36h			; '6'
2F94:5EDF  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:5EE1  B0 FF				mov	al,0FFh
2F94:5EE3  E6 40				out	40h,al			; port 40h, 8253 timer 0 clock
2F94:5EE5  E6 40				out	40h,al			; port 40h, 8253 timer 0 clock
2F94:5EE7  BA 0201				mov	dx,201h
2F94:5EEA  EE					out	dx,al			; port 201h, start game 1-shots
2F94:5EEB			loc_613:					;  xref 2F94:5EF2
2F94:5EEB  EC					in	al,dx			; port 201h, start game 1-shots
2F94:5EEC  A8 01				test	al,1
2F94:5EEE  74 66				jz	loc_617			; Jump if zero
2F94:5EF0  A8 02				test	al,2
2F94:5EF2  75 F7				jnz	loc_613			; Jump if not zero
2F94:5EF4  B0 06				mov	al,6
2F94:5EF6  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:5EF8  E4 40				in	al,40h			; port 40h, 8253 timer 0 clock
2F94:5EFA  8A C8				mov	cl,al
2F94:5EFC  E4 40				in	al,40h			; port 40h, 8253 timer 0 clock
2F94:5EFE  8A E8				mov	ch,al
2F94:5F00  F7 D1				not	cx
2F94:5F02  89 0E 5EDB				mov	[data_277],cx		; (2F94:5EDB=0)
2F94:5F06			loc_614:					;  xref 2F94:5F09
2F94:5F06  EC					in	al,dx			; port 201h, start game 1-shots
2F94:5F07  A8 01				test	al,1
2F94:5F09  75 FB				jnz	loc_614			; Jump if not zero
2F94:5F0B  B0 06				mov	al,6
2F94:5F0D  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:5F0F  E4 40				in	al,40h			; port 40h, 8253 timer 0 clock
2F94:5F11  8A C8				mov	cl,al
2F94:5F13  E4 40				in	al,40h			; port 40h, 8253 timer 0 clock
2F94:5F15  8A E8				mov	ch,al
2F94:5F17  F7 D1				not	cx
2F94:5F19  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5F1B  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5F1D  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5F1F  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5F21  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5F23  81 F9 00CC				cmp	cx,0CCh
2F94:5F27  76 03				jbe	loc_615			; Jump if below or =
2F94:5F29  B9 00CC				mov	cx,0CCh
2F94:5F2C			loc_615:					;  xref 2F94:5F27
2F94:5F2C  8A D9				mov	bl,cl
2F94:5F2E  D1 E9				shr	cx,1			; Shift w/zeros fill
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 183

2F94:5F30  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5F32  02 D9				add	bl,cl
2F94:5F34  8B 0E 5EDB				mov	cx,[data_277]		; (2F94:5EDB=0)
2F94:5F38  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5F3A  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5F3C  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5F3E  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5F40  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5F42  81 F9 00CC				cmp	cx,0CCh
2F94:5F46  76 03				jbe	loc_616			; Jump if below or =
2F94:5F48  B9 00CC				mov	cx,0CCh
2F94:5F4B			loc_616:					;  xref 2F94:5F46
2F94:5F4B  8A F9				mov	bh,cl
2F94:5F4D  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5F4F  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5F51  02 F9				add	bh,cl
2F94:5F53  EB 60				jmp	short loc_621		; (5FB5)
2F94:5F55  90					db	90h
2F94:5F56			loc_617:					;  xref 2F94:5EEE
2F94:5F56  B0 06				mov	al,6
2F94:5F58  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:5F5A  E4 40				in	al,40h			; port 40h, 8253 timer 0 clock
2F94:5F5C  8A C8				mov	cl,al
2F94:5F5E  E4 40				in	al,40h			; port 40h, 8253 timer 0 clock
2F94:5F60  8A E8				mov	ch,al
2F94:5F62  F7 D1				not	cx
2F94:5F64  89 0E 5ED9				mov	[data_276],cx		; (2F94:5ED9=0)
2F94:5F68			loc_618:					;  xref 2F94:5F6B
2F94:5F68  EC					in	al,dx			; port 201h, start game 1-shots
2F94:5F69  A8 02				test	al,2
2F94:5F6B  75 FB				jnz	loc_618			; Jump if not zero
2F94:5F6D  B0 06				mov	al,6
2F94:5F6F  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:5F71  E4 40				in	al,40h			; port 40h, 8253 timer 0 clock
2F94:5F73  8A C8				mov	cl,al
2F94:5F75  E4 40				in	al,40h			; port 40h, 8253 timer 0 clock
2F94:5F77  8A E8				mov	ch,al
2F94:5F79  F7 D1				not	cx
2F94:5F7B  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5F7D  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5F7F  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5F81  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5F83  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5F85  81 F9 00CC				cmp	cx,0CCh
2F94:5F89  76 03				jbe	loc_619			; Jump if below or =
2F94:5F8B  B9 00CC				mov	cx,0CCh
2F94:5F8E			loc_619:					;  xref 2F94:5F89
2F94:5F8E  8A F9				mov	bh,cl
2F94:5F90  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5F92  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5F94  02 F9				add	bh,cl
2F94:5F96  8B 0E 5ED9				mov	cx,[data_276]		; (2F94:5ED9=0)
2F94:5F9A  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5F9C  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5F9E  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5FA0  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5FA2  D1 E9				shr	cx,1			; Shift w/zeros fill
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 184

2F94:5FA4  81 F9 00CC				cmp	cx,0CCh
2F94:5FA8  76 03				jbe	loc_620			; Jump if below or =
2F94:5FAA  B9 00CC				mov	cx,0CCh
2F94:5FAD			loc_620:					;  xref 2F94:5FA8
2F94:5FAD  8A D9				mov	bl,cl
2F94:5FAF  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5FB1  D1 E9				shr	cx,1			; Shift w/zeros fill
2F94:5FB3  02 D9				add	bl,cl
2F94:5FB5			loc_621:					;  xref 2F94:5F53
2F94:5FB5  EC					in	al,dx			; port 201h, start game 1-shots
2F94:5FB6  24 10				and	al,10h
2F94:5FB8  34 10				xor	al,10h
2F94:5FBA  A2 0103				mov	[data_28],al		; (2F94:0103=0)
2F94:5FBD  3A 3E 3D86				cmp	bh,[data_218]		; (2F94:3D86=26h)
2F94:5FC1  72 0C				jb	loc_622			; Jump if below
2F94:5FC3  3A 3E 3D87				cmp	bh,[data_219]		; (2F94:3D87=6Fh)
2F94:5FC7  73 0C				jae	loc_623			; Jump if above or =
2F94:5FC9  BE 5ED3				mov	si,5ED3h
2F94:5FCC  EB 0A				jmp	short loc_624		; (5FD8)
2F94:5FCE  90					db	90h
2F94:5FCF			loc_622:					;  xref 2F94:5FC1
2F94:5FCF  BE 5ED0				mov	si,5ED0h
2F94:5FD2  EB 04				jmp	short loc_624		; (5FD8)
2F94:5FD4  90					db	90h
2F94:5FD5			loc_623:					;  xref 2F94:5FC7
2F94:5FD5 .BE 5ED6				mov	si,offset data_275	; (2F94:5ED6=4Fh)
2F94:5FD8			loc_624:					;  xref 2F94:5FCC, 5FD2
2F94:5FD8  3A 1E 3D84				cmp	bl,[data_216]		; (2F94:3D84=25h)
2F94:5FDC  72 10				jb	loc_625			; Jump if below
2F94:5FDE  3A 1E 3D85				cmp	bl,[data_217]		; (2F94:3D85=6Bh)
2F94:5FE2  73 0D				jae	loc_626			; Jump if above or =
2F94:5FE4  8A 44 01				mov	al,[si+1]
2F94:5FE7  C7 06 3454 0000			mov	[player_dir],0		; (2F94:3454=0)
2F94:5FED  C3					retn
2F94:5FEE			loc_625:					;  xref 2F94:5FDC
2F94:5FEE  8A 04				mov	al,[si]
2F94:5FF0  C3					retn
2F94:5FF1			loc_626:					;  xref 2F94:5FE2
2F94:5FF1  8A 44 02				mov	al,[si+2]
2F94:5FF4  C3					retn
				sub_21		endp

2F94:5FF5  000B[00]				db	11 dup (0)
2F94:6000  0000			data_280	dw	0			;  xref 2F94:021F, 60CA, 60DC, 60E4
2F94:6002  0000			data_281	dw	0			;  xref 2F94:6029
2F94:6004  0000			pattern_a	dw	0			;  xref 2F94:0694, 0773, 09F2, 0A1F
										;            0A3C, 0A5D, 6036, 6051
										;            606C, 608C, 609B
2F94:6006  0000			pattern_b	dw	0			;  xref 2F94:0653, 0784, 07AB, 07C8
										;            0A11, 0A30, 0A4F, 0A7C
										;            4689, 603C, 6057, 6072
										;            6092, 60A1
2F94:6008  01			pattern_n	db	1			;  xref 2F94:0879, 2BE7, 6042, 605D
										;            6078, 6080, 60AB
2F94:6009  0010			data_282	dw	10h			; Data table (indexed access)
										;  xref 2F94:60C6
2F94:600B  0C 00 0A 00 08 00			db	 0Ch, 00h, 0Ah, 00h, 08h, 00h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 185

2F94:6011  06 00 04 00 02 00			db	 06h, 00h, 04h, 00h, 02h, 00h
2F94:6017  00 00 01 40 02 20			db	 00h, 00h, 01h, 40h, 02h, 20h
2F94:601D  03 10 04 08 05 12			db	 03h, 10h, 04h, 08h, 05h, 12h
2F94:6023  06 09 07 04 08 01			db	 06h, 09h, 07h, 04h, 08h, 01h

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          init_room_patterns
				;
				;         Called from:   2F94:0535
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:6029			init_room_patterns	proc	near
2F94:6029  C7 06 6002 00C8			mov	[data_281],0C8h		; (2F94:6002=0)
2F94:602F  80 3E 013B 26			cmp	[room_num],26h		; (2F94:013B=0) '&'
2F94:6034  73 14				jae	loc_627			; Jump if above or =
2F94:6036  C7 06 6004 660A			mov	[pattern_a],660Ah	; (2F94:6004=0)
2F94:603C  C7 06 6006 660A			mov	[pattern_b],660Ah	; (2F94:6006=0)
2F94:6042  C6 06 6008 01			mov	[pattern_n],1		; (2F94:6008=1)
2F94:6047  EB 5E				jmp	short loc_631		; (60A7)
2F94:6049  90					db	90h
2F94:604A			loc_627:					;  xref 2F94:6034
2F94:604A  80 3E 013B 43			cmp	[room_num],43h		; (2F94:013B=0) 'C'
2F94:604F  73 14				jae	loc_628			; Jump if above or =
2F94:6051  C7 06 6004 665A			mov	[pattern_a],665Ah	; (2F94:6004=0)
2F94:6057  C7 06 6006 662A			mov	[pattern_b],662Ah	; (2F94:6006=0)
2F94:605D  C6 06 6008 02			mov	[pattern_n],2		; (2F94:6008=1)
2F94:6062  EB 43				jmp	short loc_631		; (60A7)
2F94:6064  90					db	90h
2F94:6065			loc_628:					;  xref 2F94:604F
2F94:6065  80 3E 013B 5D			cmp	[room_num],5Dh		; (2F94:013B=0) ']'
2F94:606A  73 14				jae	loc_629			; Jump if above or =
2F94:606C  C7 06 6004 667A			mov	[pattern_a],667Ah	; (2F94:6004=0)
2F94:6072  C7 06 6006 663A			mov	[pattern_b],663Ah	; (2F94:6006=0)
2F94:6078  C6 06 6008 03			mov	[pattern_n],3		; (2F94:6008=1)
2F94:607D  EB 28				jmp	short loc_631		; (60A7)
2F94:607F  90					db	90h
2F94:6080			loc_629:					;  xref 2F94:606A
2F94:6080  C6 06 6008 04			mov	[pattern_n],4		; (2F94:6008=1)
2F94:6085  80 3E 013B 7F			cmp	[room_num],7Fh		; (2F94:013B=0)
2F94:608A  74 0F				je	loc_630			; Jump if equal
2F94:608C  C7 06 6004 669A			mov	[pattern_a],669Ah	; (2F94:6004=0)
2F94:6092  C7 06 6006 664A			mov	[pattern_b],664Ah	; (2F94:6006=0)
2F94:6098  EB 0D				jmp	short loc_631		; (60A7)
2F94:609A  90					db	90h
2F94:609B			loc_630:					;  xref 2F94:608A
2F94:609B  C7 06 6004 66BA			mov	[pattern_a],66BAh	; (2F94:6004=0)
2F94:60A1  C7 06 6006 66BA			mov	[pattern_b],66BAh	; (2F94:6006=0)
2F94:60A7			loc_631:					;  xref 2F94:6047, 6062, 607D, 6098
2F94:60A7  33 DB				xor	bx,bx			; Zero register
2F94:60A9  33 FF				xor	di,di			; Zero register
2F94:60AB  8A 1E 6008				mov	bl,[pattern_n]		; (2F94:6008=1)
2F94:60AF  4B					dec	bx
2F94:60B0  D1 E3				shl	bx,1			; Shift w/zeros fill
2F94:60B2  80 3E 0132 00			cmp	[joystick_selected],0	; (2F94:0132=0)
2F94:60B7  74 03				je	loc_632			; Jump if equal
2F94:60B9  83 C7 10				add	di,10h
2F94:60BC			loc_632:					;  xref 2F94:60B7
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 186

2F94:60BC  80 3E 0133 00			cmp	[advanced_mode],0	; (2F94:0133=0)
2F94:60C1  74 03				je	loc_633			; Jump if equal
2F94:60C3  83 C7 08				add	di,8
2F94:60C6			loc_633:					;  xref 2F94:60C1
2F94:60C6  8B 89 6009				mov	cx,[data_282][bx+di]	; (2F94:6009=10h)
2F94:60CA  89 0E 6000				mov	[data_280],cx		; (2F94:6000=0)
2F94:60CE  80 3E 012F 00			cmp	[data_33],0		; (2F94:012F=0)
2F94:60D3  74 13				je	loc_ret_635		; Jump if equal
2F94:60D5  80 3E 0132 00			cmp	[joystick_selected],0	; (2F94:0132=0)
2F94:60DA  74 08				je	loc_634			; Jump if equal
2F94:60DC  83 2E 6000 64			sub	[data_280],64h		; (2F94:6000=0)
2F94:60E1  EB 05				jmp	short loc_ret_635	; (60E8)
2F94:60E3  90					db	90h
2F94:60E4			loc_634:					;  xref 2F94:60DA
2F94:60E4  D1 2E 6000				shr	[data_280],1		; (2F94:6000=0) Shift w/zeros fill

2F94:60E8			loc_ret_635:					;  xref 2F94:60D3, 60E1
2F94:60E8  C3					retn
				init_room_patterns	endp

2F94:60E9  0008[00]				db	8 dup (0)

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          xor_to_screen_60f1
				;
				;         Called from:   2F94:2416, 2C7C, 398C, 39EF, 39F8, 3A5E, 3A78
				;                             3B08, 3B11, 3B45, 3EB8, 3F11, 3F4B
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:60F1			xor_to_screen_60f1	proc	near
2F94:60F1  50					push	ax
2F94:60F2  53					push	bx
2F94:60F3  51					push	cx
2F94:60F4  52					push	dx
2F94:60F5  57					push	di
2F94:60F6  56					push	si
2F94:60F7			loc_636:					;  xref 2F94:6118
2F94:60F7  8A C2				mov	al,dl
2F94:60F9  32 E4				xor	ah,ah			; Zero register
2F94:60FB  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:60FD  8B F8				mov	di,ax
2F94:60FF  8A C6				mov	al,dh
2F94:6101  32 E4				xor	ah,ah			; Zero register
2F94:6103  03 85 68E0				add	ax,[line_offsets_table][di]	; (2F94:68E0=0)
2F94:6107  8B F8				mov	di,ax
2F94:6109  33 C9				xor	cx,cx			; Zero register
2F94:610B  8A CB				mov	cl,bl

2F94:610D			locloop_637:					;  xref 2F94:6112
2F94:610D  AC					lodsb				; String [si] to al
2F94:610E  26: 30 05				xor	es:[di],al
2F94:6111  47					inc	di
2F94:6112  E2 F9				loop	locloop_637		; Loop if cx > 0

2F94:6114  FE C2				inc	dl
2F94:6116  FE CF				dec	bh
2F94:6118  75 DD				jnz	loc_636			; Jump if not zero
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 187

2F94:611A  5E					pop	si
2F94:611B  5F					pop	di
2F94:611C  5A					pop	dx
2F94:611D  59					pop	cx
2F94:611E  5B					pop	bx
2F94:611F  58					pop	ax
2F94:6120  C3					retn
				xor_to_screen_60f1	endp

2F94:6121  000F[00]				db	15 dup (0)
2F94:6130  50 53 51 52 57 56			db	 50h, 53h, 51h, 52h, 57h, 56h
2F94:6136  C6 06 30 13 00			db	0C6h, 06h, 30h, 13h, 00h
2F94:613B			loc_638:					;  xref 2F94:616A
2F94:613B  8A C2				mov	al,dl
2F94:613D  32 E4				xor	ah,ah			; Zero register
2F94:613F  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:6141  8B F8				mov	di,ax
2F94:6143  8A C6				mov	al,dh
2F94:6145  32 E4				xor	ah,ah			; Zero register
2F94:6147  03 85 68E0				add	ax,[line_offsets_table][di]	; (2F94:68E0=0)
2F94:614B  8B F8				mov	di,ax
2F94:614D  33 C9				xor	cx,cx			; Zero register
2F94:614F  8A CB				mov	cl,bl

2F94:6151			locloop_639:					;  xref 2F94:6164
2F94:6151  AC					lodsb				; String [si] to al
2F94:6152  8A E0				mov	ah,al
2F94:6154  26: 22 05				and	al,es:[di]
2F94:6157  A8 AA				test	al,0AAh
2F94:6159  74 05				jz	loc_640			; Jump if zero
2F94:615B  C6 06 1330 01			mov	[collision_1330],1	; (2F94:1330=0)
2F94:6160			loc_640:					;  xref 2F94:6159
2F94:6160  26: 30 25				xor	es:[di],ah
2F94:6163  47					inc	di
2F94:6164  E2 EB				loop	locloop_639		; Loop if cx > 0

2F94:6166  FE C2				inc	dl
2F94:6168  FE CF				dec	bh
2F94:616A  75 CF				jnz	loc_638			; Jump if not zero
2F94:616C  5E					pop	si
2F94:616D  5F					pop	di
2F94:616E  5A					pop	dx
2F94:616F  59					pop	cx
2F94:6170  5B					pop	bx
2F94:6171  58					pop	ax
2F94:6172  C3					retn
2F94:6173  000D[00]				db	13 dup (0)

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                              SUBROUTINE
				;
				;         Called from:   2F94:1269, 1293
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:6180			sub_22		proc	near
2F94:6180  50					push	ax
2F94:6181  53					push	bx
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 188

2F94:6182  51					push	cx
2F94:6183  52					push	dx
2F94:6184  57					push	di
2F94:6185  56					push	si
2F94:6186  8C D8				mov	ax,ds
2F94:6188  8E C0				mov	es,ax
2F94:618A  B8 B800				mov	ax,0B800h
2F94:618D  8E D8				mov	ds,ax
2F94:618F			loc_641:					;  xref 2F94:61AC
2F94:618F  8A C2				mov	al,dl
2F94:6191  32 E4				xor	ah,ah			; Zero register
2F94:6193  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:6195  8B F0				mov	si,ax
2F94:6197  8A C6				mov	al,dh
2F94:6199  32 E4				xor	ah,ah			; Zero register
2F94:619B  2E: 03 84 68E0			add	ax,cs:[line_offsets_table][si]	; (2F94:68E0=0)
2F94:61A0  8B F0				mov	si,ax
2F94:61A2  33 C9				xor	cx,cx			; Zero register
2F94:61A4  8A CB				mov	cl,bl
2F94:61A6  F3/ A4				rep	movsb			; Rep when cx >0 Mov [si] to es:[di]
2F94:61A8  FE C2				inc	dl
2F94:61AA  FE CF				dec	bh
2F94:61AC  75 E1				jnz	loc_641			; Jump if not zero
2F94:61AE  B8 B800				mov	ax,0B800h
2F94:61B1  8E C0				mov	es,ax
2F94:61B3  8C C8				mov	ax,cs
2F94:61B5  8E D8				mov	ds,ax
2F94:61B7  5E					pop	si
2F94:61B8  5F					pop	di
2F94:61B9  5A					pop	dx
2F94:61BA  59					pop	cx
2F94:61BB  5B					pop	bx
2F94:61BC  58					pop	ax
2F94:61BD  C3					retn
				sub_22		endp

2F94:61BE  00 00				db	0, 0

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         dh=x, dl=y, bh=height, bl=byte width
				;
				;         Called from:   2F94:081C, 0825, 082B, 0834, 083D, 0845, 084D
				;                             0855, 085D, 0865, 086D, 0895, 0A87, 0A93
				;                             130E, 131C
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:61C0			draw_si_to_screen	proc	near
2F94:61C0  50					push	ax
2F94:61C1  53					push	bx
2F94:61C2  51					push	cx
2F94:61C3  52					push	dx
2F94:61C4  57					push	di
2F94:61C5  56					push	si
2F94:61C6			loc_642:					;  xref 2F94:61E2
2F94:61C6  8A C2				mov	al,dl
2F94:61C8  32 E4				xor	ah,ah			; Zero register
2F94:61CA  D1 E0				shl	ax,1			; Shift w/zeros fill
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 189

2F94:61CC  8B F8				mov	di,ax
2F94:61CE  8A C6				mov	al,dh
2F94:61D0  32 E4				xor	ah,ah			; Zero register
2F94:61D2  03 85 68E0				add	ax,[line_offsets_table][di]	; (2F94:68E0=0)
2F94:61D6  8B F8				mov	di,ax
2F94:61D8  33 C9				xor	cx,cx			; Zero register
2F94:61DA  8A CB				mov	cl,bl
2F94:61DC  F3/ A4				rep	movsb			; Rep when cx >0 Mov [si] to es:[di]
2F94:61DE  FE C2				inc	dl
2F94:61E0  FE CF				dec	bh
2F94:61E2  75 E2				jnz	loc_642			; Jump if not zero
2F94:61E4  5E					pop	si
2F94:61E5  5F					pop	di
2F94:61E6  5A					pop	dx
2F94:61E7  59					pop	cx
2F94:61E8  5B					pop	bx
2F94:61E9  58					pop	ax
2F94:61EA  C3					retn
				draw_si_to_screen	endp

2F94:61EB  00 00 00 00 00			db	0, 0, 0, 0, 0

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                              SUBROUTINE
				;
				;         Called from:   2F94:03EA
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:61F0			sub_23		proc	near
2F94:61F0  80 3E 4586 04			cmp	[data_235],4		; (2F94:4586=0)
2F94:61F5  75 01				jne	loc_643			; Jump if not equal
2F94:61F7  C3					retn
2F94:61F8			loc_643:					;  xref 2F94:61F5
2F94:61F8  80 2E 4582 02			sub	byte ptr [data_233],2	; (2F94:4582=0)
2F94:61FD  80 3E 4582 00			cmp	byte ptr [data_233],0	; (2F94:4582=0)
2F94:6202  77 09				ja	loc_644			; Jump if above
2F94:6204  50					push	ax
2F94:6205  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:6207  24 FC				and	al,0FCh
2F94:6209  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
										;  al = 0, speaker off
2F94:620B  58					pop	ax
2F94:620C  C3					retn
2F94:620D			loc_644:					;  xref 2F94:6202
2F94:620D  80 3E 4586 02			cmp	[data_235],2		; (2F94:4586=0)
2F94:6212  74 78				je	loc_654			; Jump if equal
2F94:6214  72 03				jc	loc_645			; Jump if carry Set
2F94:6216  E9 00E6				jmp	loc_663			; (62FF)
2F94:6219			loc_645:					;  xref 2F94:6214
2F94:6219  80 3E 4582 22			cmp	byte ptr [data_233],22h	; (2F94:4582=0) '"'
2F94:621E  74 03				je	loc_646			; Jump if equal
2F94:6220  72 1E				jc	loc_648			; Jump if carry Set
2F94:6222  C3					retn
2F94:6223			loc_646:					;  xref 2F94:621E
2F94:6223  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:6228  74 15				jz	loc_ret_647		; Jump if zero
2F94:622A  50					push	ax
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 190

2F94:622B  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:622D  0C 03				or	al,3
2F94:622F  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:6231  B0 B6				mov	al,0B6h
2F94:6233  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:6235  B8 1DC7				mov	ax,1DC7h
2F94:6238  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:623A  8A C4				mov	al,ah
2F94:623C  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:623E  58					pop	ax

2F94:623F			loc_ret_647:					;  xref 2F94:6228
2F94:623F  C3					retn
2F94:6240			loc_648:					;  xref 2F94:6220
2F94:6240  80 3E 4582 1E			cmp	byte ptr [data_233],1Eh	; (2F94:4582=0)
2F94:6245  74 03				je	loc_649			; Jump if equal
2F94:6247  72 1E				jc	loc_651			; Jump if carry Set
2F94:6249  C3					retn
2F94:624A			loc_649:					;  xref 2F94:6245
2F94:624A  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:624F  74 15				jz	loc_ret_650		; Jump if zero
2F94:6251  50					push	ax
2F94:6252  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:6254  0C 03				or	al,3
2F94:6256  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:6258  B0 B6				mov	al,0B6h
2F94:625A  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:625C  B8 1F8C				mov	ax,1F8Ch
2F94:625F  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:6261  8A C4				mov	al,ah
2F94:6263  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:6265  58					pop	ax

2F94:6266			loc_ret_650:					;  xref 2F94:624F
2F94:6266  C3					retn
2F94:6267			loc_651:					;  xref 2F94:6247
2F94:6267  80 3E 4582 0A			cmp	byte ptr [data_233],0Ah	; (2F94:4582=0)
2F94:626C  74 01				je	loc_652			; Jump if equal
2F94:626E  C3					retn
2F94:626F			loc_652:					;  xref 2F94:626C
2F94:626F  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:6274  74 15				jz	loc_ret_653		; Jump if zero
2F94:6276  50					push	ax
2F94:6277  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:6279  0C 03				or	al,3
2F94:627B  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:627D  B0 B6				mov	al,0B6h
2F94:627F  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:6281  B8 1DC7				mov	ax,1DC7h
2F94:6284  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:6286  8A C4				mov	al,ah
2F94:6288  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:628A  58					pop	ax

2F94:628B			loc_ret_653:					;  xref 2F94:6274
2F94:628B  C3					retn
2F94:628C			loc_654:					;  xref 2F94:6212
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 191

2F94:628C  80 3E 4582 22			cmp	byte ptr [data_233],22h	; (2F94:4582=0) '"'
2F94:6291  74 03				je	loc_655			; Jump if equal
2F94:6293  72 1E				jc	loc_657			; Jump if carry Set
2F94:6295  C3					retn
2F94:6296			loc_655:					;  xref 2F94:6291
2F94:6296  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:629B  74 15				jz	loc_ret_656		; Jump if zero
2F94:629D  50					push	ax
2F94:629E  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:62A0  0C 03				or	al,3
2F94:62A2  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:62A4  B0 B6				mov	al,0B6h
2F94:62A6  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:62A8  B8 1DC7				mov	ax,1DC7h
2F94:62AB  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:62AD  8A C4				mov	al,ah
2F94:62AF  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:62B1  58					pop	ax

2F94:62B2			loc_ret_656:					;  xref 2F94:629B
2F94:62B2  C3					retn
2F94:62B3			loc_657:					;  xref 2F94:6293
2F94:62B3  80 3E 4582 1E			cmp	byte ptr [data_233],1Eh	; (2F94:4582=0)
2F94:62B8  74 03				je	loc_658			; Jump if equal
2F94:62BA  72 1E				jc	loc_660			; Jump if carry Set
2F94:62BC  C3					retn
2F94:62BD			loc_658:					;  xref 2F94:62B8
2F94:62BD  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:62C2  74 15				jz	loc_ret_659		; Jump if zero
2F94:62C4  50					push	ax
2F94:62C5  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:62C7  0C 03				or	al,3
2F94:62C9  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:62CB  B0 B6				mov	al,0B6h
2F94:62CD  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:62CF  B8 1F8C				mov	ax,1F8Ch
2F94:62D2  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:62D4  8A C4				mov	al,ah
2F94:62D6  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:62D8  58					pop	ax

2F94:62D9			loc_ret_659:					;  xref 2F94:62C2
2F94:62D9  C3					retn
2F94:62DA			loc_660:					;  xref 2F94:62BA
2F94:62DA  80 3E 4582 0A			cmp	byte ptr [data_233],0Ah	; (2F94:4582=0)
2F94:62DF  74 01				je	loc_661			; Jump if equal
2F94:62E1  C3					retn
2F94:62E2			loc_661:					;  xref 2F94:62DF
2F94:62E2  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:62E7  74 15				jz	loc_ret_662		; Jump if zero
2F94:62E9  50					push	ax
2F94:62EA  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:62EC  0C 03				or	al,3
2F94:62EE  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:62F0  B0 B6				mov	al,0B6h
2F94:62F2  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:62F4  B8 27BF				mov	ax,27BFh
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 192

2F94:62F7  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:62F9  8A C4				mov	al,ah
2F94:62FB  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:62FD  58					pop	ax

2F94:62FE			loc_ret_662:					;  xref 2F94:62E7
2F94:62FE  C3					retn
2F94:62FF			loc_663:					;  xref 2F94:6216
2F94:62FF  80 3E 4582 14			cmp	byte ptr [data_233],14h	; (2F94:4582=0)
2F94:6304  74 03				je	loc_664			; Jump if equal
2F94:6306  72 1E				jc	loc_666			; Jump if carry Set
2F94:6308  C3					retn
2F94:6309			loc_664:					;  xref 2F94:6304
2F94:6309  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:630E  74 15				jz	loc_ret_665		; Jump if zero
2F94:6310  50					push	ax
2F94:6311  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:6313  0C 03				or	al,3
2F94:6315  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:6317  B0 B6				mov	al,0B6h
2F94:6319  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:631B  B8 236B				mov	ax,236Bh
2F94:631E  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:6320  8A C4				mov	al,ah
2F94:6322  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:6324  58					pop	ax

2F94:6325			loc_ret_665:					;  xref 2F94:630E
2F94:6325  C3					retn
2F94:6326			loc_666:					;  xref 2F94:6306
2F94:6326  80 3E 4582 10			cmp	byte ptr [data_233],10h	; (2F94:4582=0)
2F94:632B  74 03				je	loc_667			; Jump if equal
2F94:632D  72 1E				jc	loc_669			; Jump if carry Set
2F94:632F  C3					retn
2F94:6330			loc_667:					;  xref 2F94:632B
2F94:6330  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:6335  74 15				jz	loc_ret_668		; Jump if zero
2F94:6337  50					push	ax
2F94:6338  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:633A  0C 03				or	al,3
2F94:633C  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:633E  B0 B6				mov	al,0B6h
2F94:6340  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:6342  B8 216A				mov	ax,216Ah
2F94:6345  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:6347  8A C4				mov	al,ah
2F94:6349  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:634B  58					pop	ax

2F94:634C			loc_ret_668:					;  xref 2F94:6335
2F94:634C  C3					retn
2F94:634D			loc_669:					;  xref 2F94:632D
2F94:634D  80 3E 4582 08			cmp	byte ptr [data_233],8	; (2F94:4582=0)
2F94:6352  74 01				je	loc_670			; Jump if equal
2F94:6354  C3					retn
2F94:6355			loc_670:					;  xref 2F94:6352
2F94:6355  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 193

2F94:635A  74 15				jz	loc_ret_671		; Jump if zero
2F94:635C  50					push	ax
2F94:635D  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:635F  0C 03				or	al,3
2F94:6361  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:6363  B0 B6				mov	al,0B6h
2F94:6365  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:6367  B8 27C0				mov	ax,27C0h
2F94:636A  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:636C  8A C4				mov	al,ah
2F94:636E  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:6370  58					pop	ax

2F94:6371			loc_ret_671:					;  xref 2F94:635A
2F94:6371  C3					retn
				sub_23		endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                              SUBROUTINE
				;
				;         Called from:   2F94:03E0, 0429
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:6372			sub_24		proc	near
2F94:6372  FE 0E 4582				dec	byte ptr [data_233]	; (2F94:4582=0)
2F94:6376  F6 06 4582 01			test	byte ptr [data_233],1	; (2F94:4582=0)
2F94:637B  75 21				jnz	loc_672			; Jump if not zero
2F94:637D  83 2E 4584 08			sub	[data_234],8		; (2F94:4584=0)
2F94:6382  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:6387  74 15				jz	loc_672			; Jump if zero
2F94:6389  50					push	ax
2F94:638A  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:638C  0C 03				or	al,3
2F94:638E  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:6390  B0 B6				mov	al,0B6h
2F94:6392  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:6394  A1 4584				mov	ax,[data_234]		; (2F94:4584=0)
2F94:6397  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:6399  8A C4				mov	al,ah
2F94:639B  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:639D  58					pop	ax
2F94:639E			loc_672:					;  xref 2F94:637B, 6387
2F94:639E  8B 0E 4580				mov	cx,[data_232]		; (2F94:4580=0)
2F94:63A2  33 D2				xor	dx,dx			; Zero register
2F94:63A4  8A 16 4582				mov	dl,byte ptr [data_233]	; (2F94:4582=0)
2F94:63A8  D1 E2				shl	dx,1			; Shift w/zeros fill
2F94:63AA  83 C2 40				add	dx,40h
2F94:63AD .BF 6D08				mov	di,offset clear_bitmap	; (2F94:6D08=0)
2F94:63B0  BB 0402				mov	bx,402h
2F94:63B3  E8 B114				call	draw_sprite_v2		; (14CA)
2F94:63B6  C3					retn
				sub_24		endp

2F94:63B7  000E[00]				db	14 dup (0)
2F94:63C5  00			repspr_count	db	0			;  xref 2F94:057D, 058B, 05A9, 05BD
										;            05E2, 061F, 062A, 0646
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 194

										;            0663, 066F, 067E, 068A
										;            069E, 06AA, 06BA, 06C6
										;            06D7, 06F8, 071F, 0745
										;            0765, 077F, 07A6, 07C3
										;            07FE, 080A, 0949, 0984
										;            0990, 09D0, 09DC, 09E9
										;            09F9, 0A08, 0A18, 0A29
										;            0A37, 0A48, 0A56, 0A68
										;            0A77, 0A8C, 0A99, 0B05
										;            0B11, 0B1D, 0B29, 0B35
										;            0B41, 0B4D, 4680, 4D7A
										;            4D8F
2F94:63C6  FC			filpat_63C6	db	0FCh			; balls
2F94:63C7  00 00 3F FF 00 00			db	 00h, 00h, 3Fh,0FFh, 00h, 00h
2F94:63CD  FF FF C0 03 FF FF			db	0FFh,0FFh,0C0h, 03h,0FFh,0FFh
2F94:63D3  F0 0F FF FF F0 0F			db	0F0h, 0Fh,0FFh,0FFh,0F0h, 0Fh
2F94:63D9  FF FF C0 03 FF FF			db	0FFh,0FFh,0C0h, 03h,0FFh,0FFh
2F94:63DF  00 00 FF FC 00 00			db	 00h, 00h,0FFh,0FCh, 00h, 00h
2F94:63E5  3F 00 3F FC 00 00			db	 3Fh, 00h, 3Fh,0FCh, 00h, 00h
2F94:63EB  FF FF 00 03 FF FF			db	0FFh,0FFh, 00h, 03h,0FFh,0FFh
2F94:63F1  C0 0F FF FF F0 0F			db	0C0h, 0Fh,0FFh,0FFh,0F0h, 0Fh
2F94:63F7  FF FF F0 03 FF FF			db	0FFh,0FFh,0F0h, 03h,0FFh,0FFh
2F94:63FD  C0 00 FF FF 00 00			db	0C0h, 00h,0FFh,0FFh, 00h, 00h
2F94:6403  3F FC 00				db	 3Fh,0FCh, 00h
2F94:6406  00			filpat_6406	db	0
2F94:6407  00 00 00 55 50 05			db	 00h, 00h, 00h, 55h, 50h, 05h
2F94:640D  55 55 50 05 55 55			db	 55h, 55h, 50h, 05h, 55h, 55h
2F94:6413  50 05 55 55 50 05			db	 50h, 05h, 55h, 55h, 50h, 05h
2F94:6419  55 55 50 05 55 55			db	 55h, 55h, 50h, 05h, 55h, 55h
2F94:641F  50 05 55 00				db	 50h, 05h, 55h, 00h
2F94:6423  0007[00]				db	7 dup (0)
2F94:642A  05 55 55 50 05 55			db	 05h, 55h, 55h, 50h, 05h, 55h
2F94:6430  55 50 05 55 55 50			db	 55h, 50h, 05h, 55h, 55h, 50h
2F94:6436  05 55 55 50 05 55			db	 05h, 55h, 55h, 50h, 05h, 55h
2F94:643C  55 50 05				db	 55h, 50h, 05h
2F94:643F  55 55 50				db	 55h, 55h, 50h
2F94:6442  0008[00]				db	8 dup (0)
2F94:644A  40			filpat_644A	db	40h
2F94:644B  01 40 01 04 01 40			db	 01h, 40h, 01h, 04h, 01h, 40h
2F94:6451  10 00 41 41 00 00			db	 10h, 00h, 41h, 41h, 00h, 00h
2F94:6457  05 50 00 00 05 50			db	 05h, 50h, 00h, 00h, 05h, 50h
2F94:645D  00 00 41 41 00 04			db	 00h, 00h, 41h, 41h, 00h, 04h
2F94:6463  01 40 10 40 01 40			db	 01h, 40h, 10h, 40h, 01h, 40h
2F94:6469  01 40 01 40 01 40			db	 01h, 40h, 01h, 40h, 01h, 40h
2F94:646F  10 04 01 41 00 00			db	 10h, 04h, 01h, 41h, 00h, 00h
2F94:6475  41 50 00 00 05 50			db	 41h, 50h, 00h, 00h, 05h, 50h
2F94:647B  00 00 05 41 00 00			db	 00h, 00h, 05h, 41h, 00h, 00h
2F94:6481  41 40 10 04 01 40			db	 41h, 40h, 10h, 04h, 01h, 40h
2F94:6487  01 40 01				db	 01h, 40h, 01h
2F94:648A  00			filpat_648A	db	0
2F94:648B  FF FF 00 FF FF FF			db	0FFh,0FFh, 00h,0FFh,0FFh,0FFh
2F94:6491  FF FF F0 0F FF 0F			db	0FFh,0FFh,0F0h, 0Fh,0FFh, 0Fh
2F94:6497  FF FF F0 0F FF FF			db	0FFh,0FFh,0F0h, 0Fh,0FFh,0FFh
2F94:649D  F0 FF F0 0F FF FF			db	0F0h,0FFh,0F0h, 0Fh,0FFh,0FFh
2F94:64A3  FF FF FF 00 FF FF			db	0FFh,0FFh,0FFh, 00h,0FFh,0FFh
2F94:64A9  00 FF 00 00 FF FF			db	 00h,0FFh, 00h, 00h,0FFh,0FFh
2F94:64AF  FF FF FF 0F FF FF			db	0FFh,0FFh,0FFh, 0Fh,0FFh,0FFh
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 195

2F94:64B5  F0 FF F0 0F FF FF			db	0F0h,0FFh,0F0h, 0Fh,0FFh,0FFh
2F94:64BB  F0 0F FF 0F FF FF			db	0F0h, 0Fh,0FFh, 0Fh,0FFh,0FFh
2F94:64C1  F0 FF FF FF FF FF			db	0F0h,0FFh,0FFh,0FFh,0FFh,0FFh
2F94:64C7  00 00 FF				db	 00h, 00h,0FFh
2F94:64CA  0F			filpat_64CA	db	0Fh
2F94:64CB  F0 0F F0 0F F0 0F			db	0F0h, 0Fh,0F0h, 0Fh,0F0h, 0Fh
2F94:64D1  F0 AA AA AF FA AA			db	0F0h,0AAh,0AAh,0AFh,0FAh,0AAh
2F94:64D7  AA AF FA AA AA AF			db	0AAh,0AFh,0FAh,0AAh,0AAh,0AFh
2F94:64DD  FA AA AA AF FA 0F			db	0FAh,0AAh,0AAh,0AFh,0FAh, 0Fh
2F94:64E3  F0 0F F0 0F F0 0F			db	0F0h, 0Fh,0F0h, 0Fh,0F0h, 0Fh
2F94:64E9  F0 0F F0 0F F0 0F			db	0F0h, 0Fh,0F0h, 0Fh,0F0h, 0Fh
2F94:64EF  F0 0F F0 AF FA AA			db	0F0h, 0Fh,0F0h,0AFh,0FAh,0AAh
2F94:64F5  AA AF FA AA AA AF			db	0AAh,0AFh,0FAh,0AAh,0AAh,0AFh
2F94:64FB  FA AA AA AF FA AA			db	0FAh,0AAh,0AAh,0AFh,0FAh,0AAh
2F94:6501  AA 0F F0 0F F0 0F			db	0AAh, 0Fh,0F0h, 0Fh,0F0h, 0Fh
2F94:6507  F0 0F F0				db	0F0h, 0Fh,0F0h
2F94:650A  C0			filpat_650A	db	0C0h
2F94:650B  01 40 03 F0 05 50			db	 01h, 40h, 03h,0F0h, 05h, 50h
2F94:6511  0F BC 10 04 3E AF			db	 0Fh,0BCh, 10h, 04h, 3Eh,0AFh
2F94:6517  40 01 FA A9 00 00			db	 40h, 01h,0FAh,0A9h, 00h, 00h
2F94:651D  6A A4 00 00 1A 90			db	 6Ah,0A4h, 00h, 00h, 1Ah, 90h
2F94:6523  00 00 06 40 00 00			db	 00h, 00h, 06h, 40h, 00h, 00h
2F94:6529  01 40 03 C0 01 50			db	 01h, 40h, 03h,0C0h, 01h, 50h
2F94:652F  0F F0 05 04 3E BC			db	 0Fh,0F0h, 05h, 04h, 3Eh,0BCh
2F94:6535  10 01 FA AF 40 00			db	 10h, 01h,0FAh,0AFh, 40h, 00h
2F94:653B  6A A9 00 00 1A A4			db	 6Ah,0A9h, 00h, 00h, 1Ah,0A4h
2F94:6541  00 00 06 90 00 00			db	 00h, 00h, 06h, 90h, 00h, 00h
2F94:6547  01 40 00				db	 01h, 40h, 00h
2F94:654A  CC			filpat_654A	db	0CCh
2F94:654B  00 00 0C CC 00 00			db	 00h, 00h, 0Ch,0CCh, 00h, 00h
2F94:6551  CC CC C0 00 CC CC			db	0CCh,0CCh,0C0h, 00h,0CCh,0CCh
2F94:6557  CC 0C CC CC CC 0C			db	0CCh, 0Ch,0CCh,0CCh,0CCh, 0Ch
2F94:655D  CC CC C0 00 CC CC			db	0CCh,0CCh,0C0h, 00h,0CCh,0CCh
2F94:6563  00 00 CC CC 00 00			db	 00h, 00h,0CCh,0CCh, 00h, 00h
2F94:6569  0C 00 0C CC 00 00			db	 0Ch, 00h, 0Ch,0CCh, 00h, 00h
2F94:656F  CC CC 00 00 CC CC			db	0CCh,0CCh, 00h, 00h,0CCh,0CCh
2F94:6575  C0 0C CC CC CC 0C			db	0C0h, 0Ch,0CCh,0CCh,0CCh, 0Ch
2F94:657B  CC CC CC 00 CC CC			db	0CCh,0CCh,0CCh, 00h,0CCh,0CCh
2F94:6581  C0 00 CC CC 00 00			db	0C0h, 00h,0CCh,0CCh, 00h, 00h
2F94:6587  0C CC 00				db	 0Ch,0CCh, 00h
2F94:658A  C0			filpat_658A	db	0C0h
2F94:658B  0F C0 0F 30 0F C0			db	 0Fh,0C0h, 0Fh, 30h, 0Fh,0C0h
2F94:6591  33 33 0C C3 30 C3			db	 33h, 33h, 0Ch,0C3h, 30h,0C3h
2F94:6597  30 33 0C C0 33 30			db	 30h, 33h, 0Ch,0C0h, 33h, 30h
2F94:659D  0F C0 03 00 0F C0			db	 0Fh,0C0h, 03h, 00h, 0Fh,0C0h
2F94:65A3  0F C0 0F C0 0F C0			db	 0Fh,0C0h, 0Fh,0C0h, 0Fh,0C0h
2F94:65A9  0F C0 0F C0 0F C0			db	 0Fh,0C0h, 0Fh,0C0h, 0Fh,0C0h
2F94:65AF  33 30 0F C3 30 33			db	 33h, 30h, 0Fh,0C3h, 30h, 33h
2F94:65B5  0F 33 0F C3 30 30			db	 0Fh, 33h, 0Fh,0C3h, 30h, 30h
2F94:65BB  0F C0 33 00 0F C0			db	 0Fh,0C0h, 33h, 00h, 0Fh,0C0h
2F94:65C1  03 C0 0F C0 0F C0			db	 03h,0C0h, 0Fh,0C0h, 0Fh,0C0h
2F94:65C7  0F C0 0F AC 00 00			db	 0Fh,0C0h, 0Fh,0ACh, 00h, 00h
2F94:65CD  3A AA 00 00 AA AA			db	 3Ah,0AAh, 00h, 00h,0AAh,0AAh
2F94:65D3  C0 03 AA AA A0 0A			db	0C0h, 03h,0AAh,0AAh,0A0h, 0Ah
2F94:65D9  AA AA A0 0A AA AA			db	0AAh,0AAh,0A0h, 0Ah,0AAh,0AAh
2F94:65DF  C0 03 AA AA 00 00			db	0C0h, 03h,0AAh,0AAh, 00h, 00h
2F94:65E5  AA AC 00 00 3A 00			db	0AAh,0ACh, 00h, 00h, 3Ah, 00h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 196

2F94:65EB  3A AC 00 00 AA AA			db	 3Ah,0ACh, 00h, 00h,0AAh,0AAh
2F94:65F1  00 03 AA AA C0 0A			db	 00h, 03h,0AAh,0AAh,0C0h, 0Ah
2F94:65F7  AA AA A0 0A AA AA			db	0AAh,0AAh,0A0h, 0Ah,0AAh,0AAh
2F94:65FD  A0 03 AA AA C0 00			db	0A0h, 03h,0AAh,0AAh,0C0h, 00h
2F94:6603  AA AA 00 00 3A AC			db	0AAh,0AAh, 00h, 00h, 3Ah,0ACh
2F94:6609  00					db	 00h
2F94:660A  AA AA AA AA AA AA	fill_0a		db	0AAh,0AAh,0AAh,0AAh,0AAh,0AAh
2F94:6610  AA AA AA AA AA AA			db	0AAh,0AAh,0AAh,0AAh,0AAh,0AAh
2F94:6616  AA AA AA AA				db	0AAh,0AAh,0AAh,0AAh
2F94:661A  0010[AA]				db	16 dup (0AAh)
2F94:662A  AA AA AA AA A0 0A	fill_2a		db	0AAh,0AAh,0AAh,0AAh,0A0h, 0Ah
2F94:6630  A0 0A A0 0A A0 0A			db	0A0h, 0Ah,0A0h, 0Ah,0A0h, 0Ah
2F94:6636  AA AA AA AA				db	0AAh,0AAh,0AAh,0AAh
2F94:663A  FF FF D5 57 D0 07	fill_3a		db	0FFh,0FFh,0D5h, 57h,0D0h, 07h
2F94:6640  D0 07 D0 07 D0 07			db	0D0h, 07h,0D0h, 07h,0D0h, 07h
2F94:6646  D5 57 FF FF				db	0D5h, 57h,0FFh,0FFh
2F94:664A  FF FF EA AB EA AB	fill_4a		db	0FFh,0FFh,0EAh,0ABh,0EAh,0ABh
2F94:6650  EA AB EA AB EA AB			db	0EAh,0ABh,0EAh,0ABh,0EAh,0ABh
2F94:6656  EA AB FF FF				db	0EAh,0ABh,0FFh,0FFh
2F94:665A  AA AA AA AA AA AA	fill_5a		db	0AAh,0AAh,0AAh,0AAh,0AAh,0AAh
2F94:6660  AA AA A0 0A A0 0A			db	0AAh,0AAh,0A0h, 0Ah,0A0h, 0Ah
2F94:6666  A0 0A A0 0A				db	0A0h, 0Ah,0A0h, 0Ah
2F94:666A  A0 0A A0 0A A0 0A			db	0A0h, 0Ah,0A0h, 0Ah,0A0h, 0Ah
2F94:6670  A0 0A AA AA AA AA			db	0A0h, 0Ah,0AAh,0AAh,0AAh,0AAh
2F94:6676  AA AA AA AA				db	0AAh,0AAh,0AAh,0AAh
2F94:667A  FF FF FF FF D5 57	fill_7a		db	0FFh,0FFh,0FFh,0FFh,0D5h, 57h
2F94:6680  D5 57 D0 07 D0 07			db	0D5h, 57h,0D0h, 07h,0D0h, 07h
2F94:6686  D0 07 D0 07				db	0D0h, 07h,0D0h, 07h
2F94:668A  D0 07 D0 07 D0 07			db	0D0h, 07h,0D0h, 07h,0D0h, 07h
2F94:6690  D0 07 D5 57 D5			db	0D0h, 07h,0D5h, 57h,0D5h
2F94:6695  57					db	57h
2F94:6696  FF FF FF FF				db	0FFh,0FFh,0FFh,0FFh
2F94:669A  FF FF FF FF EA AB	fill_9a		db	0FFh,0FFh,0FFh,0FFh,0EAh,0ABh
2F94:66A0  EA AB EA AB EA AB			db	0EAh,0ABh,0EAh,0ABh,0EAh,0ABh
2F94:66A6  EA AB EA AB				db	0EAh,0ABh,0EAh,0ABh
2F94:66AA  EA AB EA AB EA AB			db	0EAh,0ABh,0EAh,0ABh,0EAh,0ABh
2F94:66B0  EA AB EA AB EA AB			db	0EAh,0ABh,0EAh,0ABh,0EAh,0ABh
2F94:66B6  FF FF FF FF				db	0FFh,0FFh,0FFh,0FFh
2F94:66BA  FF FF FF FF FF FF	fill_ba		db	0FFh,0FFh,0FFh,0FFh,0FFh,0FFh
2F94:66C0  FF FF FF FF FF FF			db	0FFh,0FFh,0FFh,0FFh,0FFh,0FFh
2F94:66C6  FF FF FF FF				db	0FFh,0FFh,0FFh,0FFh
2F94:66CA  0010[FF]				db	16 dup (0FFh)
2F94:66DA  0010[CCCC]		pat4x8_vstripes	dw	16 dup (0CCCCh)		;  xref 2F94:07F8, 4AE9, 4B25, 4B5F
										;            4B8E, 4BEB
2F94:66FA  F8 FE 00 FE 08 FE			db	0F8h,0FEh, 00h,0FEh, 08h,0FEh
2F94:6700  00 00 F8 00 00 00			db	 00h, 00h,0F8h, 00h, 00h, 00h
2F94:6706  08 00 00 00 F8 02			db	 08h, 00h, 00h, 00h,0F8h, 02h
2F94:670C  00 02 08 02				db	 00h, 02h, 08h, 02h
2F94:6710  00			spr_shamus_0	db	0			;  xref 2F94:01ED, 3604, 7BC5
2F94:6711  15 54 00 01 55 55			db	 15h, 54h, 00h, 01h, 55h, 55h
2F94:6717  40 00 00 00 00 01			db	 40h, 00h, 00h, 00h, 00h, 01h
2F94:671D  55 55 40 01 41 41			db	 55h, 55h, 40h, 01h, 41h, 41h
2F94:6723  40 01 55 55 40 00			db	 40h, 01h, 55h, 55h, 40h, 00h
2F94:6729  01 40 00 15 55 55			db	 01h, 40h, 00h, 15h, 55h, 55h
2F94:672F  54 00 05 50 00 00			db	 54h, 00h, 05h, 50h, 00h, 00h
2F94:6735  04 10 00 00 04 10			db	 04h, 10h, 00h, 00h, 04h, 10h
2F94:673B  00 00 54 15 00			db	 00h, 00h, 54h, 15h, 00h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 197

2F94:6740  00			spr_shamus_1	db	0			;  xref 2F94:3667
2F94:6741  15 54 00 01 55 55			db	 15h, 54h, 00h, 01h, 55h, 55h
2F94:6747  40 00 00 00 00 01			db	 40h, 00h, 00h, 00h, 00h, 01h
2F94:674D  55 55 40 01 55 55			db	 55h, 55h, 40h, 01h, 55h, 55h
2F94:6753  40 01 55 55 40 00			db	 40h, 01h, 55h, 55h, 40h, 00h
2F94:6759  01 40 00 15 55 55			db	 01h, 40h, 00h, 15h, 55h, 55h
2F94:675F  54 00 05 50 00 00			db	 54h, 00h, 05h, 50h, 00h, 00h
2F94:6765  04 10 00 00 04 15			db	 04h, 10h, 00h, 00h, 04h, 15h
2F94:676B  00 00 54 00 00			db	 00h, 00h, 54h, 00h, 00h
2F94:6770  00			spr_shamus_2	db	0			;  xref 2F94:3670
2F94:6771  15 54 00 01 55 55			db	 15h, 54h, 00h, 01h, 55h, 55h
2F94:6777  40 00 00 00 00 01			db	 40h, 00h, 00h, 00h, 00h, 01h
2F94:677D  55 55 40 01 55 55			db	 55h, 55h, 40h, 01h, 55h, 55h
2F94:6783  40 01 55 55 40 00			db	 40h, 01h, 55h, 55h, 40h, 00h
2F94:6789  01 40 00 15 55 55			db	 01h, 40h, 00h, 15h, 55h, 55h
2F94:678F  54 00 05 50 00 00			db	 54h, 00h, 05h, 50h, 00h, 00h
2F94:6795  04 10 00 00 54 10			db	 04h, 10h, 00h, 00h, 54h, 10h
2F94:679B  00 00 00 15 00			db	 00h, 00h, 00h, 15h, 00h
2F94:67A0  00			spr_shamus_3	db	0			;  xref 2F94:3754
2F94:67A1  15 54 00 01 55 55			db	 15h, 54h, 00h, 01h, 55h, 55h
2F94:67A7  40 00 00 00 00 01			db	 40h, 00h, 00h, 00h, 00h, 01h
2F94:67AD  55 55 40 01 41 41			db	 55h, 55h, 40h, 01h, 41h, 41h
2F94:67B3  40 01 55 55 40 00			db	 40h, 01h, 55h, 55h, 40h, 00h
2F94:67B9  01 40 00 15 55 55			db	 01h, 40h, 00h, 15h, 55h, 55h
2F94:67BF  54 00 05 50 00 00			db	 54h, 00h, 05h, 50h, 00h, 00h
2F94:67C5  04 10 00 00 04 15			db	 04h, 10h, 00h, 00h, 04h, 15h
2F94:67CB  00 00 54 00 00			db	 00h, 00h, 54h, 00h, 00h
2F94:67D0  00			spr_shamus_4	db	0			;  xref 2F94:375D
2F94:67D1  15 54 00 01 55 55			db	 15h, 54h, 00h, 01h, 55h, 55h
2F94:67D7  40 00 00 00 00 01			db	 40h, 00h, 00h, 00h, 00h, 01h
2F94:67DD  55 55 40 01 41 41			db	 55h, 55h, 40h, 01h, 41h, 41h
2F94:67E3  40 01 55 55 40 00			db	 40h, 01h, 55h, 55h, 40h, 00h
2F94:67E9  01 40 00 15 55 55			db	 01h, 40h, 00h, 15h, 55h, 55h
2F94:67EF  54 00 05 50 00 00			db	 54h, 00h, 05h, 50h, 00h, 00h
2F94:67F5  04 10 00 00 54 10			db	 04h, 10h, 00h, 00h, 54h, 10h
2F94:67FB  00 00 00 15 00			db	 00h, 00h, 00h, 15h, 00h
2F94:6800  00			spr_shamus_5	db	0			;  xref 2F94:363C, 36C7, 3728
2F94:6801  15 54 00 01 55 55			db	 15h, 54h, 00h, 01h, 55h, 55h
2F94:6807  40 00 00 00 00 00			db	 40h, 00h, 00h, 00h, 00h, 00h
2F94:680D  55 54 00 01 41 54			db	 55h, 54h, 00h, 01h, 41h, 54h
2F94:6813  00 00 55 54 00 00			db	 00h, 00h, 55h, 54h, 00h, 00h
2F94:6819  01 50 00 01 55 50			db	 01h, 50h, 00h, 01h, 55h, 50h
2F94:681F  00 00 01 50 00 00			db	 00h, 00h, 01h, 50h, 00h, 00h
2F94:6825  00 40 00 00 00 40			db	 00h, 40h, 00h, 00h, 00h, 40h
2F94:682B  00 00 05 40 00			db	 00h, 00h, 05h, 40h, 00h
2F94:6830  00			spr_shamus_6	db	0			;  xref 2F94:3645, 36D0, 3731
2F94:6831  15 54 00 01 55 55			db	 15h, 54h, 00h, 01h, 55h, 55h
2F94:6837  40 00 00 00 00 00			db	 40h, 00h, 00h, 00h, 00h, 00h
2F94:683D  55 54 00 01 41 54			db	 55h, 54h, 00h, 01h, 41h, 54h
2F94:6843  00 00 55 54 00 00			db	 00h, 00h, 55h, 54h, 00h, 00h
2F94:6849  01 50 00 01 55 50			db	 01h, 50h, 00h, 01h, 55h, 50h
2F94:684F  00 00 01 50 00 04			db	 00h, 00h, 01h, 50h, 00h, 04h
2F94:6855  04 04 00 01 10 01			db	 04h, 04h, 00h, 01h, 10h, 01h
2F94:685B  00 00 40 54 00			db	 00h, 00h, 40h, 54h, 00h
2F94:6860  00			spr_shamus_7	db	0			;  xref 2F94:369F, 36EF, 378D
2F94:6861  15 54 00 01 55 55			db	 15h, 54h, 00h, 01h, 55h, 55h
2F94:6867  40 00 00 00 00 00			db	 40h, 00h, 00h, 00h, 00h, 00h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 198

2F94:686D  15 55 00 00 15 41			db	 15h, 55h, 00h, 00h, 15h, 41h
2F94:6873  40 00 15 55 00 00			db	 40h, 00h, 15h, 55h, 00h, 00h
2F94:6879  05 40 00 00 05 55			db	 05h, 40h, 00h, 00h, 05h, 55h
2F94:687F  40 00 05 40 00 00			db	 40h, 00h, 05h, 40h, 00h, 00h
2F94:6885  01 00 00 00 01 00			db	 01h, 00h, 00h, 00h, 01h, 00h
2F94:688B  00 00 01 50 00			db	 00h, 00h, 01h, 50h, 00h
2F94:6890  00			spr_shamus_8	db	0			;  xref 2F94:36A8, 36F8, 3796
2F94:6891  15 54 00 01 55 55			db	 15h, 54h, 00h, 01h, 55h, 55h
2F94:6897  40 00 00 00 00 00			db	 40h, 00h, 00h, 00h, 00h, 00h
2F94:689D  15 55 00 00 15 41			db	 15h, 55h, 00h, 00h, 15h, 41h
2F94:68A3  40 00 15 55 00 00			db	 40h, 00h, 15h, 55h, 00h, 00h
2F94:68A9  05 40 00 00 05 55			db	 05h, 40h, 00h, 00h, 05h, 55h
2F94:68AF  50 00 05 40 00 00			db	 50h, 00h, 05h, 40h, 00h, 00h
2F94:68B5  10 10 10 00 40 04			db	 10h, 10h, 10h, 00h, 40h, 04h
2F94:68BB  40 00 15 01 00			db	 40h, 00h, 15h, 01h, 00h
2F94:68C0  01			spr_shamus_nohat	db	1			; shamus for lives display
										;  xref 2F94:4A61
2F94:68C1  55 55 40 01 41 41			db	 55h, 55h, 40h, 01h, 41h, 41h
2F94:68C7  40 01 55 55 40 00			db	 40h, 01h, 55h, 55h, 40h, 00h
2F94:68CD  01 40 00 17 55 55			db	 01h, 40h, 00h, 17h, 55h, 55h
2F94:68D3  D4 00 05 50 00 00			db	0D4h, 00h, 05h, 50h, 00h, 00h
2F94:68D9  04 10 00 00 54 15			db	 04h, 10h, 00h, 00h, 54h, 15h
2F94:68DF  00					db	 00h
2F94:68E0  0000 2000 0050	line_offsets_table	dw	0, 2000h, 50h		; interlaced CGA line address offsets
										;  xref 2F94:096B, 09B7, 1343, 1388
										;            13C8, 1417, 145C, 1496
										;            14D8, 150E, 153D, 2C92
										;            2E7B, 2F00, 2F77, 3047
										;            3107, 3151, 31AA, 3202
										;            3234, 328E, 32EC, 332A
										;            3341, 336E, 3385, 3F68
										;            3FA6, 3FF3, 4047, 4075
										;            40B6, 4102, 4156, 4198
										;            41C4, 4201, 422F, 45FB
										;            4B07, 4B36, 4B70, 4B9F
										;            4BCD, 4BFC, 5EA5, 6103
										;            6147, 619B, 61D2, 76A7
										;            7BF8
2F94:68E6  2050 00A0 20A0			dw	2050h, 0A0h, 20A0h
2F94:68EC  00F0 20F0 0140			dw	0F0h, 20F0h, 140h
2F94:68F2  2140 0190 2190			dw	2140h, 190h, 2190h
2F94:68F8  01E0 21E0 0230			dw	1E0h, 21E0h, 230h
2F94:68FE  2230 0280 2280			dw	2230h, 280h, 2280h
2F94:6904  02D0 22D0 0320			dw	2D0h, 22D0h, 320h
2F94:690A  2320 0370 2370			dw	2320h, 370h, 2370h
2F94:6910  03C0 23C0 0410			dw	3C0h, 23C0h, 410h
2F94:6916  2410 0460 2460			dw	2410h, 460h, 2460h
2F94:691C  04B0 24B0 0500			dw	4B0h, 24B0h, 500h
2F94:6922  2500 0550 2550			dw	2500h, 550h, 2550h
2F94:6928  05A0 25A0 05F0			dw	5A0h, 25A0h, 5F0h
2F94:692E  25F0 0640 2640			dw	25F0h, 640h, 2640h
2F94:6934  0690 2690 06E0			dw	690h, 2690h, 6E0h
2F94:693A  26E0 0730 2730			dw	26E0h, 730h, 2730h
2F94:6940  0780 2780 07D0			dw	780h, 2780h, 7D0h
2F94:6946  27D0 0820 2820			dw	27D0h, 820h, 2820h
2F94:694C  0870 2870 08C0			dw	870h, 2870h, 8C0h
2F94:6952  28C0 0910 2910			dw	28C0h, 910h, 2910h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 199

2F94:6958  0960 2960 09B0			dw	960h, 2960h, 9B0h
2F94:695E  29B0 0A00 2A00			dw	29B0h, 0A00h, 2A00h
2F94:6964  0A50 2A50 0AA0			dw	0A50h, 2A50h, 0AA0h
2F94:696A  2AA0 0AF0 2AF0			dw	2AA0h, 0AF0h, 2AF0h
2F94:6970  0B40 2B40 0B90			dw	0B40h, 2B40h, 0B90h
2F94:6976  2B90 0BE0 2BE0			dw	2B90h, 0BE0h, 2BE0h
2F94:697C  0C30 2C30 0C80			dw	0C30h, 2C30h, 0C80h
2F94:6982  2C80 0CD0 2CD0			dw	2C80h, 0CD0h, 2CD0h
2F94:6988  0D20 2D20 0D70			dw	0D20h, 2D20h, 0D70h
2F94:698E  2D70 0DC0 2DC0			dw	2D70h, 0DC0h, 2DC0h
2F94:6994  0E10 2E10 0E60			dw	0E10h, 2E10h, 0E60h
2F94:699A  2E60 0EB0 2EB0			dw	2E60h, 0EB0h, 2EB0h
2F94:69A0  0F00 2F00 0F50			dw	0F00h, 2F00h, 0F50h
2F94:69A6  2F50 0FA0 2FA0			dw	2F50h, 0FA0h, 2FA0h
2F94:69AC  0FF0 2FF0 1040			dw	0FF0h, 2FF0h, 1040h
2F94:69B2  3040 1090 3090			dw	3040h, 1090h, 3090h
2F94:69B8  10E0 30E0 1130			dw	10E0h, 30E0h, 1130h
2F94:69BE  3130 1180 3180			dw	3130h, 1180h, 3180h
2F94:69C4  11D0 31D0 1220			dw	11D0h, 31D0h, 1220h
2F94:69CA  3220 1270 3270			dw	3220h, 1270h, 3270h
2F94:69D0  12C0 32C0 1310			dw	12C0h, 32C0h, 1310h
2F94:69D6  3310 1360 3360			dw	3310h, 1360h, 3360h
2F94:69DC  13B0 33B0 1400			dw	13B0h, 33B0h, 1400h
2F94:69E2  3400 1450 3450			dw	3400h, 1450h, 3450h
2F94:69E8  14A0 34A0 14F0			dw	14A0h, 34A0h, 14F0h
2F94:69EE  34F0 1540 3540			dw	34F0h, 1540h, 3540h
2F94:69F4  1590 3590 15E0			dw	1590h, 3590h, 15E0h
2F94:69FA  35E0 1630 3630			dw	35E0h, 1630h, 3630h
2F94:6A00  1680 3680 16D0			dw	1680h, 3680h, 16D0h
2F94:6A06  36D0 1720 3720			dw	36D0h, 1720h, 3720h
2F94:6A0C  1770 3770 17C0			dw	1770h, 3770h, 17C0h
2F94:6A12  37C0 1810 3810			dw	37C0h, 1810h, 3810h
2F94:6A18  1860 3860 18B0			dw	1860h, 3860h, 18B0h
2F94:6A1E  38B0 1900 3900			dw	38B0h, 1900h, 3900h
2F94:6A24  1950 3950 19A0			dw	1950h, 3950h, 19A0h
2F94:6A2A  39A0 19F0 39F0			dw	39A0h, 19F0h, 39F0h
2F94:6A30  1A40 3A40 1A90			dw	1A40h, 3A40h, 1A90h
2F94:6A36  3A90 1AE0 3AE0			dw	3A90h, 1AE0h, 3AE0h
2F94:6A3C  1B30 3B30 1B80			dw	1B30h, 3B30h, 1B80h
2F94:6A42  3B80 1BD0 3BD0			dw	3B80h, 1BD0h, 3BD0h
2F94:6A48  1C20 3C20 1C70			dw	1C20h, 3C20h, 1C70h
2F94:6A4E  3C70 1CC0 3CC0			dw	3C70h, 1CC0h, 3CC0h
2F94:6A54  1D10 3D10 1D60			dw	1D10h, 3D10h, 1D60h
2F94:6A5A  3D60 1DB0 3DB0			dw	3D60h, 1DB0h, 3DB0h
2F94:6A60  1E00 3E00 1E50			dw	1E00h, 3E00h, 1E50h
2F94:6A66  3E50 1EA0 3EA0			dw	3E50h, 1EA0h, 3EA0h
2F94:6A6C  1EF0 3EF0				dw	1EF0h, 3EF0h
2F94:6A70  49			gamestate_b	db	49h			; Data table (indexed access)
										;  xref 2F94:0538, 4A4B, 7C5B
2F94:6A71  24 79 98 64 01 41			db	 24h, 79h, 98h, 64h, 01h, 41h
2F94:6A77  2C D0 29 24 AD 2C			db	 2Ch,0D0h, 29h, 24h,0ADh, 2Ch
2F94:6A7D  64 24 49 98 D0 03			db	 64h, 24h, 49h, 98h,0D0h, 03h
2F94:6A83  90 01 98 6C 64 01			db	 90h, 01h, 98h, 6Ch, 64h, 01h
2F94:6A89  90 59 90 D5 2C D0			db	 90h, 59h, 90h,0D5h, 2Ch,0D0h
2F94:6A8F  01 CD C1 98 64 90			db	 01h,0CDh,0C1h, 98h, 64h, 90h
2F94:6A95  31 D1 24 D9 90 98			db	 31h,0D1h, 24h,0D9h, 90h, 98h
2F94:6A9B  64 03 2C 64 51 98			db	 64h, 03h, 2Ch, 64h, 51h, 98h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 200

2F94:6AA1  64 90 79 24 03 09			db	 64h, 90h, 79h, 24h, 03h, 09h
2F94:6AA7  01 2C D0 19 90 24			db	 01h, 2Ch,0D0h, 19h, 90h, 24h
2F94:6AAD  49 01 B5 2C D0 98			db	 49h, 01h,0B5h, 2Ch,0D0h, 98h
2F94:6AB3  D0 55 01 85 24 2C			db	0D0h, 55h, 01h, 85h, 24h, 2Ch
2F94:6AB9  64 21 25 03 98 D0			db	 64h, 21h, 25h, 03h, 98h,0D0h
2F94:6ABF  03 01 01 2C D0 24			db	 03h, 01h, 01h, 2Ch,0D0h, 24h
2F94:6AC5  98 D0 98 64 90 01			db	 98h,0D0h, 98h, 64h, 90h, 01h
2F94:6ACB  24 01 01 90 24 03			db	 24h, 01h, 01h, 90h, 24h, 03h
2F94:6AD1  24 09 98 D0 01 24			db	 24h, 09h, 98h,0D0h, 01h, 24h
2F94:6AD7  98 64 01 2C D0 CD			db	 98h, 64h, 01h, 2Ch,0D0h,0CDh
2F94:6ADD  24 2C D0 01 98 64			db	 24h, 2Ch,0D0h, 01h, 98h, 64h
2F94:6AE3  01 2C D0 05 98 64			db	 01h, 2Ch,0D0h, 05h, 98h, 64h
2F94:6AE9  01 90 01 2C D0 CD			db	 01h, 90h, 01h, 2Ch,0D0h,0CDh
2F94:6AEF  01					db	 01h
2F94:6AF0  49			initstate_b	db	49h			;  xref 2F94:7C58
2F94:6AF1  24 79 98 64 01 41			db	 24h, 79h, 98h, 64h, 01h, 41h
2F94:6AF7  2C D0 29 24 AD 2C			db	 2Ch,0D0h, 29h, 24h,0ADh, 2Ch
2F94:6AFD  64 24 49 98 D0 03			db	 64h, 24h, 49h, 98h,0D0h, 03h
2F94:6B03  90 01 98 6C 64 01			db	 90h, 01h, 98h, 6Ch, 64h, 01h
2F94:6B09  90 59 90 D5 2C D0			db	 90h, 59h, 90h,0D5h, 2Ch,0D0h
2F94:6B0F  01 CD C1 98 64 90			db	 01h,0CDh,0C1h, 98h, 64h, 90h
2F94:6B15  31 D1 24 D9 90 98			db	 31h,0D1h, 24h,0D9h, 90h, 98h
2F94:6B1B  64 03 2C 64 51 98			db	 64h, 03h, 2Ch, 64h, 51h, 98h
2F94:6B21  64 90 79 24 03 09			db	 64h, 90h, 79h, 24h, 03h, 09h
2F94:6B27  01 2C D0 19 90 24			db	 01h, 2Ch,0D0h, 19h, 90h, 24h
2F94:6B2D  49 01 B5 2C D0 98			db	 49h, 01h,0B5h, 2Ch,0D0h, 98h
2F94:6B33  D0 55 01 85 24 2C			db	0D0h, 55h, 01h, 85h, 24h, 2Ch
2F94:6B39  64 21 25 03 98 D0			db	 64h, 21h, 25h, 03h, 98h,0D0h
2F94:6B3F  03 01 01 2C D0 24			db	 03h, 01h, 01h, 2Ch,0D0h, 24h
2F94:6B45  98 D0 98 64 90 01			db	 98h,0D0h, 98h, 64h, 90h, 01h
2F94:6B4B  24 01 01 90 24 03			db	 24h, 01h, 01h, 90h, 24h, 03h
2F94:6B51  24 09 98 D0 01 24			db	 24h, 09h, 98h,0D0h, 01h, 24h
2F94:6B57  98 64 01 2C D0 CD			db	 98h, 64h, 01h, 2Ch,0D0h,0CDh
2F94:6B5D  24 2C D0 01 98 64			db	 24h, 2Ch,0D0h, 01h, 98h, 64h
2F94:6B63  01 2C D0 05 98 64			db	 01h, 2Ch,0D0h, 05h, 98h, 64h
2F94:6B69  01 90 01 2C D0 CD			db	 01h, 90h, 01h, 2Ch,0D0h,0CDh
2F94:6B6F  01					db	 01h
2F94:6B70  52			gamestate_a	db	52h			; Data table (indexed access)
										;  xref 2F94:01C1, 01C9, 0544, 4A41
										;            7C4A, 7CCC, 7CD4
2F94:6B71  F4 03 98 64 B5 49			db	0F4h, 03h, 98h, 64h,0B5h, 49h
2F94:6B77  D0 2C 46 F4 02 D0			db	0D0h, 2Ch, 46h,0F4h, 02h,0D0h
2F94:6B7D  64 F4 33 98 2C 03			db	 64h,0F4h, 33h, 98h, 2Ch, 03h
2F94:6B83  BC 01 98 40 64 DA			db	0BCh, 01h, 98h, 40h, 64h,0DAh
2F94:6B89  BC 82 BC 01 D0 2C			db	0BCh, 82h,0BCh, 01h,0D0h, 2Ch
2F94:6B8F  CE 03 0A 98 64 BC			db	0CEh, 03h, 0Ah, 98h, 64h,0BCh
2F94:6B95  8B 09 F4 03 BC 98			db	 8Bh, 09h,0F4h, 03h,0BCh, 98h
2F94:6B9B  64 03 D0 64 13 98			db	 64h, 03h,0D0h, 64h, 13h, 98h
2F94:6BA1  64 BC 02 F4 01 4A			db	 64h,0BCh, 02h,0F4h, 01h, 4Ah
2F94:6BA7  03 D0 2C 0B BC F4			db	 03h,0D0h, 2Ch, 0Bh,0BCh,0F4h
2F94:6BAD  52 B6 01 D0 2C 98			db	 52h,0B6h, 01h,0D0h, 2Ch, 98h
2F94:6BB3  2C 02 01 4A F4 D0			db	 2Ch, 02h, 01h, 4Ah,0F4h,0D0h
2F94:6BB9  64 29 62 01 98 2C			db	 64h, 29h, 62h, 01h, 98h, 2Ch
2F94:6BBF  03 B6 02 D0 2C F4			db	 03h,0B6h, 02h,0D0h, 2Ch,0F4h
2F94:6BC5  98 2C 98 64 BC 02			db	 98h, 2Ch, 98h, 64h,0BCh, 02h
2F94:6BCB  F4 03 02 BC F4 01			db	0F4h, 03h, 02h,0BCh,0F4h, 01h
2F94:6BD1  F4 C3 98 2C 02 F4			db	0F4h,0C3h, 98h, 2Ch, 02h,0F4h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 201

2F94:6BD7  98 64 B7 D0 2C 03			db	 98h, 64h,0B7h,0D0h, 2Ch, 03h
2F94:6BDD  F4 D0 2C 37 98 64			db	0F4h,0D0h, 2Ch, 37h, 98h, 64h
2F94:6BE3  02 D0 2C D3 98 64			db	 02h,0D0h, 2Ch,0D3h, 98h, 64h
2F94:6BE9  56 BC B7 D0 2C 02			db	 56h,0BCh,0B7h,0D0h, 2Ch, 02h
2F94:6BEF  00					db	 00h
2F94:6BF0  52			initstate_a	db	52h			;  xref 2F94:7C47
2F94:6BF1  F4 03 98 64 B5 49			db	0F4h, 03h, 98h, 64h,0B5h, 49h
2F94:6BF7  D0 2C 46 F4 02 D0			db	0D0h, 2Ch, 46h,0F4h, 02h,0D0h
2F94:6BFD  64 F4 33 98 2C 03			db	 64h,0F4h, 33h, 98h, 2Ch, 03h
2F94:6C03  BC 01 98 40 64 DA			db	0BCh, 01h, 98h, 40h, 64h,0DAh
2F94:6C09  BC 82 BC 01 D0 2C			db	0BCh, 82h,0BCh, 01h,0D0h, 2Ch
2F94:6C0F  CE 03 0A 98 64 BC			db	0CEh, 03h, 0Ah, 98h, 64h,0BCh
2F94:6C15  8B 09 F4 03 BC 98			db	 8Bh, 09h,0F4h, 03h,0BCh, 98h
2F94:6C1B  64 03 D0 64 13 98			db	 64h, 03h,0D0h, 64h, 13h, 98h
2F94:6C21  64 BC 02 F4 01 4A			db	 64h,0BCh, 02h,0F4h, 01h, 4Ah
2F94:6C27  03 D0 2C 0B BC F4			db	 03h,0D0h, 2Ch, 0Bh,0BCh,0F4h
2F94:6C2D  52 B6 01 D0 2C 98			db	 52h,0B6h, 01h,0D0h, 2Ch, 98h
2F94:6C33  2C 02 01 4A F4 D0			db	 2Ch, 02h, 01h, 4Ah,0F4h,0D0h
2F94:6C39  64 29 62 01 98 2C			db	 64h, 29h, 62h, 01h, 98h, 2Ch
2F94:6C3F  03 B6 02 D0 2C F4			db	 03h,0B6h, 02h,0D0h, 2Ch,0F4h
2F94:6C45  98 2C 98 64 BC 02			db	 98h, 2Ch, 98h, 64h,0BCh, 02h
2F94:6C4B  F4 03 02 BC F4 01			db	0F4h, 03h, 02h,0BCh,0F4h, 01h
2F94:6C51  F4 C3 98 2C 02 F4			db	0F4h,0C3h, 98h, 2Ch, 02h,0F4h
2F94:6C57  98 64 B7 D0 2C 03			db	 98h, 64h,0B7h,0D0h, 2Ch, 03h
2F94:6C5D  F4 D0 2C 37 98 64			db	0F4h,0D0h, 2Ch, 37h, 98h, 64h
2F94:6C63  02 D0 2C D3 98 64			db	 02h,0D0h, 2Ch,0D3h, 98h, 64h
2F94:6C69  56 BC B7 D0 2C 02			db	 56h,0BCh,0B7h,0D0h, 2Ch, 02h
2F94:6C6F  00					db	 00h
2F94:6C70  00			room_link_table	db	0			; next room number when going north/so
										; uth
										;  xref 2F94:37A6, 37F4
2F94:6C71  08 00 04 03 00 00			db	 08h, 00h, 04h, 03h, 00h, 00h
2F94:6C77  24 01 00 10 00 19			db	 24h, 01h, 00h, 10h, 00h, 19h
2F94:6C7D  13 15 00 0A 16 00			db	 13h, 15h, 00h, 0Ah, 16h, 00h
2F94:6C83  0D 00 0E 11 1E 00			db	 0Dh, 00h, 0Eh, 11h, 1Eh, 00h
2F94:6C89  0C 00 23 00 22 17			db	 0Ch, 00h, 23h, 00h, 22h, 17h
2F94:6C8F  00 00 00 1D 1B 07			db	 00h, 00h, 00h, 1Dh, 1Bh, 07h
2F94:6C95  00 00 30 00 2B 2D			db	 00h, 00h, 30h, 00h, 2Bh, 2Dh
2F94:6C9B  29 00 2A 32 00 27			db	 29h, 00h, 2Ah, 32h, 00h, 27h
2F94:6CA1  39 2E 00 3B 00 00			db	 39h, 2Eh, 00h, 3Bh, 00h, 00h
2F94:6CA7  00 43 31 00 34 41			db	 00h, 43h, 31h, 00h, 34h, 41h
2F94:6CAD  00 00 00 42 3C 40			db	 00h, 00h, 00h, 42h, 3Ch, 40h
2F94:6CB3  38 00 00 00 4D 55			db	 38h, 00h, 00h, 00h, 4Dh, 55h
2F94:6CB9  53 00 00 00 47 54			db	 53h, 00h, 00h, 00h, 47h, 54h
2F94:6CBF  00 00 00				db	 00h, 00h, 00h
2F94:6CC2  59 49 4E 48 58 5B			db	'YINHX[VR'
2F94:6CC8  56 52
2F94:6CCA  00 57 00 00 74 7A			db	 00h, 57h, 00h, 00h, 74h, 7Ah
2F94:6CD0  00 6B 00 66 68 00			db	 00h, 6Bh, 00h, 66h, 68h, 00h
2F94:6CD6  63 6A 64 00 67 61			db	 63h, 6Ah, 64h, 00h, 67h, 61h
2F94:6CDC  00 6F 71 6D 00 6E			db	 00h, 6Fh, 71h, 6Dh, 00h, 6Eh
2F94:6CE2  75 00 5E 72 00 78			db	 75h, 00h, 5Eh, 72h, 00h, 78h
2F94:6CE8  77 00 5F 00 7D 7C			db	 77h, 00h, 5Fh, 00h, 7Dh, 7Ch
2F94:6CEE  00 00				db	 00h, 00h
2F94:6CF0  30			data_292	db	30h			; Data table (indexed access)
										;  xref 2F94:076A
2F94:6CF1  20 10 30 20 10			db	 20h, 10h, 30h, 20h, 10h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 202

2F94:6CF6  70			data_293	db	70h			; Data table (indexed access)
										;  xref 2F94:076E
2F94:6CF7  70 70 38 38 38			db	 70h, 70h, 38h, 38h, 38h
2F94:6CFC  2E			data_294	db	2Eh			; Data table (indexed access)
										;  xref 2F94:0788
2F94:6CFD  2E 2E 20 20 20			db	 2Eh, 2Eh, 20h, 20h, 20h
2F94:6D02  70			data_295	db	70h			; Data table (indexed access)
										;  xref 2F94:078C
2F94:6D03  38 00 70 38				db	 38h, 00h, 70h, 38h
2F94:6D07  00					db	0
2F94:6D08  00			clear_bitmap	db	0			;  xref 2F94:0AFE, 4D7F, 4D8A, 63AD
2F94:6D09  003F[00]				db	63 dup (0)
2F94:6D48  CC			pat3x8_M	db	0CCh			;  xref 2F94:0831
2F94:6D49  00 CC CC 00 CC CC			db	 00h,0CCh,0CCh, 00h,0CCh,0CCh
2F94:6D4F  00 CC C0 CC 0C C0			db	 00h,0CCh,0C0h,0CCh, 0Ch,0C0h
2F94:6D55  CC 0C C0 00 0C C0			db	0CCh, 0Ch,0C0h, 00h, 0Ch,0C0h
2F94:6D5B  00 0C C0 00				db	 00h, 0Ch,0C0h, 00h
2F94:6D5F  0C					db	0Ch
2F94:6D60  0C			pat3x8_O	db	0Ch			;  xref 2F94:0822
2F94:6D61  CC C0 CC 00 CC C0			db	0CCh,0C0h,0CCh, 00h,0CCh,0C0h
2F94:6D67  00 0C C0 00 0C C0			db	 00h, 0Ch,0C0h, 00h, 0Ch,0C0h
2F94:6D6D  00 0C C0 00 0C CC			db	 00h, 0Ch,0C0h, 00h, 0Ch,0CCh
2F94:6D73  00 CC 0C CC C0			db	 00h,0CCh, 0Ch,0CCh,0C0h
2F94:6D78  CC			pat3x8_R	db	0CCh			;  xref 2F94:0816
2F94:6D79  CC CC C0 00 0C C0			db	0CCh,0CCh,0C0h, 00h, 0Ch,0C0h
2F94:6D7F  00 0C C0 00 0C CC			db	 00h, 0Ch,0C0h, 00h, 0Ch,0CCh
2F94:6D85  CC C0 C0 00 CC C0			db	0CCh,0C0h,0C0h, 00h,0CCh,0C0h
2F94:6D8B  00 0C C0 00				db	 00h, 0Ch,0C0h, 00h
2F94:6D8F  0C					db	0Ch
2F94:6D90  80			pat3x8_L	db	80h			;  xref 2F94:0842, 0862
2F94:6D91  00 00 80 00 00 80			db	 00h, 00h, 80h, 00h, 00h, 80h
2F94:6D97  00 00 80 00 00 80			db	 00h, 00h, 80h, 00h, 00h, 80h
2F94:6D9D  00 00 80 00 00 80			db	 00h, 00h, 80h, 00h, 00h, 80h
2F94:6DA3  00 00 88 88 88			db	 00h, 00h, 88h, 88h, 88h
2F94:6DA8  88			pat3x8_E	db	88h			;  xref 2F94:084A, 085A
2F94:6DA9  88 88 80 00 00 80			db	 88h, 88h, 80h, 00h, 00h, 80h
2F94:6DAF  00 00 88 88 80 80			db	 00h, 00h, 88h, 88h, 80h, 80h
2F94:6DB5  00 00 80 00 00 80			db	 00h, 00h, 80h, 00h, 00h, 80h
2F94:6DBB  00 00 88 88 88			db	 00h, 00h, 88h, 88h, 88h
2F94:6DC0  80			pat3x8_V	db	80h			;  xref 2F94:0852
2F94:6DC1  00 08 80 00 08 80			db	 00h, 08h, 80h, 00h, 08h, 80h
2F94:6DC7  00 08 80 00 08 80			db	 00h, 08h, 80h, 00h, 08h, 80h
2F94:6DCD  00 08 88 00 88 08			db	 00h, 08h, 88h, 00h, 88h, 08h
2F94:6DD3  88 80 00 88 00			db	 88h, 80h, 00h, 88h, 00h
2F94:6DD8  00			pat3x8_A	db	0			;  xref 2F94:0892
2F94:6DD9  28 00 00 AA 00 02			db	 28h, 00h, 00h,0AAh, 00h, 02h
2F94:6DDF  82					db	 82h
2F94:6DE0  80			pat3x8_N	db	80h
2F94:6DE1  0A 00 A0 28 00 28			db	 0Ah, 00h,0A0h, 28h, 00h, 28h
2F94:6DE7  AA AA AA A8 00 2A			db	0AAh,0AAh,0AAh,0A8h, 00h, 2Ah
2F94:6DED  A8 00 2A 54 00 05			db	0A8h, 00h, 2Ah, 54h, 00h, 05h
2F94:6DF3  55 00 05 51 40 05			db	 55h, 00h, 05h, 51h, 40h, 05h
2F94:6DF9  50 54 05 50 05 05			db	 50h, 54h, 05h, 50h, 05h, 05h
2F94:6DFF  50 01 45 50 00 55			db	 50h, 01h, 45h, 50h, 00h, 55h
2F94:6E05  50 00 15				db	 50h, 00h, 15h
2F94:6E08  00			pat4x4_Colon	db	0			;  xref 2F94:083A, 086A
2F94:6E09  00 00 00 CC 00 00			db	 00h, 00h, 00h,0CCh, 00h, 00h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 203

2F94:6E0F  CC					db	0CCh
2F94:6E10  0008[00]				db	8 dup (0)
2F94:6E18  CC 00 00 CC 00 00			db	0CCh, 00h, 00h,0CCh, 00h, 00h
2F94:6E1E  00 00				db	 00h, 00h
2F94:6E20  03			pat3x8_0	db	3
2F94:6E21  FF C0 3F 00 FC F0			db	0FFh,0C0h, 3Fh, 00h,0FCh,0F0h
2F94:6E27  03 0F F0 0C 0F F0			db	 03h, 0Fh,0F0h, 0Ch, 0Fh,0F0h
2F94:6E2D  30 0F F0 C0 0F 3F			db	 30h, 0Fh,0F0h,0C0h, 0Fh, 3Fh
2F94:6E33  00 FC 03 FF C0			db	 00h,0FCh, 03h,0FFh,0C0h
2F94:6E38  00			pat3x8_1	db	0
2F94:6E39  FC 00 03 FC 00 0F			db	0FCh, 00h, 03h,0FCh, 00h, 0Fh
2F94:6E3F  3C 00 00 3C 00 00			db	 3Ch, 00h, 00h, 3Ch, 00h, 00h
2F94:6E45  3C 00 00 3C 00 00			db	 3Ch, 00h, 00h, 3Ch, 00h, 00h
2F94:6E4B  3C 00 0F FF F0			db	 3Ch, 00h, 0Fh,0FFh,0F0h
2F94:6E50  0F			pat3x8_2	db	0Fh
2F94:6E51  FF F0 3C 00 3C 00			db	0FFh,0F0h, 3Ch, 00h, 3Ch, 00h
2F94:6E57  00 3C 00 3F F0 03			db	 00h, 3Ch, 00h, 3Fh,0F0h, 03h
2F94:6E5D  FC 00 3C 00 00 FC			db	0FCh, 00h, 3Ch, 00h, 00h,0FCh
2F94:6E63  00 00 3F FF FF			db	 00h, 00h, 3Fh,0FFh,0FFh
2F94:6E68  0F			pat3x8_3	db	0Fh
2F94:6E69  FF FC 3C 00 3F 00			db	0FFh,0FCh, 3Ch, 00h, 3Fh, 00h
2F94:6E6F  00 3C 00 3F FC 00			db	 00h, 3Ch, 00h, 3Fh,0FCh, 00h
2F94:6E75  00 3F F0 00 0F 3C			db	 00h, 3Fh,0F0h, 00h, 0Fh, 3Ch
2F94:6E7B  00 3C 0F FF F0			db	 00h, 3Ch, 0Fh,0FFh,0F0h
2F94:6E80  00			pat3x8_4	db	0
2F94:6E81  0F F0 00 FF F0 03			db	 0Fh,0F0h, 00h,0FFh,0F0h, 03h
2F94:6E87  C3 F0 3F 03 F0 FC			db	0C3h,0F0h, 3Fh, 03h,0F0h,0FCh
2F94:6E8D  03 F0 FF FF FF 00			db	 03h,0F0h,0FFh,0FFh,0FFh, 00h
2F94:6E93  03 F0 00 03 F0			db	 03h,0F0h, 00h, 03h,0F0h
2F94:6E98  FF			pat3x8_5	db	0FFh
2F94:6E99  FF F0 F0 00 00 F0			db	0FFh,0F0h,0F0h, 00h, 00h,0F0h
2F94:6E9F  00 00 FF FF F0 00			db	 00h, 00h,0FFh,0FFh,0F0h, 00h
2F94:6EA5  00 3C 00 00 0F FC			db	 00h, 3Ch, 00h, 00h, 0Fh,0FCh
2F94:6EAB  00 3C 0F FF F0			db	 00h, 3Ch, 0Fh,0FFh,0F0h
2F94:6EB0  0F			pat3x8_6	db	0Fh
2F94:6EB1  FF F0 3C 00 00 F0			db	0FFh,0F0h, 3Ch, 00h, 00h,0F0h
2F94:6EB7  00 00 FF FF FC F0			db	 00h, 00h,0FFh,0FFh,0FCh,0F0h
2F94:6EBD  00 3F F0 00 0F 3C			db	 00h, 3Fh,0F0h, 00h, 0Fh, 3Ch
2F94:6EC3  00 3C 0F FF F0			db	 00h, 3Ch, 0Fh,0FFh,0F0h
2F94:6EC8  FF			pat3x8_7	db	0FFh
2F94:6EC9  FF FF 00 00 FC 00			db	0FFh,0FFh, 00h, 00h,0FCh, 00h
2F94:6ECF  03 C0 00 0F 00 00			db	 03h,0C0h, 00h, 0Fh, 00h, 00h
2F94:6ED5  3C 00 00 F0 00 00			db	 3Ch, 00h, 00h,0F0h, 00h, 00h
2F94:6EDB  F0 00 00 F0 00			db	0F0h, 00h, 00h,0F0h, 00h
2F94:6EE0  0F			pat3x8_8	db	0Fh
2F94:6EE1  FF F0 3C 00 3C 3C			db	0FFh,0F0h, 3Ch, 00h, 3Ch, 3Ch
2F94:6EE7  00 3C 0F FF F0 3C			db	 00h, 3Ch, 0Fh,0FFh,0F0h, 3Ch
2F94:6EED  00 3C F0 00 0F F0			db	 00h, 3Ch,0F0h, 00h, 0Fh,0F0h
2F94:6EF3  00 0F 3F FF FC			db	 00h, 0Fh, 3Fh,0FFh,0FCh
2F94:6EF8  0F			pat3x8_9	db	0Fh
2F94:6EF9  FF F0 3C 00 3C F0			db	0FFh,0F0h, 3Ch, 00h, 3Ch,0F0h
2F94:6EFF  00 0F F0 00 0F 3F			db	 00h, 0Fh,0F0h, 00h, 0Fh, 3Fh
2F94:6F05  FF FF 00 00 3C 00			db	0FFh,0FFh, 00h, 00h, 3Ch, 00h
2F94:6F0B  00 F0 0F FF C0			db	 00h,0F0h, 0Fh,0FFh,0C0h
2F94:6F10  80			spr_spiraldrone2_4b	db	80h			;  xref 2F94:23E6, 2B37
2F94:6F11  08 88 00 80 00 80			db	 08h, 88h, 00h, 80h, 00h, 80h
2F94:6F17  00 88 CC C0 00 80			db	 00h, 88h,0CCh,0C0h, 00h, 80h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 204

2F94:6F1D  FF C0 80 80 FF C0			db	0FFh,0C0h, 80h, 80h,0FFh,0C0h
2F94:6F23  80 00 CC C8 80 00			db	 80h, 00h,0CCh,0C8h, 80h, 00h
2F94:6F29  80 00 80 08 88 00			db	 80h, 00h, 80h, 08h, 88h, 00h
2F94:6F2F  80 00 88 80 00 00			db	 80h, 00h, 88h, 80h, 00h, 00h
2F94:6F35  08 00 00 80 CC C0			db	 08h, 00h, 00h, 80h,0CCh,0C0h
2F94:6F3B  80 88 FF C8 80 88			db	 80h, 88h,0FFh,0C8h, 80h, 88h
2F94:6F41  FF C8 80 80 CC C0			db	0FFh,0C8h, 80h, 80h,0CCh,0C0h
2F94:6F47  80 00 08 00 00 00			db	 80h, 00h, 08h, 00h, 00h, 00h
2F94:6F4D  88 80 00 08 88 00			db	 88h, 80h, 00h, 08h, 88h, 00h
2F94:6F53  80 00 80 00 80 00			db	 80h, 00h, 80h, 00h, 80h, 00h
2F94:6F59  CC C8 80 80 FF C0			db	0CCh,0C8h, 80h, 80h,0FFh,0C0h
2F94:6F5F  80 80 FF C0 80 88			db	 80h, 80h,0FFh,0C0h, 80h, 88h
2F94:6F65  CC C0 00 80 00 80			db	0CCh,0C0h, 00h, 80h, 00h, 80h
2F94:6F6B  00 80 08 88 00 08			db	 00h, 80h, 08h, 88h, 00h, 08h
2F94:6F71  00 88 80 08 00 08			db	 00h, 88h, 80h, 08h, 00h, 08h
2F94:6F77  00 08 8C CC 00 08			db	 00h, 08h, 8Ch,0CCh, 00h, 08h
2F94:6F7D  0F FC 08 08 0F FC			db	 0Fh,0FCh, 08h, 08h, 0Fh,0FCh
2F94:6F83  08 00 0C CC 88 00			db	 08h, 00h, 0Ch,0CCh, 88h, 00h
2F94:6F89  08 00 08 00 88 80			db	 08h, 00h, 08h, 00h, 88h, 80h
2F94:6F8F  08 00 08 88 00 00			db	 08h, 00h, 08h, 88h, 00h, 00h
2F94:6F95  00 80 00 08 0C CC			db	 00h, 80h, 00h, 08h, 0Ch,0CCh
2F94:6F9B  08 08 8F FC 88 08			db	 08h, 08h, 8Fh,0FCh, 88h, 08h
2F94:6FA1  8F FC 88 08 0C CC			db	 8Fh,0FCh, 88h, 08h, 0Ch,0CCh
2F94:6FA7  08 00 00 80 00 00			db	 08h, 00h, 00h, 80h, 00h, 00h
2F94:6FAD  08 88 00 00 88 80			db	 08h, 88h, 00h, 00h, 88h, 80h
2F94:6FB3  08 00 08 00 08 00			db	 08h, 00h, 08h, 00h, 08h, 00h
2F94:6FB9  0C CC 88 08 0F FC			db	 0Ch,0CCh, 88h, 08h, 0Fh,0FCh
2F94:6FBF  08 08 0F FC 08 08			db	 08h, 08h, 0Fh,0FCh, 08h, 08h
2F94:6FC5  8C CC 00 08 00 08			db	 8Ch,0CCh, 00h, 08h, 00h, 08h
2F94:6FCB  00 08 00 88 80			db	 00h, 08h, 00h, 88h, 80h
2F94:6FD0  03			spr_spiraldrone3_4b_6frm	db	3			;  xref 2F94:2B6B, 2D92
2F94:6FD1  33 00 30 00 30 00			db	 33h, 00h, 30h, 00h, 30h, 00h
2F94:6FD7  30 00 33 33 30 30			db	 30h, 00h, 33h, 33h, 30h, 30h
2F94:6FDD  3F F0 30 30 3F F0			db	 3Fh,0F0h, 30h, 30h, 3Fh,0F0h
2F94:6FE3  30 33 33 30 00 30			db	 30h, 33h, 33h, 30h, 00h, 30h
2F94:6FE9  00 30 00 30 03 33			db	 00h, 30h, 00h, 30h, 03h, 33h
2F94:6FEF  00 00 33 30 00 00			db	 00h, 00h, 33h, 30h, 00h, 00h
2F94:6FF5  03 00 00 30 33 30			db	 03h, 00h, 00h, 30h, 33h, 30h
2F94:6FFB  30 33 3F F3 30 33			db	 30h, 33h, 3Fh,0F3h, 30h, 33h
2F94:7001  3F F3 30 30 33 30			db	 3Fh,0F3h, 30h, 30h, 33h, 30h
2F94:7007  30 00 03 00 00 00			db	 30h, 00h, 03h, 00h, 00h, 00h
2F94:700D  33 30 00 30 03 33			db	 33h, 30h, 00h, 30h, 03h, 33h
2F94:7013  00 30 00 30 00 33			db	 00h, 30h, 00h, 30h, 00h, 33h
2F94:7019  33 30 00 30 3F F0			db	 33h, 30h, 00h, 30h, 3Fh,0F0h
2F94:701F  30 30 3F F0 30 00			db	 30h, 30h, 3Fh,0F0h, 30h, 00h
2F94:7025  33 33 30 00 30 00			db	 33h, 33h, 30h, 00h, 30h, 00h
2F94:702B  30 03 33 00 30 00			db	 30h, 03h, 33h, 00h, 30h, 00h
2F94:7031  33 30 03 00 03 00			db	 33h, 30h, 03h, 00h, 03h, 00h
2F94:7037  03 00 03 33 33 03			db	 03h, 00h, 03h, 33h, 33h, 03h
2F94:703D  03 FF 03 03 03 FF			db	 03h,0FFh, 03h, 03h, 03h,0FFh
2F94:7043  03 03 33 33 00 03			db	 03h, 03h, 33h, 33h, 00h, 03h
2F94:7049  00 03 00 03 00 33			db	 00h, 03h, 00h, 03h, 00h, 33h
2F94:704F  30 00 03 33 00 00			db	 30h, 00h, 03h, 33h, 00h, 00h
2F94:7055  00 30 00 03 03 33			db	 00h, 30h, 00h, 03h, 03h, 33h
2F94:705B  03 03 33 FF 33 03			db	 03h, 03h, 33h,0FFh, 33h, 03h
2F94:7061  33 FF 33 03 03 33			db	 33h,0FFh, 33h, 03h, 03h, 33h
2F94:7067  03 00 00 30 00 00			db	 03h, 00h, 00h, 30h, 00h, 00h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 205

2F94:706D  03 33 00 03 00 33			db	 03h, 33h, 00h, 03h, 00h, 33h
2F94:7073  30 03 00 03 00 03			db	 30h, 03h, 00h, 03h, 00h, 03h
2F94:7079  33 33 00 03 03 FF			db	 33h, 33h, 00h, 03h, 03h,0FFh
2F94:707F  03 03 03 FF 03 00			db	 03h, 03h, 03h,0FFh, 03h, 00h
2F94:7085  03 33 33 00 03 00			db	 03h, 33h, 33h, 00h, 03h, 00h
2F94:708B  03 00 33 30 03			db	 03h, 00h, 33h, 30h, 03h
2F94:7090  00			spr_robodroid_4b	db	0			;  xref 2F94:23CE, 2BAC, 2E0F, 300A
										;            30C3
2F94:7091  FF 00 00 00 FF 00			db	0FFh, 00h, 00h, 00h,0FFh, 00h
2F94:7097  00 FF FF FF 00 C0			db	 00h,0FFh,0FFh,0FFh, 00h,0C0h
2F94:709D  AA 03 00 C0 28 03			db	0AAh, 03h, 00h,0C0h, 28h, 03h
2F94:70A3  00 03 C0 3C 00 00			db	 00h, 03h,0C0h, 3Ch, 00h, 00h
2F94:70A9  00 00 00 3C 03 C0			db	 00h, 00h, 00h, 3Ch, 03h,0C0h
2F94:70AF  00 00 FF 00 00 00			db	 00h, 00h,0FFh, 00h, 00h, 00h
2F94:70B5  FF 00 00 FF FF FF			db	0FFh, 00h, 00h,0FFh,0FFh,0FFh
2F94:70BB  00 C0 AA 03 00 C0			db	 00h,0C0h,0AAh, 03h, 00h,0C0h
2F94:70C1  28 03 00 00 3C 00			db	 28h, 03h, 00h, 00h, 3Ch, 00h
2F94:70C7  00 F0 00 0F 00 00			db	 00h,0F0h, 00h, 0Fh, 00h, 00h
2F94:70CD  3C 00 00 00 FF 00			db	 3Ch, 00h, 00h, 00h,0FFh, 00h
2F94:70D3  00 00 FF 00 00 FF			db	 00h, 00h,0FFh, 00h, 00h,0FFh
2F94:70D9  FF FF 00 C0 AA 03			db	0FFh,0FFh, 00h,0C0h,0AAh, 03h
2F94:70DF  00 C0 28 03 00 3C			db	 00h,0C0h, 28h, 03h, 00h, 3Ch
2F94:70E5  03 C0 00 00 00 00			db	 03h,0C0h, 00h, 00h, 00h, 00h
2F94:70EB  00 03 C0 3C 00 00			db	 00h, 03h,0C0h, 3Ch, 00h, 00h
2F94:70F1  0F F0 00 00 0F F0			db	 0Fh,0F0h, 00h, 00h, 0Fh,0F0h
2F94:70F7  00 0F FF FF F0 0C			db	 00h, 0Fh,0FFh,0FFh,0F0h, 0Ch
2F94:70FD  0A A0 30 0C 02 80			db	 0Ah,0A0h, 30h, 0Ch, 02h, 80h
2F94:7103  30 00 3C 03 C0 00			db	 30h, 00h, 3Ch, 03h,0C0h, 00h
2F94:7109  00 00 00 03 C0 3C			db	 00h, 00h, 00h, 03h,0C0h, 3Ch
2F94:710F  00 00 0F F0 00 00			db	 00h, 00h, 0Fh,0F0h, 00h, 00h
2F94:7115  0F F0 00 0F FF FF			db	 0Fh,0F0h, 00h, 0Fh,0FFh,0FFh
2F94:711B  F0 0C 0A A0 30 0C			db	0F0h, 0Ch, 0Ah,0A0h, 30h, 0Ch
2F94:7121  02 80 30 00 03 C0			db	 02h, 80h, 30h, 00h, 03h,0C0h
2F94:7127  00 0F 00 00 F0 00			db	 00h, 0Fh, 00h, 00h,0F0h, 00h
2F94:712D  03 C0 00 00 0F F0			db	 03h,0C0h, 00h, 00h, 0Fh,0F0h
2F94:7133  00 00 0F F0 00 0F			db	 00h, 00h, 0Fh,0F0h, 00h, 0Fh
2F94:7139  FF FF F0 0C 0A A0			db	0FFh,0FFh,0F0h, 0Ch, 0Ah,0A0h
2F94:713F  30 0C 02 80 30 03			db	 30h, 0Ch, 02h, 80h, 30h, 03h
2F94:7145  C0 3C 00 00 00 00			db	0C0h, 3Ch, 00h, 00h, 00h, 00h
2F94:714B  00 00 3C 03 C0 00			db	 00h, 00h, 3Ch, 03h,0C0h, 00h
2F94:7151  F0 00 00 F0 00 00			db	0F0h, 00h, 00h,0F0h, 00h, 00h
2F94:7157  0F 00 00 0F 00 00			db	 0Fh, 00h, 00h, 0Fh, 00h, 00h
2F94:715D  00 F0 00 00 F0 C0			db	 00h,0F0h, 00h, 00h,0F0h,0C0h
2F94:7163  C0 00 C0 C0 03 03			db	0C0h, 00h,0C0h,0C0h, 03h, 03h
2F94:7169  00 03 03 0C 0C 00			db	 00h, 03h, 03h, 0Ch, 0Ch, 00h
2F94:716F  0C 0C 30 30 00			db	 0Ch, 0Ch, 30h, 30h, 00h
2F94:7174  30 30				db	 30h, 30h
2F94:7176  D2			data_298	db	0D2h			;  xref 2F94:2FF7
2F94:7177  D7 C0 C6 D2 D7 C0			db	0D7h,0C0h,0C6h,0D2h,0D7h,0C0h
2F94:717D  C6 D2 D7 C0 C6 DC			db	0C6h,0D2h,0D7h,0C0h,0C6h,0DCh
2F94:7183  E1 C6 CC DC E1 C6			db	0E1h,0C6h,0CCh,0DCh,0E1h,0C6h
2F94:7189  CC DC E1 C6 CC			db	0CCh,0DCh,0E1h,0C6h,0CCh
2F94:718E  FF			spr_snapjumper_3b	db	0FFh			;  xref 2F94:23F2, 2BD9, 2D7D, 3F0B
2F94:718F  FF FF D5 55 57 D5			db	0FFh,0FFh,0D5h, 55h, 57h,0D5h
2F94:7195  55 57 D5 55 57 FF			db	 55h, 57h,0D5h, 55h, 57h,0FFh
2F94:719B  FF FF 0C 00 30 0C			db	0FFh,0FFh, 0Ch, 00h, 30h, 0Ch
2F94:71A1  00 30 AA 82 AA			db	 00h, 30h,0AAh, 82h,0AAh
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 206

2F94:71A6  14			spr_snapjumper_eyes_3b	db	14h			;  xref 2F94:2409, 3EB0, 3F43
2F94:71A7  14 00 14 14 00 00			db	 14h, 00h, 14h, 14h, 00h, 00h
2F94:71AD  00 00 01 41 40 01			db	 00h, 00h, 01h, 41h, 40h, 01h
2F94:71B3  41 40 00 00 00 00			db	 41h, 40h, 00h, 00h, 00h, 00h
2F94:71B9  14 14 00 14 14 00			db	 14h, 14h, 00h, 14h, 14h, 00h
2F94:71BF  00 00 00 00 00 14			db	 00h, 00h, 00h, 00h, 00h, 14h
2F94:71C5  14 00 14 14 00 00			db	 14h, 00h, 14h, 14h, 00h, 00h
2F94:71CB  00 00 01 41 40 01			db	 00h, 00h, 01h, 41h, 40h, 01h
2F94:71D1  41 40 00 00 00 00			db	 41h, 40h, 00h, 00h, 00h, 00h
2F94:71D7  14 14 00 14 14			db	 14h, 14h, 00h, 14h, 14h
2F94:71DC  0009[00]				db	9 dup (0)
2F94:71E5  36			snapjumper_eye_table	db	36h			; Data table (indexed access)
										;  xref 2F94:3EAC, 3F3F
2F94:71E6  09 12 1B 24 2D 36			db	 09h, 12h, 1Bh, 24h, 2Dh, 36h
2F94:71EC  00					db	 00h
2F94:71ED  09 09 24 24				db	9, 9, '$$'
2F94:71F1  36 36 1B 2D				db	'66', 1Bh, '-'
2F94:71F5  2A			spr_shadow2_3b	db	2Ah			;  xref 2F94:23DA, 5602, 5629, 570A
										;            57A9, 581D
2F94:71F6  AA AA 28 08 0A 28			db	0AAh,0AAh, 28h, 08h, 0Ah, 28h
2F94:71FC  08 0A 2A AA AA 00			db	 08h, 0Ah, 2Ah,0AAh,0AAh, 00h
2F94:7202  AA 80 00 80 80 00			db	0AAh, 80h, 00h, 80h, 80h, 00h
2F94:7208  80 80 00 80 80 00			db	 80h, 80h, 00h, 80h, 80h, 00h
2F94:720E  80 80 00 80 80 00			db	 80h, 80h, 00h, 80h, 80h, 00h
2F94:7214  80 80 02 80 A0 00			db	 80h, 80h, 02h, 80h,0A0h, 00h
2F94:721A  00 00 2A AA AA 2A			db	 00h, 00h, 2Ah,0AAh,0AAh, 2Ah
2F94:7220  AA AA 20 08 02 2A			db	0AAh,0AAh, 20h, 08h, 02h, 2Ah
2F94:7226  AA AA 00 2A 00 00			db	0AAh,0AAh, 00h, 2Ah, 00h, 00h
2F94:722C  A2 80 02 80 A0 0A			db	0A2h, 80h, 02h, 80h,0A0h, 0Ah
2F94:7232  00 28 28 00 0A 00			db	 00h, 28h, 28h, 00h, 0Ah, 00h
2F94:7238  00 00 00 00 00			db	 00h, 00h, 00h, 00h, 00h
2F94:723D  3F			spr_shadow3_3b	db	3Fh			;  xref 2F94:55B1, 561B, 5792, 582E
										;            596B, 59A8, 5A09, 5A1E
										;            5AD0
2F94:723E  FF FF 3C 0C 0F 3C			db	0FFh,0FFh, 3Ch, 0Ch, 0Fh, 3Ch
2F94:7244  0C 0F 3F FF FF 00			db	 0Ch, 0Fh, 3Fh,0FFh,0FFh, 00h
2F94:724A  FF C0 00 C0 C0 00			db	0FFh,0C0h, 00h,0C0h,0C0h, 00h
2F94:7250  C0 C0 00 C0 C0 00			db	0C0h,0C0h, 00h,0C0h,0C0h, 00h
2F94:7256  C0 C0 00 C0 C0 00			db	0C0h,0C0h, 00h,0C0h,0C0h, 00h
2F94:725C  C0 C0 03 C0 F0 00			db	0C0h,0C0h, 03h,0C0h,0F0h, 00h
2F94:7262  00 00 3F FF FF 3F			db	 00h, 00h, 3Fh,0FFh,0FFh, 3Fh
2F94:7268  FF FF 30 3C 03 3F			db	0FFh,0FFh, 30h, 3Ch, 03h, 3Fh
2F94:726E  FF FF 00 3F 00 00			db	0FFh,0FFh, 00h, 3Fh, 00h, 00h
2F94:7274  F3 C0 03 C0 F0 0F			db	0F3h,0C0h, 03h,0C0h,0F0h, 0Fh
2F94:727A  00 3C 3C 00 0F 00			db	 00h, 3Ch, 3Ch, 00h, 0Fh, 00h
2F94:7280  00 00 00 00 00			db	 00h, 00h, 00h, 00h, 00h
2F94:7285  01			spr_mystery_3b	db	1			;  xref 2F94:23B6, 46D7, 4842, 485C
										;            4870, 4C8D, 4CA4
2F94:7286  55 00 55 55 54 54			db	 55h, 00h, 55h, 55h, 54h, 54h
2F94:728C  00 15 00 00 15 00			db	 00h, 15h, 00h, 00h, 15h, 00h
2F94:7292  00 54 00 05 50 00			db	 00h, 54h, 00h, 05h, 50h, 00h
2F94:7298  15 40 00 54 00 00			db	 15h, 40h, 00h, 54h, 00h, 00h
2F94:729E  54 00 00 54 00 00			db	 54h, 00h, 00h, 54h, 00h, 00h
2F94:72A4  00 00 00 54 00 00			db	 00h, 00h, 00h, 54h, 00h, 00h
2F94:72AA  00 00 00 14 00 01			db	 00h, 00h, 00h, 14h, 00h, 01h
2F94:72B0  55 40 05 00 50 00			db	 55h, 40h, 05h, 00h, 50h, 00h
2F94:72B6  00 14 00 00 50 00			db	 00h, 14h, 00h, 00h, 50h, 00h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 207

2F94:72BC  01 40 00 14 00 00			db	 01h, 40h, 00h, 14h, 00h, 00h
2F94:72C2  14 00 00 00 00 00			db	 14h, 00h, 00h, 00h, 00h, 00h
2F94:72C8  14 00 00 00 00			db	 14h, 00h, 00h, 00h, 00h
2F94:72CD  01			spr_extralife_3b	db	1			;  xref 2F94:23C2, 46C3, 4740, 4746
										;            47A2, 47BD, 47ED, 4C44
										;            4C56, 4C70, 4C7C, 5758
2F94:72CE  55 40 01 55 40 00			db	 55h, 40h, 01h, 55h, 40h, 00h
2F94:72D4  14 00 00 14 00 00			db	 14h, 00h, 00h, 14h, 00h, 00h
2F94:72DA  14 00 01 55 40 14			db	 14h, 00h, 01h, 55h, 40h, 14h
2F94:72E0  00 14 51 40 05 50			db	 00h, 14h, 51h, 40h, 05h, 50h
2F94:72E6  00 55 50 00 05 14			db	 00h, 55h, 50h, 00h, 05h, 14h
2F94:72EC  05 14 05 55 50 14			db	 05h, 14h, 05h, 55h, 50h, 14h
2F94:72F2  14 14 50 01 45 50			db	 14h, 14h, 50h, 01h, 45h, 50h
2F94:72F8  00 05 50 05 05 15			db	 00h, 05h, 50h, 05h, 05h, 15h
2F94:72FE  40 14 05 55 50 14			db	 40h, 14h, 05h, 55h, 50h, 14h
2F94:7304  01 54 50 00 05 50			db	 01h, 54h, 50h, 00h, 05h, 50h
2F94:730A  14 05 51 41 45 14			db	 14h, 05h, 51h, 41h, 45h, 14h
2F94:7310  00 14 05				db	 00h, 14h, 05h
2F94:7313  55 50				db	 55h, 50h
2F94:7315  55			spr_key_4b	db	55h			;  xref 2F94:08C6, 08DD, 08F4, 23AA
										;            4658, 490E, 4954, 496A
										;            4980, 4A30, 4CBC, 4CD0
2F94:7316  50 00 00 50 50 00			db	 50h, 00h, 00h, 50h, 50h, 00h
2F94:731C  00 50 50 00 00 50			db	 00h, 50h, 50h, 00h, 00h, 50h
2F94:7322  50 00 00 50 50 00			db	 50h, 00h, 00h, 50h, 50h, 00h
2F94:7328  00					db	 00h
2F94:7329  50 55 55 55 50 55			db	'PUUUPUUUPP'
2F94:732F  55 55 50 50
2F94:7333  14 14 50 50 14 14			db	 14h, 14h, 50h, 50h, 14h, 14h
2F94:7339  50 50 14 14 50 50			db	 50h, 50h, 14h, 14h, 50h, 50h
2F94:733F  14 14 55 50 00 00			db	 14h, 14h, 55h, 50h, 00h, 00h
2F94:7345  55 50 00 00 50 50			db	 55h, 50h, 00h, 00h, 50h, 50h
2F94:734B  00 00 50 50 00 00			db	 00h, 00h, 50h, 50h, 00h, 00h
2F94:7351  50 50 00 00 50 50			db	 50h, 50h, 00h, 00h, 50h, 50h
2F94:7357  00 00				db	 00h, 00h
2F94:7359  50 55 55 55 50 55			db	'PUUUPUUUPP'
2F94:735F  55 55 50 50
2F94:7363  14 00 50 50 14 00			db	 14h, 00h, 50h, 50h, 14h, 00h
2F94:7369  50 50 14 00 50 50			db	 50h, 50h, 14h, 00h, 50h, 50h
2F94:736F  14 00 55 50 00 00			db	 14h, 00h, 55h, 50h, 00h, 00h
2F94:7375  55 50 00 00 50 50			db	 55h, 50h, 00h, 00h, 50h, 50h
2F94:737B  00 00 50 50 00 00			db	 00h, 00h, 50h, 50h, 00h, 00h
2F94:7381  50 50 00 00 50 50			db	 50h, 50h, 00h, 00h, 50h, 50h
2F94:7387  00 00				db	 00h, 00h
2F94:7389  50 55 55 55 50 55			db	'PUUUPUUUPP'
2F94:738F  55 55 50 50
2F94:7393  00 14 50 50 00 14			db	 00h, 14h, 50h, 50h, 00h, 14h
2F94:7399  50 50 00 14 50 50			db	 50h, 50h, 00h, 14h, 50h, 50h
2F94:739F  00 14 55 50 00 00			db	 00h, 14h, 55h, 50h, 00h, 00h
2F94:73A5  05			spr_keyhole_3b	db	5			;  xref 2F94:239E, 46AD, 4A1A, 4CDE
										;            4CF5, 577A
2F94:73A6  55 50 15				db	 55h, 50h, 15h
2F94:73A9  55 54 55 55 55 55			db	'UTUUUUUU'
2F94:73AF  55 55
2F94:73B1  00 00 05 00 00 05			db	 00h, 00h, 05h, 00h, 00h, 05h
2F94:73B7  54 14 15 54 14 15			db	 54h, 14h, 15h, 54h, 14h, 15h
2F94:73BD  54 14 15 54 14 15			db	 54h, 14h, 15h, 54h, 14h, 15h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 208

2F94:73C3  55 55 55 15 55 54			db	 55h, 55h, 55h, 15h, 55h, 54h
2F94:73C9  05 55 50 05 55 50			db	 05h, 55h, 50h, 05h, 55h, 50h
2F94:73CF  15					db	 15h
2F94:73D0  55 54 55 55 55 55			db	'UTUUUUUU'
2F94:73D6  55 55
2F94:73D8  00 00 05 00 00 05			db	 00h, 00h, 05h, 00h, 00h, 05h
2F94:73DE  54 15 55 54 15 55			db	 54h, 15h, 55h, 54h, 15h, 55h
2F94:73E4  54 15 55 54 15 55			db	 54h, 15h, 55h, 54h, 15h, 55h
2F94:73EA  55 55 55 15 55 54			db	 55h, 55h, 55h, 15h, 55h, 54h
2F94:73F0  05 55 50 05 55 50			db	 05h, 55h, 50h, 05h, 55h, 50h
2F94:73F6  15					db	 15h
2F94:73F7  55 54 55 55 55 55			db	'UTUUUUUU'
2F94:73FD  55 55
2F94:73FF  00 00 05 00 00 05			db	 00h, 00h, 05h, 00h, 00h, 05h
2F94:7405  55 54 15 55 54 15			db	 55h, 54h, 15h, 55h, 54h, 15h
2F94:740B  55 54 15 55 54 15			db	 55h, 54h, 15h, 55h, 54h, 15h
2F94:7411  55 55 55 15 55 54			db	 55h, 55h, 55h, 15h, 55h, 54h
2F94:7417  05					db	 05h
2F94:7418  55 50				db	 55h, 50h
2F94:741A  00			foe_data_741a	db	0			;  xref 2F94:08A3, 2B34, 2CE1
2F94:741B  009B[00]				db	155 dup (0)
2F94:74B6  0020 0040 0000	anim_offsets_table_74b6	dw	20h, 40h, 0		; loaded to data_184@2b05
2F94:74BC  0080 00A0 0060			dw	80h, 0A0h, 60h
2F94:74C2  FFA0 FF60 FF80			dw	0FFA0h, 0FF60h, 0FF80h
2F94:74C8  0040 0000 0020			dw	40h, 0, 20h
2F94:74CE  0080 00A0 0060			dw	80h, 0A0h, 60h
2F94:74D4  0120 0140 0100			dw	120h, 140h, 100h
2F94:74DA  0020 0040 0000	anim_offsets_table_74da	dw	20h, 40h, 0		; loaded to data_184@2b05
2F94:74E0  0080 00A0 0060			dw	80h, 0A0h, 60h
2F94:74E6  FF80 FFA0 FF60			dw	0FF80h, 0FFA0h, 0FF60h
2F94:74EC  0020 0040 0000			dw	20h, 40h, 0
2F94:74F2  0080 00A0 0060			dw	80h, 0A0h, 60h
2F94:74F8  0120 0140 0100			dw	120h, 140h, 100h
2F94:74FE  0020 0040 0000	anim_offsets_table_74fe	dw	20h, 40h, 0		; loaded to data_184@2b05
2F94:7504  0080 00A0 0060			dw	80h, 0A0h, 60h
2F94:750A  FF80 FFA0 FF60			dw	0FF80h, 0FFA0h, 0FF60h
2F94:7510  0020 0040 0000			dw	20h, 40h, 0
2F94:7516  0080 00A0 0060			dw	80h, 0A0h, 60h
2F94:751C  0120 0140 0100			dw	120h, 140h, 100h
2F94:7522  00					db	0
2F94:7523  08			data_301	db	8			; Data table (indexed access)
										;  xref 2F94:2CD0, 2CD5, 45E8, 45ED
2F94:7524  12 08 22 08 32 40			db	 12h, 08h, 22h, 08h, 32h, 40h
2F94:752A  12 40 22 40 32 78			db	 12h, 40h, 22h, 40h, 32h, 78h
2F94:7530  12					db	 12h
2F94:7531  78 22 78 32				db	 78h, 22h, 78h, 32h
2F94:7535  00			placement_offset	db	0			; Data table (indexed access)
										;  xref 2F94:2C41, 2C46, 45F2, 4614
2F94:7536  00 08 04 20 04 10			db	 00h, 08h, 04h, 20h, 04h, 10h
2F94:753C  08 00 04 08 00 10			db	 08h, 00h, 04h, 08h, 00h, 10h
2F94:7542  00 20 00 18 04 00			db	 00h, 20h, 00h, 18h, 04h, 00h
2F94:7548  08 28 08 18 00 08			db	 08h, 28h, 08h, 18h, 00h, 08h
2F94:754E  08 28 04 20 08 10			db	 08h, 28h, 04h, 20h, 08h, 10h
2F94:7554  04 28 00 18				db	 04h, 28h, 00h, 18h
2F94:7558  08					db	8
2F94:7559  7B 6C 62 5C 37 2F	data_302	db	'{lb\7/(%'		;  xref 2F94:4637
2F94:755F  28 25
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 209

2F94:7561  0F 00 00 00 00 00			db	 0Fh, 00h, 00h, 00h, 00h, 00h
2F94:7567  00 00 FF 00 0F 00			db	 00h, 00h,0FFh, 00h, 0Fh, 00h
2F94:756D  F0 00 FF				db	0F0h, 00h,0FFh
2F94:7570  0008[00]				db	8 dup (0)
2F94:7578  3C 00 3C 00 F0 00			db	 3Ch, 00h, 3Ch, 00h,0F0h, 00h
2F94:757E  00 00 F0 00 0F 00			db	 00h, 00h,0F0h, 00h, 0Fh, 00h
2F94:7584  00 00 3C 00 3C 00			db	 00h, 00h, 3Ch, 00h, 3Ch, 00h
2F94:758A  00 00 00 3C 00 00			db	 00h, 00h, 00h, 3Ch, 00h, 00h
2F94:7590  00 00 00 00 3C C0			db	 00h, 00h, 00h, 00h, 3Ch,0C0h
2F94:7596  00 00 3C 3C 00 00			db	 00h, 00h, 3Ch, 3Ch, 00h, 00h
2F94:759C  F0 0F 00 00 F0 0F			db	0F0h, 0Fh, 00h, 00h,0F0h, 0Fh
2F94:75A2  00 00 3C 3C 00 00			db	 00h, 00h, 3Ch, 3Ch, 00h, 00h
2F94:75A8  3C C0 00 00 00 00			db	 3Ch,0C0h, 00h, 00h, 00h, 00h
2F94:75AE  00 00 3C 3C 00 3C			db	 00h, 00h, 3Ch, 3Ch, 00h, 3Ch
2F94:75B4  00 00 3C 00 00 00			db	 00h, 00h, 3Ch, 00h, 00h, 00h
2F94:75BA  00 F0 00 00 F0 00			db	 00h,0F0h, 00h, 00h,0F0h, 00h
2F94:75C0  00 00 00 3C 00 00			db	 00h, 00h, 00h, 3Ch, 00h, 00h
2F94:75C6  3C					db	3Ch
2F94:75C7  00 00 00 00 00 3C			db	 00h, 00h, 00h, 00h, 00h, 3Ch
2F94:75CD  3C 00 03 07 C8 00			db	 3Ch, 00h, 03h, 07h,0C8h, 00h
2F94:75D3  38 40 0F 00 C0 23			db	 38h, 40h, 0Fh, 00h,0C0h, 23h
2F94:75D9  D0 00 0B 0C 70 00			db	0D0h, 00h, 0Bh, 0Ch, 70h, 00h
2F94:75DF  0D 23 B0 00 0E 08			db	 0Dh, 23h,0B0h, 00h, 0Eh, 08h
2F94:75E5  F0 00 E0 2C 32 00			db	0F0h, 00h,0E0h, 2Ch, 32h, 00h
2F94:75EB  C4 20 80 00 01 2C			db	0C4h, 20h, 80h, 00h, 01h, 2Ch
2F94:75F1  10 00 30 8C 3C 00			db	 10h, 00h, 30h, 8Ch, 3Ch, 00h
2F94:75F7  04 1C 02 00 C4 03			db	 04h, 1Ch, 02h, 00h,0C4h, 03h
2F94:75FD  0D 00 C8 23 2C 00			db	 0Dh, 00h,0C8h, 23h, 2Ch, 00h
2F94:7603  00 38 B0 10 00 40			db	 00h, 38h,0B0h, 10h, 00h, 40h
2F94:7609  0E 8C 00 F0 3C C0			db	 0Eh, 8Ch, 00h,0F0h, 3Ch,0C0h
2F94:760F  00					db	 00h

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         sync_func_ptr handler	1, when	keyboard
				;
				;         Called from:   2F94:5186, 7A57, 7A78, 7A88
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:7610			wait_interrupt	proc	near
2F94:7610  50					push	ax
2F94:7611  51					push	cx
2F94:7612  8B 0E 76F0				mov	cx,[int_xx_ctr]		; (2F94:76F0=0)
2F94:7616			loc_674:					;  xref 2F94:761D
2F94:7616  A1 76F0				mov	ax,[int_xx_ctr]		; (2F94:76F0=0)
2F94:7619  2B C1				sub	ax,cx
2F94:761B  3B C3				cmp	ax,bx
2F94:761D  72 F7				jb	loc_674			; Jump if below
2F94:761F  59					pop	cx
2F94:7620  58					pop	ax
2F94:7621  C3					retn
				wait_interrupt	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         sync_func_ptr handler	2, when	joystick
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 210

2F94:7622			wait_timer	proc	near
2F94:7622  50					push	ax
2F94:7623  53					push	bx
2F94:7624  51					push	cx
2F94:7625  52					push	dx
2F94:7626  57					push	di
2F94:7627  BA 0040				mov	dx,40h
2F94:762A  B0 00				mov	al,0
2F94:762C  FA					cli				; Disable interrupts
2F94:762D  E6 43				out	43h,al			; port 43h, 8253 timer control
										;  al = 0, latch timer0 count
2F94:762F  90					nop
2F94:7630  90					nop
2F94:7631  EC					in	al,dx			; port 40h, 8253 timer 0 clock
2F94:7632  8A E0				mov	ah,al
2F94:7634  EC					in	al,dx			; port 40h, 8253 timer 0 clock
2F94:7635  86 E0				xchg	ah,al
2F94:7637  8B F8				mov	di,ax
2F94:7639			loc_675:					;  xref 2F94:764B
2F94:7639  B0 00				mov	al,0
2F94:763B  E6 43				out	43h,al			; port 43h, 8253 timer control
										;  al = 0, latch timer0 count
2F94:763D  90					nop
2F94:763E  90					nop
2F94:763F  EC					in	al,dx			; port 40h, 8253 timer 0 clock
2F94:7640  8A E0				mov	ah,al
2F94:7642  EC					in	al,dx			; port 40h, 8253 timer 0 clock
2F94:7643  86 E0				xchg	ah,al
2F94:7645  8B CF				mov	cx,di
2F94:7647  2B C8				sub	cx,ax
2F94:7649  3B CB				cmp	cx,bx
2F94:764B  72 EC				jb	loc_675			; Jump if below
2F94:764D  5F					pop	di
2F94:764E  5A					pop	dx
2F94:764F  59					pop	cx
2F94:7650  5B					pop	bx
2F94:7651  58					pop	ax
2F94:7652  FB					sti				; Enable interrupts
2F94:7653  C3					retn
				wait_timer	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         some delay, wait bx counts cx	times?
				;
				;         Called from:   2F94:59EC, 5A51, 7823, 783C, 7861, 787A, 7890
				;                             78B8, 78CE, 78F6, 7B04, 7B2A, 7B46, 7B54
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:7654			wait_timer_bx_cx	proc	near
2F94:7654  50					push	ax
2F94:7655  53					push	bx
2F94:7656  51					push	cx
2F94:7657  52					push	dx
2F94:7658  57					push	di

2F94:7659			locloop_676:					;  xref 2F94:7680
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 211

2F94:7659  B0 00				mov	al,0
2F94:765B  FA					cli				; Disable interrupts
2F94:765C  E6 43				out	43h,al			; port 43h, 8253 timer control
										;  al = 0, latch timer0 count
2F94:765E  90					nop
2F94:765F  90					nop
2F94:7660  E4 40				in	al,40h			; port 40h, 8253 timer 0 clock
2F94:7662  8A E0				mov	ah,al
2F94:7664  E4 40				in	al,40h			; port 40h, 8253 timer 0 clock
2F94:7666  86 E0				xchg	ah,al
2F94:7668  8B F8				mov	di,ax
2F94:766A			loc_677:					;  xref 2F94:767E
2F94:766A  B0 00				mov	al,0
2F94:766C  E6 43				out	43h,al			; port 43h, 8253 timer control
										;  al = 0, latch timer0 count
2F94:766E  90					nop
2F94:766F  90					nop
2F94:7670  E4 40				in	al,40h			; port 40h, 8253 timer 0 clock
2F94:7672  8A E0				mov	ah,al
2F94:7674  E4 40				in	al,40h			; port 40h, 8253 timer 0 clock
2F94:7676  86 E0				xchg	ah,al
2F94:7678  8B D7				mov	dx,di
2F94:767A  2B D0				sub	dx,ax
2F94:767C  3B D3				cmp	dx,bx
2F94:767E  72 EA				jb	loc_677			; Jump if below
2F94:7680  E2 D7				loop	locloop_676		; Loop if cx > 0

2F94:7682  5F					pop	di
2F94:7683  5A					pop	dx
2F94:7684  59					pop	cx
2F94:7685  5B					pop	bx
2F94:7686  58					pop	ax
2F94:7687  FB					sti				; Enable interrupts
2F94:7688  C3					retn
				wait_timer_bx_cx	endp

2F94:7689  0007[00]				db	7 dup (0)

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         spr in si,dl=Y,dh=X,bl=width,bh=height expands bits to all colou
				;
				;         Called from:   2F94:3E94
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:7690			draw_sprite_xor_check_collision	proc	near
2F94:7690  50					push	ax
2F94:7691  53					push	bx
2F94:7692  51					push	cx
2F94:7693  52					push	dx
2F94:7694  57					push	di
2F94:7695  56					push	si
2F94:7696  C6 06 1330 00			mov	[collision_1330],0	; (2F94:1330=0)
2F94:769B			loc_678:					;  xref 2F94:76E7
2F94:769B  8A C2				mov	al,dl
2F94:769D  32 E4				xor	ah,ah			; Zero register
2F94:769F  D1 E0				shl	ax,1			; Shift w/zeros fill
2F94:76A1  8B F8				mov	di,ax
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 212

2F94:76A3  8A C6				mov	al,dh
2F94:76A5  32 E4				xor	ah,ah			; Zero register
2F94:76A7  03 85 68E0				add	ax,[line_offsets_table][di]	; (2F94:68E0=0)
2F94:76AB  8B F8				mov	di,ax
2F94:76AD  33 C9				xor	cx,cx			; Zero register
2F94:76AF  8A CB				mov	cl,bl

2F94:76B1			locloop_679:					;  xref 2F94:76E1
2F94:76B1  AC					lodsb				; String [si] to al
2F94:76B2  26: 30 05				xor	es:[di],al
2F94:76B5  80 3E 1330 00			cmp	[collision_1330],0	; (2F94:1330=0)
2F94:76BA  75 24				jne	loc_684			; Jump if not equal
2F94:76BC  A8 C0				test	al,0C0h
2F94:76BE  74 02				jz	loc_680			; Jump if zero
2F94:76C0  0C C0				or	al,0C0h
2F94:76C2			loc_680:					;  xref 2F94:76BE
2F94:76C2  A8 30				test	al,30h			; '0'
2F94:76C4  74 02				jz	loc_681			; Jump if zero
2F94:76C6  0C 30				or	al,30h			; '0'
2F94:76C8			loc_681:					;  xref 2F94:76C4
2F94:76C8  A8 0C				test	al,0Ch
2F94:76CA  74 02				jz	loc_682			; Jump if zero
2F94:76CC  0C 0C				or	al,0Ch
2F94:76CE			loc_682:					;  xref 2F94:76CA
2F94:76CE  A8 03				test	al,3
2F94:76D0  74 02				jz	loc_683			; Jump if zero
2F94:76D2  0C 03				or	al,3
2F94:76D4			loc_683:					;  xref 2F94:76D0
2F94:76D4  26: 22 05				and	al,es:[di]
2F94:76D7  A8 AA				test	al,0AAh
2F94:76D9  74 05				jz	loc_684			; Jump if zero
2F94:76DB  C6 06 1330 01			mov	[collision_1330],1	; (2F94:1330=0)
2F94:76E0			loc_684:					;  xref 2F94:76BA, 76D9
2F94:76E0  47					inc	di
2F94:76E1  E2 CE				loop	locloop_679		; Loop if cx > 0

2F94:76E3  FE C2				inc	dl
2F94:76E5  FE CF				dec	bh
2F94:76E7  75 B2				jnz	loc_678			; Jump if not zero
2F94:76E9  5E					pop	si
2F94:76EA  5F					pop	di
2F94:76EB  5A					pop	dx
2F94:76EC  59					pop	cx
2F94:76ED  5B					pop	bx
2F94:76EE  58					pop	ax
2F94:76EF  C3					retn
				draw_sprite_xor_check_collision	endp

2F94:76F0  0000			int_xx_ctr	dw	0			;  xref 2F94:7612, 7616, 771D
2F94:76F2  0000			data_305	dw	0			;  xref 2F94:7704, 7734, 7DC9
2F94:76F4  0000			data_306	dw	0			;  xref 2F94:770B, 7739, 7DD0

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          install_int_handler
				;
				;         Called from:   2F94:01B4
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 213


2F94:76F6			install_int_handler	proc	near
2F94:76F6  50					push	ax
2F94:76F7  57					push	di
2F94:76F8  06					push	es
2F94:76F9  FA					cli				; Disable interrupts
2F94:76FA  33 C0				xor	ax,ax			; Zero register
2F94:76FC  8E C0				mov	es,ax
2F94:76FE .BF 0020				mov	di,data_1e		; (0000:0020=0A5h)
2F94:7701  26: 8B 05				mov	ax,es:[di]
2F94:7704  A3 76F2				mov	[data_305],ax		; (2F94:76F2=0)
2F94:7707  26: 8B 45 02				mov	ax,es:[di+2]
2F94:770B  A3 76F4				mov	[data_306],ax		; (2F94:76F4=0)
2F94:770E  B8 771B				mov	ax,771Bh
2F94:7711  FC					cld				; Clear direction
2F94:7712  AB					stosw				; Store ax to es:[di]
2F94:7713  0E					push	cs
2F94:7714  58					pop	ax
2F94:7715  AB					stosw				; Store ax to es:[di]
2F94:7716  07					pop	es
2F94:7717  5F					pop	di
2F94:7718  58					pop	ax
2F94:7719  FB					sti				; Enable interrupts
2F94:771A  C3					retn
				install_int_handler	endp

2F94:771B			intvec_xx:
2F94:771B  FA					cli				; Disable interrupts
2F94:771C  50					push	ax
2F94:771D  2E: FF 06 76F0			inc	cs:[int_xx_ctr]		; (2F94:76F0=0)
2F94:7722  B0 20				mov	al,20h			; ' '
2F94:7724  E6 20				out	20h,al			; port 20h, 8259-1 int command
										;  al = 20h, end of interrupt
2F94:7726  58					pop	ax
2F94:7727  FB					sti				; Enable interrupts
2F94:7728  CF					iret				; Interrupt return

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                              SUBROUTINE
				;
				;         Called from:   2F94:11EE
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:7729			sub_25		proc	near
2F94:7729  50					push	ax
2F94:772A  57					push	di
2F94:772B  06					push	es
2F94:772C  FA					cli				; Disable interrupts
2F94:772D  33 C0				xor	ax,ax			; Zero register
2F94:772F  8E C0				mov	es,ax
2F94:7731 .BF 0020				mov	di,data_1e		; (0000:0020=0A5h)
2F94:7734  A1 76F2				mov	ax,[data_305]		; (2F94:76F2=0)
2F94:7737  FC					cld				; Clear direction
2F94:7738  AB					stosw				; Store ax to es:[di]
2F94:7739  A1 76F4				mov	ax,[data_306]		; (2F94:76F4=0)
2F94:773C  AB					stosw				; Store ax to es:[di]
2F94:773D  07					pop	es
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 214

2F94:773E  5F					pop	di
2F94:773F  58					pop	ax
2F94:7740  E8 0002				call	sub85_timer_init	; (7745)
2F94:7743  FB					sti				; Enable interrupts
2F94:7744  C3					retn
				sub_25		endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          sub85_timer_init
				;
				;         Called from:   2F94:7740
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:7745			sub85_timer_init	proc	near
2F94:7745  50					push	ax
2F94:7746  B0 36				mov	al,36h			; '6'
2F94:7748  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:774A  33 C0				xor	ax,ax			; Zero register
2F94:774C  E6 40				out	40h,al			; port 40h, 8253 timer 0 clock
2F94:774E  E6 40				out	40h,al			; port 40h, 8253 timer 0 clock
2F94:7750  B0 FC				mov	al,0FCh
2F94:7752  E6 21				out	21h,al			; port 21h, 8259-1 int comands
2F94:7754  58					pop	ax
2F94:7755  C3					retn
				sub85_timer_init	endp

2F94:7756  000A[00]				db	10 dup (0)
2F94:7760  00			pointless_save_7760	db	0			;  xref 2F94:7BF0, 7C00
2F94:7761  0000			delay_count_7761	dw	0			;  xref 2F94:7808, 7815, 781F, 7838
										;            785D, 7876, 788C, 78B4
										;            78CA, 78F2
2F94:7763  47 41 4D 45 20 20	data_308	db	'GAME  OVERPress any key to play '	;  xref 2F94:79FB
2F94:7769  4F 56 45 52 50 72
2F94:776F  65 73 73 20 61 6E
2F94:7775  79 20 6B 65 79 20
2F94:777B  74 6F 20 70 6C 61
2F94:7781  79 20
2F94:7783  61 67 61 69 6E 2E			db	'again.Press a button to play aga'
2F94:7789  50 72 65 73 73 20
2F94:778F  61 20 62 75 74 74
2F94:7795  6F 6E 20 74 6F 20
2F94:779B  70 6C 61 79 20 61
2F94:77A1  67 61
2F94:77A3  69 6E 2E				db	'in.'
2F94:77A6  00 01 03 05 07 0C	weird_table	db	 00h, 01h, 03h, 05h, 07h, 0Ch	;  xref 2F94:7C26
2F94:77AC  0F 15 17 30 33 3C			db	 0Fh, 15h, 17h, 30h, 33h, 3Ch
2F94:77B2  3F 40 54 55 C0 C3			db	 3Fh, 40h, 54h, 55h,0C0h,0C3h
2F94:77B8  D4 F0 FC FF				db	0D4h,0F0h,0FCh,0FFh
2F94:77BC  00 02 02 0A 0A 08	weird_table_pt2	db	 00h, 02h, 02h, 0Ah, 0Ah, 08h
2F94:77C2  0A 2A 2A 08 22 28			db	 0Ah, 2Ah, 2Ah, 08h, 22h, 28h
2F94:77C8  2A 80 A8 AA 80 BE			db	 2Ah, 80h,0A8h,0AAh, 80h,0BEh
2F94:77CE  A8 A0 A8 AA				db	0A8h,0A0h,0A8h,0AAh
2F94:77D2  00 00				db	0, 0

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                              SUBROUTINE
           shamus.lst						Sourcer	v8.01  20-Dec-2023  2:31 am   Page 215

				;
				;         Called from:   2F94:03B0, 29A2
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:77D4			sub_26		proc	near
2F94:77D4  C6 06 0DB8 00			mov	[ctrl_pressed],0	; (2F94:0DB8=0)
2F94:77D9  8B 3E 3414				mov	di,[sprite_ptr]		; (2F94:3414=6710h)
2F94:77DD  BB 3004				mov	bx,3004h
2F94:77E0  80 36 013C 01			xor	[data_35],1		; (2F94:013C=0)
2F94:77E5  B4 0B				mov	ah,0Bh
2F94:77E7  8A 1E 013C				mov	bl,[data_35]		; (2F94:013C=0)
2F94:77EB  B7 01				mov	bh,1
2F94:77ED  CD 10				int	10h			; Video display   ah=functn 0Bh
										;  set color from bx (CGA modes)
2F94:77EF  8B 3E 3414				mov	di,[sprite_ptr]		; (2F94:3414=6710h)
2F94:77F3  BB 3004				mov	bx,3004h
2F94:77F6  E8 9C57				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:77F9  C6 06 012E FF			mov	[goback_num],0FFh	; (2F94:012E=0FFh)
2F94:77FE  80 3E 0132 01			cmp	[joystick_selected],1	; (2F94:0132=0)
2F94:7803  74 03				je	loc_685			; Jump if equal
2F94:7805  E9 00F5				jmp	loc_687			; (78FD)
2F94:7808			loc_685:					;  xref 2F94:7803
2F94:7808  C7 06 7761 0002			mov	[delay_count_7761],2	; (2F94:7761=0)
2F94:780E  80 3E 012F 00			cmp	[data_33],0		; (2F94:012F=0)
2F94:7813  74 06				je	loc_686			; Jump if equal
2F94:7815  C7 06 7761 0001			mov	[delay_count_7761],1	; (2F94:7761=0)
2F94:781B			loc_686:					;  xref 2F94:7813
2F94:781B  51					push	cx
2F94:781C  BB 0F00				mov	bx,0F00h
2F94:781F  8B 0E 7761				mov	cx,[delay_count_7761]	; (2F94:7761=0)
2F94:7823  E8 FE2E				call	wait_timer_bx_cx	; (7654)
2F94:7826  59					pop	cx
2F94:7827  8B 3E 3414				mov	di,[sprite_ptr]		; (2F94:3414=6710h)
2F94:782B  BB 3004				mov	bx,3004h
2F94:782E  E8 03BB				call	draw_sprite_xor_with_weird_table	; (7BEC)
2F94:7831  E8 D91C				call	sub_11			; (5150)
2F94:7834  51					push	cx
2F94:7835  BB 0FFF				mov	bx,0FFFh
2F94:7838  8B 0E 7761				mov	cx,[delay_count_7761]	; (2F94:7761=0)
2F94:783C  E8 FE15				call	wait_timer_bx_cx	; (7654)
2F94:783F  59					pop	cx
2F94:7840  8B 3E 3414				mov	di,[sprite_ptr]		; (2F94:3414=6710h)
2F94:7844  BB 3004				mov	bx,3004h
2F94:7847  E8 03A2				call	draw_sprite_xor_with_weird_table	; (7BEC)
2F94:784A  80 36 013C 01			xor	[data_35],1		; (2F94:013C=0)
2F94:784F  B4 0B				mov	ah,0Bh
2F94:7851  8A 1E 013C				mov	bl,[data_35]		; (2F94:013C=0)
2F94:7855  B7 01				mov	bh,1
2F94:7857  CD 10				int	10h			; Video display   ah=functn 0Bh
										;  set color from bx (CGA modes)
2F94:7859  51					push	cx
2F94:785A  BB 3FFF				mov	bx,3FFFh
2F94:785D  8B 0E 7761				mov	cx,[delay_count_7761]	; (2F94:7761=0)
2F94:7861  E8 FDF0				call	wait_timer_bx_cx	; (7654)
2F94:7864  59					pop	cx
2F94:7865  8B 3E 3414				mov	di,[sprite_ptr]		; (2F94:3414=6710h)
2F94:7869  BB 3004				mov	bx,3004h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 216

2F94:786C  E8 037D				call	draw_sprite_xor_with_weird_table	; (7BEC)
2F94:786F  E8 D8DE				call	sub_11			; (5150)
2F94:7872  51					push	cx
2F94:7873  BB 5000				mov	bx,5000h
2F94:7876  8B 0E 7761				mov	cx,[delay_count_7761]	; (2F94:7761=0)
2F94:787A  E8 FDD7				call	wait_timer_bx_cx	; (7654)
2F94:787D  59					pop	cx
2F94:787E  8B 3E 3414				mov	di,[sprite_ptr]		; (2F94:3414=6710h)
2F94:7882  BB 3004				mov	bx,3004h
2F94:7885  E8 0364				call	draw_sprite_xor_with_weird_table	; (7BEC)
2F94:7888  51					push	cx
2F94:7889  BB 7000				mov	bx,7000h
2F94:788C  8B 0E 7761				mov	cx,[delay_count_7761]	; (2F94:7761=0)
2F94:7890  E8 FDC1				call	wait_timer_bx_cx	; (7654)
2F94:7893  59					pop	cx
2F94:7894  80 36 013C 01			xor	[data_35],1		; (2F94:013C=0)
2F94:7899  B4 0B				mov	ah,0Bh
2F94:789B  8A 1E 013C				mov	bl,[data_35]		; (2F94:013C=0)
2F94:789F  B7 01				mov	bh,1
2F94:78A1  CD 10				int	10h			; Video display   ah=functn 0Bh
										;  set color from bx (CGA modes)
2F94:78A3  8B 3E 3414				mov	di,[sprite_ptr]		; (2F94:3414=6710h)
2F94:78A7  BB 3004				mov	bx,3004h
2F94:78AA  E8 033F				call	draw_sprite_xor_with_weird_table	; (7BEC)
2F94:78AD  E8 D8A0				call	sub_11			; (5150)
2F94:78B0  51					push	cx
2F94:78B1  BB 9000				mov	bx,9000h
2F94:78B4  8B 0E 7761				mov	cx,[delay_count_7761]	; (2F94:7761=0)
2F94:78B8  E8 FD99				call	wait_timer_bx_cx	; (7654)
2F94:78BB  59					pop	cx
2F94:78BC  8B 3E 3414				mov	di,[sprite_ptr]		; (2F94:3414=6710h)
2F94:78C0  BB 3004				mov	bx,3004h
2F94:78C3  E8 0326				call	draw_sprite_xor_with_weird_table	; (7BEC)
2F94:78C6  51					push	cx
2F94:78C7  BB B000				mov	bx,0B000h
2F94:78CA  8B 0E 7761				mov	cx,[delay_count_7761]	; (2F94:7761=0)
2F94:78CE  E8 FD83				call	wait_timer_bx_cx	; (7654)
2F94:78D1  59					pop	cx
2F94:78D2  80 36 013C 01			xor	[data_35],1		; (2F94:013C=0)
2F94:78D7  B4 0B				mov	ah,0Bh
2F94:78D9  8A 1E 013C				mov	bl,[data_35]		; (2F94:013C=0)
2F94:78DD  B7 01				mov	bh,1
2F94:78DF  CD 10				int	10h			; Video display   ah=functn 0Bh
										;  set color from bx (CGA modes)
2F94:78E1  8B 3E 3414				mov	di,[sprite_ptr]		; (2F94:3414=6710h)
2F94:78E5  BB 3004				mov	bx,3004h
2F94:78E8  E8 0301				call	draw_sprite_xor_with_weird_table	; (7BEC)
2F94:78EB  E8 D862				call	sub_11			; (5150)
2F94:78EE  51					push	cx
2F94:78EF  BB F000				mov	bx,0F000h
2F94:78F2  8B 0E 7761				mov	cx,[delay_count_7761]	; (2F94:7761=0)
2F94:78F6  E8 FD5B				call	wait_timer_bx_cx	; (7654)
2F94:78F9  59					pop	cx
2F94:78FA  E9 00C7				jmp	loc_688			; (79C4)
2F94:78FD			loc_687:					;  xref 2F94:7805
2F94:78FD  53					push	bx
2F94:78FE  BB 001E				mov	bx,1Eh
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 217

2F94:7901  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:7905  5B					pop	bx
2F94:7906  8B 3E 3414				mov	di,[sprite_ptr]		; (2F94:3414=6710h)
2F94:790A  BB 3004				mov	bx,3004h
2F94:790D  E8 02DC				call	draw_sprite_xor_with_weird_table	; (7BEC)
2F94:7910  E8 D83D				call	sub_11			; (5150)
2F94:7913  53					push	bx
2F94:7914 .BB 0020				mov	bx,data_15e		; (2F94:0020=0)
2F94:7917  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:791B  5B					pop	bx
2F94:791C  8B 3E 3414				mov	di,[sprite_ptr]		; (2F94:3414=6710h)
2F94:7920  BB 3004				mov	bx,3004h
2F94:7923  E8 02C6				call	draw_sprite_xor_with_weird_table	; (7BEC)
2F94:7926  80 36 013C 01			xor	[data_35],1		; (2F94:013C=0)
2F94:792B  B4 0B				mov	ah,0Bh
2F94:792D  8A 1E 013C				mov	bl,[data_35]		; (2F94:013C=0)
2F94:7931  B7 01				mov	bh,1
2F94:7933  CD 10				int	10h			; Video display   ah=functn 0Bh
										;  set color from bx (CGA modes)
2F94:7935  53					push	bx
2F94:7936  BB 0022				mov	bx,22h
2F94:7939  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:793D  5B					pop	bx
2F94:793E  8B 3E 3414				mov	di,[sprite_ptr]		; (2F94:3414=6710h)
2F94:7942  BB 3004				mov	bx,3004h
2F94:7945  E8 02A4				call	draw_sprite_xor_with_weird_table	; (7BEC)
2F94:7948  53					push	bx
2F94:7949  BB 0024				mov	bx,24h
2F94:794C  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:7950  5B					pop	bx
2F94:7951  E8 D7FC				call	sub_11			; (5150)
2F94:7954  8B 3E 3414				mov	di,[sprite_ptr]		; (2F94:3414=6710h)
2F94:7958  BB 3004				mov	bx,3004h
2F94:795B  E8 028E				call	draw_sprite_xor_with_weird_table	; (7BEC)
2F94:795E  53					push	bx
2F94:795F  BB 0024				mov	bx,24h
2F94:7962  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:7966  5B					pop	bx
2F94:7967  80 36 013C 01			xor	[data_35],1		; (2F94:013C=0)
2F94:796C  B4 0B				mov	ah,0Bh
2F94:796E  8A 1E 013C				mov	bl,[data_35]		; (2F94:013C=0)
2F94:7972  B7 01				mov	bh,1
2F94:7974  CD 10				int	10h			; Video display   ah=functn 0Bh
										;  set color from bx (CGA modes)
2F94:7976  8B 3E 3414				mov	di,[sprite_ptr]		; (2F94:3414=6710h)
2F94:797A  BB 3004				mov	bx,3004h
2F94:797D  E8 026C				call	draw_sprite_xor_with_weird_table	; (7BEC)
2F94:7980  E8 D7CD				call	sub_11			; (5150)
2F94:7983  53					push	bx
2F94:7984 .BB 0024				mov	bx,data_16e		; (2F94:0024=0)
2F94:7987  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:798B  5B					pop	bx
2F94:798C  8B 3E 3414				mov	di,[sprite_ptr]		; (2F94:3414=6710h)
2F94:7990  BB 3004				mov	bx,3004h
2F94:7993  E8 0256				call	draw_sprite_xor_with_weird_table	; (7BEC)
2F94:7996  53					push	bx
2F94:7997  BB 0022				mov	bx,22h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 218

2F94:799A  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:799E  5B					pop	bx
2F94:799F  80 36 013C 01			xor	[data_35],1		; (2F94:013C=0)
2F94:79A4  B4 0B				mov	ah,0Bh
2F94:79A6  8A 1E 013C				mov	bl,[data_35]		; (2F94:013C=0)
2F94:79AA  B7 01				mov	bh,1
2F94:79AC  CD 10				int	10h			; Video display   ah=functn 0Bh
										;  set color from bx (CGA modes)
2F94:79AE  8B 3E 3414				mov	di,[sprite_ptr]		; (2F94:3414=6710h)
2F94:79B2  BB 3004				mov	bx,3004h
2F94:79B5  E8 0234				call	draw_sprite_xor_with_weird_table	; (7BEC)
2F94:79B8  E8 D795				call	sub_11			; (5150)
2F94:79BB  53					push	bx
2F94:79BC .BB 0020				mov	bx,data_15e		; (2F94:0020=0)
2F94:79BF  FF 16 238E				call	[sync_func_ptr]		; (2F94:238E=7622h)
2F94:79C3  5B					pop	bx
2F94:79C4			loc_688:					;  xref 2F94:78FA
2F94:79C4  C6 06 013C 00			mov	[data_35],0		; (2F94:013C=0)
2F94:79C9  B4 0B				mov	ah,0Bh
2F94:79CB  8A 1E 013C				mov	bl,[data_35]		; (2F94:013C=0)
2F94:79CF  B7 01				mov	bh,1
2F94:79D1  CD 10				int	10h			; Video display   ah=functn 0Bh
										;  set color from bx (CGA modes)
2F94:79D3  C6 06 0103 00			mov	[data_28],0		; (2F94:0103=0)
2F94:79D8  80 3E 0152 00			cmp	[data_41],0		; (2F94:0152=0)
2F94:79DD  74 03				je	loc_689			; Jump if equal
2F94:79DF  E9 01CD				jmp	loc_703			; (7BAF)
2F94:79E2			loc_689:					;  xref 2F94:79DD
2F94:79E2  FE 0E 458E				dec	[lives_remaining]	; (2F94:458E=4)
2F94:79E6  78 03				js	loc_690			; Jump if sign=1
2F94:79E8  E9 01C4				jmp	loc_703			; (7BAF)
2F94:79EB			loc_690:					;  xref 2F94:79E6
2F94:79EB  53					push	bx
2F94:79EC  52					push	dx
2F94:79ED  50					push	ax
2F94:79EE  33 DB				xor	bx,bx			; Zero register
2F94:79F0  B6 0A				mov	dh,0Ah
2F94:79F2  B2 0F				mov	dl,0Fh
2F94:79F4  B4 02				mov	ah,2
2F94:79F6  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:79F8  58					pop	ax
2F94:79F9  5A					pop	dx
2F94:79FA  5B					pop	bx
2F94:79FB .BE 7763				mov	si,offset data_308	; (2F94:7763='GAME  OVERPress ')
2F94:79FE  B9 000A				mov	cx,0Ah
2F94:7A01  BB 0001				mov	bx,1
2F94:7A04  E8 A5D1				call	puts2			; (1FD8)
2F94:7A07  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:7A0C  74 15				jz	loc_691			; Jump if zero
2F94:7A0E  50					push	ax
2F94:7A0F  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:7A11  0C 03				or	al,3
2F94:7A13  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:7A15  B0 B6				mov	al,0B6h
2F94:7A17  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:7A19  B8 01F4				mov	ax,1F4h
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 219

2F94:7A1C  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:7A1E  8A C4				mov	al,ah
2F94:7A20  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:7A22  58					pop	ax
2F94:7A23			loc_691:					;  xref 2F94:7A0C
2F94:7A23  E8 0216				call	init_game_variables	; (7C3C)
2F94:7A26  B9 00C8				mov	cx,0C8h
2F94:7A29  B8 00C8				mov	ax,0C8h
2F94:7A2C  80 3E 0132 00			cmp	[joystick_selected],0	; (2F94:0132=0)
2F94:7A31  74 03				je	locloop_692		; Jump if equal
2F94:7A33  E9 00A9				jmp	locloop_697		; (7ADF)

2F94:7A36			locloop_692:					;  xref 2F94:7A31, 7A7B
2F94:7A36  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:7A3B  74 14				jz	loc_693			; Jump if zero
2F94:7A3D  50					push	ax
2F94:7A3E  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:7A40  0C 03				or	al,3
2F94:7A42  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:7A44  B0 B6				mov	al,0B6h
2F94:7A46  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:7A48  8B C0				mov	ax,ax
2F94:7A4A  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:7A4C  8A C4				mov	al,ah
2F94:7A4E  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:7A50  58					pop	ax
2F94:7A51			loc_693:					;  xref 2F94:7A3B
2F94:7A51  05 0023				add	ax,23h
2F94:7A54  BB 0004				mov	bx,4
2F94:7A57  E8 FBB6				call	wait_interrupt		; (7610)
2F94:7A5A  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:7A5F  74 14				jz	loc_694			; Jump if zero
2F94:7A61  50					push	ax
2F94:7A62  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:7A64  0C 03				or	al,3
2F94:7A66  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:7A68  B0 B6				mov	al,0B6h
2F94:7A6A  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:7A6C  8B C0				mov	ax,ax
2F94:7A6E  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:7A70  8A C4				mov	al,ah
2F94:7A72  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:7A74  58					pop	ax
2F94:7A75			loc_694:					;  xref 2F94:7A5F
2F94:7A75  BB 0002				mov	bx,2
2F94:7A78  E8 FB95				call	wait_interrupt		; (7610)
2F94:7A7B  E2 B9				loop	locloop_692		; Loop if cx > 0

2F94:7A7D  50					push	ax
2F94:7A7E  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:7A80  24 FC				and	al,0FCh
2F94:7A82  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:7A84  58					pop	ax
2F94:7A85  BB 07D0				mov	bx,7D0h
2F94:7A88  E8 FB85				call	wait_interrupt		; (7610)
2F94:7A8B  53					push	bx
2F94:7A8C  52					push	dx
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 220

2F94:7A8D  50					push	ax
2F94:7A8E  33 DB				xor	bx,bx			; Zero register
2F94:7A90  B6 0D				mov	dh,0Dh
2F94:7A92  B2 06				mov	dl,6
2F94:7A94  B4 02				mov	ah,2
2F94:7A96  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:7A98  58					pop	ax
2F94:7A99  5A					pop	dx
2F94:7A9A  5B					pop	bx
2F94:7A9B  BB 0001				mov	bx,1
2F94:7A9E .BE 776D				mov	si,offset data_308+0Ah	; (2F94:776D='Press any key to')
2F94:7AA1  B9 001C				mov	cx,1Ch
2F94:7AA4  BB 0001				mov	bx,1
2F94:7AA7  E8 A52E				call	puts2			; (1FD8)
2F94:7AAA  C7 06 0DB0 0000			mov	[keyboard_buf_rdptr],0	; (2F94:0DB0=0)
2F94:7AB0  C7 06 0DB2 0000			mov	[keyboard_buf_wrptr],0	; (2F94:0DB2=0)
2F94:7AB6			loc_695:					;  xref 2F94:7AC0
2F94:7AB6  C6 06 0153 01			mov	[data_42],1		; (2F94:0153=0)
2F94:7ABB  E8 96BA				call	check_stick		; (1178)
2F94:7ABE  A8 80				test	al,80h
2F94:7AC0  74 F4				jz	loc_695			; Jump if zero
2F94:7AC2  80 3E 0DB8 00			cmp	[ctrl_pressed],0	; (2F94:0DB8=0)
2F94:7AC7  74 13				je	loc_696			; Jump if equal
2F94:7AC9  3C 93				cmp	al,93h
2F94:7ACB  75 0F				jne	loc_696			; Jump if not equal
2F94:7ACD  B8 6710				mov	ax,6710h
2F94:7AD0  A3 3414				mov	[sprite_ptr],ax		; (2F94:3414=6710h)
2F94:7AD3  C7 06 3454 0000			mov	[player_dir],0		; (2F94:3454=0)
2F94:7AD9  B0 FF				mov	al,0FFh
2F94:7ADB  C3					retn
2F94:7ADC			loc_696:					;  xref 2F94:7AC7, 7ACB
2F94:7ADC  E9 00D0				jmp	loc_703			; (7BAF)

2F94:7ADF			locloop_697:					;  xref 2F94:7A33, 7B2E
2F94:7ADF  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:7AE4  74 14				jz	loc_698			; Jump if zero
2F94:7AE6  50					push	ax
2F94:7AE7  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:7AE9  0C 03				or	al,3
2F94:7AEB  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:7AED  B0 B6				mov	al,0B6h
2F94:7AEF  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:7AF1  8B C0				mov	ax,ax
2F94:7AF3  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:7AF5  8A C4				mov	al,ah
2F94:7AF7  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:7AF9  58					pop	ax
2F94:7AFA			loc_698:					;  xref 2F94:7AE4
2F94:7AFA  05 0023				add	ax,23h
2F94:7AFD  51					push	cx
2F94:7AFE  BB 0F00				mov	bx,0F00h
2F94:7B01  B9 0002				mov	cx,2
2F94:7B04  E8 FB4D				call	wait_timer_bx_cx	; (7654)
2F94:7B07  59					pop	cx
2F94:7B08  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:7B0D  74 14				jz	loc_699			; Jump if zero
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 221

2F94:7B0F  50					push	ax
2F94:7B10  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:7B12  0C 03				or	al,3
2F94:7B14  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:7B16  B0 B6				mov	al,0B6h
2F94:7B18  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:7B1A  8B C0				mov	ax,ax
2F94:7B1C  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:7B1E  8A C4				mov	al,ah
2F94:7B20  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:7B22  58					pop	ax
2F94:7B23			loc_699:					;  xref 2F94:7B0D
2F94:7B23  51					push	cx
2F94:7B24  BB 0FF0				mov	bx,0FF0h
2F94:7B27  B9 0001				mov	cx,1
2F94:7B2A  E8 FB27				call	wait_timer_bx_cx	; (7654)
2F94:7B2D  59					pop	cx
2F94:7B2E  E2 AF				loop	locloop_697		; Loop if cx > 0

2F94:7B30  50					push	ax
2F94:7B31  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:7B33  24 FC				and	al,0FCh
2F94:7B35  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:7B37  58					pop	ax
2F94:7B38  80 3E 012F 01			cmp	[data_33],1		; (2F94:012F=0)
2F94:7B3D  74 0E				je	loc_700			; Jump if equal
2F94:7B3F  51					push	cx
2F94:7B40  BB FFF0				mov	bx,0FFF0h
2F94:7B43  B9 000A				mov	cx,0Ah
2F94:7B46  E8 FB0B				call	wait_timer_bx_cx	; (7654)
2F94:7B49  59					pop	cx
2F94:7B4A  EB 0C				jmp	short loc_701		; (7B58)
2F94:7B4C  90					db	90h
2F94:7B4D			loc_700:					;  xref 2F94:7B3D
2F94:7B4D  51					push	cx
2F94:7B4E  BB FFF0				mov	bx,0FFF0h
2F94:7B51  B9 0004				mov	cx,4
2F94:7B54  E8 FAFD				call	wait_timer_bx_cx	; (7654)
2F94:7B57  59					pop	cx
2F94:7B58			loc_701:					;  xref 2F94:7B4A
2F94:7B58  53					push	bx
2F94:7B59  52					push	dx
2F94:7B5A  50					push	ax
2F94:7B5B  33 DB				xor	bx,bx			; Zero register
2F94:7B5D  B6 0D				mov	dh,0Dh
2F94:7B5F  B2 06				mov	dl,6
2F94:7B61  B4 02				mov	ah,2
2F94:7B63  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:7B65  58					pop	ax
2F94:7B66  5A					pop	dx
2F94:7B67  5B					pop	bx
2F94:7B68  BB 0001				mov	bx,1
2F94:7B6B .BE 7789				mov	si,offset 7789h		; (2F94:7789='Press a button t')
2F94:7B6E  B9 001D				mov	cx,1Dh
2F94:7B71  BB 0001				mov	bx,1
2F94:7B74  E8 A461				call	puts2			; (1FD8)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 222

2F94:7B77  C7 06 0DB0 0000			mov	[keyboard_buf_rdptr],0	; (2F94:0DB0=0)
2F94:7B7D  C7 06 0DB2 0000			mov	[keyboard_buf_wrptr],0	; (2F94:0DB2=0)
2F94:7B83			loc_702:					;  xref 2F94:7B9A, 7B9E
2F94:7B83  BA 0201				mov	dx,201h
2F94:7B86  EC					in	al,dx			; port 201h, start game 1-shots
2F94:7B87  F6 D0				not	al
2F94:7B89  24 F0				and	al,0F0h
2F94:7B8B  75 22				jnz	loc_703			; Jump if not zero
2F94:7B8D  C6 06 0153 01			mov	[data_42],1		; (2F94:0153=0)
2F94:7B92  E8 95E3				call	check_stick		; (1178)
2F94:7B95  80 3E 0DB8 01			cmp	[ctrl_pressed],1	; (2F94:0DB8=0)
2F94:7B9A  75 E7				jne	loc_702			; Jump if not equal
2F94:7B9C  3C 93				cmp	al,93h
2F94:7B9E  75 E3				jne	loc_702			; Jump if not equal
2F94:7BA0  C7 06 3414 6710			mov	[sprite_ptr],6710h	; (2F94:3414=6710h)
2F94:7BA6  C7 06 3454 0000			mov	[player_dir],0		; (2F94:3454=0)
2F94:7BAC  B0 FF				mov	al,0FFh
2F94:7BAE  C3					retn
2F94:7BAF			loc_703:					;  xref 2F94:79DF, 79E8, 7ADC, 7B8B
2F94:7BAF  E8 88A9				call	sub_1			; (045B)
2F94:7BB2  8A 16 0139				mov	dl,[player_y2]		; (2F94:0139=0)
2F94:7BB6  8B 0E 0137				mov	cx,[player_x2]		; (2F94:0137=0)
2F94:7BBA  89 0E 0134				mov	[player_x],cx		; (2F94:0134=0)
2F94:7BBE  88 16 0136				mov	[player_y],dl		; (2F94:0136=0)
2F94:7BC2  BB 3004				mov	bx,3004h
2F94:7BC5 .BF 6710				mov	di,offset spr_shamus_0	; (2F94:6710=0)
2F94:7BC8  E8 9885				call	draw_sprite_xor_v2_cxX_dxY	; (1450)
2F94:7BCB  C7 06 3414 6710			mov	[sprite_ptr],6710h	; (2F94:3414=6710h)
2F94:7BD1  C7 06 0DB0 0000			mov	[keyboard_buf_rdptr],0	; (2F94:0DB0=0)
2F94:7BD7  C7 06 0DB2 0000			mov	[keyboard_buf_wrptr],0	; (2F94:0DB2=0)
2F94:7BDD  C7 06 3454 0000			mov	[player_dir],0		; (2F94:3454=0)
2F94:7BE3  E8 9592				call	check_stick		; (1178)
2F94:7BE6  C6 06 0153 00			mov	[data_42],0		; (2F94:0153=0)
2F94:7BEB  C3					retn
				sub_26		endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          draw_sprite_xor_with_weird_table
				;
				;         Called from:   2F94:782E, 7847, 786C, 7885, 78AA, 78C3, 78E8
				;                             790D, 7923, 7945, 795B, 797D, 7993, 79B5
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:7BEC			draw_sprite_xor_with_weird_table proc	 near
2F94:7BEC  50					push	ax
2F94:7BED  51					push	cx
2F94:7BEE  52					push	dx
2F94:7BEF  56					push	si
2F94:7BF0  88 1E 7760				mov	[pointless_save_7760],bl	; (2F94:7760=0)
2F94:7BF4			loc_704:					;  xref 2F94:7C1D
2F94:7BF4 њ8B F2				mov	si,dx
2F94:7BF6  D1 E6				shl	si,1			; Shift w/zeros fill
2F94:7BF8  8B 84 68E0				mov	ax,[line_offsets_table][si]	; (2F94:68E0=0)
2F94:7BFC  03 C1				add	ax,cx
2F94:7BFE  8B F0				mov	si,ax
2F94:7C00  8A 1E 7760				mov	bl,[pointless_save_7760]	; (2F94:7760=0)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 223

2F94:7C04			loc_705:					;  xref 2F94:7C15
2F94:7C04  8A 05				mov	al,[di]
2F94:7C06  E8 001B				call	find_al_in_weird_table	; (7C24)
2F94:7C09  26: 32 04				xor	al,es:[si]
2F94:7C0C  26: 88 04				mov	es:[si],al
2F94:7C0F  47					inc	di
2F94:7C10  46					inc	si
2F94:7C11  FE CF				dec	bh
2F94:7C13  FE CB				dec	bl
2F94:7C15  75 ED				jnz	loc_705			; Jump if not zero
2F94:7C17  80 FF 00				cmp	bh,0
2F94:7C1A  7E 03				jle	loc_706			; Jump if < or =
2F94:7C1C  42					inc	dx
2F94:7C1D  EB D5				jmp	short loc_704		; (7BF4)
2F94:7C1F			loc_706:					;  xref 2F94:7C1A
2F94:7C1F  5E					pop	si
2F94:7C20  5A					pop	dx
2F94:7C21  59					pop	cx
2F94:7C22  58					pop	ax
2F94:7C23  C3					retn
				draw_sprite_xor_with_weird_table endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         find al in weird_table, return index + 16h
				;
				;         Called from:   2F94:7C06
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:7C24			find_al_in_weird_table	proc	near
2F94:7C24  51					push	cx
2F94:7C25  56					push	si
2F94:7C26 .BE 77A6				mov	si,offset weird_table	; (2F94:77A6=0)
2F94:7C29  B9 0016				mov	cx,16h

2F94:7C2C			locloop_707:					;  xref 2F94:7C31
2F94:7C2C  3A 04				cmp	al,[si]
2F94:7C2E  74 06				je	loc_708			; Jump if equal
2F94:7C30  46					inc	si
2F94:7C31  E2 F9				loop	locloop_707		; Loop if cx > 0

2F94:7C33  EB 04				jmp	short loc_709		; (7C39)
2F94:7C35  90					db	90h
2F94:7C36			loc_708:					;  xref 2F94:7C2E
2F94:7C36  8A 44 16				mov	al,[si+16h]
2F94:7C39			loc_709:					;  xref 2F94:7C33
2F94:7C39  5E					pop	si
2F94:7C3A  59					pop	cx
2F94:7C3B  C3					retn
				find_al_in_weird_table	endp


				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;         inits a lot of variables
				;
				;         Called from:   2F94:0323, 033B, 7A23
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 224


2F94:7C3C			init_game_variables	proc	near
2F94:7C3C  C7 06 557E 0000			mov	[data_269],0		; (2F94:557E=0)
2F94:7C42  C6 06 013B 00			mov	[room_num],0		; (2F94:013B=0)
2F94:7C47 .BE 6BF0				mov	si,offset initstate_a	; (2F94:6BF0=52h)
2F94:7C4A .BF 6B70				mov	di,offset gamestate_a	; (2F94:6B70=52h)
2F94:7C4D  B9 0080				mov	cx,80h

2F94:7C50			locloop_710:					;  xref 2F94:7C56
2F94:7C50  8A 04				mov	al,[si]
2F94:7C52  88 05				mov	[di],al
2F94:7C54  46					inc	si
2F94:7C55  47					inc	di
2F94:7C56  E2 F8				loop	locloop_710		; Loop if cx > 0

2F94:7C58 .BE 6AF0				mov	si,offset initstate_b	; (2F94:6AF0=49h)
2F94:7C5B .BF 6A70				mov	di,offset gamestate_b	; (2F94:6A70=49h)
2F94:7C5E  B9 0080				mov	cx,80h

2F94:7C61			locloop_711:					;  xref 2F94:7C67
2F94:7C61  8A 04				mov	al,[si]
2F94:7C63  88 05				mov	[di],al
2F94:7C65  46					inc	si
2F94:7C66  47					inc	di
2F94:7C67  E2 F8				loop	locloop_711		; Loop if cx > 0

2F94:7C69  F6 06 013A 01			test	[sound_enabled],1	; (2F94:013A=1)
2F94:7C6E  74 15				jz	reset_score		; Jump if zero
2F94:7C70  50					push	ax
2F94:7C71  E4 61				in	al,61h			; port 61h, 8255 port B, read
2F94:7C73  0C 03				or	al,3
2F94:7C75  E6 61				out	61h,al			; port 61h, 8255 B - spkr, etc
2F94:7C77  B0 B6				mov	al,0B6h
2F94:7C79  E6 43				out	43h,al			; port 43h, 8253 timer control
2F94:7C7B  B8 01FE				mov	ax,1FEh
2F94:7C7E  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:7C80  8A C4				mov	al,ah
2F94:7C82  E6 42				out	42h,al			; port 42h, 8253 timer 2 spkr
2F94:7C84  58					pop	ax
2F94:7C85			reset_score:					;  xref 2F94:7C6E
2F94:7C85 .BE 0B60				mov	si,offset score_bcd	; (2F94:0B60=0)
2F94:7C88  B9 0004				mov	cx,4

2F94:7C8B			locloop_712:					;  xref 2F94:7C92
2F94:7C8B  C7 04 0000				mov	word ptr [si],0
2F94:7C8F  83 C6 02				add	si,2
2F94:7C92  E2 F7				loop	locloop_712		; Loop if cx > 0

2F94:7C94 .BE 45B5				mov	si,offset found_keys	; (2F94:45B5=0FFh)
2F94:7C97  C6 04 FF				mov	byte ptr [si],0FFh
2F94:7C9A  46					inc	si
2F94:7C9B  C6 04 FF				mov	byte ptr [si],0FFh
2F94:7C9E  46					inc	si
2F94:7C9F  C6 04 FF				mov	byte ptr [si],0FFh
2F94:7CA2  C6 06 458E 04			mov	[lives_remaining],4	; (2F94:458E=4)
2F94:7CA7  C6 06 012E FF			mov	[goback_num],0FFh	; (2F94:012E=0FFh)
2F94:7CAC  C7 06 0134 0002			mov	[player_x],2		; (2F94:0134=0)
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 225

2F94:7CB2  C6 06 0136 5C			mov	[player_y],5Ch		; (2F94:0136=0) '\'
2F94:7CB7  C7 06 0137 0002			mov	[player_x2],2		; (2F94:0137=0)
2F94:7CBD  C6 06 0139 5C			mov	[player_y2],5Ch		; (2F94:0139=0) '\'
2F94:7CC2  E8 AFE8				call	update_systick_ax	; (2CAD)
2F94:7CC5  A8 01				test	al,1
2F94:7CC7  74 10				jz	loc_713			; Jump if zero
2F94:7CC9  BB 0002				mov	bx,2
2F94:7CCC  C6 87 6B70 01			mov	[gamestate_a][bx],1	; (2F94:6B70=52h)
2F94:7CD1  BB 0006				mov	bx,6
2F94:7CD4  C6 87 6B70 4B			mov	[gamestate_a][bx],4Bh	; (2F94:6B70=52h) 'K'
2F94:7CD9			loc_713:					;  xref 2F94:7CC7
2F94:7CD9  C7 06 3454 0000			mov	[player_dir],0		; (2F94:3454=0)
2F94:7CDF  C7 06 3414 6710			mov	[sprite_ptr],6710h	; (2F94:3414=6710h)
2F94:7CE5  C6 06 0DB8 00			mov	[ctrl_pressed],0	; (2F94:0DB8=0)
2F94:7CEA  C3					retn
				init_game_variables	endp

2F94:7CEB  00 00 00 00 00			db	0, 0, 0, 0, 0
2F94:7CF0  54 68 69 73 20 70	errmsg_cga_required	db	'This program requiresa color/gra'	;  xref 2F94:7D73
2F94:7CF6  72 6F 67 72 61 6D
2F94:7CFC  20 72 65 71 75 69
2F94:7D02  72 65 73 61 20 63
2F94:7D08  6F 6C 6F 72 2F 67
2F94:7D0E  72 61
2F94:7D10  70 68 69 63 73 20			db	'phics adapter.Please turn on the'
2F94:7D16  61 64 61 70 74 65
2F94:7D1C  72 2E 50 6C 65 61
2F94:7D22  73 65 20 74 75 72
2F94:7D28  6E 20 6F 6E 20 74
2F94:7D2E  68 65
2F94:7D30  20 63 6F 6C 6F 72			db	' color display.'
2F94:7D36  20 64 69 73 70 6C
2F94:7D3C  61 79 2E
2F94:7D3F  00					db	0

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                              SUBROUTINE
				;
				;         Called from:   2F94:0187
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:7D40			sub_27		proc	near
2F94:7D40  CD 11				int	11h			; Put equipment bits in ax
2F94:7D42  24 30				and	al,30h			; '0'
2F94:7D44  3C 30				cmp	al,30h			; '0'
2F94:7D46  74 01				je	loc_714			; Jump if equal
2F94:7D48  C3					retn
2F94:7D49			loc_714:					;  xref 2F94:7D46
2F94:7D49  B8 B000				mov	ax,0B000h
2F94:7D4C  8E C0				mov	es,ax
2F94:7D4E  B8 0007				mov	ax,7
2F94:7D51  CD 10				int	10h			; Video display   ah=functn 00h
										;  set display mode in al
2F94:7D53  B4 02				mov	ah,2
2F94:7D55  B6 0C				mov	dh,0Ch
2F94:7D57  B2 14				mov	dl,14h
2F94:7D59  B7 00				mov	bh,0
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 226

2F94:7D5B  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:7D5D  1E					push	ds
2F94:7D5E  B8 B800				mov	ax,0B800h
2F94:7D61  8E D8				mov	ds,ax
2F94:7D63  B8 55AA				mov	ax,55AAh
2F94:7D66 .BB 0000				mov	bx,data_319e		; (B800:0000=0DAh)
2F94:7D69  89 07				mov	[bx],ax
2F94:7D6B  8B 07				mov	ax,[bx]
2F94:7D6D  1F					pop	ds
2F94:7D6E  3D 55AA				cmp	ax,55AAh
2F94:7D71  74 1E				je	loc_716			; Jump if equal
2F94:7D73 .BE 7CF0				mov	si,offset errmsg_cga_required	; (2F94:7CF0='This program req')
2F94:7D76  B9 0015				mov	cx,15h
2F94:7D79  E8 AB71				call	puts			; (28ED)
2F94:7D7C  B4 02				mov	ah,2
2F94:7D7E  B6 0E				mov	dh,0Eh
2F94:7D80  B2 14				mov	dl,14h
2F94:7D82  B7 00				mov	bh,0
2F94:7D84  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:7D86 .BE 7D05				mov	si,offset 7D05h		; (2F94:7D05='a color/graphics')
2F94:7D89  B9 0019				mov	cx,19h
2F94:7D8C  E8 AB5E				call	puts			; (28ED)
2F94:7D8F			loc_715:					;  xref 2F94:7D8F
2F94:7D8F  EB FE				jmp	short loc_715		; (7D8F)
2F94:7D91			loc_716:					;  xref 2F94:7D71
2F94:7D91 .BE 7D1E				mov	si,offset 7D1Eh		; (2F94:7D1E='Please turn on t')
2F94:7D94  B9 0021				mov	cx,21h
2F94:7D97  E8 AB53				call	puts			; (28ED)
2F94:7D9A  B4 02				mov	ah,2
2F94:7D9C  B6 0E				mov	dh,0Eh
2F94:7D9E  B2 16				mov	dl,16h
2F94:7DA0  B7 00				mov	bh,0
2F94:7DA2  CD 10				int	10h			; Video display   ah=functn 02h
										;  set cursor location in dx
2F94:7DA4  1E					push	ds
2F94:7DA5  B8 0040				mov	ax,40h
2F94:7DA8  8E D8				mov	ds,ax
2F94:7DAA .BB 0010				mov	bx,data_4e		; (0040:0010=67h)
2F94:7DAD  8B 07				mov	ax,[bx]
2F94:7DAF  24 CF				and	al,0CFh
2F94:7DB1  0C 10				or	al,10h
2F94:7DB3  89 07				mov	[bx],ax
2F94:7DB5  B8 0004				mov	ax,4
2F94:7DB8  CD 10				int	10h			; Video display   ah=functn 00h
										;  set display mode in al
2F94:7DBA  1F					pop	ds
2F94:7DBB  C3					retn
				sub_27		endp

2F94:7DBC  00 00 00 00				db	0, 0, 0, 0

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                              SUBROUTINE
				;
				;         Called from:   2F94:016D
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 227

				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:7DC0			sub_28		proc	near
2F94:7DC0  06					push	es
2F94:7DC1  31 C0				xor	ax,ax			; Zero register
2F94:7DC3  8E C0				mov	es,ax
2F94:7DC5  26: A1 0020				mov	ax,es:[data_1e]		; (0000:0020=0FEA5h)
2F94:7DC9  A3 76F2				mov	[data_305],ax		; (2F94:76F2=0)
2F94:7DCC  26: A1 0022				mov	ax,es:[data_2e]		; (0000:0022=0F000h)
2F94:7DD0  A3 76F4				mov	[data_306],ax		; (2F94:76F4=0)
2F94:7DD3  07					pop	es
2F94:7DD4  C3					retn
				sub_28		endp

2F94:7DD5  01 CD 13 72 14			db	 01h,0CDh, 13h, 72h, 14h
2F94:7DDA			loc_717:					;  xref 2F94:7DEA
2F94:7DDA  B8 0201				mov	ax,201h
2F94:7DDD .BB 1570				mov	bx,offset bigtitI_1570	; (2F94:1570=0FFh)
2F94:7DE0  80 C1 0A				add	cl,0Ah
2F94:7DE3  CD 13				int	13h			; Disk  dl=drive a  ah=func 02h
										;  read sectors to memory es:bx
										;   al=#,ch=cyl,cl=sectr,dh=head
2F94:7DE5  72 07				jc	loc_718			; Jump if carry Set
2F94:7DE7  80 F9 50				cmp	cl,50h			; 'P'
2F94:7DEA  72 EE				jb	loc_717			; Jump if below
2F94:7DEC  07					pop	es
2F94:7DED  C3					retn
2F94:7DEE			loc_718:					;  xref 2F94:7DE5, 7DEE
2F94:7DEE  EB FE				jmp	short loc_718		; (7DEE)

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          set_cga_mode_7df0
				;
				;         Called from:   2F94:018F, 01A6, 0463, 25D4, 27BF
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:7DF0			set_cga_mode_7df0	proc	near
2F94:7DF0  50					push	ax
2F94:7DF1  53					push	bx
2F94:7DF2  51					push	cx
2F94:7DF3  52					push	dx
2F94:7DF4  1E					push	ds
2F94:7DF5  8A 2E 7E20				mov	ch,[data_314]		; (2F94:7E20=2Ch)
2F94:7DF9  B8 0004				mov	ax,4
2F94:7DFC  CD 10				int	10h			; Video display   ah=functn 00h
										;  set display mode in al
2F94:7DFE  88 2E 7E20				mov	[data_314],ch		; (2F94:7E20=2Ch)
2F94:7E02  BA 03D4				mov	dx,3D4h
2F94:7E05  B0 02				mov	al,2
2F94:7E07  EE					out	dx,al			; port 3D4h, CGA/EGA reg index
										;  al = 2, horz sync position
2F94:7E08  8A C5				mov	al,ch
2F94:7E0A  42					inc	dx
2F94:7E0B  EE					out	dx,al			; port 3D5h, CGA/EGA indxd data
2F94:7E0C  B4 0B				mov	ah,0Bh
2F94:7E0E  B3 00				mov	bl,0
2F94:7E10  B7 01				mov	bh,1
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 228

2F94:7E12  CD 10				int	10h			; Video display   ah=functn 0Bh
										;  set color from bx (CGA modes)
2F94:7E14  1F					pop	ds
2F94:7E15  5A					pop	dx
2F94:7E16  59					pop	cx
2F94:7E17  5B					pop	bx
2F94:7E18  58					pop	ax
2F94:7E19  C3					retn
				set_cga_mode_7df0	endp

2F94:7E1A  00 00 00 00 00 00			db	0, 0, 0, 0, 0, 0
2F94:7E20  2C			data_314	db	2Ch			;  xref 2F94:7DF5, 7DFE, 7E39, 7E40
										;            7E4A, 7E51, 7E5C
2F94:7E21  00			data_315	db	0			;  xref 2F94:7E22, 7E2C, 7E31, 7E62

				;пппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппппп
				;                          check_keys_and_vsync
				;
				;         Called from:   2F94:253C, 25CD, 2633
				;мммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм

2F94:7E22			check_keys_and_vsync	proc	near
2F94:7E22  A2 7E21				mov	[data_315],al		; (2F94:7E21=0)
2F94:7E25  F6 06 0DB8 01			test	[ctrl_pressed],1	; (2F94:0DB8=0)
2F94:7E2A  74 05				jz	loc_719			; Jump if zero
2F94:7E2C  A0 7E21				mov	al,[data_315]		; (2F94:7E21=0)
2F94:7E2F  EB 04				jmp	short loc_720		; (7E35)
2F94:7E31			loc_719:					;  xref 2F94:7E2A
2F94:7E31  A0 7E21				mov	al,[data_315]		; (2F94:7E21=0)
2F94:7E34  C3					retn
2F94:7E35			loc_720:					;  xref 2F94:7E2F
2F94:7E35  3C 4D				cmp	al,4Dh			; 'M'
2F94:7E37  75 0D				jne	loc_721			; Jump if not equal
2F94:7E39  80 3E 7E20 2A			cmp	[data_314],2Ah		; (2F94:7E20=2Ch) '*'
2F94:7E3E  7C 22				jl	loc_723			; Jump if <
2F94:7E40  FE 0E 7E20				dec	[data_314]		; (2F94:7E20=2Ch)
2F94:7E44  EB 0F				jmp	short loc_722		; (7E55)
2F94:7E46			loc_721:					;  xref 2F94:7E37
2F94:7E46  3C 4B				cmp	al,4Bh			; 'K'
2F94:7E48  75 18				jne	loc_723			; Jump if not equal
2F94:7E4A  80 3E 7E20 2D			cmp	[data_314],2Dh		; (2F94:7E20=2Ch) '-'
2F94:7E4F  7F 11				jg	loc_723			; Jump if >
2F94:7E51  FE 06 7E20				inc	[data_314]		; (2F94:7E20=2Ch)
2F94:7E55			loc_722:					;  xref 2F94:7E44
2F94:7E55  B0 02				mov	al,2
2F94:7E57  52					push	dx
2F94:7E58  BA 03D4				mov	dx,3D4h
2F94:7E5B  EE					out	dx,al			; port 3D4h, CGA/EGA reg index
										;  al = 2, horz sync position
2F94:7E5C  A0 7E20				mov	al,[data_314]		; (2F94:7E20=2Ch)
2F94:7E5F  42					inc	dx
2F94:7E60  EE					out	dx,al			; port 3D5h, CGA/EGA indxd data
2F94:7E61  5A					pop	dx
2F94:7E62			loc_723:					;  xref 2F94:7E3E, 7E48, 7E4F
2F94:7E62  A0 7E21				mov	al,[data_315]		; (2F94:7E21=0)
2F94:7E65  C3					retn
				check_keys_and_vsync	endp
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 229


2F94:7E66  000A[00]				db	10 dup (0)
2F94:7E70  0F			shiv_SE		db	0Fh			;  xref 2F94:4351, 4384
2F94:7E71  00 0F C0 03 F3 00			db	 00h, 0Fh,0C0h, 03h,0F3h, 00h
2F94:7E77  FC 00 3C 00 C3			db	0FCh, 00h, 3Ch, 00h,0C3h
2F94:7E7C  00			shiv_N		db	0			;  xref 2F94:438D, 43B6
2F94:7E7D  00 03 C0 03 C0 0F			db	 00h, 03h,0C0h, 03h,0C0h, 0Fh
2F94:7E83  F0 3F FC 03 C0 03			db	0F0h, 3Fh,0FCh, 03h,0C0h, 03h
2F94:7E89  C0					db	0C0h
2F94:7E8A  00			shiv_SW		db	0			;  xref 2F94:43BF, 43F2
2F94:7E8B  F0 03 F0 CF C0 3F			db	0F0h, 03h,0F0h,0CFh,0C0h, 3Fh
2F94:7E91  00 3C 00 C3 00			db	 00h, 3Ch, 00h,0C3h, 00h
2F94:7E96  00			shiv_E		db	0			;  xref 2F94:43FB, 4420
2F94:7E97  30 0F F0 FF FF 0F			db	 30h, 0Fh,0F0h,0FFh,0FFh, 0Fh
2F94:7E9D  F0 00				db	0F0h, 00h
2F94:7E9F  30					db	30h
2F94:7EA0  0C			shiv_W		db	0Ch			;  xref 2F94:4429, 444E
2F94:7EA1  00 0F F0 FF FF 0F			db	 00h, 0Fh,0F0h,0FFh,0FFh, 0Fh
2F94:7EA7  F0 0C 00				db	0F0h, 0Ch, 00h
2F94:7EAA  00			shiv_NE		db	0			;  xref 2F94:4457, 448A
2F94:7EAB  C3 00 3C 00 FC 03			db	0C3h, 00h, 3Ch, 00h,0FCh, 03h
2F94:7EB1  F3 0F C0 0F 00			db	0F3h, 0Fh,0C0h, 0Fh, 00h
2F94:7EB6  03			shiv_S		db	3			;  xref 2F94:4493, 44BC
2F94:7EB7  C0 03 C0 3F FC 0F			db	0C0h, 03h,0C0h, 3Fh,0FCh, 0Fh
2F94:7EBD  F0 03 C0 03 C0 00			db	0F0h, 03h,0C0h, 03h,0C0h, 00h
2F94:7EC3  00					db	 00h
2F94:7EC4  C3			shiv_NW		db	0C3h			;  xref 2F94:44C5, 44F8
2F94:7EC5  00 3C 00 3F 00 CF			db	 00h, 3Ch, 00h, 3Fh, 00h,0CFh
2F94:7ECB  C0 03 F0 00 F0			db	0C0h, 03h,0F0h, 00h,0F0h
2F94:7ED0  0030[00]				db	48 dup (0)
2F94:7F00  9F 52 C2 24 EC 1F			db	 9Fh, 52h,0C2h, 24h,0ECh, 1Fh
2F94:7F06  7B 82 B0 CC D5 6B			db	 7Bh, 82h,0B0h,0CCh,0D5h, 6Bh
2F94:7F0C  67 B8 BE D1 52 E5			db	 67h,0B8h,0BEh,0D1h, 52h,0E5h
2F94:7F12  24 FF 1F 72 82 34			db	 24h,0FFh, 1Fh, 72h, 82h, 34h
2F94:7F18  CC 17 6B 86 B8 CE			db	0CCh, 17h, 6Bh, 86h,0B8h,0CEh
2F94:7F1E  D1 6A E5 B8 FF 51			db	0D1h, 6Ah,0E5h,0B8h,0FFh, 51h
2F94:7F24  72 25 34 1F 17 82			db	 72h, 25h, 34h, 1Fh, 17h, 82h
2F94:7F2A  86 CC CE EB 6A F8			db	 86h,0CCh,0CEh,0EBh, 6Ah,0F8h
2F94:7F30  B8 F1 51 75 25 B7			db	0B8h,0F1h, 51h, 75h, 25h,0B7h
2F94:7F36  1F 56 82 26 CC 1E			db	 1Fh, 56h, 82h, 26h,0CCh, 1Eh
2F94:7F3C  EB 82 F8 CC F1 6B			db	0EBh, 82h,0F8h,0CCh,0F1h, 6Bh
2F94:7F42  75 B8 B7 51 56 25			db	 75h,0B8h,0B7h, 51h, 56h, 25h
2F94:7F48  26 1F 1E 02 82 0C			db	 26h, 1Fh, 1Eh, 02h, 82h, 0Ch
2F94:7F4E  CC 0B 6B 88 B8 C9			db	0CCh, 0Bh, 6Bh, 88h,0B8h,0C9h
2F94:7F54  51 69 25 B9 1F 51			db	 51h, 69h, 25h,0B9h, 1Fh, 51h
2F94:7F5A  02 25 0C 1F 0B 82			db	 02h, 25h, 0Ch, 1Fh, 0Bh, 82h
2F94:7F60  88 CC C9 6B 69 B8			db	 88h,0CCh,0C9h, 6Bh, 69h,0B8h
2F94:7F66  B9 51 51 A5				db	0B9h, 51h, 51h,0A5h
2F94:7F6A			loc_724:
2F94:7F6A  25 1F5F				and	ax,1F5Fh
2F94:7F6D  A2 DC82				mov	byte ptr ds:[0DC82h],al	; (2F94:DC82=0)
2F94:7F70  CC					int	3			; Debug breakpoint
2F94:7F71  E3 6B		;*		jcxz	loc_729			;*Jump if cx=0
2F94:7F71  E3 6B				db	0E3h, 6Bh
2F94:7F73  7C B8				jl	$-46h			; Jump if <
2F94:7F75  33 51 94				xor	dx,[bx+di-6Ch]
2F94:7F78  A5					movsw				; Mov [si] to es:[di]
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 230

2F94:7F79  47					inc	di
2F94:7F7A  5F					pop	di
2F94:7F7B  AE					scasb				; Scan es:[di] for al
2F94:7F7C  A2 DCDA				mov	byte ptr ds:[0DCDAh],al	; (2F94:DCDA=0)
2F94:7F7F  E0 E3				loopnz	$-1Bh			; Loop if zf=0, cx>0

2F94:7F81  7D 7C				jge	$+7Eh			; Jump if > or =
2F94:7F83  33 33				xor	si,[bp+di]
2F94:7F85  94					xchg	sp,ax
2F94:7F86  94					xchg	sp,ax
2F94:7F87  C7 47 6E 3AAE			mov	word ptr [bx+6Eh],3AAEh
2F94:7F8C  DA 10				db	0DAh, 10h
2F94:7F8E			loc_725:
2F94:7F8E  E0 05		;*		loopnz	locloop_726		;*Loop if zf=0, cx>0

2F94:7F8E  E0 05				db	0E0h, 05h
2F94:7F90  7D 8F				jge	$-6Fh			; Jump if > or =
2F94:7F92  33 4A 94				xor	cx,[bp+si-6Ch]

2F94:7F95			locloop_726:
2F94:7F95  28 C7				sub	bh,al
2F94:7F97  99					cwd				; Word to double word
2F94:7F98  6E					outsb				; Out [si] to port dx
2F94:7F99  C1 3A ED				sar	word ptr [bp+si],0EDh	; Shift w/sign fill
2F94:7F9C			loc_727:
2F94:7F9C  10 FB				adc	bl,bh
2F94:7F9E  05 8F70				add	ax,8F70h
2F94:7FA1  B5 4A				mov	ch,4Ah			; 'J'
2F94:7FA3  D7					xlat				; al=[al+[bx]] table
2F94:7FA4  28 E6				sub	dh,ah
2F94:7FA6  99					cwd				; Word to double word
2F94:7FA7  7E C1				jle	loc_724			; Jump if < or =
2F94:7FA9  B2 ED				mov	dl,0EDh
2F94:7FAB  54					push	sp
2F94:7FAC  FB					sti				; Enable interrupts
2F94:7FAD  A7					cmpsw				; Cmp [si] to es:[di]
2F94:7FAE  70 DE				jo	loc_725			; Jump if overflow=1
2F94:7FB0  B5 62				mov	ch,62h			; 'b'
2F94:7FB2  D7					xlat				; al=[al+[bx]] table
2F94:7FB3  BC D3E6				mov	sp,0D3E6h
2F94:7FB6  7E E4				jle	loc_727			; Jump if < or =
2F94:7FB8  B2 FF				mov	dl,0FFh
2F94:7FBA  54					push	sp
2F94:7FBB  F2/ A7				repne	cmpsw			; Rep zf=0+cx >0 Cmp [si] to es:[di]
2F94:7FBD  74 DE		;*		jz	loc_728			;*Jump if zero
2F94:7FBD  74 DE				db	 74h,0DEh
2F94:7FBF  37					aaa				; Ascii adjust
2F94:7FC0  62 16 06BC				bound	dx,dword ptr ds:[6BCh]	; (2F94:06BC=63C5h)
2F94:7FC4  D3 8E CAE4				ror	word ptr [bp-351Ch],cl	; Rotate
2F94:7FC8  FF 68 F2				jmp	dword ptr [bx+si-0Eh]	;*
							                        ;* No entry point to code
2F94:7FCB  39 74 11				cmp	[si+11h],si
2F94:7FCE  37					aaa				; Ascii adjust
2F94:7FCF  85 16 06CF				test	dx,word ptr ds:[6CFh]	; (2F94:06CF=8Dh)
2F94:7FD3  EA F1CA:F88E		;*		jmp	far ptr loc_734		;*(F1CA:F88E)
2F94:7FD3  EA					db	0EAh
2F94:7FD4  F88E F1CA				dw	0F88Eh, 0F1CAh
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 231

							                        ;* No entry point to code
2F94:7FD8  68 39F5				push	39F5h
2F94:7FDB  77 11		;*		ja	loc_730			;*Jump if above
2F94:7FDB  77 11				db	 77h, 11h
2F94:7FDD  B6 85				mov	dh,85h
2F94:7FDF  56					push	si
2F94:7FE0  CF					iret				; Interrupt return
							                        ;* No entry point to code
2F94:7FE1  A6					cmpsb				; Cmp [si] to es:[di]
2F94:7FE2  EA F1E2:F8DE		;*		jmp	far ptr loc_735		;*(F1E2:F8DE)
2F94:7FE2  EA					db	0EAh
2F94:7FE3  F8DE F1E2				dw	0F8DEh, 0F1E2h
							                        ;* No entry point to code
2F94:7FE7  7C F5		;*		jl	loc_729			;*Jump if <
2F94:7FE7  7C F5				db	 7Ch,0F5h
2F94:7FE9  B3 77				mov	bl,77h			; 'w'
2F94:7FEB  54					push	sp
2F94:7FEC  B6 27				mov	dh,27h			; '''
2F94:7FEE			loc_730:
2F94:7FEE  56					push	si
2F94:7FEF  1E					push	ds
2F94:7FF0  A6					cmpsb				; Cmp [si] to es:[di]
2F94:7FF1  02 DE				add	bl,dh
2F94:7FF3  0C E2				or	al,0E2h
2F94:7FF5  0B 7C 08				or	di,[si+8]
2F94:7FF8  B3 89				mov	bl,89h
2F94:7FFA  54					push	sp
2F94:7FFB  C9					leave				; Procedure exit
2F94:7FFC  27					daa				; Decimal adjust
2F94:7FFD  69 1E 0239 0C11			imul	bx,word ptr ds:[239h],0C11h	; (2F94:0239=0DDE8h) reg = data * valu
2F94:8003  05 8F0B				add	ax,8F0Bh
2F94:8006  08 CA				or	dl,cl
2F94:8008  89 68 C9				mov	[bx+si-37h],bp
2F94:800B  B9 5169				mov	cx,5169h
2F94:800E  39 A5 5F11				cmp	word ptr ds:[5F11h][di],sp	; (2F94:5F11=0C88Ah)
2F94:8012  05 8FA2				add	ax,8FA2h
2F94:8015  5C					pop	sp
2F94:8016  CA 6823				retf	6823h
							                        ;* No entry point to code
2F94:8019  1C B9				sbb	al,0B9h
2F94:801B  83 51 4C A5				adc	word ptr [bx+di+4Ch],0FFA5h
2F94:801F  AB					stosw				; Store ax to es:[di]
2F94:8020  5F					pop	di
2F94:8021  58					pop	ax
2F94:8022  A2 5C21				mov	byte ptr ds:[5C21h],al	; (2F94:5C21=0DBh)
2F94:8025  1D 8323				sbb	ax,8323h
2F94:8028  1C CC				sbb	al,0CCh
2F94:802A  83 6B 4C 38				sub	word ptr [bp+di+4Ch],38h
2F94:802E  AB					stosw				; Store ax to es:[di]
2F94:802F  91					xchg	cx,ax
2F94:8030  58					pop	ax
2F94:8031  C5 21				lds	sp,dword ptr [bx+di]	; Load seg:offset ptr
2F94:8033  6F					outsw				; Out [si] to port dx
2F94:8034  1D 83BA				sbb	ax,83BAh
2F94:8037  50					push	ax
2F94:8038  CC					int	3			; Debug breakpoint
2F94:8039  25 9F6B				and	ax,9F6Bh
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 232

2F94:803C  38 C2				cmp	dl,al
2F94:803E  91					xchg	cx,ax
2F94:803F  6C					insb				; Port dx to es:[di]
2F94:8040  C5 BB 506F				lds	di,dword ptr [bp+di+506Fh]	; Load seg:offset ptr
2F94:8044  BA 5025				mov	dx,5025h
2F94:8047  1F					pop	ds
2F94:8048  25 9F82				and	ax,9F82h
2F94:804B  4C					dec	sp
2F94:804C  C2 6C2B				retn	6C2Bh
							                        ;* No entry point to code
2F94:804F  18 BB 5081				sbb	[bp+di+5081h],bh
2F94:8053  CD 25				int	25h			; Absolute disk read, drive al
										;  if disk under 32MB, dx=start
										;    cx=#sectors, ds:bx=buffer
										;  else  cx=-1, ds:dx=parm block
2F94:8055  6B 1F B8				imul	bx,word ptr [bx],0FFB8h	; reg = data * value
2F94:8058  82 D1 4C				adc	cl,4Ch			; 'L'
2F94:805B  E5 2B				in	ax,2Bh			; port 2Bh ??i/o non-standard
2F94:805D  7F 18		;*		jg	loc_731			;*Jump if >
2F94:805D  7F 18				db	 7Fh, 18h
2F94:805F  32 81 CD94				xor	al,byte ptr ds:[0CD94h][bx+di]	; (2F94:CD94=0)
2F94:8063  47					inc	di
2F94:8064  6B AE DAB8 D1			imul	bp,word ptr [bp-2548h],0FFD1h	; reg = data * value
2F94:8069  60					pusha				; Save all regs
2F94:806A  E5 BD				in	ax,0BDh			; port 0BDh ??i/o non-standard
2F94:806C  7F 53				jg	loc_732			; Jump if >
2F94:806E  32 24				xor	ah,[si]
2F94:8070  94					xchg	sp,ax
2F94:8071  1F					pop	ds
2F94:8072  47					inc	di
2F94:8073  82 AE DACC EB			sub	byte ptr [bp-2534h],0EBh
2F94:8078  60					pusha				; Save all regs
2F94:8079  F8					clc				; Clear carry flag
2F94:807A .BD 5371				mov	bp,5371h		; (0002:5371=0)
2F94:807D  B5 24				mov	ch,24h			; '$'
2F94:807F  D7					xlat				; al=[al+[bx]] table
2F94:8080  1F					pop	ds
2F94:8081  66 82 3E CC 12 EB			db	 66h, 82h, 3Eh,0CCh, 12h,0EBh
2F94:8087  84					db	 84h
2F94:8088  F8			data_318	db	0F8h			; Data table (indexed access)
2F94:8089  CF 71 6A B5 B8 D7			db	0CFh, 71h, 6Ah,0B5h,0B8h,0D7h
2F94:808F  51 66 25 3E 1F 12			db	 51h, 66h, 25h, 3Eh, 1Fh, 12h
2F94:8095  02 84 0C CF 8B 6A			db	 02h, 84h, 0Ch,0CFh, 8Bh, 6Ah
2F94:809B  C8 B8 E9 51 79 25			db	0C8h,0B8h,0E9h, 51h, 79h, 25h
2F94:80A1  B1 1F 55 02 27 0C			db	0B1h, 1Fh, 55h, 02h, 27h, 0Ch
2F94:80A7  1E 8B 82 C8 CC E9			db	 1Eh, 8Bh, 82h,0C8h,0CCh,0E9h
2F94:80AD  6B 79 B8 B1 51 55			db	 6Bh, 79h,0B8h,0B1h, 51h, 55h
2F94:80B3  A5 27 5F 1E 22 82			db	0A5h, 27h, 5Fh, 1Eh, 22h, 82h
2F94:80B9  1C CC 03 6B 8C B8			db	 1Ch,0CCh, 03h, 6Bh, 8Ch,0B8h
2F94:80BF  CB					db	0CBh
2F94:80C0  51					db	51h
2F94:80C1			loc_732:
2F94:80C1  68 B9A5				push	0B9A5h
2F94:80C4  5F					pop	di
2F94:80C5  51					push	cx
2F94:80C6  22 25				and	ah,[di]
2F94:80C8  1C 1F				sbb	al,1Fh
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 233

2F94:80CA  03 82 CC8C				add	ax,[bp+si-3374h]
2F94:80CE  CB					retf
							                        ;* No entry point to code
2F94:80CF  6B 68 38 B9				imul	bp,word ptr [bx+si+38h],0FFB9h	; reg = data * value
2F94:80D3  91					xchg	cx,ax
2F94:80D4  51					push	cx
2F94:80D5  45					inc	bp
2F94:80D6  25 1FAF				and	ax,1FAFh
2F94:80D9  5A					pop	dx
2F94:80DA  82 20 CC				and	byte ptr [bx+si],0CCh
2F94:80DD  1D 836B				sbb	ax,836Bh
2F94:80E0  38 CC				cmp	ah,cl
2F94:80E2  91					xchg	cx,ax
2F94:80E3  6B 45 B8 AF				imul	ax,word ptr [di-48h],0FFAFh	; reg = data * value
2F94:80E7  51					push	cx
2F94:80E8  5A					pop	dx
2F94:80E9  25 1F20				and	ax,1F20h
2F94:80EC  1D 8382				sbb	ax,8382h
2F94:80EF  4C					dec	sp
2F94:80F0  CC					int	3			; Debug breakpoint
2F94:80F1  2B 6B 98				sub	bp,[bp+di-68h]
2F94:80F4  B8 51C1				mov	ax,51C1h
2F94:80F7  6D					insw				; Port dx to es:[di]
2F94:80F8  25 1FBB				and	ax,1FBBh
2F94:80FB  50					push	ax
2F94:80FC  82 25 4C				and	byte ptr [di],4Ch	; 'L'
2F94:80FF  1F					pop	ds

				seg_a		ends



						end	start
           shamus.lst				Sourcer	v8.01  20-Dec-2023  2:31 am   Page 234


				ББББББББББББББББББББ CROSS REFERENCE - KEY ENTRY POINTS БББББББББББББББББББ

				    seg:off    type	   label
				   ---- ----   ----   --------------------------------
				   2F94:0100   far    start
				   2F94:0169   extn   real_start

				 ББББББББББББББББББ Interrupt Usage Synopsis ББББББББББББББББББ

				        Interrupt 10h : Video display	ah=functn xxh
				        Interrupt 10h :  ah=00h	 set display mode in al
				        Interrupt 10h :  ah=02h	 set cursor location in dx
				        Interrupt 10h :  ah=0Bh	 set color from bx (CGA modes)
				        Interrupt 10h :  ah=0Eh	 write char al, teletype mode
				        Interrupt 11h : Put equipment bits in ax
				        Interrupt 13h : Disk  dl=drive #  ah=func xxh
				        Interrupt 13h :  ah=02h	 read sectors to memory es:bx
				        Interrupt 1Ah : Real time clock	  ah=func xxh
				        Interrupt 1Ah :  ah=00h	 get system timer count cx,dx
				        Interrupt 25h : Absolute disk read, drive al
				        Interrupt 20h : DOS program terminate

				 ББББББББББББББББББ I/O Port Usage Synopsis  ББББББББББББББББББ

				        Port 20h   : 8259-1 int	command
				        Port 20h   :  al = 20h,	end of interrupt
				        Port 21h   : 8259-1 int	comands
				        Port 40h   : 8253 timer	0 clock
				        Port 42h   : 8253 timer	2 spkr
				        Port 43h   : 8253 timer	control
				        Port 43h   :  al = 0, latch timer0 count
				        Port 60h   : keybd scan	or sw1
				        Port 61h   : 8255 port B, read
				        Port 61h   : 8255 B - spkr, etc
				        Port 61h   :  al = 0, speaker off
				        Port 61h   :  al = 4Ch,	enable keyboard
				        Port 61h   :  al = 4Fh,	speaker	on
				        Port 201h  : start game	1-shots
				        Port 3D4h  : CGA/EGA reg index
				        Port 3D4h  :  al = 2, horz sync	position
				        Port 3D5h  : CGA/EGA indxd data
				        Port 3F2h  : dsk0 contrl output
				            2 Ocurrences of non-standard I/O ports used (search for ??).

